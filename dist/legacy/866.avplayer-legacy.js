(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[866],{70509:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(81570),n=r(78716),a=r(134),s=(0,i.A)((function e(){(0,n.A)(this,e),(0,a.A)(this,"onFlush",void 0)}))},97801:(e,t,r)=>{"use strict";r.d(t,{A:()=>N});var i=r(88435),n=r.n(i),a=r(25182),s=r(78716),o=r(81570),u=r(77193),h=r(25767),c=r(43070),l=r(31060),d=r(134),f=r(36443),A=r.n(f),p=r(70509),T=r(13258),E=r(51678),v=r(13724),y=r(4624);function m(e,t,r){return t=(0,h.A)(t),(0,u.A)(e,g()?n()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function g(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}var X="src/avnetwork/bsp/aes/AESDecryptPipe.ts",S=16,b=!0,I=new Uint8Array(S).fill(S),N=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;return(0,s.A)(this,t),e=m(this,t),(0,d.A)((0,c.A)(e),"buffer",void 0),(0,d.A)((0,c.A)(e),"aesSoftDecryptor",void 0),(0,d.A)((0,c.A)(e),"aesWebDecryptor",void 0),(0,d.A)((0,c.A)(e),"aesTargetDecryptor",void 0),(0,d.A)((0,c.A)(e),"pointer",void 0),(0,d.A)((0,c.A)(e),"endPointer",void 0),(0,d.A)((0,c.A)(e),"size",void 0),(0,d.A)((0,c.A)(e),"ended",void 0),(0,d.A)((0,c.A)(e),"iv",void 0),(0,d.A)((0,c.A)(e),"key",void 0),e.size=r,e.pointer=0,e.endPointer=0,e.ended=!1,e.buffer=new Uint8Array(r),e.aesSoftDecryptor=new T.A,E.A.isSupport()&&b&&(e.aesWebDecryptor=new E.A),e.aesTargetDecryptor=e.aesWebDecryptor||e.aesSoftDecryptor,e}var r,i,n,u,h;return(0,l.A)(t,e),(0,o.A)(t,[{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"expandKey",value:(h=(0,a.A)(A().mark((function e(t,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.key=t,this.iv=r,!this.aesWebDecryptor){e.next=5;break}return e.next=5,this.aesWebDecryptor.expandKey(t);case 5:this.aesSoftDecryptor.expandKey(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"flush_",value:(u=(0,a.A)(A().mark((function e(t){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.onFlush(t);case 3:if(-1048575===(r=e.sent)){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,new v.A(0);case 8:e.next=0;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"flush",value:(n=(0,a.A)(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.size-this.remainingLength()<=0)){e.next=2;break}return e.abrupt("return");case 2:return this.pointer<this.endPointer?this.pointer&&(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer):this.endPointer=0,this.pointer=0,e.next=6,this.flush_(this.buffer.subarray(this.endPointer));case 6:if(!((t=e.sent)<0)){e.next=14;break}if(-1048576!==t){e.next=13;break}return this.ended=!0,e.abrupt("return");case 13:y.h2("AESPipe error, flush failed, ret: ".concat(t),X,120);case 14:this.endPointer+=t;case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removePadding",value:function(e){var t=e.length,r=t&&new DataView(e.buffer).getUint8(t-1);return r?e.subarray(0,t-r):e}},{key:"decrypt",value:(i=(0,a.A)(A().mark((function e(t){var r,i,n,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=0,this.aesTargetDecryptor!==this.aesWebDecryptor||this.ended){e.next=10;break}return r=this.buffer.subarray(this.pointer+t,this.pointer+t+S).slice(),e.t0=this.buffer,e.next=6,this.aesWebDecryptor.encryptPadding(I,this.buffer.subarray(this.pointer+t-S,this.pointer+t));case 6:e.t1=e.sent.subarray(0,S),e.t2=this.pointer+t,e.t0.set.call(e.t0,e.t1,e.t2),i=S;case 10:return e.prev=10,n=this.buffer.subarray(this.pointer,this.pointer+t+i),e.next=14,this.aesTargetDecryptor.decrypt(n,this.iv);case 14:return a=e.sent,this.iv=n.slice(n.length-S-i,n.length-i).buffer,r&&this.buffer.set(r,this.pointer+t),this.pointer+=t,e.abrupt("return",new Uint8Array(a));case 21:if(e.prev=21,e.t3=e.catch(10),!(this.aesTargetDecryptor=this.aesWebDecryptor)){e.next=31;break}return y.R8("web aes decrypt failed, try to use soft decryptor",X,167),r&&this.buffer.set(r,this.pointer+t),this.aesTargetDecryptor=this.aesSoftDecryptor,b=!1,e.abrupt("return",this.decrypt(t));case 31:y.h2("aes decrypt failed",X,177);case 32:case"end":return e.stop()}}),e,this,[[10,21]])}))),function(e){return i.apply(this,arguments)})},{key:"read",value:(r=(0,a.A)(A().mark((function e(t){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ended||!(this.remainingLength()<48)){e.next=5;break}return e.next=3,this.flush();case 3:e.next=0;break;case 5:if(0!==this.remainingLength()){e.next=7;break}return e.abrupt("return",-1048576);case 7:return r=Math.min(Math.floor((this.remainingLength()-(this.ended?0:32))/S)*S,t.length),e.next=10,this.decrypt(r);case 10:return i=e.sent,this.ended&&this.aesTargetDecryptor===this.aesSoftDecryptor&&(i=this.removePadding(i)),t.set(i),e.abrupt("return",i.length);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(p.A)},15433:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var i=r(88435),n=r.n(i),a=r(25182),s=r(78716),o=r(81570),u=r(77193),h=r(25767),c=r(43070),l=r(31060),d=r(134),f=r(80662),A=r.n(f),p=r(36443),T=r.n(p),E=r(13724),v=r(82800),y=r(95335),m=r(8507),g=r(48182),X=r(77580),S=r(86932),b=r(4624),I=r(97801);function N(e,t,r){return t=(0,h.A)(t),(0,u.A)(e,R()?n()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function R(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}var P="src/avnetwork/ioLoader/HlsIOLoader.ts",D=function(e){function t(){var e;(0,s.A)(this,t);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return e=N(this,t,[].concat(i)),(0,d.A)((0,c.A)(e),"info",void 0),(0,d.A)((0,c.A)(e),"range",void 0),(0,d.A)((0,c.A)(e),"masterPlaylist",void 0),(0,d.A)((0,c.A)(e),"mediaPlayList",void 0),(0,d.A)((0,c.A)(e),"mediaPlayListIndex",void 0),(0,d.A)((0,c.A)(e),"fetchedMap",void 0),(0,d.A)((0,c.A)(e),"fetchedHistoryList",void 0),(0,d.A)((0,c.A)(e),"mediaListUrl",void 0),(0,d.A)((0,c.A)(e),"segmentIndex",void 0),(0,d.A)((0,c.A)(e),"currentUri",void 0),(0,d.A)((0,c.A)(e),"loader",void 0),(0,d.A)((0,c.A)(e),"minBuffer",void 0),(0,d.A)((0,c.A)(e),"keyMap",void 0),(0,d.A)((0,c.A)(e),"currentIV",void 0),(0,d.A)((0,c.A)(e),"currentKey",void 0),(0,d.A)((0,c.A)(e),"aesDecryptPipe",void 0),e}var r,i,n,u,h,f,p,v,R;return(0,l.A)(t,e),(0,o.A)(t,[{key:"fetchMasterPlayList",value:(R=(0,a.A)(T().mark((function e(){var t,r,i,n,a,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},this.info.headers&&y.__(this.info.headers,(function(e,r){t.headers[r]=e})),this.info.withCredentials&&(t.credentials="include"),this.info.referrerPolicy&&(t.referrerPolicy=this.info.referrerPolicy),e.prev=4,e.next=7,fetch(this.info.url,t);case 7:return r=e.sent,e.next=10,r.text();case 10:if(i=e.sent,!(n=(0,g.A)(i)).isMasterPlaylist){e.next=16;break}this.masterPlaylist=n,e.next=27;break;case 16:if(this.mediaPlayList=n,!this.options.isLive||this.mediaPlayList.segments&&!(this.mediaPlayList.segments.length<2)){e.next=24;break}return s=5,null!==(a=this.mediaPlayList.segments)&&void 0!==a&&a.length&&(s=this.mediaPlayList.segments[0].duration*(2-this.mediaPlayList.segments.length)),b.R8("wait for min buffer time, now segments: ".concat(this.mediaPlayList.segments.length),P,120),e.next=23,new E.A(s);case 23:return e.abrupt("return",this.fetchMasterPlayList());case 24:this.minBuffer=this.mediaPlayList.duration||0,this.mediaPlayList.endlist&&(this.options.isLive=!1),this.mediaListUrl=this.info.url;case 27:return e.abrupt("return",n);case 30:if(e.prev=30,e.t0=e.catch(4),!(this.retryCount<this.options.retryCount)){e.next=40;break}return this.retryCount++,b.z3("failed fetch m3u8 file, retry(".concat(this.retryCount,"/3)"),P,137),e.next=37,new E.A(5);case 37:return e.abrupt("return",this.fetchMasterPlayList());case 40:this.status=3,b.h2("HLSLoader: exception, fetch slice error",P,143);case 42:case"end":return e.stop()}}),e,this,[[4,30]])}))),function(){return R.apply(this,arguments)})},{key:"fetchMediaPlayList",value:(v=(0,a.A)(T().mark((function e(){var t,r,i,n,a,s,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.masterPlaylist?((r=this.masterPlaylist.variants[this.mediaPlayListIndex])||b.h2("no media playlist",P,155),t=r.uri):t=this.mediaListUrl,/^https?/.test(t)||(t=m.ll(this.info.url,t)),this.mediaListUrl=t,i={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},this.info.headers&&y.__(this.info.headers,(function(e,t){i.headers[t]=e})),this.info.withCredentials&&(i.credentials="include"),this.info.referrerPolicy&&(i.referrerPolicy=this.info.referrerPolicy),e.prev=7,e.next=10,fetch(t,i);case 10:return n=e.sent,e.next=13,n.text();case 13:if(a=e.sent,this.mediaPlayList=(0,g.A)(a),!this.options.isLive||this.mediaPlayList.segments&&!(this.mediaPlayList.segments.length<2)){e.next=22;break}return o=5,null!==(s=this.mediaPlayList.segments)&&void 0!==s&&s.length&&(o=this.mediaPlayList.segments[0].duration*(2-this.mediaPlayList.segments.length)),b.R8("wait for min buffer time, now segments: ".concat(this.mediaPlayList.segments.length),P,200),e.next=21,new E.A(o);case 21:return e.abrupt("return",this.fetchMediaPlayList());case 22:return this.minBuffer=this.mediaPlayList.duration||0,this.mediaPlayList.endlist&&(this.options.isLive=!1),this.status=2,this.retryCount=0,e.abrupt("return",this.mediaPlayList);case 29:if(e.prev=29,e.t0=e.catch(7),!(this.retryCount<this.options.retryCount)){e.next=39;break}return this.retryCount++,b.z3("failed fetch m3u8 file, retry(".concat(this.retryCount,"/3)"),P,219),e.next=36,new E.A(this.options.retryInterval);case 36:return e.abrupt("return",this.fetchMasterPlayList());case 39:this.status=3,b.h2("HLSLoader: exception, fetch slice error",P,225);case 41:case"end":return e.stop()}}),e,this,[[7,29]])}))),function(){return v.apply(this,arguments)})},{key:"open",value:(p=(0,a.A)(T().mark((function e(t,r){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.info=t,this.range=r,this.range.to||(this.range.to=-1),this.range.from=Math.max(this.range.from,0),this.mediaPlayListIndex=0,this.segmentIndex=0,this.fetchedMap=new(A()),this.fetchedHistoryList=[],this.status=1,this.retryCount=0,this.keyMap=new(A()),e.next=13,this.fetchMasterPlayList();case 13:if(this.mediaPlayList||!this.masterPlaylist){e.next=16;break}return e.next=16,this.fetchMediaPlayList();case 16:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"checkNeedDecrypt",value:(f=(0,a.A)(T().mark((function e(t,r){var i,n,s=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.key){e.next=2;break}return e.abrupt("return");case 2:if(i=t.key.uri,!this.keyMap.has(i)){e.next=7;break}this.currentKey=this.keyMap.get(i),e.next=13;break;case 7:return e.next=9,fetch((0,m.ll)(this.mediaListUrl,i));case 9:return e.next=11,e.sent.arrayBuffer();case 11:this.currentKey=e.sent,this.keyMap.set(i,this.currentKey);case 13:return t.key.iv?this.currentIV=t.key.iv.buffer:(n=new Uint8Array(16),new DataView(n.buffer).setUint32(12,r,!1),this.currentIV=n.buffer),this.aesDecryptPipe=new I.A,this.aesDecryptPipe.onFlush=function(){var e=(0,a.A)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.loader.read(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=18,this.aesDecryptPipe.expandKey(this.currentKey,this.currentIV);case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"read",value:(h=(0,a.A)(T().mark((function e(t){var r,i,n,a,s=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,!this.loader){e.next=29;break}if(!this.aesDecryptPipe){e.next=8;break}return e.next=5,this.aesDecryptPipe.read(t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,this.loader.read(t);case 10:e.t0=e.sent;case 11:if(-1048576===(r=e.t0)){e.next=16;break}return e.abrupt("return",r);case 16:if(!this.options.isLive){e.next=23;break}this.fetchedMap.set(this.currentUri,!0),10===this.fetchedHistoryList.length&&this.fetchedMap.delete(this.fetchedHistoryList.shift()),this.fetchedHistoryList.push(this.currentUri),this.segmentIndex++,e.next=28;break;case 23:if(this.segmentIndex++,!(this.segmentIndex>=this.mediaPlayList.segments.length)){e.next=28;break}return b.pq("hls segments ended",P,313),this.status=4,e.abrupt("return",-1048576);case 28:this.loader=null;case 29:if(!this.options.isLive){e.next=51;break}if(i=this.mediaPlayList.segments.filter((function(e){return!s.fetchedMap.get(e.uri)})),i.length){e.next=42;break}if(!this.mediaPlayList.endlist){e.next=35;break}return this.status=4,e.abrupt("return",-1048576);case 35:if(!((n=(this.minBuffer-((0,S.A)()-this.mediaPlayList.timestamp)/1e3)/2)>0)){e.next=39;break}return e.next=39,new E.A(n);case 39:return e.next=41,this.fetchMediaPlayList();case 41:return e.abrupt("return",this.read(t));case 42:return this.currentUri=i[0].uri,e.next=45,this.checkNeedDecrypt(i[0],this.segmentIndex);case 45:return this.loader=new X.A(y.X$({},this.options,{disableSegment:!0,loop:!1})),e.next=48,this.loader.open({url:(0,m.ll)(this.mediaListUrl,this.currentUri)},{from:0,to:-1});case 48:return e.abrupt("return",this.aesDecryptPipe?this.aesDecryptPipe.read(t):this.loader.read(t));case 51:return this.loader=new X.A(y.X$({},this.options,{disableSegment:!0,loop:!1})),a=this.mediaPlayList.segments[this.segmentIndex],e.next=55,this.checkNeedDecrypt(a,this.segmentIndex);case 55:return e.next=57,this.loader.open({url:(0,m.ll)(this.mediaListUrl,a.uri)},{from:0,to:-1});case 57:return e.abrupt("return",this.aesDecryptPipe?this.aesDecryptPipe.read(t):this.loader.read(t));case 58:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"seek",value:(u=(0,a.A)(T().mark((function e(t){var r,i,n,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loader){e.next=4;break}return e.next=3,this.loader.abort();case 3:this.loader=null;case 4:r=0,i=Number(t),n=0,a=0;case 8:if(!(a<this.mediaPlayList.segments.length)){e.next=16;break}if(!(1e3*(r+=this.mediaPlayList.segments[a].duration)>=i)){e.next=13;break}return n=a,e.abrupt("break",16);case 13:a++,e.next=8;break;case 16:this.segmentIndex=n,4===this.status&&(this.status=2);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"size",value:(n=(0,a.A)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",BigInt(0));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"abort",value:(i=(0,a.A)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loader){e.next=4;break}return e.next=3,this.loader.abort();case 3:this.loader=null;case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"stop",value:(r=(0,a.A)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.abort();case 2:this.status=0;case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getDuration",value:function(){return this.mediaPlayList.duration}},{key:"getVideoList",value:function(){var e,t;return{list:null!==(e=null===(t=this.masterPlaylist)||void 0===t?void 0:t.variants.map((function(e){var t,r,i,n,a;return{width:null!==(t=null===(r=e.resolution)||void 0===r?void 0:r.width)&&void 0!==t?t:0,height:null!==(i=null===(n=e.resolution)||void 0===n?void 0:n.height)&&void 0!==i?i:0,frameRate:null!==(a=e.frameRate)&&void 0!==a?a:0}})))&&void 0!==e?e:[],selectedIndex:0}}},{key:"selectVideo",value:function(e){this.mediaPlayListIndex=e,this.fetchMediaPlayList()}},{key:"getMinBuffer",value:function(){return this.minBuffer}}]),t}(v.A)},48182:(e,t,r)=>{"use strict";r.d(t,{A:()=>G});var i=r(42096),n=r.n(i),a=r(75062),s=r.n(a),o=r(16091),u=r.n(o),h=r(68632),c=r.n(h),l=r(6550),d=r(7210),f=r.n(d),A=r(43929),p=r.n(A),T=r(69736),E=r.n(T),v=r(80662),y=r.n(v),m=r(67756),g=r(64608),X=r(4624);function S(e,t){var r=void 0!==s()&&e[u()]||e["@@iterator"];if(!r){if(c()(e)||(r=function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?n()(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,h=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return h=e.done,e},e:function(e){l=!0,o=e},f:function(){try{h||null==r.return||r.return()}finally{if(l)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var I="src/avprotocol/m3u8/parser.ts";function N(e){return m.Bq(e,'"')}function R(e){var t=m.gI(e,",");return{duration:m.Ro(t[0]),title:decodeURIComponent(escape(t[1]))}}function P(e){var t=m.gI(e,"@");return{length:m.Ro(t[0]),offset:t[1]?m.Ro(t[1]):-1}}function D(e){var t=m.gI(e,"x");return{width:m.Ro(t[0]),height:m.Ro(t[1])}}function O(e){var t="ALLOWED-CPC: Each entry must consit of KEYFORMAT and Content Protection Configuration",r=e.split(",");0===r.length&&X.z3(t,I,102);var i,n=[],a=S(r);try{for(a.s();!(i=a.n()).done;){var s=i.value,o=m.gI(s,":"),u=(0,l.A)(o,2),h=u[0],c=u[1];h&&c?n.push({format:h,cpcList:c.split("/")}):X.z3(t,I,108)}}catch(e){a.e(e)}finally{a.f()}return n}function w(e){return e.startsWith('"')?N(e):e.startsWith("0x")||e.startsWith("0X")?m.m2(e):m.Ro(e)}function L(e,t){t.IV&&e.compatibleVersion<2&&(e.compatibleVersion=2),(t.KEYFORMAT||t.KEYFORMATVERSIONS)&&e.compatibleVersion<5&&(e.compatibleVersion=5)}function k(e){var t,r,i,n={},a=S(m.HG(e));try{for(a.s();!(t=a.n()).done;){var s=t.value,o=m.gI(s,"="),u=(0,l.A)(o,2),h=u[0],c=u[1],d=N(c);switch(h){case"URI":n[h]=d;break;case"START-DATE":case"END-DATE":n[h]=new Date(d);break;case"IV":n[h]=(r=d,void 0,16!==(i=m.m2(r)).length&&X.z3("IV must be a 128-bit unsigned integer",I,119),i);break;case"BYTERANGE":n[h]=P(d);break;case"RESOLUTION":n[h]=D(d);break;case"ALLOWED-CPC":n[h]=O(d);break;case"END-ON-NEXT":case"DEFAULT":case"AUTOSELECT":case"FORCED":case"PRECISE":case"CAN-BLOCK-RELOAD":case"INDEPENDENT":case"GAP":n[h]="YES"===d;break;case"DURATION":case"PLANNED-DURATION":case"BANDWIDTH":case"AVERAGE-BANDWIDTH":case"FRAME-RATE":case"TIME-OFFSET":case"CAN-SKIP-UNTIL":case"HOLD-BACK":case"PART-HOLD-BACK":case"PART-TARGET":case"BYTERANGE-START":case"BYTERANGE-LENGTH":case"LAST-MSN":case"LAST-PART":case"SKIPPED-SEGMENTS":case"SCORE":case"PROGRAM-ID":n[h]=m.Ro(d);break;default:h.startsWith("SCTE35-")?n[h]=m.m2(d):h.startsWith("X-")?n[h]=w(c):("VIDEO-RANGE"===h&&"SDR"!==d&&"HLG"!==d&&"PQ"!==d&&X.h2('VIDEO-RANGE: unknown value "'.concat(d,'"'),I,206),n[h]=d)}}}catch(e){a.e(e)}finally{a.f()}return n}function M(e,t,r){var i,n=(i=t.attributes,new g.ru({type:i.TYPE,uri:i.URI,groupId:i["GROUP-ID"],language:i.LANGUAGE,assocLanguage:i["ASSOC-LANGUAGE"],name:i.NAME,isDefault:i.DEFAULT,autoselect:i.AUTOSELECT,forced:i.FORCED,instreamId:i["INSTREAM-ID"],characteristics:i.CHARACTERISTICS,channels:i.CHANNELS})),a=e[m.Th(r)],s=function(e,t){var r,i=!1,n=S(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.name===t.name)return"All EXT-X-MEDIA tags in the same Group MUST have different NAME attributes.";a.isDefault&&(i=!0)}}catch(e){n.e(e)}finally{n.f()}return i&&t.isDefault?"EXT-X-MEDIA A Group MUST NOT have more than one member with a DEFAULT attribute of YES.":""}(a,n);s&&X.h2(s,I,315),a.push(n),n.isDefault&&(e.currentRenditions[m.Th(r)]=a.length-1)}function U(e,t,r,i,n){var a,s=new g.KT({uri:r,bandwidth:t.BANDWIDTH,averageBandwidth:t["AVERAGE-BANDWIDTH"],score:t.SCORE,codecs:t.CODECS,resolution:t.RESOLUTION,frameRate:t["FRAME-RATE"],hdcpLevel:t["HDCP-LEVEL"],allowedCpc:t["ALLOWED-CPC"],videoRange:t["VIDEO-RANGE"],stableVariantId:t["STABLE-VARIANT-ID"],programId:t["PROGRAM-ID"]}),o=S(e);try{for(o.s();!(a=o.n()).done;){var u=a.value;if("EXT-X-MEDIA"===u.name){var h=u.attributes,c=h.TYPE;if(c&&h["GROUP-ID"]||X.h2("EXT-X-MEDIA TYPE attribute is REQUIRED.",I,355),t[c]===h["GROUP-ID"]&&(M(s,u,c),"CLOSED-CAPTIONS"===c)){var l,d=S(s.closedCaptions);try{for(d.s();!(l=d.n()).done;){var f=l.value.instreamId;if(f&&f.startsWith("SERVICE")&&n.compatibleVersion<7){n.compatibleVersion=7;break}}}catch(e){d.e(e)}finally{d.f()}}}}}catch(e){o.e(e)}finally{o.f()}return function(e,t,r){for(var i=function(){var i=a[n];"CLOSED-CAPTIONS"===i&&"NONE"===e[i]?(r.isClosedCaptionsNone=!0,t.closedCaptions=[]):e[i]&&!t[m.Th(i)].some((function(t){return t.groupId===e[i]}))&&X.h2("".concat(i," attribute MUST match the value of the GROUP-ID attribute of an EXT-X-MEDIA tag whose TYPE attribute is ").concat(i,"."),I,330)},n=0,a=["AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS"];n<a.length;n++)i()}(t,s,n),s.isIFrameOnly=i,s}function x(e,t,r,i,n,a,s){for(var o=new g.Y4({uri:t,mediaSequenceNumber:n,discontinuitySequence:a}),u=!1,h=!1,c=r;c<=i;c++){var l=e[c],d=l.name,f=l.value,A=l.attributes;if("EXTINF"===d)!p()(f.duration)&&s.compatibleVersion<3&&(s.compatibleVersion=3),Math.round(f.duration)>s.targetDuration&&X.h2("EXTINF duration, when rounded to the nearest integer, MUST be less than or equal to the target duration",I,517),o.duration=f.duration,o.title=f.title;else if("EXT-X-BYTERANGE"===d)s.compatibleVersion<4&&(s.compatibleVersion=4),o.byterange=f;else if("EXT-X-DISCONTINUITY"===d)o.parts.length>0&&X.h2("EXT-X-DISCONTINUITY must appear before the first EXT-X-PART tag of the Parent Segment.",I,530),o.discontinuity=!0;else if("EXT-X-KEY"===d)o.parts.length>0&&X.h2("EXT-X-KEY must appear before the first EXT-X-PART tag of the Parent Segment.",I,536),"NONE"!==A.METHOD&&(L(s,A),o.key=new g.Uz({method:A.METHOD,uri:A.URI,iv:A.IV,format:A.KEYFORMAT,formatVersion:A.KEYFORMATVERSIONS}));else if("EXT-X-MAP"===d)o.parts.length>0&&X.h2("EXT-X-MAP must appear before the first EXT-X-PART tag of the Parent Segment.",I,552),s.compatibleVersion<5&&(s.compatibleVersion=5),s.hasMap=!0,o.map=new g.qP({uri:A.URI,byterange:A.BYTERANGE});else if("EXT-X-PROGRAM-DATE-TIME"===d)o.programDateTime=f;else if("EXT-X-DATERANGE"===d){for(var T={},v=0,y=E()(A);v<y.length;v++){var m=y[v];(m.startsWith("SCTE35-")||m.startsWith("X-"))&&(T[m]=A[m])}o.dateRange=new g.ad({id:A.ID,classId:A.CLASS,start:A["START-DATE"],end:A["END-DATE"],duration:A.DURATION,plannedDuration:A["PLANNED-DURATION"],endOnNext:A["END-ON-NEXT"],attributes:T})}else if("EXT-X-CUE-OUT"===d)o.markers.push(new g.xC({type:"OUT",duration:A&&A.DURATION||f}));else if("EXT-X-CUE-IN"===d)o.markers.push(new g.xC({type:"IN"}));else if("EXT-X-CUE-OUT-CONT"===d||"EXT-X-CUE"===d||"EXT-OATCLS-SCTE35"===d||"EXT-X-ASSET"===d||"EXT-X-SCTE35"===d)o.markers.push(new g.xC({type:"RAW",tagName:d,value:f}));else if("EXT-X-PRELOAD-HINT"!==d||A.TYPE)if("EXT-X-PRELOAD-HINT"===d&&"PART"===A.TYPE&&h)X.h2("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist.",I,612);else if("EXT-X-PART"!==d&&"EXT-X-PRELOAD-HINT"!==d||A.URI){if("EXT-X-PRELOAD-HINT"===d&&"MAP"===A.TYPE)u&&X.h2("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist.",I,619),u=!0,s.hasMap=!0,o.map=new g.qP({hint:!0,uri:A.URI,byterange:{length:A["BYTERANGE-LENGTH"],offset:A["BYTERANGE-START"]||0}});else if("EXT-X-PART"===d||"EXT-X-PRELOAD-HINT"===d&&"PART"===A.TYPE){"EXT-X-PART"!==d||A.DURATION||X.h2("EXT-X-PART: DURATION attribute is mandatory",I,631),"EXT-X-PRELOAD-HINT"===d&&(h=!0);var S=new g.nw({hint:"EXT-X-PRELOAD-HINT"===d,uri:A.URI,byterange:"EXT-X-PART"===d?A.BYTERANGE:{length:A["BYTERANGE-LENGTH"],offset:A["BYTERANGE-START"]||0},duration:A.DURATION,independent:A.INDEPENDENT,gap:A.GAP});o.parts.push(S)}}else X.h2("EXT-X-PART / EXT-X-PRELOAD-HINT: URI attribute is mandatory",I,615);else X.h2("EXT-X-PRELOAD-HINT: TYPE attribute is mandatory",I,609)}return o}function C(e,t,r,i,n,a,s){for(var o=new g.Vd({uri:t,mediaSequenceNumber:n,discontinuitySequence:a}),u=r;u<=i;u++){var h=e[u],c=h.name,l=h.attributes;"EXTINF"===c?X.h2("A prefetch segment must not be advertised with an EXTINF tag.",I,663):"EXT-X-DISCONTINUITY"===c?X.h2("A prefetch segment must not be advertised with an EXT-X-DISCONTINUITY tag.",I,666):"EXT-X-PREFETCH-DISCONTINUITY"===c?o.discontinuity=!0:"EXT-X-KEY"===c?"NONE"!==l.METHOD&&(L(s,l),o.key=new g.Uz({method:l.METHOD,uri:l.URI,iv:l.IV,format:l.KEYFORMAT,formatVersion:l.KEYFORMATVERSIONS})):"EXT-X-MAP"===c&&X.h2("Prefetch segments must not be advertised with an EXT-X-MAP tag.",I,684)}return o}function V(e,t,r,i,n){var a=t.discontinuity,s=t.key,o=t.map,u=t.byterange,h=t.uri;if(a&&(t.discontinuitySequence=r+1),s||(t.key=i),o||(t.map=n),u&&-1===u.offset){var c=e.segments;if(c.length>0){var l=c.at(-1);l.byterange&&l.uri===h?u.offset=l.byterange.offset+l.byterange.length:X.h2("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST be a sub-range of the same media resource",I,900)}else X.h2("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST appear in the Playlist file",I,904)}return e.segments.push(t),[t.discontinuitySequence,t.key,t.map]}function F(e,t){var r=function(e){var t=e.indexOf(":");return-1===t?[e.slice(1).trim(),null]:[e.slice(1,t).trim(),e.slice(t+1).trim()]}(e),i=(0,l.A)(r,2),n=i[0],a=i[1],s=function(e){switch(e){case"EXTM3U":case"EXT-X-VERSION":return"Basic";case"EXTINF":case"EXT-X-BYTERANGE":case"EXT-X-DISCONTINUITY":case"EXT-X-PREFETCH-DISCONTINUITY":case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-PROGRAM-DATE-TIME":case"EXT-X-DATERANGE":case"EXT-X-CUE-OUT":case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT-CONT":case"EXT-X-CUE":case"EXT-OATCLS-SCTE35":case"EXT-X-ASSET":case"EXT-X-SCTE35":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":return"Segment";case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-ENDLIST":case"EXT-X-PLAYLIST-TYPE":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PREFETCH":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return"MediaPlaylist";case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":return"MasterPlaylist";case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-START":return"MediaorMasterPlaylist";default:return"Unknown"}}(n);if(function(e,t){if("Segment"===e||"MediaPlaylist"===e)return void 0===t.isMasterPlaylist?void(t.isMasterPlaylist=!1):void(t.isMasterPlaylist&&X.h2("The file contains both media and master playlist tags.",I,1011));if("MasterPlaylist"===e){if(void 0===t.isMasterPlaylist)return void(t.isMasterPlaylist=!0);!1===t.isMasterPlaylist&&X.h2("The file contains both media and master playlist tags.",I,1021)}}(s,t),"Unknown"===s)return null;"MediaPlaylist"===s&&"EXT-X-RENDITION-REPORT"!==n&&"EXT-X-PREFETCH"!==n&&(t.hash[n]&&X.h2("There MUST NOT be more than one Media Playlist tag of each type in any Media Playlist",I,1042),t.hash[n]=!0);var o=function(e,t){switch(e){case"EXTM3U":case"EXT-X-DISCONTINUITY":case"EXT-X-ENDLIST":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-CUE-IN":return[null,null];case"EXT-X-VERSION":case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":return[m.Ro(t),null];case"EXT-X-CUE-OUT":return f()(Number(t))?[null,k(t)]:[m.Ro(t),null];case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-DATERANGE":case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":case"EXT-X-START":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return[null,k(t)];case"EXTINF":return[R(t),null];case"EXT-X-BYTERANGE":return[P(t),null];case"EXT-X-PROGRAM-DATE-TIME":return[new Date(t),null];default:return[t,null]}}(n,a),u=(0,l.A)(o,2);return{name:n,category:s,value:u[0],attributes:u[1]}}function B(e,t){var r;return t.isMasterPlaylist?r=function(e,t){var r,i=new g.ts,n=!1,a=S(e.entries());try{var s=function(){var a=(0,l.A)(r.value,2),s=a[0],o=a[1],u=o.name,h=o.value,c=o.attributes;if("EXT-X-VERSION"===u)i.version=h;else if("EXT-X-STREAM-INF"===u){var d=e[s+1];("string"!=typeof d||d.startsWith("#EXT"))&&X.h2("EXT-X-STREAM-INF must be followed by a URI line",I,417);var f=U(e,c,d,!1,t);f&&("number"==typeof f.score&&(n=!0,f.score<0&&X.h2("SCORE attribute on EXT-X-STREAM-INF must be positive decimal-floating-point number.",I,424)),i.variants.push(f))}else if("EXT-X-I-FRAME-STREAM-INF"===u){var A=U(e,c,c.URI,!0,t);A&&i.variants.push(A)}else if("EXT-X-SESSION-DATA"===u){var p=new g.pf({id:c["DATA-ID"],value:c.VALUE,uri:c.URI,language:c.LANGUAGE});i.sessionDataList.some((function(e){return e.id===p.id&&e.language===p.language}))&&X.h2("A Playlist MUST NOT contain more than one EXT-X-SESSION-DATA tag with the same DATA-ID attribute and the same LANGUAGE attribute.",I,444),i.sessionDataList.push(p)}else if("EXT-X-SESSION-KEY"===u){"NONE"===c.METHOD&&X.h2("EXT-X-SESSION-KEY: The value of the METHOD attribute MUST NOT be NONE",I,450);var T=new g.Uz({method:c.METHOD,uri:c.URI,iv:c.IV,format:c.KEYFORMAT,formatVersion:c.KEYFORMATVERSIONS});i.sessionKeyList.some((function(e){return function(e,t){if(e.method!==t.method)return!1;if(e.uri!==t.uri)return!1;if(e.iv){if(!t.iv)return!1;if(e.iv.length!==t.iv.length)return!1;for(var r=0;r<e.iv.length;r++)if(e.iv[r]!==t.iv[r])return!1}else if(t.iv)return!1;return e.format===t.format&&e.formatVersion===t.formatVersion}(e,T)}))&&X.h2("A Master Playlist MUST NOT contain more than one EXT-X-SESSION-KEY tag with the same METHOD, URI, IV, KEYFORMAT, and KEYFORMATVERSIONS attribute values.",I,460),L(t,c),i.sessionKeyList.push(T)}else"EXT-X-INDEPENDENT-SEGMENTS"===u?(i.independentSegments&&X.h2("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist",I,467),i.independentSegments=!0):"EXT-X-START"===u&&(i.start&&X.h2("EXT-X-START tag MUST NOT appear more than once in a Playlist",I,473),"number"!=typeof c["TIME-OFFSET"]&&X.h2("EXT-X-START: TIME-OFFSET attribute is REQUIRED",I,476),i.start={offset:c["TIME-OFFSET"],precise:c.PRECISE||!1})};for(a.s();!(r=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}if(n){var o,u=S(i.variants);try{for(u.s();!(o=u.n()).done;)"number"!=typeof o.value.score&&X.h2("If any Variant Stream contains the SCORE attribute, then all Variant Streams in the Master Playlist SHOULD have a SCORE attribute",I,484)}catch(e){u.e(e)}finally{u.f()}}if(t.isClosedCaptionsNone){var h,c=S(i.variants);try{for(c.s();!(h=c.n()).done;)h.value.closedCaptions.length>0&&X.h2("If there is a variant with CLOSED-CAPTIONS attribute of NONE, all EXT-X-STREAM-INF tags MUST have this attribute with a value of NONE",I,491)}catch(e){c.e(e)}finally{c.f()}}return i}(e,t):!(r=function(e,t){var r,i=new g.tk,n=-1,a=0,s=!1,o=!1,u=0,h=null,c=null,d=!1,f=S(e.entries());try{for(f.s();!(r=f.n()).done;){var A=(0,l.A)(r.value,2),p=A[0],T=A[1],E=T.name,v=T.value,m=T.attributes;if("Segment"!==T.category){if("EXT-X-VERSION"===E)void 0===i.version?i.version=v:X.h2("A Playlist file MUST NOT contain more than one EXT-X-VERSION tag.",I,716);else if("EXT-X-TARGETDURATION"===E)i.targetDuration=t.targetDuration=v;else if("EXT-X-MEDIA-SEQUENCE"===E)i.segments.length>0&&X.h2("The EXT-X-MEDIA-SEQUENCE tag MUST appear before the first Media Segment in the Playlist.",I,724),i.mediaSequenceBase=a=v;else if("EXT-X-DISCONTINUITY-SEQUENCE"===E)i.segments.length>0&&X.h2("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before the first Media Segment in the Playlist.",I,730),s&&X.h2("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before any EXT-X-DISCONTINUITY tag.",I,733),i.discontinuitySequenceBase=u=v;else if("EXT-X-ENDLIST"===E)i.endlist=!0;else if("EXT-X-PLAYLIST-TYPE"===E)i.playlistType=v;else if("EXT-X-I-FRAMES-ONLY"===E)t.compatibleVersion<4&&(t.compatibleVersion=4),i.isIFrame=!0;else if("EXT-X-INDEPENDENT-SEGMENTS"===E)i.independentSegments&&X.h2("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist",I,751),i.independentSegments=!0;else if("EXT-X-START"===E)i.start&&X.h2("EXT-X-START tag MUST NOT appear more than once in a Playlist",I,757),"number"!=typeof m["TIME-OFFSET"]&&X.h2("EXT-X-START: TIME-OFFSET attribute is REQUIRED",I,760),i.start={offset:m["TIME-OFFSET"],precise:m.PRECISE||!1};else if("EXT-X-SERVER-CONTROL"===E)m["CAN-BLOCK-RELOAD"]||X.h2("EXT-X-SERVER-CONTROL: CAN-BLOCK-RELOAD=YES is mandatory for Low-Latency HLS",I,766),i.lowLatencyCompatibility={canBlockReload:m["CAN-BLOCK-RELOAD"],canSkipUntil:m["CAN-SKIP-UNTIL"],holdBack:m["HOLD-BACK"],partHoldBack:m["PART-HOLD-BACK"]};else if("EXT-X-PART-INF"===E)m["PART-TARGET"]||X.h2("EXT-X-PART-INF: PART-TARGET attribute is mandatory",I,777),i.partTargetDuration=m["PART-TARGET"];else if("EXT-X-RENDITION-REPORT"===E)m.URI||X.h2("EXT-X-RENDITION-REPORT: URI attribute is mandatory",I,783),0===m.URI.search(/^[a-z]+:/)&&X.h2("EXT-X-RENDITION-REPORT: URI must be relative to the playlist uri",I,786),i.renditionReports.push(new g.h4({uri:m.URI,lastMSN:m["LAST-MSN"],lastPart:m["LAST-PART"]}));else if("EXT-X-SKIP"===E)m["SKIPPED-SEGMENTS"]||X.h2("EXT-X-SKIP: SKIPPED-SEGMENTS attribute is mandatory",I,796),t.compatibleVersion<9&&(t.compatibleVersion=9),i.skip=m["SKIPPED-SEGMENTS"],a+=i.skip;else if("EXT-X-PREFETCH"===E){var b=C(e,v,-1===n?p:n,p-1,a++,u,t);b&&(b.discontinuity&&(b.discontinuitySequence++,u=b.discontinuitySequence),b.key?h=b.key:b.key=h,i.prefetchSegments.push(b)),o=!0,n=-1}else if("string"==typeof T){-1===n&&X.h2("A URI line is not preceded by any segment tags",I,833),i.targetDuration||X.h2("The EXT-X-TARGETDURATION tag is REQUIRED",I,836),o&&X.h2("These segments must appear after all complete segments.",I,839);var N=x(e,T,n,p-1,a++,u,t);if(N){var R=V(i,N,u,h,c),P=(0,l.A)(R,3);u=P[0],h=P[1],c=P[2],!d&&N.parts.length>0&&(d=!0)}n=-1}}else-1===n&&(n=p),"EXT-X-DISCONTINUITY"===E&&(s=!0)}}catch(e){f.e(e)}finally{f.f()}if(-1!==n){var D=x(e,"",n,e.length-1,a++,u,t);if(D){var O,w=D.parts;!(w.length>0)||i.endlist||null!==(O=w.at(-1))&&void 0!==O&&O.hint||X.h2("If the Playlist contains EXT-X-PART tags and does not contain an EXT-X-ENDLIST tag, the Playlist must contain an EXT-X-PRELOAD-HINT tag with a TYPE=PART attribute",I,856),V(i,D,h,c),!d&&D.parts.length>0&&(d=!0)}}return function(e){for(var t=new(y()),r=new(y()),i=!1,n=!1,a=e.length-1;a>=0;a--){var s=e[a],o=s.programDateTime,u=s.dateRange;if(o&&(n=!0),u&&u.start){i=!0,u.endOnNext&&(u.end||u.duration)&&X.h2("An EXT-X-DATERANGE tag with an END-ON-NEXT=YES attribute MUST NOT contain DURATION or END-DATE attributes.",I,924);var h=u.start.getTime(),c=u.duration||0;u.end&&u.duration&&h+1e3*c!==u.end.getTime()&&X.h2("END-DATE MUST be equal to the value of the START-DATE attribute plus the value of the DURATION",I,930),u.endOnNext&&(u.end=t.get(u.classId)),t.set(u.classId,u.start);var l=u.end?u.end.getTime():u.start.getTime()+1e3*(u.duration||0),d=r.get(u.classId);if(d){var f,A=S(d);try{for(A.s();!(f=A.n()).done;){var p=f.value;(p.start<=h&&p.end>h||p.start>=h&&p.start<l)&&X.h2("DATERANGE tags with the same CLASS should not overlap",I,942)}}catch(e){A.e(e)}finally{A.f()}d.push({start:h,end:l})}else u.classId&&r.set(u.classId,[{start:h,end:l}])}}i&&!n&&X.h2("If a Playlist contains an EXT-X-DATERANGE tag, it MUST also contain at least one EXT-X-PROGRAM-DATE-TIME tag.",I,953)}(i.segments),i.lowLatencyCompatibility&&function(e,t){var r=e.lowLatencyCompatibility,i=e.targetDuration,n=e.partTargetDuration,a=e.segments,s=e.renditionReports,o=r.canSkipUntil,u=r.holdBack,h=r.partHoldBack;if(o<6*i&&X.h2("The Skip Boundary must be at least six times the EXT-X-TARGETDURATION.",I,960),u<3*i&&X.h2("HOLD-BACK must be at least three times the EXT-X-TARGETDURATION.",I,964),t){void 0===n&&X.h2("EXT-X-PART-INF is required if a Playlist contains one or more EXT-X-PART tags",I,968),void 0===h&&X.h2("EXT-X-PART: PART-HOLD-BACK attribute is mandatory",I,971),h<n&&X.h2("PART-HOLD-BACK must be at least PART-TARGET",I,974);var c,d=S(a.entries());try{for(d.s();!(c=d.n()).done;){var f=(0,l.A)(c.value,2),A=f[0],p=f[1].parts;p.length>0&&A<a.length-3&&X.h2("Remove EXT-X-PART tags from the Playlist after they are greater than three target durations from the end of the Playlist.",I,978);var T,E=S(p.entries());try{for(E.s();!(T=E.n()).done;){var v=(0,l.A)(T.value,2),y=v[0],m=v[1].duration;void 0!==m&&(m>n&&X.h2("PART-TARGET is the maximum duration of any Partial Segment",I,985),y<p.length-1&&m<.85*n&&X.h2("All Partial Segments except the last part of a segment must have a duration of at least 85% of PART-TARGET",I,988))}}catch(e){E.e(e)}finally{E.f()}}}catch(e){d.e(e)}finally{d.f()}}var g,b=S(s);try{for(b.s();!(g=b.n()).done;){var N=g.value,R=a.at(-1);null!==N.lastMSN&&void 0!==N.lastMSN||(N.lastMSN=R.mediaSequenceNumber),(null===N.lastPart||void 0===N.lastPart)&&R.parts.length>0&&(N.lastPart=R.parts.length-1)}}catch(e){b.e(e)}finally{b.f()}}(i,d),i.duration=i.segments.reduce((function(e,t){return e+t.duration}),0),i}(e,t)).isIFrame&&t.hasMap&&t.compatibleVersion<6&&(t.compatibleVersion=6),t.compatibleVersion>1&&(!r.version||r.version<t.compatibleVersion)&&X.h2("EXT-X-VERSION needs to be ".concat(t.compatibleVersion," or higher."),I,1092),r}function G(e){var t={version:void 0,isMasterPlaylist:void 0,hasMap:!1,targetDuration:0,compatibleVersion:1,isClosedCaptionsNone:!1,hash:{}},r=function(e,t){var r,i=[],n=S(e.split("\n"));try{for(n.s();!(r=n.n()).done;){var a=r.value.trim();if(a)if(a.startsWith("#")){if(a.startsWith("#EXT")){var s=F(a,t);s&&i.push(s)}}else i.push(a)}}catch(e){n.e(e)}finally{n.f()}return 0!==i.length&&"EXTM3U"===i[0].name||X.h2("The EXTM3U tag MUST be the first line.",I,1074),i}(e,t),i=B(r,t);return i.source=e,i}},64608:(e,t,r)=>{"use strict";r.d(t,{KT:()=>O,Uz:()=>L,Vd:()=>Y,Y4:()=>B,ad:()=>M,h4:()=>K,nw:()=>G,pf:()=>w,qP:()=>k,ru:()=>D,tk:()=>F,ts:()=>V,xC:()=>U});var i=r(88435),n=r.n(i),a=r(69736),s=r.n(a),o=r(44301),u=r.n(o),h=r(82731),c=r.n(h),l=r(59614),d=r.n(l),f=r(969),A=r.n(f),p=r(66681),T=r.n(p),E=r(77193),v=r(25767),y=r(43070),m=r(31060),g=r(81570),X=r(78716),S=r(134),b=r(86932);function I(e,t){var r=s()(e);if(u()){var i=u()(e);t&&(i=i.filter((function(t){return c()(e,t).enumerable}))),r.push.apply(r,i)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,S.A)(e,t,r[t])})):d()?A()(e,d()(r)):I(Object(r)).forEach((function(t){T()(e,t,c()(r,t))}))}return e}function R(e,t,r){return t=(0,v.A)(t),(0,E.A)(e,P()?n()(t,r||[],(0,v.A)(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}var D=(0,g.A)((function e(t){var r=t.type,i=t.uri,n=t.groupId,a=t.language,s=t.assocLanguage,o=t.name,u=t.isDefault,h=t.autoselect,c=t.forced,l=t.instreamId,d=t.characteristics,f=t.channels;(0,X.A)(this,e),(0,S.A)(this,"type",void 0),(0,S.A)(this,"uri",void 0),(0,S.A)(this,"groupId",void 0),(0,S.A)(this,"language",void 0),(0,S.A)(this,"assocLanguage",void 0),(0,S.A)(this,"name",void 0),(0,S.A)(this,"isDefault",void 0),(0,S.A)(this,"autoselect",void 0),(0,S.A)(this,"forced",void 0),(0,S.A)(this,"instreamId",void 0),(0,S.A)(this,"characteristics",void 0),(0,S.A)(this,"channels",void 0),this.type=r,this.uri=i,this.groupId=n,this.language=a,this.assocLanguage=s,this.name=o,this.isDefault=u,this.autoselect=h,this.forced=c,this.instreamId=l,this.characteristics=d,this.channels=f})),O=(0,g.A)((function e(t){var r=t.uri,i=t.isIFrameOnly,n=void 0!==i&&i,a=t.bandwidth,s=t.averageBandwidth,o=t.score,u=t.codecs,h=t.resolution,c=t.frameRate,l=t.hdcpLevel,d=t.allowedCpc,f=t.videoRange,A=t.stableVariantId,p=t.programId,T=t.audio,E=void 0===T?[]:T,v=t.video,y=void 0===v?[]:v,m=t.subtitles,g=void 0===m?[]:m,b=t.closedCaptions,I=void 0===b?[]:b,N=t.currentRenditions,R=void 0===N?{audio:0,video:0,subtitles:0,closedCaptions:0}:N;(0,X.A)(this,e),(0,S.A)(this,"uri",void 0),(0,S.A)(this,"isIFrameOnly",void 0),(0,S.A)(this,"bandwidth",void 0),(0,S.A)(this,"averageBandwidth",void 0),(0,S.A)(this,"score",void 0),(0,S.A)(this,"codecs",void 0),(0,S.A)(this,"resolution",void 0),(0,S.A)(this,"frameRate",void 0),(0,S.A)(this,"hdcpLevel",void 0),(0,S.A)(this,"allowedCpc",void 0),(0,S.A)(this,"videoRange",void 0),(0,S.A)(this,"stableVariantId",void 0),(0,S.A)(this,"programId",void 0),(0,S.A)(this,"audio",void 0),(0,S.A)(this,"video",void 0),(0,S.A)(this,"subtitles",void 0),(0,S.A)(this,"closedCaptions",void 0),(0,S.A)(this,"currentRenditions",void 0),this.uri=r,this.isIFrameOnly=n,this.bandwidth=a,this.averageBandwidth=s,this.score=o,this.codecs=u,this.resolution=h,this.frameRate=c,this.hdcpLevel=l,this.allowedCpc=d,this.videoRange=f,this.stableVariantId=A,this.programId=p,this.audio=E,this.video=y,this.subtitles=g,this.closedCaptions=I,this.currentRenditions=R})),w=(0,g.A)((function e(t){var r=t.id,i=t.value,n=t.uri,a=t.language;(0,X.A)(this,e),(0,S.A)(this,"id",void 0),(0,S.A)(this,"value",void 0),(0,S.A)(this,"uri",void 0),(0,S.A)(this,"language",void 0),this.id=r,this.value=i,this.uri=n,this.language=a})),L=(0,g.A)((function e(t){var r=t.method,i=t.uri,n=t.iv,a=t.format,s=t.formatVersion;(0,X.A)(this,e),(0,S.A)(this,"method",void 0),(0,S.A)(this,"uri",void 0),(0,S.A)(this,"iv",void 0),(0,S.A)(this,"format",void 0),(0,S.A)(this,"formatVersion",void 0),this.method=r,this.uri=i,this.iv=n,this.format=a,this.formatVersion=s})),k=(0,g.A)((function e(t){var r=t.hint,i=void 0!==r&&r,n=t.uri,a=t.mimeType,s=t.byterange;(0,X.A)(this,e),(0,S.A)(this,"hint",void 0),(0,S.A)(this,"uri",void 0),(0,S.A)(this,"mimeType",void 0),(0,S.A)(this,"byterange",void 0),this.hint=i,this.uri=n,this.mimeType=a,this.byterange=s})),M=(0,g.A)((function e(t){var r=t.id,i=t.classId,n=t.start,a=t.end,s=t.duration,o=t.plannedDuration,u=t.endOnNext,h=t.attributes,c=void 0===h?{}:h;(0,X.A)(this,e),(0,S.A)(this,"id",void 0),(0,S.A)(this,"classId",void 0),(0,S.A)(this,"start",void 0),(0,S.A)(this,"end",void 0),(0,S.A)(this,"duration",void 0),(0,S.A)(this,"plannedDuration",void 0),(0,S.A)(this,"endOnNext",void 0),(0,S.A)(this,"attributes",void 0),this.id=r,this.classId=i,this.start=n,this.end=a,this.duration=s,this.plannedDuration=o,this.endOnNext=u,this.attributes=c})),U=(0,g.A)((function e(t){var r=t.type,i=t.duration,n=t.tagName,a=t.value;(0,X.A)(this,e),(0,S.A)(this,"type",void 0),(0,S.A)(this,"duration",void 0),(0,S.A)(this,"tagName",void 0),(0,S.A)(this,"value",void 0),this.type=r,this.duration=i,this.tagName=n,this.value=a})),x=(0,g.A)((function e(t){(0,X.A)(this,e),(0,S.A)(this,"type",void 0),this.type=t})),C=function(e){function t(e){var r,i=e.isMasterPlaylist,n=e.uri,a=e.version,s=e.independentSegments,o=void 0!==s&&s,u=e.start,h=e.source;return(0,X.A)(this,t),r=R(this,t,["playlist"]),(0,S.A)((0,y.A)(r),"isMasterPlaylist",void 0),(0,S.A)((0,y.A)(r),"uri",void 0),(0,S.A)((0,y.A)(r),"version",void 0),(0,S.A)((0,y.A)(r),"independentSegments",void 0),(0,S.A)((0,y.A)(r),"start",void 0),(0,S.A)((0,y.A)(r),"source",void 0),r.isMasterPlaylist=i,r.uri=n,r.version=a,r.independentSegments=o,r.start=u,r.source=h,r}return(0,m.A)(t,e),(0,g.A)(t)}(x),V=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,X.A)(this,t),e=R(this,t,[N(N({},r),{},{isMasterPlaylist:!0})]),(0,S.A)((0,y.A)(e),"variants",void 0),(0,S.A)((0,y.A)(e),"currentVariant",void 0),(0,S.A)((0,y.A)(e),"sessionDataList",void 0),(0,S.A)((0,y.A)(e),"sessionKeyList",void 0);var i=r.variants,n=void 0===i?[]:i,a=r.currentVariant,s=r.sessionDataList,o=void 0===s?[]:s,u=r.sessionKeyList,h=void 0===u?[]:u;return e.variants=n,e.currentVariant=a,e.sessionDataList=o,e.sessionKeyList=h,e}return(0,m.A)(t,e),(0,g.A)(t)}(C),F=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,X.A)(this,t),e=R(this,t,[N(N({},r),{},{isMasterPlaylist:!1})]),(0,S.A)((0,y.A)(e),"targetDuration",void 0),(0,S.A)((0,y.A)(e),"mediaSequenceBase",void 0),(0,S.A)((0,y.A)(e),"discontinuitySequenceBase",void 0),(0,S.A)((0,y.A)(e),"endlist",void 0),(0,S.A)((0,y.A)(e),"playlistType",void 0),(0,S.A)((0,y.A)(e),"isIFrame",void 0),(0,S.A)((0,y.A)(e),"segments",void 0),(0,S.A)((0,y.A)(e),"prefetchSegments",void 0),(0,S.A)((0,y.A)(e),"lowLatencyCompatibility",void 0),(0,S.A)((0,y.A)(e),"partTargetDuration",void 0),(0,S.A)((0,y.A)(e),"renditionReports",void 0),(0,S.A)((0,y.A)(e),"skip",void 0),(0,S.A)((0,y.A)(e),"hash",void 0),(0,S.A)((0,y.A)(e),"duration",void 0),(0,S.A)((0,y.A)(e),"timestamp",void 0);var i=r.targetDuration,n=r.mediaSequenceBase,a=void 0===n?0:n,s=r.discontinuitySequenceBase,o=void 0===s?0:s,u=r.endlist,h=void 0!==u&&u,c=r.playlistType,l=r.isIFrame,d=r.segments,f=void 0===d?[]:d,A=r.prefetchSegments,p=void 0===A?[]:A,T=r.lowLatencyCompatibility,E=r.partTargetDuration,v=r.renditionReports,m=void 0===v?[]:v,g=r.skip,I=void 0===g?0:g,P=r.hash,D=r.duration,O=void 0===D?0:D;return e.targetDuration=i,e.mediaSequenceBase=a,e.discontinuitySequenceBase=o,e.endlist=h,e.playlistType=c,e.isIFrame=l,e.segments=f,e.prefetchSegments=p,e.lowLatencyCompatibility=T,e.partTargetDuration=E,e.renditionReports=m,e.skip=I,e.hash=P,e.duration=O,e.timestamp=(0,b.A)(),e}return(0,m.A)(t,e),(0,g.A)(t)}(C),B=function(e){function t(e){var r,i=e.uri,n=e.mimeType,a=e.data,s=e.duration,o=e.title,u=e.byterange,h=e.discontinuity,c=e.mediaSequenceNumber,l=void 0===c?0:c,d=e.discontinuitySequence,f=void 0===d?0:d,A=e.key,p=e.map,T=e.programDateTime,E=e.dateRange,v=e.markers,m=void 0===v?[]:v,g=e.parts,b=void 0===g?[]:g;return(0,X.A)(this,t),r=R(this,t,["segment"]),(0,S.A)((0,y.A)(r),"uri",void 0),(0,S.A)((0,y.A)(r),"mimeType",void 0),(0,S.A)((0,y.A)(r),"data",void 0),(0,S.A)((0,y.A)(r),"duration",void 0),(0,S.A)((0,y.A)(r),"title",void 0),(0,S.A)((0,y.A)(r),"byterange",void 0),(0,S.A)((0,y.A)(r),"discontinuity",void 0),(0,S.A)((0,y.A)(r),"mediaSequenceNumber",void 0),(0,S.A)((0,y.A)(r),"discontinuitySequence",void 0),(0,S.A)((0,y.A)(r),"key",void 0),(0,S.A)((0,y.A)(r),"map",void 0),(0,S.A)((0,y.A)(r),"programDateTime",void 0),(0,S.A)((0,y.A)(r),"dateRange",void 0),(0,S.A)((0,y.A)(r),"markers",void 0),(0,S.A)((0,y.A)(r),"parts",void 0),r.uri=i,r.mimeType=n,r.data=a,r.duration=s,r.title=o,r.byterange=u,r.discontinuity=h,r.mediaSequenceNumber=l,r.discontinuitySequence=f,r.key=A,r.map=p,r.programDateTime=T,r.dateRange=E,r.markers=m,r.parts=b,r}return(0,m.A)(t,e),(0,g.A)(t)}(x),G=function(e){function t(e){var r,i=e.hint,n=void 0!==i&&i,a=e.uri,s=e.duration,o=e.independent,u=e.byterange,h=e.gap;return(0,X.A)(this,t),r=R(this,t,["part"]),(0,S.A)((0,y.A)(r),"hint",void 0),(0,S.A)((0,y.A)(r),"uri",void 0),(0,S.A)((0,y.A)(r),"duration",void 0),(0,S.A)((0,y.A)(r),"independent",void 0),(0,S.A)((0,y.A)(r),"byterange",void 0),(0,S.A)((0,y.A)(r),"gap",void 0),r.hint=n,r.uri=a,r.duration=s,r.independent=o,r.duration=s,r.byterange=u,r.gap=h,r}return(0,m.A)(t,e),(0,g.A)(t)}(x),Y=function(e){function t(e){var r,i=e.uri,n=e.discontinuity,a=e.mediaSequenceNumber,s=void 0===a?0:a,o=e.discontinuitySequence,u=void 0===o?0:o,h=e.key;return(0,X.A)(this,t),r=R(this,t,["prefetch"]),(0,S.A)((0,y.A)(r),"uri",void 0),(0,S.A)((0,y.A)(r),"discontinuity",void 0),(0,S.A)((0,y.A)(r),"mediaSequenceNumber",void 0),(0,S.A)((0,y.A)(r),"discontinuitySequence",void 0),(0,S.A)((0,y.A)(r),"key",void 0),r.uri=i,r.discontinuity=n,r.mediaSequenceNumber=s,r.discontinuitySequence=u,r.key=h,r}return(0,m.A)(t,e),(0,g.A)(t)}(x),K=(0,g.A)((function e(t){var r=t.uri,i=t.lastMSN,n=t.lastPart;(0,X.A)(this,e),(0,S.A)(this,"uri",void 0),(0,S.A)(this,"lastMSN",void 0),(0,S.A)(this,"lastPart",void 0),this.uri=r,this.lastMSN=i,this.lastPart=n}))},67756:(e,t,r)=>{"use strict";r.d(t,{Bq:()=>g,HG:()=>X,Ro:()=>v,Th:()=>S,gI:()=>m,m2:()=>y});var i=r(99704),n=r.n(i),a=r(17735),s=r.n(a),o=r(7210),u=r.n(o),h=r(42096),c=r.n(h),l=r(75062),d=r.n(l),f=r(16091),A=r.n(f),p=r(68632),T=r.n(p);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if("number"==typeof e)return e;var r=10===t?n()(e):s()(e,t);return u()(r)?0:r}function y(e){(e.startsWith("0x")||e.startsWith("0X"))&&(e=e.slice(2));for(var t=[],r=0;r<e.length;r+=2)t.push(v(e.slice(r,r+2),16));return new Uint8Array(t)}function m(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=-1,n=0,a=0;n<e.length;n++)if(e[n]===t){if(a++===r)return[e.slice(0,n),e.slice(n+1)];i=n}return-1!==i?[e.slice(0,i),e.slice(i+1)]:[e]}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e?(e=e.trim()," "===t||(e.startsWith(t)&&(e=e.slice(1)),e.endsWith(t)&&(e=e.slice(0,-1))),e):e}function X(e){for(var t=[],r=!0,i=0,n=[],a=0;a<e.length;a++){var s=e[a];r&&","===s?(t.push(e.slice(i,a).trim()),i=a+1):'"'!==s&&"'"!==s||(r?(n.push(s),r=!1):s===n.at(-1)?(n.pop(),r=!0):n.push(s))}return t.push(e.slice(i).trim()),t}function S(e){var t,r=[],i=!1,n=function(e,t){var r=void 0!==d()&&e[A()]||e["@@iterator"];if(!r){if(T()(e)||(r=function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?c()(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;"-"!==a&&"_"!==a?i?(r.push(a.toUpperCase()),i=!1):r.push(a.toLowerCase()):i=!0}}catch(e){n.e(e)}finally{n.f()}return r.join("")}},13258:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var i=r(25182),n=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),h=function(){function e(){(0,n.A)(this,e),(0,s.A)(this,"rcon",[0,1,2,4,8,16,32,64,128,27,54]),(0,s.A)(this,"subMix",[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)]),(0,s.A)(this,"invSubMix",[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)]),(0,s.A)(this,"sBox",new Uint32Array(256)),(0,s.A)(this,"invSBox",new Uint32Array(256)),(0,s.A)(this,"key",new Uint32Array(0)),(0,s.A)(this,"ksRows",0),(0,s.A)(this,"keySize",0),(0,s.A)(this,"keySchedule",void 0),(0,s.A)(this,"invKeySchedule",void 0),this.initTable()}var t,r;return(0,a.A)(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<4;i++)r[i]=t.getUint32(4*i);return r}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],n=r[1],a=r[2],s=r[3],o=this.invSubMix,u=o[0],h=o[1],c=o[2],l=o[3],d=new Uint32Array(256),f=0,A=0,p=0;for(p=0;p<256;p++)d[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var T=A^A<<1^A<<2^A<<3^A<<4;T=T>>>8^255&T^99,e[f]=T,t[T]=f;var E=d[f],v=d[E],y=d[v],m=257*d[T]^16843008*T;i[f]=m<<24|m>>>8,n[f]=m<<16|m>>>16,a[f]=m<<8|m>>>24,s[f]=m,m=16843009*y^65537*v^257*E^16843008*f,u[T]=m<<24|m>>>8,h[T]=m<<16|m>>>16,c[T]=m<<8|m>>>24,l[T]=m,f?(f=E^d[d[d[y^E]]],A^=d[d[A]]):f=A=1}}},{key:"expandKey",value:(r=(0,i.A)(u().mark((function e(t){var r,i,n,a,s,o,h,c,l,d,f,A,p,T,E,v,y,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.uint8ArrayToUint32Array_(t),!this.key){e.next=7;break}for(i=!0,n=0;n<r.length&&i;)i=r[n]===this.key[n],n++;if(!i){e.next=7;break}return e.abrupt("return");case 7:if(this.key=r,4===(a=this.keySize=this.key.length)||6===a||8===a){e.next=11;break}throw new Error("Invalid aes key size="+a);case 11:s=this.ksRows=4*(a+6+1),c=this.keySchedule=new Uint32Array(s),l=this.invKeySchedule=new Uint32Array(s),d=this.sBox,f=this.rcon,A=this.invSubMix,p=A[0],T=A[1],E=A[2],v=A[3],o=0;case 22:if(!(o<s)){e.next=32;break}if(!(o<a)){e.next=26;break}return y=c[o]=r[o],e.abrupt("continue",29);case 26:m=y,o%a==0?(m=d[(m=m<<8|m>>>24)>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[255&m],m^=f[o/a|0]<<24):a>6&&o%a==4&&(m=d[m>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[255&m]),c[o]=y=(c[o-a]^m)>>>0;case 29:o++,e.next=22;break;case 32:for(h=0;h<s;h++)o=s-h,m=3&h?c[o]:c[o-4],l[h]=h<4||o<=4?m:p[d[m>>>24]]^T[d[m>>>16&255]]^E[d[m>>>8&255]]^v[d[255&m]],l[h]=l[h]>>>0;case 33:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:(t=(0,i.A)(u().mark((function e(t,r){var i,n,a,s,o,h,c,l,d,f,A,p,T,E,v,y,m,g,X,S,b,I,N,R,P,D,O,w,L,k,M;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=this.keySize+6,n=this.invKeySchedule,a=this.invSBox,s=this.invSubMix,o=s[0],h=s[1],c=s[2],l=s[3],d=this.uint8ArrayToUint32Array_(r),f=d[0],A=d[1],p=d[2],T=d[3],E=new Int32Array(t.buffer).subarray(t.byteOffset>>>2,(t.byteOffset>>>2)+(t.length>>>2)),v=new Int32Array(E.length),k=this.networkToHostOrderSwap,M=0;M<E.length;){for(R=k(E[M]),P=k(E[M+1]),D=k(E[M+2]),O=k(E[M+3]),S=R^n[0],b=O^n[1],I=D^n[2],N=P^n[3],w=4,L=1;L<i;L++)y=o[S>>>24]^h[b>>16&255]^c[I>>8&255]^l[255&N]^n[w],m=o[b>>>24]^h[I>>16&255]^c[N>>8&255]^l[255&S]^n[w+1],g=o[I>>>24]^h[N>>16&255]^c[S>>8&255]^l[255&b]^n[w+2],X=o[N>>>24]^h[S>>16&255]^c[b>>8&255]^l[255&I]^n[w+3],S=y,b=m,I=g,N=X,w+=4;y=a[S>>>24]<<24^a[b>>16&255]<<16^a[I>>8&255]<<8^a[255&N]^n[w],m=a[b>>>24]<<24^a[I>>16&255]<<16^a[N>>8&255]<<8^a[255&S]^n[w+1],g=a[I>>>24]<<24^a[N>>16&255]<<16^a[S>>8&255]<<8^a[255&b]^n[w+2],X=a[N>>>24]<<24^a[S>>16&255]<<16^a[b>>8&255]<<8^a[255&I]^n[w+3],v[M]=k(y^f),v[M+1]=k(X^A),v[M+2]=k(g^p),v[M+3]=k(m^T),f=R,A=P,p=D,T=O,M+=4}return e.abrupt("return",v.buffer);case 19:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}()},51678:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var i=r(23509),n=r(25182),a=r(78716),s=r(81570),o=r(134),u=r(36443),h=r.n(u),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,a.A)(this,e),(0,o.A)(this,"subtle",void 0),(0,o.A)(this,"key",void 0),(0,o.A)(this,"mode",void 0),(0,o.A)(this,"keyBuffer",void 0),this.mode=t,this.subtle=crypto.subtle||crypto.webkitSubtle}var t,r,u;return(0,s.A)(e,[{key:"getSubtleAlgoName",value:function(){switch(this.mode){case 0:return"AES-CBC";case 1:return"AES-CTR"}}},{key:"expandKey",value:(u=(0,n.A)(h().mark((function e(t){var r,i,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new Uint8Array(t),!this.keyBuffer){e.next=7;break}for(i=!0,n=0;n<r.length&&i;)i=r[n]===this.keyBuffer[n],n++;if(!i){e.next=7;break}return e.abrupt("return");case 7:return this.keyBuffer=r,e.next=10,this.subtle.importKey("raw",t,{name:this.getSubtleAlgoName()},!1,["encrypt","decrypt"]);case 10:this.key=e.sent;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"encryptPadding",value:(r=(0,n.A)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,crypto.subtle.encrypt({name:"AES-CBC",iv:r},this.key,t);case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"decrypt",value:(t=(0,n.A)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.mode,e.next=0===e.t0?3:1===e.t0?4:5;break;case 3:return e.abrupt("return",this.subtle.decrypt({name:"AES-CBC",iv:r},this.key,t));case 4:return e.abrupt("return",this.subtle.decrypt({name:"AES-CTR",counter:r,length:64},this.key,t));case 5:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}],[{key:"isSupport",value:function(){var e=crypto.subtle||crypto.webkitSubtle;return"object"===(0,i.A)(e)}}]),e}()},null:()=>{},8507:(e,t,r)=>{"use strict";function i(e){for(var t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],r={},i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n=14;n--;){var a;r[t[n]]=null!==(a=i[n])&&void 0!==a?a:""}return{protocol:r.protocol,file:r.file,host:r.host,port:r.port,user:r.user,password:r.password,origin:"".concat(r.protocol,"://").concat(r.authority),pathname:r.path,search:"?".concat(r.query),hash:r.anchor?"#".concat(r.anchor):""}}r.d(t,{ll:()=>l,qg:()=>i}),r(73146);var n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s=/^(?=([^\/?#]*))\1([^]*)$/,o=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;function u(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}function h(e){var t=o.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null}function c(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")}function l(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=h(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=c(i.path),u(i)}var n=h(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=c(n.path),u(n)):t;var a=h(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=s.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var l={scheme:a.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(l.netLoc=a.netLoc,"/"!==n.path[0]))if(n.path){var d=a.path,f=d.substring(0,d.lastIndexOf("/")+1)+n.path;l.path=c(f)}else l.path=a.path,n.params||(l.params=a.params,n.query||(l.query=a.query));return null===l.path&&(l.path=r.alwaysNormalize?c(n.path):n.path),u(l)}},85079:(e,t,r)=>{var i=r(46438),n=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},63342:(e,t,r)=>{r(5882),e.exports=r(46438).Number.isInteger},11837:(e,t,r)=>{r(21489),e.exports=r(46438).Number.isNaN},19737:(e,t,r)=>{r(56477),e.exports=r(46438).Number.parseFloat},58886:(e,t,r)=>{r(15706),e.exports=r(46438).Number.parseInt},25194:(e,t,r)=>{var i=r(24401),n=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&n(e)===e}},5882:(e,t,r)=>{var i=r(88535);i(i.S,"Number",{isInteger:r(25194)})},21489:(e,t,r)=>{var i=r(88535);i(i.S,"Number",{isNaN:function(e){return e!=e}})},56477:(e,t,r)=>{var i=r(88535),n=r(49709);i(i.S+i.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},15706:(e,t,r)=>{var i=r(88535),n=r(15722);i(i.S+i.F*(Number.parseInt!=n),"Number",{parseInt:n})},73146:(e,t,r)=>{e.exports=r(85079)},43929:(e,t,r)=>{e.exports=r(63342)},7210:(e,t,r)=>{e.exports=r(11837)},99704:(e,t,r)=>{e.exports=r(19737)},17735:(e,t,r)=>{e.exports=r(58886)},27880:(e,t,r)=>{"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}r.d(t,{A:()=>i})},12812:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(37149);function n(e){if(i(e))return e}},92503:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(16560),n=r(54220);function a(e,t){var r=null==e?null:void 0!==i&&e[n]||e["@@iterator"];if(null!=r){var a,s,o,u,h=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=o.call(r)).done)&&(h.push(a.value),h.length!==t);c=!0);}catch(e){l=!0,s=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw s}}return h}}},82297:(e,t,r)=>{"use strict";function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,{A:()=>i})},6550:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(12812),n=r(92503),a=r(60773),s=r(82297);function o(e,t){return(0,i.A)(e)||(0,n.A)(e,t)||(0,a.A)(e,t)||(0,s.A)()}},60773:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(74385),n=r(27880);function a(e,t){if(e){if("string"==typeof e)return(0,n.A)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?i(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.A)(e,t):void 0}}}}]);