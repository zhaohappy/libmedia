(self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[]).push([[577],{58469:(e,t,i)=>{"use strict";i.d(t,{Bq:()=>h,Hm:()=>s,Ij:()=>f,XC:()=>d,_5:()=>c,f7:()=>u,uF:()=>n});var r=i(77231),a=i(37246);const n={1:"Main",2:"LC",3:"LC",4:"LC",5:"HE",6:"HE"},s={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,r.N_,r.N_,r.N_],l=[r.N_,1,2,3,4,5,6,7];function c(e){let t=r.N_,i=r.N_,a=r.N_;var n,s;return e.length>=2&&(t=e[0]>>3&31,i=null!==(n=o[(7&e[0])<<1|e[1]>>7])&&void 0!==n?n:48e3,a=null!==(s=l[e[1]>>3&15])&&void 0!==s?s:2),{profile:t,sampleRate:i,channels:a}}function d(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){const{profile:i,sampleRate:r,channels:a}=c(t);e.codecpar.profile=i,e.codecpar.sampleRate=r,e.codecpar.chLayout.nbChannels=a}}function f(e){const t=s[e.sampleRate],i=e.chLayout.nbChannels,r=new Uint8Array(2);return r[0]=(31&e.profile)<<3|(14&t)>>1,r[1]=(1&t)<<7|(15&i)<<3,r}function h(e){if(e.length<7)return-1;const t=e[0]<<4|e[1]>>4;if(4095!==t)return-1;const i=1&e[1],r=(192&e[2])>>>6,a=(60&e[2])>>>2,n=(1&e[2])<<2|(192&e[3])>>>6,s=(3&e[3])<<11|e[4]<<3|(224&e[5])>>>5,c=3&e[6];let d=1===i?7:9,f=s-d;return{syncWord:t,profile:r+1,sampleRate:o[a],channels:l[n],aacFrameLength:s,numberOfRawDataBlocksInFrame:c,headerLength:d,framePayloadLength:f}}function u(e,t){function i(){const e=t.readU(2);let i=0;for(let r=0;r<=e;r++)i<<=8,i|=t.readU(8);return i}t||(t=new a.A).appendBuffer(e);const r=t.getPointer(),n={syncWord:0,profile:0,sampleRate:0,channels:0,useSameStreamMux:!1,headerLength:0,framePayloadLength:0,muxLengthBytes:0},s=t.readU(11);if(695!==s)return-1;n.syncWord=s,n.muxLengthBytes=t.readU(13);const c=1===t.readU1();if(n.useSameStreamMux=c,!c){const e=1===t.readU1();if(e&&1===t.readU1())return-1;if(e&&i(),1!==t.readU1())return-1;if(0!==t.readU(6))return-1;if(0!==t.readU(4))return-1;if(0!==t.readU(3))return-1;let r=e?i():0;const a=t.readU(5);r-=5;const s=t.readU(4);r-=4;const c=t.readU(4);if(r-=4,t.readU(3),r-=3,r>0&&t.readU(r),0!==t.readU(3))return-1;if(t.readU(8),1===t.readU1())if(e)i();else{let e=0;for(;;){e<<=8;const i=1===t.readU1();if(e+=t.readU(8),!i)break}}1===t.readU1()&&t.readU(8),n.profile=a+1,n.sampleRate=o[s],n.channels=l[c]}let d=0;for(;;){const e=t.readU(8);if(d+=e,255!==e)break}return n.framePayloadLength=d,n.headerLength=t.getPointer()-r+(8===t.getBitLeft()?0:1),n}},90412:(e,t,i)=>{"use strict";i.d(t,{Ui:()=>u,XC:()=>h,Yj:()=>p,k9:()=>f,zk:()=>l});var r=i(63939),a=i(37246),n=i(11573),s=i(83314),o=i(97317);const l={0:"Main",1:"High",2:"Professional"},c=[{level:20,maxResolution:2359296},{level:21,maxResolution:4460544},{level:30,maxResolution:10653696},{level:31,maxResolution:17040384},{level:40,maxResolution:21233664},{level:41,maxResolution:21233664},{level:50,maxResolution:35651584},{level:51,maxResolution:35651584},{level:52,maxResolution:35651584},{level:53,maxResolution:35651584},{level:60,maxResolution:142606336},{level:61,maxResolution:142606336},{level:62,maxResolution:142606336},{level:63,maxResolution:142606336}],d=[20,21,22,23,30,31,32,33,40,41,42,43,50,51,52,53,60,61,62,63,70,71,72,73];function f(e,t,i){const r=e*t;for(const e of c)if(r<=e.maxResolution)return e.level}function h(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=4){const i=u(t);e.codecpar.profile=i.profile,e.codecpar.level=i.level}}function u(e){const t=new a.A(e.length);t.appendBuffer(e),t.readU1(),t.readU(7);const i=t.readU(3),r=t.readU(5),n=t.readU1();let s=t.readU1()?10:8;return t.readU1()&&(s=12),{profile:i,level:r,tier:n,bitDepth:s,monochrome:t.readU1(),chromaSubsamplingX:t.readU1(),chromaSubsamplingY:t.readU1(),chromaSamplePosition:t.readU(2)}}function p(e,t){const i=new s.A(4);i.writeU1(1),i.writeU(7,1);const l=function(e){const t=new a.A;t.appendBuffer(e);const i=[];for(;t.remainingLength();){const r=t.getPointer();t.readU1(),t.readU(4);const a=t.readU1(),s=t.readU1();t.readU1(),a&&t.readU(8);const o=s?n.v(t):e.length-1-a,l=t.getPointer()-r;i.push(e.subarray(r,r+l+o)),t.skip(8*o)}return i}(t).find((e=>1==(e[0]>>>3&15)));if(l){const e=function(e){const t=new a.A(e.length);t.appendBuffer(e),t.readU1(),t.readU(4);const i=t.readU1(),r=t.readU1();t.readU1(),i&&t.readU(8),r&&n.v(t);const s=n.f(t,3),o=(n.f(t,1),n.f(t,1));let l=0,c=0,f=[0],h=[0],u=[0],p=[0],m=[0],g=[0],U=0,w=[0],b=[0],x=[0];if(o)h[0]=n.f(t,5);else{l=n.f(t,1),l?(n.f(t,32),n.f(t,32),n.f(t,1)&&n.d(t),n.f(t,1)&&(U=n.f(t,5),n.f(t,32),n.f(t,5),n.f(t,5))):c=0;let e=n.f(t,1),i=n.f(t,5);for(let r=0;r<=i;r++){if(f[r]=n.f(t,12),h[r]=n.f(t,5),h[r]>7?u[r]=n.f(t,1):u[r]=0,c){if(p[r]=n.f(t,1),p[r]){let e=U+1;w[r]=n.f(t,e),b[r]=n.f(t,e),x[r]=n.f(t,1)}}else p[r]=0;e&&(m[r]=n.f(t,1),m[r]&&(g[r]=n.f(t,4)))}}let y=n.f(t,4),A=n.f(t,4),I=y+1,v=n.f(t,I);I=A+1;let _=n.f(t,I),R=0,B=0,P=0;R=o?0:n.f(t,1),R&&(n.f(t,4),n.f(t,3)),n.f(t,1),n.f(t,1),n.f(t,1);let N=0,S=0,k=0,L=0,M=0,C=0,D=2,V=2,E=0;o||(n.f(t,1),n.f(t,1),n.f(t,1),n.f(t,1),L=n.f(t,1),L?(M=n.f(t,1),C=n.f(t,1)):(M=0,C=0),D=n.f(t,1)?2:n.f(t,1),D>0?n.f(t,1)?2:n.f(t,1):2,L&&n.f(t,3)),n.f(t,1),n.f(t,1),n.f(t,1);let z=n.f(t,1),T=0,F=0,O=0;2==s&&z?(T=n.f(t,1),F=T?12:10):s<=2&&(F=z?10:8),O=1==s?0:n.f(t,1);let G=0,X=0,W=0;n.f(t,1)?(G=n.f(t,8),X=n.f(t,8),W=n.f(t,8)):(G=2,X=2,W=2);let H=0,Y=0,$=0,K=0,Q=0;return O?(H=n.f(t,1),Y=1,$=1,K=0,Q=0):1==G&&13==X&&0==W?(H=1,Y=0,$=0,Q=n.f(t,1)):(H=n.f(t,1),0==s?(Y=1,$=1):1==s?(Y=0,$=0):12==F?(Y=n.f(t,1),$=Y?n.f(t,1):0):(Y=1,$=0),Y&&$&&(K=n.f(t,2)),Q=n.f(t,1)),n.f(t,1),{width:v+1,height:_+1,profile:s,level:d[h[0]],tier:u[0],bitDepth:F,monoChrome:O,colorRange:H,colorPrimaries:G,transferCharacteristics:X,matrixCoefficients:W,subsamplingX:Y,subsamplingY:$,chromaSamplePosition:K}}(l);i.writeU(3,e.profile),i.writeU(5,e.level),i.writeU(1,e.tier),i.writeU(1,e.bitDepth>8?1:0),i.writeU(1,12===e.bitDepth?1:0),i.writeU(1,e.monoChrome),i.writeU(1,e.subsamplingX),i.writeU(1,e.subsamplingY),i.writeU(1,e.chromaSamplePosition)}else{const t=o.g[r.f[15](e+28)];i.writeU(3,r.f[15](e+48)),i.writeU(5,r.f[15](e+52)),i.writeU(1,0),i.writeU(1,t.comp[0].depth>8?1:0),i.writeU(1,12===t.comp[0].depth?1:0),i.writeU(1,0),i.writeU(1,1),i.writeU(1,1),i.writeU(1,0)}return i.writeU(8,0),i.getBuffer()}},20620:(e,t,i)=>{"use strict";i.d(t,{Jk:()=>R,KD:()=>N,MB:()=>y,OD:()=>_,S1:()=>I,XC:()=>P,ci:()=>B,k9:()=>x,oT:()=>v,tZ:()=>w,wf:()=>S});var r=i(63939),a=i(50932),n=i(72739),s=i(729),o=i(31865),l=i(37246),c=i(4624),d=i(14686),f=i(71517),h=i(60264),u=i(37837),p=i(23991),m=i(39381),g="src/avformat/codecs/h264.ts";const U=3,w={66:"Constrained Baseline",77:"Main",100:"High",110:"High10",122:"High422",244:"High444"},b=[{level:10,maxResolution:25344,maxFrameRate:15},{level:11,maxResolution:25344,maxFrameRate:30},{level:12,maxResolution:101376,maxFrameRate:30},{level:13,maxResolution:101376,maxFrameRate:30},{level:20,maxResolution:101376,maxFrameRate:30},{level:21,maxResolution:202752,maxFrameRate:30},{level:22,maxResolution:414720,maxFrameRate:30},{level:30,maxResolution:414720,maxFrameRate:30},{level:31,maxResolution:921600,maxFrameRate:30},{level:32,maxResolution:1310720,maxFrameRate:60},{level:40,maxResolution:2097152,maxFrameRate:30},{level:41,maxResolution:2097152,maxFrameRate:60},{level:42,maxResolution:2228224,maxFrameRate:60},{level:50,maxResolution:8912896,maxFrameRate:30},{level:51,maxResolution:8912896,maxFrameRate:60},{level:52,maxResolution:8912896,maxFrameRate:120},{level:60,maxResolution:35651584,maxFrameRate:30},{level:61,maxResolution:35651584,maxFrameRate:60},{level:62,maxResolution:35651584,maxFrameRate:120}];function x(e,t,i){const r=e*t;for(const e of b)if(r<=e.maxResolution&&i<=e.maxFrameRate)return e.level}function y(e){const t=new o.A(e);t.skip(5);const i=[],r=[],a=[],n=31&t.readUint8();for(let e=0;e<n;e++){const e=t.readUint16();i.push(t.readBuffer(e))}const s=t.readUint8();for(let e=0;e<s;e++){const e=t.readUint16();r.push(t.readBuffer(e))}if(t.remainingSize()>4){t.skip(3);const e=t.readUint8();if(e>0)for(let i=0;i<e;i++){const e=t.readUint16();a.push(t.readBuffer(e))}}return{spss:i,ppss:r,spsExts:a}}function A(e,t,i=[]){e.length>32&&(c.R8(`h264 metadata's sps max length is 32, but get ${e.length}`,g,210),e=e.slice(0,32)),e.length>256&&(c.R8(`h264 metadata's pps max length is 256, but get ${e.length}`,g,214),e=e.slice(0,256));let r=7;r=e.reduce(((e,t)=>e+2+t.length),r),r=t.reduce(((e,t)=>e+2+t.length),r);const a=e[0],o=S(a);66!==o.profile&&77!==o.profile&&88!==o.profile&&(r+=4,i.length&&(r=i.reduce(((e,t)=>e+2+t.length),r)));const l=new Uint8Array(r),d=new s.A(l);return d.writeUint8(1),d.writeUint8(a[1]),d.writeUint8(a[2]),d.writeUint8(a[3]),d.writeUint8(252|U),d.writeUint8(224|31&e.length),n.__(e,(e=>{d.writeUint16(e.length),d.writeBuffer(e)})),d.writeUint8(t.length),n.__(t,(e=>{d.writeUint16(e.length),d.writeBuffer(e)})),66!==o.profile&&77!==o.profile&&88!==o.profile&&(d.writeUint8(252|o.chromaFormatIdc),d.writeUint8(248|o.bitDepthLumaMinus8),d.writeUint8(248|o.bitDepthChromaMinus8),i.length&&n.__(i,(e=>{d.writeUint16(e.length),d.writeBuffer(e)}))),l}function I(e){let t=(0,h.py)(e);if(t.length>1){const e=[],i=[],r=[];if(t.forEach((t=>{const a=31&t[0];7===a?e.push(t):8===a?i.push(t):13===a&&r.push(t)})),e.length&&i.length)return A(e,i,r)}}function v(e){let t,i=(0,h.py)(e),r=!1;if(i.length>1){const e=[],r=[],a=[];i.forEach((t=>{const i=31&t[0];7===i?e.push(t):8===i?r.push(t):13===i&&a.push(t)})),e.length&&r.length&&(t=A(e,r,a)),i=i.filter((e=>{const t=31&e[0];return 9!==t&&8!==t&&7!==t&&13!==t}))}const a=i.reduce(((e,t)=>e+U+1+t.length),0),o=(0,u.sY)(a),l=(0,d.s3)(o,a),c=new s.A(l);return n.__(i,(e=>{3===U?c.writeUint32(e.length):2===U?c.writeUint24(e.length):1===U?c.writeUint16(e.length):c.writeUint8(e.length),c.writeBuffer(e.subarray(0)),5==(31&e[0])&&(r=!0)})),{bufferPointer:o,length:a,key:r,extradata:t}}function _(e,t){const i=t?3&t[4]:U;let r=[],a=[],l=[],c=!1;if(t){const e=y(t);r=e.spss,a=e.ppss,l=e.spsExts,c=!0}const f=[],h=[],p=new o.A(e);for(;p.remainingSize()>0;){let t=0;t=3===i?p.readUint32():2===i?p.readUint24():1===i?p.readUint16():p.readUint8();const r=e.subarray(Number(BigInt.asIntN(32,p.getPos())),Number(BigInt.asIntN(32,p.getPos()))+t);p.skip(t);const a=31&r[0];6===a?h.push(r):9!==a&&f.push(r)}let m=r.reduce(((e,t)=>e+4+t.length),0);m=a.reduce(((e,t)=>e+4+t.length),m),m=l.reduce(((e,t)=>e+4+t.length),m),m=h.reduce(((e,t)=>e+4+t.length),m),m=f.reduce(((e,t,i)=>e+(i?3:4)+t.length),m);const g=(0,u.sY)(m+6),w=new s.A((0,d.s3)(g,m+6));return w.writeUint8(0),w.writeUint8(0),w.writeUint8(0),w.writeUint8(1),w.writeUint8(9),w.writeUint8(240),n.__(h,(e=>{w.writeUint8(0),w.writeUint8(0),w.writeUint8(0),w.writeUint8(1),w.writeBuffer(e)})),n.__(r,(e=>{w.writeUint8(0),w.writeUint8(0),w.writeUint8(0),w.writeUint8(1),w.writeBuffer(e)})),n.__(a,(e=>{w.writeUint8(0),w.writeUint8(0),w.writeUint8(0),w.writeUint8(1),w.writeBuffer(e)})),n.__(l,(e=>{w.writeUint8(0),w.writeUint8(0),w.writeUint8(0),w.writeUint8(1),w.writeBuffer(e)})),n.__(f,((e,t)=>{w.writeUint8(0),w.writeUint8(0),t||w.writeUint8(0),w.writeUint8(1),w.writeBuffer(e),5==(31&e[0])&&(c=!0)})),{bufferPointer:g,length:m+6,key:c}}function R(e,t){var i;if(!(1&r.f[15](e+36)))return;const a=(0,f.iI)(e);if((0,h.Bs)(a))return;const n=null!==(i=t.metadata.naluLengthSizeMinusOne)&&void 0!==i?i:U;let s=[],l=[],c=[],p=[];const m=new o.A(a);for(;m.remainingSize()>0;){let e=0;e=3===n?m.readUint32():2===n?m.readUint24():1===n?m.readUint16():m.readUint8();const t=a.subarray(Number(BigInt.asIntN(32,m.getPos())),Number(BigInt.asIntN(32,m.getPos()))+e);m.skip(e);const i=31&t[0];7===i?s.push(t):8===i?l.push(t):13===i?c.push(t):p.push(t)}if(s.length||l.length){const t=A(s,l,c),i=(0,u.sY)(t.length);(0,d.lW)(i,t.length,t),(0,f.Ow)(e,1,i,t.length)}}function B(e,t=!1){if(!(1&r.f[15](e+36)||t))return;const i=(0,f.iI)(e);if(!(0,h.Bs)(i))return;let n=(0,h.py)(i);if(n.length>1){const t=[],i=[],s=[];if(n.forEach((e=>{const r=31&e[0];7===r?t.push(e):8===r?i.push(e):13===r&&s.push(e)})),t.length&&i.length){const n=A(t,i,s),o=(0,u.sY)(n.length);(0,d.lW)(o,n.length,n),(0,f.Ow)(e,1,o,n.length),a.M[15](e+36,1|r.f[15](e+36))}}}function P(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[4];const{spss:i}=y(t);if(i.length){const{profile:t,level:r,width:a,height:n}=S(i[0]);e.codecpar.profile=t,e.codecpar.level=r,e.codecpar.width=a,e.codecpar.height=n}}}function N(e,t=4){if(2===r.f[15](e+80))return(0,h.py)((0,d.s3)(r.f[20](e+24),r.f[15](e+28))).some((e=>5==(31&e[0])));{const i=r.f[15](e+28);let a=0;for(;a<i-t;){if(5==(31&m.r8(r.f[20](e+24)+(a+t))))return!0;a+=4===t?m.Sg(r.f[20](e+24)+a):3===t?m.ht(r.f[20](e+24)+a):2===t?m.yd(r.f[20](e+24)+a):m.r8(r.f[20](e+24)+a),a+=t}return!1}}function S(e){if(!e||e.length<3)return;let t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);const i=(0,h.BN)(e.subarray(t)),r=new l.A(i.length);r.appendBuffer(i),r.readU1(),r.readU(2),r.readU(5);const a=r.readU(8);r.readU1(),r.readU1(),r.readU1(),r.readU1(),r.readU1(),r.readU1(),r.readU(2);const n=r.readU(8);p.xb(r);let s=1,o=0,c=0;if((100==a||110==a||122==a||244==a||44==a||83==a||86==a||118==a||128==a||138==a||139==a||134==a||135==a)&&(s=p.xb(r),3===s&&r.readU1(),o=p.xb(r),c=p.xb(r),r.readU1(),r.readU1())){const e=new Array(8);for(let t=0;t<(3!=s?8:12);t++)e[t]=r.readU1()}const d=p.xb(r),f=p.xb(r);let u=0,m=0;if(0===f)u=p.xb(r);else if(1===f){m=r.readU1(),p.$x(r),p.$x(r);const e=p.xb(r);for(let t=0;t<e;t++)p.$x(r)}p.xb(r),r.readU1();const g=p.xb(r),U=p.xb(r),w=r.readU1();let b=16*(g+1),x=(2-w)*(U+1)*16;w||r.readU1(),r.readU1();const y=r.readU1();if(y){let e=1,t=2-y;1===s?(e=2,t=2*(2-y)):2===y&&(e=2,t=2-y),b-=e*(p.xb(r)+p.xb(r)),x-=t*(p.xb(r)+p.xb(r))}return{profile:a,level:n,width:b,height:x,chromaFormatIdc:s,bitDepthLumaMinus8:o,bitDepthChromaMinus8:c,frameMbsOnlyFlag:w,picOrderCntType:f,log2MaxPicOrderCntLsbMinus4:u,deltaPicOrderAlwaysZeroFlag:m,log2MaxFrameNumMinus4:d}}},53e3:(e,t,i)=>{"use strict";i.d(t,{HL:()=>b,Jk:()=>v,KD:()=>B,OD:()=>I,S1:()=>y,XC:()=>R,ZU:()=>N,ci:()=>_,dT:()=>m,k9:()=>U,oT:()=>A,wf:()=>P});var r=i(63939),a=i(50932),n=i(72739),s=i(729),o=i(31865),l=i(37246),c=i(14686),d=i(60264),f=i(71517),h=i(37837),u=i(23991),p=i(39381);const m={1:"Main",2:"Main10",3:"MainStillPicture",4:"Main444"},g=[{level:10,maxLumaSamplesPerSecond:552960,maxLumaPictureSize:36864,maxBitRate:{main:128,main10:150}},{level:20,maxLumaSamplesPerSecond:3686400,maxLumaPictureSize:122880,maxBitRate:{main:1500,main10:1875}},{level:21,maxLumaSamplesPerSecond:7372800,maxLumaPictureSize:245760,maxBitRate:{main:3e3,main10:3750}},{level:30,maxLumaSamplesPerSecond:16588800,maxLumaPictureSize:552960,maxBitRate:{main:6e3,main10:7500}},{level:31,maxLumaSamplesPerSecond:33177600,maxLumaPictureSize:983040,maxBitRate:{main:1e4,main10:12500}},{level:40,maxLumaSamplesPerSecond:66846720,maxLumaPictureSize:2228224,maxBitRate:{main:12e3,main10:15e3}},{level:41,maxLumaSamplesPerSecond:133693440,maxLumaPictureSize:2228224,maxBitRate:{main:2e4,main10:25e3}},{level:50,maxLumaSamplesPerSecond:267386880,maxLumaPictureSize:8912896,maxBitRate:{main:25e3,main10:4e4}},{level:51,maxLumaSamplesPerSecond:534773760,maxLumaPictureSize:8912896,maxBitRate:{main:4e4,main10:6e4}},{level:52,maxLumaSamplesPerSecond:1069547520,maxLumaPictureSize:35651584,maxBitRate:{main:6e4,main10:1e5}},{level:60,maxLumaSamplesPerSecond:1069547520,maxLumaPictureSize:35651584,maxBitRate:{main:6e4,main10:1e5}},{level:61,maxLumaSamplesPerSecond:2139095040,maxLumaPictureSize:89128960,maxBitRate:{main:12e4,main10:24e4}},{level:62,maxLumaSamplesPerSecond:4278190080,maxLumaPictureSize:356515840,maxBitRate:{main:24e4,main10:48e4}}];function U(e,t,i,r,a){a/=1e3;const n=1===e?"main":"main10",s=t*i*r;for(const e of g)if(s<=e.maxLumaSamplesPerSecond&&t*i<=e.maxLumaPictureSize&&a<=e.maxBitRate[n])return e.level}const w=3;function b(e){const t=new o.A(e,!0);t.skip(22);let i=[],r=[],a=[];const n=t.readUint8();for(let e=0;e<n;e++){const e=63&t.readUint8(),n=t.readUint16(),s=[];for(let e=0;e<n;e++){const e=t.readUint16();s.push(t.readBuffer(e))}32===e?i=s:33===e?r=s:34===e&&(a=s)}return{vpss:i,spss:r,ppss:a}}function x(e,t,i){const r=t[0];let a=23;e.length&&(a+=3,a=e.reduce(((e,t)=>e+2+t.length),a)),t.length&&(a+=3,a=t.reduce(((e,t)=>e+2+t.length),a)),i.length&&(a+=3,a=i.reduce(((e,t)=>e+2+t.length),a));const o=new Uint8Array(a),l=new s.A(o,!0),c=P(r);l.writeUint8(1),l.writeUint8(r[1]),l.writeUint8(r[2]),l.writeUint8(r[3]),l.writeUint8(r[4]),l.writeUint8(r[5]),l.writeUint8(r[6]),l.writeUint8(r[7]),l.writeUint8(r[8]),l.writeUint8(r[9]),l.writeUint8(r[10]),l.writeUint8(r[11]),l.writeUint8(c.level),l.writeUint8(1020),l.writeUint8(0),l.writeUint8(16320),l.writeUint8(16320|c.chroma_format_idc),l.writeUint8(8160|c.bit_depth_luma_minus8),l.writeUint8(8160|c.bit_depth_chroma_minus8),l.writeUint16(0),l.writeUint8(8|(1&r[0])<<2|w);let d=0;return e.length&&d++,t.length&&d++,i.length&&d++,l.writeUint8(d),e.length&&(l.writeUint8(160),l.writeUint16(e.length),n.__(e,(e=>{l.writeUint16(e.length),l.writeBuffer(e)}))),t.length&&(l.writeUint8(161),l.writeUint16(t.length),n.__(t,(e=>{l.writeUint16(e.length),l.writeBuffer(e)}))),i.length&&(l.writeUint8(162),l.writeUint16(i.length),n.__(i,(e=>{l.writeUint16(e.length),l.writeBuffer(e)}))),o}function y(e){let t=(0,d.py)(e);if(t.length>=2){const e=[],i=[],r=[];if(t.forEach((t=>{const a=t[0]>>>1&63;32===a?e.push(t):33===a?i.push(t):34===a&&r.push(t)})),i.length&&r.length)return x(e,i,r)}}function A(e){let t,i=!1,r=(0,d.py)(e);if(r.length>=2){const e=[],i=[],a=[];r.forEach((t=>{const r=t[0]>>>1&63;32===r?e.push(t):33===r?i.push(t):34===r&&a.push(t)})),i.length&&a.length&&(t=x(e,i,a),r=r.filter((e=>{const t=e[0]>>>1&63;return 32!==t&&33!==t&&34!==t&&35!==t})))}const a=r.reduce(((e,t)=>e+w+1+t.length),0),o=(0,h.sY)(a),l=(0,c.s3)(o,a),f=new s.A(l);return n.__(r,(e=>{3===w?f.writeUint32(e.length):2===w?f.writeUint24(e.length):1===w?f.writeUint16(e.length):f.writeUint8(e.length),f.writeBuffer(e.subarray(0));const t=e[0]>>>1&63;19!==t&&20!==t&&21!==t||(i=!0)})),{bufferPointer:o,length:a,extradata:t,key:i}}function I(e,t){const i=t?3&t[21]:w;let r=[],a=[],l=[],d=!1;if(t){const e=b(t);r=e.vpss,a=e.spss,l=e.ppss,d=!0}const f=[],u=new o.A(e);for(;u.remainingSize()>0;){let e=0;e=3===i?u.readUint32():2===i?u.readUint24():1===i?u.readUint16():u.readUint8(),f.push(u.readBuffer(e))}let p=r.reduce(((e,t)=>e+4+t.length),0);p=a.reduce(((e,t)=>e+4+t.length),p),p=l.reduce(((e,t)=>e+4+t.length),p),p=f.reduce(((e,t,i)=>e+(i?3:4)+t.length),p);const m=(0,h.sY)(p+7),g=(0,c.s3)(m,p+7),U=new s.A(g);return U.writeUint8(0),U.writeUint8(0),U.writeUint8(0),U.writeUint8(1),U.writeUint8(70),U.writeUint8(0),U.writeUint8(240),n.__(r,(e=>{U.writeUint8(0),U.writeUint8(0),U.writeUint8(0),U.writeUint8(1),U.writeBuffer(e)})),n.__(a,(e=>{U.writeUint8(0),U.writeUint8(0),U.writeUint8(0),U.writeUint8(1),U.writeBuffer(e)})),n.__(l,(e=>{U.writeUint8(0),U.writeUint8(0),U.writeUint8(0),U.writeUint8(1),U.writeBuffer(e)})),n.__(f,((e,t)=>{U.writeUint8(0),U.writeUint8(0),t||U.writeUint8(0),U.writeUint8(1),U.writeBuffer(e);const i=e[0]>>>1&63;19!==i&&20!==i&&21!==i||(d=!0)})),{bufferPointer:m,length:p+7,key:d}}function v(e,t){var i;if(!(1&r.f[15](e+36)))return;const a=(0,f.iI)(e);if((0,d.Bs)(a))return;const n=null!==(i=t.metadata.naluLengthSizeMinusOne)&&void 0!==i?i:w;let s=[],l=[],u=[];const p=new o.A(a);for(;p.remainingSize()>0;){let e=0;e=3===n?p.readUint32():2===n?p.readUint24():1===n?p.readUint16():p.readUint8();const t=a.subarray(Number(BigInt.asIntN(32,p.getPos())),Number(BigInt.asIntN(32,p.getPos()))+e);p.skip(e);const i=t[0]>>>1&63;33===i?l.push(t):34===i?u.push(t):32===i&&s.push(t)}if(l.length||u.length||s.length){const t=x(s,l,u),i=(0,h.sY)(t.length);(0,c.lW)(i,t.length,t),(0,f.Ow)(e,1,i,t.length)}}function _(e,t=!1){if(!(1&r.f[15](e+36)||t))return;const i=(0,f.iI)(e);if(!(0,d.Bs)(i))return;let n=(0,d.py)(i);if(n.length>2){const t=[],i=[],s=[];if(n.forEach((e=>{const r=e[0]>>>1&63;32===r?t.push(e):33===r?i.push(e):34===r&&s.push(e)})),t.length&&i.length&&s.length){const n=x(t,i,s),o=(0,h.sY)(n.length);(0,c.lW)(o,n.length,n),(0,f.Ow)(e,1,o,n.length),a.M[15](e+36,1|r.f[15](e+36))}}}function R(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[21];const{spss:i}=b(t);if(i.length){const{profile:t,level:r,width:a,height:n}=P(i[0]);e.codecpar.profile=t,e.codecpar.level=r,e.codecpar.width=a,e.codecpar.height=n}}}function B(e,t=4){if(2===r.f[15](e+80))return(0,d.py)((0,c.s3)(r.f[20](e+24),r.f[15](e+28))).some((e=>{const t=e[0]>>>1&63;return 20===t||19===t}));{const i=r.f[15](e+28);let a=0;for(;a<i-t;){const i=p.r8(r.f[20](e+24)+(a+t))>>>1&63;if(20===i||19===i)return!0;a+=4===t?p.Sg(r.f[20](e+24)+a):3===t?p.ht(r.f[20](e+24)+a):2===t?p.yd(r.f[20](e+24)+a):p.r8(r.f[20](e+24)+a),a+=t}return!1}}function P(e){if(!e||e.length<3)return;let t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);let i=0,r=0,a=0,n=0,s=0,o=0,c=1,f=0,h=0,p=0,m=0;const g=(0,d.BN)(e.subarray(t)),U=new l.A(g.length);U.appendBuffer(g),U.readU1(),U.readU(6),U.readU(6),U.readU(3),U.readU(4);const w=U.readU(3);U.readU1();let b=0;if(w<=6){f=U.readU(2),h=U.readU1(),i=U.readU(5),p=U.readU(32),m=U.readU(48),r=U.readU(8);const e=new Array(6),t=new Array(6);for(let i=0;i<w;i++)e[i]=U.readU1(),t[i]=U.readU1();if(w>0)for(let e=w;e<8;e++)U.readU(2);for(let i=0;i<w;i++)e[i]&&(U.readU(2),U.readU(1),U.readU(5),U.readU(32),U.readU(1),U.readU(1),U.readU(1),U.readU(1),U.readU(44)),t[i]&&U.readU(8);u.xb(U),c=u.xb(U),3===c&&(b=U.readU(1)),a=u.xb(U),n=u.xb(U);let l=0,d=0,g=0,x=0;U.readU1()&&(l=u.xb(U),d=u.xb(U),g=u.xb(U),x=u.xb(U)),s=u.xb(U),o=u.xb(U);let y=2,A=2;0===c?y=A=0:2===c?(y=2,A=1):3===c&&(y=A=1),a-=y*(1<<s+1)*(l+d),n-=A*(1<<s+1)*(g+x)}const x=u.xb(U)+4;for(let e=U.readU1()?0:w;e<w+1;e++)u.xb(U),u.xb(U),u.xb(U);const y=u.xb(U)+3,A=u.xb(U),I=u.xb(U)+2,v=u.xb(U),_=y+A,R=y-1,B=a+(1<<_)-1>>_,P=n+(1<<_)-1>>_;return{profile:i,level:r,width:a,height:n,chroma_format_idc:c,bit_depth_luma_minus8:s,bit_depth_chroma_minus8:o,general_profile_space:f,general_tier_flag:h,general_profile_compatibility_flags:p,constraint_flags:m,separate_colour_plane_flag:b,log2_min_cb_size:y,log2_diff_max_min_coding_block_size:A,log2_min_tb_size:I,log2_diff_max_min_transform_block_size:v,log2_max_trafo_size:v+I,log2_ctb_size:_,log2_min_pu_size:R,ctb_width:B,ctb_height:P,ctb_size:B*P,min_cb_width:a>>y,min_cb_height:n>>y,min_tb_width:a>>I,min_tb_height:n>>I,min_pu_width:a>>R,min_pu_height:n>>R,log2_max_poc_lsb:x}}function N(e){if(!e||e.length<3)return;let t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);const i=(0,d.BN)(e.subarray(t)),r=new l.A(i.length);return r.appendBuffer(i),{pps_pic_parameter_set_id:u.xb(r),pps_seq_parameter_set_id:u.xb(r),dependent_slice_segment_flag:r.readU1(),output_flag_present_flag:r.readU1(),num_extra_slice_header_bits:r.readU(3)}}},89088:(e,t,i)=>{"use strict";i.d(t,{Au:()=>w,He:()=>b,XC:()=>x,Y2:()=>m,hG:()=>g,oz:()=>U});var r=i(77231);const a=[44100,48e3,32e3,0],n=[22050,24e3,16e3,0],s=[11025,12e3,8e3,0],o=[0,1152,1152,384],l=[0,576,1152,384],c=[0,576,1152,384],d=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],f=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],h=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],u=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],p=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function m(e,t){switch(e){case 0:return s[t];case 2:return n[t];case 3:return a[t]}return r.N_}function g(e,t){switch(e){case 0:return c[t];case 2:return l[t];case 3:return o[t]}return r.N_}function U(e,t,i){switch(t){case 1:switch(e){case 0:case 2:return p[i];case 3:return h[i]}break;case 2:switch(e){case 0:case 2:return p[i];case 3:return f[i]}case 3:switch(e){case 0:case 2:return u[i];case 3:return d[i]}}return r.N_}function w(e){switch(e){case 1:return 34;case 2:return 33;case 3:return 32}return r.N_}const b={32:"Layer1",33:"Layer2",34:"Layer3"};function x(e,t){if(t&&t.length>=4){const i=t[1]>>>3&3,r=(6&t[1])>>1,a=(12&t[2])>>>2,n=3&~(t[3]>>>6)?2:1,s=w(r),o=m(i,a);e.codecpar.profile=s,e.codecpar.sampleRate=o,e.codecpar.chLayout.nbChannels=n}}},65451:(e,t,i)=>{"use strict";i.d(t,{Ij:()=>c,XC:()=>l,kt:()=>o});var r=i(31865),a=i(729),n=i(44328);const s=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function o(e){let t=0,i=0,r=0;if(e.length<1)return 0;switch(t=e[0],i=s[t>>3],3&t){case 0:r=1;break;case 1:case 2:r=2;break;case 3:if(e.length<2)return 0;r=63&e[1]}return r*i}function l(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=19){const i=new r.A(t,!1);i.skip(9),e.codecpar.chLayout.nbChannels=i.readUint8(),e.codecpar.initialPadding=i.readUint16(),e.codecpar.sampleRate=i.readUint32(),e.codecpar.seekPreroll=Number((0,n.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function c(e){const t=new Uint8Array(19),i=new a.A(t,!1);return i.writeString("OpusHead"),i.writeUint8(1),i.writeUint8(e.chLayout.nbChannels),i.writeUint16(e.initialPadding),i.writeUint32(e.sampleRate),t}},14392:(e,t,i)=>{"use strict";i.d(t,{U:()=>n,X:()=>a});var r=i(37246);function a(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){const i=n(t);e.codecpar.profile=i.profile,e.codecpar.level=i.level}}function n(e){const t=new r.A(e.length);return t.appendBuffer(e.subarray(4)),{profile:t.readU(8),level:t.readU(8),bitDepth:t.readU(4),chromaSubsampling:t.readU(3),fullRangeFlag:t.readU1(),colorPrimaries:t.readU(8),colorTrc:t.readU(8),colorSpace:t.readU(8)}}},58919:(e,t,i)=>{"use strict";i.d(t,{Ui:()=>m,XC:()=>p,Yj:()=>g,k9:()=>u,wN:()=>f});var r=i(63939),a=i(9599),n=i(29170),s=i(37246),o=i(77231),l=i(97317),c=i(44328),d=i(729);const f={0:"Profile0",1:"Profile1",2:"Profile2",3:"Profile3"},h=[{level:10,maxResolution:196608,maxFrameRate:30},{level:11,maxResolution:196608,maxFrameRate:60},{level:20,maxResolution:518400,maxFrameRate:30},{level:21,maxResolution:518400,maxFrameRate:60},{level:30,maxResolution:2073600,maxFrameRate:30},{level:31,maxResolution:2073600,maxFrameRate:60},{level:40,maxResolution:3686400,maxFrameRate:30},{level:41,maxResolution:3686400,maxFrameRate:60},{level:50,maxResolution:8294400,maxFrameRate:30},{level:51,maxResolution:8294400,maxFrameRate:60},{level:60,maxResolution:8847360,maxFrameRate:30},{level:61,maxResolution:8847360,maxFrameRate:60},{level:70,maxResolution:35389440,maxFrameRate:30},{level:71,maxResolution:35389440,maxFrameRate:60}];function u(e,t,i){const r=e*t;for(const e of h)if(r<=e.maxResolution&&i<=e.maxFrameRate)return e.level}function p(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){const i=m(t);e.codecpar.profile=i.profile,e.codecpar.level=i.level}}function m(e){const t=new s.A(e.length);return t.appendBuffer(e),{profile:t.readU(8),level:t.readU(8),bitDepth:t.readU(4),chromaSubsampling:t.readU(3),fullRangeFlag:t.readU1(),colorPrimaries:t.readU(8),colorTrc:t.readU(8),colorSpace:t.readU(8)}}function g(e){const t=new d.A(new Uint8Array(8)),i=function(e){let t=r.f[15](e+48),i=r.f[15](e+52);i===o.N_&&(i=u(r.f[15](e+56),r.f[15](e+60),(0,c.lb)((0,n.A)(e+72,a.P))));const s=l.g[r.f[15](e+28)];let d=r.f[15](e+40),f=1;s&&(d=s.comp[0].depth,1===s.log2ChromaW&&1===s.log2ChromaH?1===r.f[15](e+100)&&(f=0):1===s.log2ChromaW&&0===s.log2ChromaH?f=2:0===s.log2ChromaW&&0===s.log2ChromaH&&(f=3));const h=2===r.f[15](e+84)?1:0;return t===o.N_&&d&&(t=0==f||1==f?8==d?0:2:8==d?1:3),{profile:t,level:i,bitDepth:d,chromaSubsampling:f,fullRange:h}}(e);return t.writeUint8(i.profile),t.writeUint8(i.level),t.writeUint8(i.bitDepth<<4|i.chromaSubsampling<<1|i.fullRange),t.writeUint8(r.f[15](e+88)),t.writeUint8(r.f[15](e+92)),t.writeUint8(r.f[15](e+96)),t.writeUint16(0),t.getWroteBuffer()}},55611:(e,t,i)=>{"use strict";i.d(t,{Jk:()=>A,KD:()=>R,OD:()=>y,QA:()=>v,Ui:()=>P,XC:()=>_,ci:()=>I,oT:()=>x,wf:()=>B});var r=i(63939),a=i(50932),n=i(72739),s=i(729),o=i(31865),l=i(37246),c=i(14686),d=i(60264),f=i(71517),h=i(37837),u=i(23991),p=i(83314),m=i(39381);const g=3;function U(e){const t=e.readU(9),i=e.readU(3),r=e.readU(2),a=e.readU(2),n=e.readU(3);e.readU(5),e.readU(2);const s=e.readU(6),o=e.readU(7),l=e.readU(1),c=e.readU(8),d=e.readU(1),f=e.readU(1),h=[],u=[];if(s){for(let t=0;t<s-1;t++)h[t]=e.readU(8);h[s-1]=e.readU(6)}else e.readU(6);if(i>1){let t=0;for(let r=i-2;r>=0;--r)t|=e.readU(1)<<r;for(let t=i;t<=8&&i>1;++t)e.readU(1);for(let r=i-2;r>=0;--r)t&1<<r&&(u[r]=e.readU(8))}const p=e.readU(8),m=[];if(p)for(let t=0;t<p;t++)m.push(e.readU(8));return{olsIdx:t,numSublayers:i,bitDepthMinus8:n,chromaFormatIdc:a,constantFrameRate:r,generalProfileIdc:o,generalTierFlag:l,generalLevelIdc:c,ptlFrameOnlyConstraintFlag:d,ptlMultilayerEnabledFlag:f,generalConstraintInfo:h,sublayerLevelIdc:u,generalSubProfileIdc:m,maxPictureWidth:e.readU(16),maxPictureHeight:e.readU(16),avgFramerate:e.readU(16)}}function w(e){const t=new o.A(e,!0);if(1&t.readUint8()){const i=new l.A;i.appendBuffer(e.subarray(1)),U(i),t.skip(i.getPointer())}let i=[],r=[],a=[];const n=t.readUint8();for(let e=0;e<n;e++){const e=31&t.readUint8();let n=1;13!==e&&12!==e&&(n=t.readUint16());const s=[];for(let e=0;e<n;e++){const e=t.readUint16();s.push(t.readBuffer(e))}14===e?i=s:15===e?r=s:16===e&&(a=s)}return{vpss:i,spss:r,ppss:a}}function b(e,t,i){const r=t[0];let a;if(r){const e=B(r);let t=e.generalConstraintInfo;t.length||(t=new Array(12).fill(0));const i=new p.A;if(i.writeU(9,0),i.writeU(3,e.spsMaxSublayersMinus1+1),i.writeU(2,1),i.writeU(2,e.chromaFormatIdc),i.writeU(3,e.bitDepthMinus8),i.writeU(5,31),i.writeU(2,0),i.writeU(6,t.length),i.writeU(7,e.profile),i.writeU1(e.tierFlag),i.writeU(8,e.level),i.writeU1(e.ptlFrameOnlyConstraintFlag),i.writeU1(e.ptlMultilayerEnabledFlag),t.length){for(let e=0;e<t.length-1;e++)i.writeU(8,t[e]);i.writeU(6,t[t.length-1])}else i.writeU(6,63);if(e.spsMaxSublayersMinus1+1>1){let t=0;for(let i=e.spsMaxSublayersMinus1-1;i>=0;i--)t=t<<1|e.ptlSublayerLevelPresentFlag[i];i.writeU(e.spsMaxSublayersMinus1,t);for(let t=e.spsMaxSublayersMinus1+1;t<=8&&e.spsMaxSublayersMinus1>0;++t)i.writeU1(0);for(let t=e.spsMaxSublayersMinus1-1;t>=0;t--)e.ptlSublayerLevelPresentFlag[t]&&i.writeU(8,e.sublayerLevelIdc[t])}i.writeU(8,e.generalSubProfileIdc.length);for(let t=0;t<e.generalSubProfileIdc.length;t++)i.writeU(8,e.sublayerLevelIdc[t]);i.writeU(16,e.width),i.writeU(16,e.height),i.writeU(16,0),i.padding(),a=i.getBuffer().subarray(0,i.getPointer())}let o=2+(a?a.length:0);e.length&&(o+=3,o=e.reduce(((e,t)=>e+2+t.length),o)),t.length&&(o+=3,o=t.reduce(((e,t)=>e+2+t.length),o)),i.length&&(o+=3,o=i.reduce(((e,t)=>e+2+t.length),o));const l=new Uint8Array(o),c=new s.A(l,!0);c.writeUint8(g<<1|(a?1:0)|248),a&&c.writeBuffer(a);let d=0;return e.length&&d++,t.length&&d++,i.length&&d++,c.writeUint8(d),e.length&&(c.writeUint8(142),c.writeUint16(e.length),n.__(e,(e=>{c.writeUint16(e.length),c.writeBuffer(e)}))),t.length&&(c.writeUint8(143),c.writeUint16(t.length),n.__(t,(e=>{c.writeUint16(e.length),c.writeBuffer(e)}))),i.length&&(c.writeUint8(144),c.writeUint16(i.length),n.__(i,(e=>{c.writeUint16(e.length),c.writeBuffer(e)}))),l}function x(e){let t,i=!1,r=(0,d.py)(e);if(r.length>=2){const e=[],i=[],a=[];r.forEach((t=>{const r=t[1]>>>3&31;14===r?e.push(t):15===r?i.push(t):16===r&&a.push(t)})),i.length&&a.length&&(t=b(e,i,a),r=r.filter((e=>{const t=e[1]>>>3&31;return 14!==t&&15!==t&&16!==t&&20!==t})))}const a=r.reduce(((e,t)=>e+g+1+t.length),0),o=(0,h.sY)(a),l=(0,c.s3)(o,a),f=new s.A(l);return n.__(r,(e=>{3===g?f.writeUint32(e.length):2===g?f.writeUint24(e.length):1===g?f.writeUint16(e.length):f.writeUint8(e.length),f.writeBuffer(e.subarray(0));const t=e[1]>>>3&31;8!==t&&7!==t&&9!==t&&10!==t||(i=!0)})),{bufferPointer:o,length:a,extradata:t,key:i}}function y(e,t){const i=t?t[0]>>>1&3:g;let r=[],a=[],l=[],d=!1;if(t){const e=w(t);r=e.vpss,a=e.spss,l=e.ppss,d=!0}const f=[],u=new o.A(e);for(;u.remainingSize()>0;){let e=0;e=3===i?u.readUint32():2===i?u.readUint24():1===i?u.readUint16():u.readUint8(),f.push(u.readBuffer(e))}let p=r.reduce(((e,t)=>e+4+t.length),0);p=a.reduce(((e,t)=>e+4+t.length),p),p=l.reduce(((e,t)=>e+4+t.length),p),p=f.reduce(((e,t,i)=>e+(i?3:4)+t.length),p);const m=(0,h.sY)(p+7),U=(0,c.s3)(m,p+7),b=new s.A(U);return b.writeUint8(0),b.writeUint8(0),b.writeUint8(0),b.writeUint8(1),b.writeUint8(0),b.writeUint8(160),b.writeUint8(240),n.__(r,(e=>{b.writeUint8(0),b.writeUint8(0),b.writeUint8(0),b.writeUint8(1),b.writeBuffer(e)})),n.__(a,(e=>{b.writeUint8(0),b.writeUint8(0),b.writeUint8(0),b.writeUint8(1),b.writeBuffer(e)})),n.__(l,(e=>{b.writeUint8(0),b.writeUint8(0),b.writeUint8(0),b.writeUint8(1),b.writeBuffer(e)})),n.__(f,((e,t)=>{b.writeUint8(0),b.writeUint8(0),t||b.writeUint8(0),b.writeUint8(1),b.writeBuffer(e);const i=e[1]>>>3&31;8!==i&&7!==i&&9!==i&&10!==i||(d=!0)})),{bufferPointer:m,length:p+7,key:d}}function A(e,t){var i;if(!(1&r.f[15](e+36)))return;const a=(0,f.iI)(e);if((0,d.Bs)(a))return;const n=null!==(i=t.metadata.naluLengthSizeMinusOne)&&void 0!==i?i:g;let s=[],l=[],u=[];const p=new o.A(a);for(;p.remainingSize()>0;){let e=0;e=3===n?p.readUint32():2===n?p.readUint24():1===n?p.readUint16():p.readUint8();const t=a.subarray(Number(BigInt.asIntN(32,p.getPos())),Number(BigInt.asIntN(32,p.getPos()))+e);p.skip(e);const i=t[1]>>>3&31;15===i?l.push(t):16===i?u.push(t):14===i&&s.push(t)}if(l.length||u.length||s.length){const t=b(s,l,u),i=(0,h.sY)(t.length);(0,c.lW)(i,t.length,t),(0,f.Ow)(e,1,i,t.length)}}function I(e,t=!1){if(!(1&r.f[15](e+36)||t))return;const i=(0,f.iI)(e);if(!(0,d.Bs)(i))return;let n=(0,d.py)(i);if(n.length>2){const t=[],i=[],s=[];if(n.forEach((e=>{const r=e[1]>>>3&31;14===r?t.push(e):15===r?i.push(e):16===r&&s.push(e)})),t.length&&i.length&&s.length){const n=b(t,i,s),o=(0,h.sY)(n.length);(0,c.lW)(o,n.length,n),(0,f.Ow)(e,1,o,n.length),a.M[15](e+36,1|r.f[15](e+36))}}}function v(e,t){const{profile:i,level:r,width:a,height:n}=B(t);e.codecpar.profile=i,e.codecpar.level=r,e.codecpar.width=a,e.codecpar.height=n}function _(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=t[0]>>>1&3;const{spss:i}=w(t);i.length&&v(e,i[0])}}function R(e,t=4){if(2===r.f[15](e+80))return(0,d.py)((0,c.s3)(r.f[20](e+24),r.f[15](e+28))).some((e=>{const t=e[1]>>>3&31;return 8===t||7===t}));{const i=r.f[15](e+28);let a=0;for(;a<i-t;){const i=m.r8(r.f[20](e+24)+(a+t+1))>>>3&31;if(8===i||7===i)return!0;a+=4===t?m.Sg(r.f[20](e+24)+a):3===t?m.ht(r.f[20](e+24)+a):2===t?m.yd(r.f[20](e+24)+a):m.r8(r.f[20](e+24)+a),a+=t}return!1}}function B(e){if(!e||e.length<3)return;let t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);let i=0,r=0,a=0,n=0,s=0,o=1,c=0,f=0,h=0;const p=[],m=[],g=[],U=[],w=(0,d.BN)(e.subarray(t)),b=new l.A(w.length);b.appendBuffer(w),b.readU1(),b.readU1(),b.readU(6),b.readU(5),b.readU(3),b.readU(8);const x=b.readU(3);o=b.readU(2);const y=b.readU(2);if(b.readU(1)){if(i=b.readU(7),c=b.readU(1),r=b.readU(8),f=b.readU(1),h=b.readU(1),b.readU(1)){for(let e=0;e<8;e++)p[e]=b.readU(8);p[8]=b.readU(7);const e=b.readU(8);b.readU(e)}b.skipPadding();for(let e=x-1;e>=0;e--)m[e]=b.readU(1);b.skipPadding();for(let e=x-1;e>=0;e--)m[e]&&(g[e]=b.readU(8));const e=b.readU(8);if(e)for(let t=0;t<e;t++)U[t]=b.readU(32)}b.readU1(),b.readU1()&&b.readU1();const A=a=u.xb(b),I=n=u.xb(b);if(b.readU1()&&(u.xb(b),u.xb(b),u.xb(b),u.xb(b)),b.readU1()){const e=u.xb(b),t=y+5,i=1<<t,r=A/(1<<t),a=I/(1<<t),n=Math.ceil(Math.log2(r)),s=Math.ceil(Math.log2(a));let o=0,l=0,c=0;e>0&&(c=b.readU1(),l=b.readU1());for(let t=0;e>0&&t<=e;t++)l&&0!=t||(t>0&&A>i&&b.readU(n),t>0&&I>i&&b.readU(s),t<e&&A>i&&b.readU(n),t<e&&I>i&&b.readU(s)),c||b.readU(2);if(o=u.xb(b)+1,b.readU(1)&&b.readU(1))for(let t=0;t<=e;t++)b.readU(o)}s=u.xb(b),b.readU(1),b.readU(1);const v=b.readU(4),_=b.readU(1);let R=0;_&&(R=u.xb(b));const B=[],P=b.readU(2);for(let e=0;e<8*P;e++)B[e]=b.readU(1);return{profile:i,level:r,width:a,height:n,chromaFormatIdc:o,bitDepthMinus8:s,generalProfileSpace:0,tierFlag:c,generalConstraintInfo:p,generalSubProfileIdc:U,ptlFrameOnlyConstraintFlag:f,ptlMultilayerEnabledFlag:h,spsMaxSublayersMinus1:x,ptlSublayerLevelPresentFlag:m,sublayerLevelIdc:g,sps_log2_max_pic_order_cnt_lsb_minus4:v,sps_poc_msb_cycle_flag:_,sps_poc_msb_cycle_len_minus1:R,sps_num_extra_ph_bytes:P,sps_extra_ph_bit_present_flag:B}}function P(e){0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(e=function(e){let t=(0,d.py)(e);if(t.length>=2){const e=[],i=[],r=[];if(t.forEach((t=>{const a=t[1]>>>3&31;14===a?e.push(t):15===a?i.push(t):16===a&&r.push(t)})),i.length&&r.length)return b(e,i,r)}}(e));const t=new l.A;return t.appendBuffer(e),1&t.readU(8)?U(t):{}}},85947:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var r=i(134);class a{constructor(){(0,r.A)(this,"type",-1),(0,r.A)(this,"onStreamAdd",void 0)}destroy(e){}}},34577:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>X});var r=i(134),a=i(80662),n=i.n(a),s=i(97860),o=i.n(s),l=i(14686),c=i(61499),d=i(63939),f=i(50932),h=i(4624),u=i(9705),p=i(85947),m=i(37837),g=i(71517),U=i(77231),w=i(31866),b=i(33919),x=i(72739),y=i(20620),A=i(53e3),I=i(55611),v=i(14392),_=i(58919),R=i(90412),B=i(89088),P=i(65451),N=i(58469),S=i(44328),k=i(31865),L=i(93082),M=i(5783),C=i(82774),D=i(67672),V=i(95335),E=i(53260),z=i(13663),T=i(92647),F=i(50011),O=i(34677),G="src/avformat/formats/IMatroskaFormat.ts";class X extends p.A{constructor(){super(),(0,r.A)(this,"type",6),(0,r.A)(this,"context",void 0),(0,r.A)(this,"blockReader",void 0)}init(e){e.ioReader&&e.ioReader.setEndian(!0);const t={isLive:!0,firstCluster:-BigInt(1),segmentStart:-BigInt(1),header:{version:0,readVersion:0,maxIdLength:4,maxSizeLength:8,docType:"",docTypeVersion:0,docTypeReadVersion:0},seekHead:null,info:null,tracks:null,attachments:null,chapters:null,cues:null,tags:null,currentCluster:{timeCode:BigInt(0),pos:-BigInt(1),block:{pos:-BigInt(1),size:-BigInt(1)},blockGroup:{block:null}},clusterIndexes:[],clusterIndexesPosMap:new(n())};e.privateData=this.context=t}analyzeStreams(e){const t="webm"===this.context.header.docType?w.N:w.e;this.context.tracks&&x.__(this.context.tracks.entry,(i=>{var r,a,n;const s=e.createStream();switch(s.privData=i,s.codecpar.codecId=t[i.codecId]||0,i.type){case 2:s.codecpar.codecType=1;break;case 1:s.codecpar.codecType=0;break;case 17:s.codecpar.codecType=3;break;default:s.codecpar.codecType=-1}i.language&&(s.metadata.language=i.language),i.name&&(s.metadata.name=i.name),i.currentDts=-BigInt(1),i.audio?("A_PCM/FLOAT/IEEE"===i.codecName?64===i.audio.bitDepth?s.codecpar.codecId=65559:32===i.audio.bitDepth&&(s.codecpar.codecId=65557):"A_PCM/INT/BIG"===i.codecName?16===i.audio.bitDepth?s.codecpar.codecId=65537:24===i.audio.bitDepth?s.codecpar.codecId=65549:32===i.audio.bitDepth&&(s.codecpar.codecId=65545):"A_PCM/INT/LIT"===i.codecName&&(8===i.audio.bitDepth?s.codecpar.codecId=65541:16===i.audio.bitDepth?s.codecpar.codecId=65536:24===i.audio.bitDepth?s.codecpar.codecId=65548:32===i.audio.bitDepth&&(s.codecpar.codecId=65544)),s.codecpar.chLayout.nbChannels=i.audio.channels,s.codecpar.sampleRate=0|i.audio.sampleRate,s.codecpar.bitsPerCodedSample=i.audio.bitDepth):i.video&&(s.codecpar.width=i.video.pixelWidth,s.codecpar.height=i.video.pixelHeight,i.video.color&&(D.ai(i.video.color.primaries)&&(s.codecpar.colorPrimaries=i.video.color.primaries),D.ai(i.video.color.transferCharacteristics)&&(s.codecpar.colorTrc=i.video.color.transferCharacteristics),D.ai(i.video.color.range)&&(s.codecpar.colorRange=i.video.color.range),D.ai(i.video.color.matrixCoefficients)&&(s.codecpar.colorSpace=i.video.color.matrixCoefficients)));let o=0;if("V_MS/VFW/FOURCC"===i.codecId&&(null===(r=i.codecPrivate)||void 0===r?void 0:r.size)>=40)s.codecpar.bitsPerCodedSample=i.codecPrivate.data[15]<<8|i.codecPrivate.data[14],s.codecpar.codecTag=i.codecPrivate.data[19]<<24|i.codecPrivate.data[18]<<16|i.codecPrivate.data[17]<<8|i.codecPrivate.data[16],s.codecpar.codecId=E.n[s.codecpar.codecTag]||0,0===s.codecpar.codecId&&(s.codecpar.codecId,z.h[s.codecpar.codecTag]),o=40;else if("V_QUICKTIME"===i.codecId&&(null===(a=i.codecPrivate)||void 0===a?void 0:a.size)>=21){const e=1===s.codecpar.codecType?z.u:z.h;s.codecpar.codecTag=i.codecPrivate.data[3]<<24|i.codecPrivate.data[2]<<16|i.codecPrivate.data[1]<<8|i.codecPrivate.data[0];const t=e[s.codecpar.codecTag];if(t){const e=new Uint8Array(4),t=Number(BigInt.asIntN(32,i.codecPrivate.size));e[0]=t>>>24&255,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=255&t,i.codecPrivate.size+=BigInt(4),i.codecPrivate.data=(0,T.A)(Uint8Array,[e,i.codecPrivate.data])}s.codecpar.codecId=t||0}if(null!==(n=i.codecPrivate)&&void 0!==n&&n.data&&i.codecPrivate.size-BigInt(Math.floor(o))>0){let e=i.codecPrivate.data.subarray(o);if(94212===s.codecpar.codecId||94230===s.codecpar.codecId){let t=F.decode(e).split(/\r?\n/);for(let e=0;e<t.length;e++)if("[Events]"===t[e].trim()){t=t.slice(0,e);break}t.push("[Events]"),t.push("Format: ReadOrder, Layer, Style, Name, MarginL, MarginR, MarginV, Effect, Text"),e=F.encode(t.join("\n"))}if(s.codecpar.extradataSize=e.length,s.codecpar.extradata=(0,m.sY)(e.length),(0,l.lW)(s.codecpar.extradata,e.length,e),s.codecpar.extradata)switch(s.codecpar.codecId){case 27:y.XC(s,(0,l.s3)(s.codecpar.extradata,s.codecpar.extradataSize));break;case 173:A.XC(s,(0,l.s3)(s.codecpar.extradata,s.codecpar.extradataSize));break;case 196:I.XC(s,(0,l.s3)(s.codecpar.extradata,s.codecpar.extradataSize));break;case 225:R.XC(s,(0,l.s3)(s.codecpar.extradata,s.codecpar.extradataSize));break;case 139:v.X(s,(0,l.s3)(s.codecpar.extradata,s.codecpar.extradataSize));break;case 167:_.XC(s,(0,l.s3)(s.codecpar.extradata,s.codecpar.extradataSize));break;case 86018:N.XC(s,(0,l.s3)(s.codecpar.extradata,s.codecpar.extradataSize));break;case 86017:B.XC(s,(0,l.s3)(s.codecpar.extradata,s.codecpar.extradataSize));break;case 86076:P.XC(s,(0,l.s3)(s.codecpar.extradata,s.codecpar.extradataSize))}else{let e;86018===s.codecpar.codecId&&(e=N.Ij(s.codecpar)),e&&(s.codecpar.extradataSize=e.length,s.codecpar.extradata=(0,m.sY)(s.codecpar.extradataSize),(0,l.lW)(s.codecpar.extradata,s.codecpar.extradataSize,e))}}this.context.info&&(s.timeBase.num=1,this.context.info.timestampScale?s.timeBase.den=1e3*U.SF/this.context.info.timestampScale|0:(s.timeBase.den=1e3,this.context.info.timestampScale=U.SF),this.context.info.duration&&(s.duration=BigInt(Math.floor(this.context.info.duration)))),(null==i.default||i.default)&&(s.disposition|=1),i.encodings&&x.__(i.encodings.entry,(e=>{e.compression&&(0,O.A)(e.compression.algo)&&(i.needDecompression=!0),e.encryption&&(0,O.A)(e.encryption.algo)&&(i.needDecryption=!0)}))})),this.context.attachments&&x.__(this.context.attachments.entry,(t=>{const i=e.createStream();i.codecpar.codecType=4,i.privData=t,t.data&&(i.codecpar.extradataSize=Number(BigInt.asIntN(32,t.data.size)),i.codecpar.extradata=(0,m.sY)(i.codecpar.extradataSize),(0,l.lW)(i.codecpar.extradata,i.codecpar.extradataSize,t.data.data))})),this.context.tags&&x.__(this.context.tags.entry,(t=>{var i;if("DURATION"===(null===(i=t.tag)||void 0===i?void 0:i.name)){let i=t.tag.string.replaceAll("\0","").split("."),r=i[0].split(":"),a=BigInt(+r[0])*BigInt(36e8)+BigInt(+r[1])*BigInt(6e7)+BigInt(+r[2])*BigInt(1e6)+BigInt(+i[1])/BigInt(1e3);const n=(0,L.A)(e.streams,t.target.trackUid);n&&(n.duration=(0,S.k)(a,U.KR,n.timeBase))}})),this.context.chapters&&x.__(this.context.chapters.entry,(t=>{const i=t.atom;i&&x.__(i,(t=>{var i,r;e.chapters.push({id:t.uid,start:t.start,end:t.end,timeBase:{num:1,den:1e9},metadata:{title:(null===(i=t.display)||void 0===i?void 0:i.title)||"",language:(null===(r=t.display)||void 0===r?void 0:r.language)||""}})}))}))}async readHeader(e){if(440786851!==await(0,b.aL)(e,this.context.header.maxIdLength))return h.z3("not matroska format",G,409),u.LR;const t=await(0,b.Qb)(e.ioReader,this.context.header.maxSizeLength);if(this.context.header=V.X$(this.context.header,await(0,b.Pb)(e,t,b.jt)),408125543!==await(0,b.aL)(e,this.context.header.maxIdLength))return h.z3("not matroska format",G,418),u.LR;const i=await(0,b.Qb)(e.ioReader,this.context.header.maxSizeLength);this.context.segmentStart=e.ioReader.getPos();const r=e.ioReader.getPos()+i,a=new(o());let n=!1,s=!1;for(;e.ioReader.getPos()<r||!n||!s;){const t=e.ioReader.getPos(),i=await(0,b.aL)(e,this.context.header.maxIdLength);if(i===u.LR){await this.syncTopLevelElement(e,2);continue}const r=await(0,b.Qb)(e.ioReader,this.context.header.maxSizeLength);if(r!==BigInt(u.LR)){if(290298740===i)this.context.isLive=!1,this.context.seekHead=await(0,b.Pb)(e,r,b.Cr);else if(475249515===i)this.context.isLive=!1,this.context.cues=await(0,b.Pb)(e,r,b.eG);else if(272869232===i)this.context.isLive=!1,this.context.chapters=await(0,b.Pb)(e,r,b.Y0);else if(357149030===i)this.context.info=await(0,b.Pb)(e,r,b.qi);else if(307544935===i)this.context.tags=await(0,b.Pb)(e,r,b.hK);else if(423732329===i)this.context.attachments=await(0,b.Pb)(e,r,b.qp);else if(374648427===i)n=!0,this.context.tracks=await(0,b.Pb)(e,r,b.Wy);else if(524531317===i){if(s=!0,this.context.firstCluster=t,this.context.isLive||!this.context.seekHead||!(1&e.ioReader.flags))break;const i=this.context.seekHead.entry;let r=0;for(;r<i.length;r++)if(!a.has(i[r].id)){await e.ioReader.seek(i[r].pos+this.context.segmentStart);break}if(r===i.length)break}else await e.ioReader.skip(Number(BigInt.asIntN(32,r)));a.add(i)}else await this.syncTopLevelElement(e,2)}return this.context.firstCluster>0&&await e.ioReader.seek(this.context.firstCluster),this.analyzeStreams(e),0}parseAdditions(e,t){for(let r=0;r<t.entry.length;r++){var i;const a=t.entry[r];if(null!==(i=a.additional)&&void 0!==i&&i.size){4===a.additionalId&&h.R8("ITU_T_T35 not support now",G,512);const t=(0,m.sY)(a.additional.data.length+8);C.Cv(t,BigInt(a.additionalId>>>0)),(0,l.lW)(t+8,a.additional.data.length,a.additional.data),(0,g.Ow)(e,15,t,a.additional.data.length+8)}}}async parseBlock(e,t){var i,r,a;const n=(null===(i=this.context.currentCluster.block)||void 0===i?void 0:i.data)||this.context.currentCluster.blockGroup.block.data;let s=null===(r=this.context.currentCluster.block)||void 0===r?void 0:r.pos;s<0&&(s=this.context.currentCluster.blockGroup.block.pos);let o,p=-1,w=BigInt(0);null!==(a=this.context.currentCluster.blockGroup)&&void 0!==a&&a.block&&(o=this.context.currentCluster.blockGroup.additions,p=this.context.currentCluster.blockGroup.reference?0===this.context.currentCluster.blockGroup.reference.length?1:0:1,this.context.currentCluster.blockGroup.duration&&(w=this.context.currentCluster.blockGroup.duration)),this.blockReader?this.blockReader.resetBuffer(n):this.blockReader=new k.A(n);const x=this.blockReader.getPos(),y=Number(BigInt.asUintN(32,await(0,b.Qb)(this.blockReader,8))),A=(0,M.A)(e.streams,y);if(!A)return h.z3(`invalid track number ${y}`,G,563),u.OY;const I=this.blockReader.readInt16(),v=this.blockReader.readUint8();-1===p&&(p=128&v?1:0);let _=0,R=[];switch(v>>>1&3){case 1:{_=this.blockReader.readUint8()+1;let e=0;for(let t=0;t<_-1;t++){let t=0;for(;;){const e=this.blockReader.readUint8();if(0===e)break;if(255!==e){t+=e;break}t+=255}e+=t,R.push(t)}R.push(n.length-Number(BigInt.asIntN(32,this.blockReader.getPos()-x))-e);break}case 3:{_=this.blockReader.readUint8()+1,R.push(await(0,b.Ag)(this.blockReader,4));let e=R[0];for(let t=1;t<_-1;t++){let i=await(0,b.pf)(this.blockReader,4)+R[t-1];e+=i,R.push(i)}R.push(n.length-Number(BigInt.asIntN(32,this.blockReader.getPos()-x))-e);break}case 2:_=this.blockReader.readUint8()+1;const e=(n.length-Number(BigInt.asIntN(32,this.blockReader.getPos()-x)))/_;for(let t=0;t<_;t++)R.push(e);break;case 0:_=1,R.push(n.length-Number(BigInt.asIntN(32,this.blockReader.getPos()-x)))}const B=A.privData,P=B.timeScale||1;if(B.needDecryption)throw new Error("not support encryption stream");let N=(this.context.currentCluster.timeCode+BigInt(Math.floor(I*P)))*BigInt(0|this.context.info.timestampScale);B.codecDelay&&(N-=B.codecDelay),N/=BigInt(1e3),N=(0,S.k)(N,U.KR,A.timeBase),w=BigInt(Math.floor(Number(BigInt.asIntN(32,w))*P))*BigInt(0|this.context.info.timestampScale),w/=BigInt(1e3),w=(0,S.k)(w,U.KR,A.timeBase);for(let i=0;i<_;i++){const r=0!==i?(0,g._5)():t;let a,n=R[i],u=0;if(B.needDecompression){const e=B.encodings.entry.find((e=>!!e.compression));3===e.compression.algo?(a=e.compression.settings.data,n+=a.length,u=a.length):h.h2(`not support compression stream, algo: ${e.compression.algo}`,G,673)}f.M[17](r+56,s+this.blockReader.getPos()),f.M[15](r+32,A.index),(0,l.Mr)(r+72,A.timeBase[c.o9],8),f.M[17](r+8,N),f.M[15](r+28,n),f.M[17](r+48,w);const b=(0,m.sY)(n);a&&(0,l.lW)(b,u,a),(0,l.lW)(b+u,R[i],this.blockReader.readBuffer(R[i])),(0,g.NX)(r,b,n),0!==A.codecpar.codecType?(p&&f.M[15](r+36,1|d.f[15](r+36)),f.M[17](r+16,N)):(27!==A.codecpar.codecId&&173!==A.codecpar.codecId&&196!==A.codecpar.codecId||f.M[15](r+80,1),p?(f.M[15](r+36,1|d.f[15](r+36)),B.gopCount>1?(B.dtsDelta=(0,S.k)(B.maxPts-B.minPts,A.timeBase,U.KR)/BigInt(B.gopCount-1|0),B.firstGopGot=!0):B.dtsDelta||(B.dtsDelta=(0,S.k)(BigInt(33),U.i0,U.KR)),B.gopCount=1,B.minPts=N,B.maxPts=N):(!B.firstGopGot&&B.gopCount>2&&N>B.maxPts?B.dtsDelta=(0,S.k)(B.maxPts-B.minPts,A.timeBase,U.KR)/BigInt(B.gopCount-1|0):B.dtsDelta||(B.dtsDelta=(0,S.k)(BigInt(33),U.i0,U.KR)),B.gopCount++),N>B.maxPts&&(B.maxPts=N),B.currentDts>=BigInt(0)?w?(B.currentDts=B.currentDts+(0,S.k)(w,A.timeBase,U.KR),f.M[17](r+16,(0,S.k)(B.currentDts,U.KR,A.timeBase))):(B.currentDts=B.currentDts+B.dtsDelta,f.M[17](r+16,(0,S.k)(B.currentDts,U.KR,A.timeBase))):(B.currentDts=(0,S.k)(d.f[17](r+8),A.timeBase,U.KR),f.M[17](r+16,d.f[17](r+8)),B.currentDts<BigInt(1e5)&&(B.currentDts=BigInt(0),f.M[17](r+16,BigInt(0))))),o&&this.parseAdditions(r,o),0!==i&&e.interval.packetBuffer.push(r)}return this.context.currentCluster.block={pos:-BigInt(1),size:-BigInt(1)},this.context.currentCluster.blockGroup={block:null},0}addClusterIndex(e){if(this.context.clusterIndexesPosMap.has(e.pos))return;const t=x.El(this.context.clusterIndexes,(t=>t.time<e.time?1:-1));t>-1?(this.context.clusterIndexesPosMap.set(e.pos,t),this.context.clusterIndexes.splice(t,0,e)):(this.context.clusterIndexesPosMap.set(e.pos,this.context.clusterIndexes.length),this.context.clusterIndexes.push(e))}async readAVPacket_(e,t){const i=e.ioReader.getPos(),r=await(0,b.aL)(e,this.context.header.maxIdLength);if(r===u.LR)return await this.syncTopLevelElement(e),this.readAVPacket_(e,t);const a=await(0,b.Qb)(e.ioReader,this.context.header.maxSizeLength);if(a===BigInt(u.LR))return await this.syncTopLevelElement(e),this.readAVPacket_(e,t);if(524531317===r){this.context.currentCluster.pos=i,this.context.currentCluster.timeCode=BigInt(0),await(0,b.Pb)(e,a,b.GZ,this.context.currentCluster,[163,160]),this.addClusterIndex({time:this.context.currentCluster.timeCode,pos:i});let r=await this.parseBlock(e,t);if(r===u.OY)return this.readAVPacket_(e,t);if(r<0)return r}else if(163===r){this.context.currentCluster.block={pos:e.ioReader.getPos(),size:a,data:await e.ioReader.readBuffer(Number(BigInt.asIntN(32,a)))};let i=await this.parseBlock(e,t);if(i===u.OY)return this.readAVPacket_(e,t);if(i<0)return i}else{if(160!==r)return 475249515===r||307544935===r||423732329===r||272869232===r||357149030===r||374648427===r||290298740===r?(await e.ioReader.skip(Number(BigInt.asIntN(32,a))),this.readAVPacket_(e,t)):(await this.syncTopLevelElement(e),this.readAVPacket_(e,t));{await(0,b.Pb)(e,a,b.Wg,this.context.currentCluster.blockGroup);let i=await this.parseBlock(e,t);if(i===u.OY)return this.readAVPacket_(e,t);if(i<0)return i}}return 0}async readAVPacket(e,t){try{return await this.readAVPacket_(e,t)}catch(t){return-1048576!==e.ioReader.error?(h.z3(`read packet error, ${t}`,G,890),u.LR):e.ioReader.error}}async syncTopLevelElement(e,t=3){let i=U.Dh;for(;;)try{const r=e.ioReader.getPos(),a=await e.ioReader.peekUint32();if(524531317===a||475249515===a||307544935===a||423732329===a||272869232===a||357149030===a||374648427===a||290298740===a){i=r;let a=0;await e.ioReader.skip(4);const n=await(0,b.Qb)(e.ioReader,this.context.header.maxSizeLength);if(n===BigInt(u.LR)){await e.ioReader.seek(r+BigInt(1));continue}for(await e.ioReader.skip(Number(BigInt.asIntN(32,n)));a<=t;){const t=await(0,b.aL)(e,this.context.header.maxIdLength),i=await(0,b.Qb)(e.ioReader,this.context.header.maxSizeLength);if(524531317!==t&&475249515!==t&&307544935!==t&&423732329!==t&&272869232!==t&&357149030!==t&&374648427!==t&&290298740!==t)break;a++,await e.ioReader.skip(Number(BigInt.asIntN(32,i)))}if(!(a<t))break;await e.ioReader.seek(i+BigInt(1)),i=U.Dh}else await e.ioReader.skip(1),i=U.Dh}catch(e){break}i!==U.Dh&&await e.ioReader.seek(i)}async seek(e,t,i,r){var a;const n=e.ioReader.getPos(),s=(0,S.k)(i,t.timeBase,U.KR);let o=U.Dh;if(null!==(a=this.context.cues)&&void 0!==a&&a.entry.length){const e=t.privData;for(let t=0;t<this.context.cues.entry.length;t++)if((this.context.cues.entry[t].time||BigInt(0))*BigInt(0|this.context.info.timestampScale)/BigInt(1e3)>s){const i=this.context.cues.entry[Math.max(t-1,0)].pos;if(i.length){const t=i.find((t=>t.track===e.number));if(t){o=t.pos+this.context.segmentStart;break}}}}if(o===U.Dh&&this.context.clusterIndexes.length){for(let e=0;e<this.context.clusterIndexes.length;e++)if(this.context.clusterIndexes[e].time*BigInt(0|this.context.info.timestampScale)/BigInt(1e3)>s){o=this.context.clusterIndexes[Math.max(e-1,0)].pos;break}o===U.Dh&&(o=this.context.clusterIndexes[this.context.clusterIndexes.length-1].pos)}return o!==U.Dh?(await e.ioReader.seek(o),x.__(this.context.tracks.entry,(e=>{e.currentDts=-BigInt(1)})),n):BigInt(u.E$)}getAnalyzeStreamsCount(){var e,t;return null!==(e=null===(t=this.context.tracks)||void 0===t?void 0:t.entry.length)&&void 0!==e?e:2}}},13663:(e,t,i)=>{"use strict";i.d(t,{h:()=>a,u:()=>n});var r=i(79682);const a={[(0,r.A)("mp4v")]:12,[(0,r.A)("DIVX")]:12,[(0,r.A)("XVID")]:12,[(0,r.A)("3IV2")]:12,[(0,r.A)("vvc1")]:196,[(0,r.A)("vvi1")]:196,[(0,r.A)("hev1")]:173,[(0,r.A)("hvc1")]:173,[(0,r.A)("dvhe")]:173,[(0,r.A)("hev1")]:173,[(0,r.A)("avc1")]:27,[(0,r.A)("avc2")]:27,[(0,r.A)("avc3")]:27,[(0,r.A)("avc4")]:27,[(0,r.A)("ai5p")]:27,[(0,r.A)("ai5q")]:27,[(0,r.A)("ai52")]:27,[(0,r.A)("ai53")]:27,[(0,r.A)("ai55")]:27,[(0,r.A)("ai56")]:27,[(0,r.A)("ai1p")]:27,[(0,r.A)("ai1q")]:27,[(0,r.A)("ai12")]:27,[(0,r.A)("ai13")]:27,[(0,r.A)("ai15")]:27,[(0,r.A)("ai16")]:27,[(0,r.A)("AVin")]:27,[(0,r.A)("aivx")]:27,[(0,r.A)("rv64")]:27,[(0,r.A)("xalg")]:27,[(0,r.A)("avlg")]:27,[(0,r.A)("dva1")]:27,[(0,r.A)("dvav")]:27,[(0,r.A)("vp08")]:139,[(0,r.A)("vp09")]:167,[(0,r.A)("av01")]:225},n={[(0,r.A)("mp4a")]:86018,[(0,r.A)("ac-3")]:86019,[(0,r.A)("sac3")]:86019,[(0,r.A)("ac-4")]:86119,[(0,r.A)("dtsc")]:86020,[(0,r.A)("dtsh")]:86020,[(0,r.A)("dtsl")]:86020,[(0,r.A)("dtse")]:86020,[(0,r.A)("DTS ")]:86020,[(0,r.A)("ec-3")]:86056,[(0,r.A)(".mp3")]:86017,[(0,r.A)("mp3 ")]:86017,1836253269:86017,[(0,r.A)("spex")]:86051,[(0,r.A)("SPXN")]:86051,[(0,r.A)("fLaC")]:86028,[(0,r.A)("Opus")]:86076,[(0,r.A)("alaw")]:65543,[(0,r.A)("ulaw")]:65542,[(0,r.A)("fl32")]:65557,[(0,r.A)("fl64")]:65559,[(0,r.A)("twos")]:65537,[(0,r.A)("lpcm")]:65536,[(0,r.A)("sowt")]:65536,[(0,r.A)("in24")]:65548,[(0,r.A)("in32")]:65544,[(0,r.A)("sowt")]:65540,[(0,r.A)("raw ")]:65541,[(0,r.A)("NONE")]:65541}},5783:(e,t,i)=>{"use strict";function r(e,t){for(let i=0;i<e.length;i++)if(e[i].privData.number===t)return e[i]}i.d(t,{A:()=>r})},93082:(e,t,i)=>{"use strict";function r(e,t){for(let i=0;i<e.length;i++)if(e[i].privData.uid===t)return e[i]}i.d(t,{A:()=>r})},33919:(e,t,i)=>{"use strict";i.d(t,{Ag:()=>x,Cr:()=>c,GZ:()=>w,Pb:()=>R,Qb:()=>A,Wg:()=>U,Wy:()=>f,Y0:()=>u,aL:()=>_,eG:()=>p,hK:()=>g,jt:()=>b,pf:()=>y,qi:()=>d,qp:()=>h});var r=i(4624),a=i(9705),n=i(67672),s=i(72739),o="src/avformat/formats/matroska/imatroska.ts";const l=BigInt(20971520),c={19899:{type:9,isArray:!0,filedName:"entry",child:{21419:{type:1,filedName:"id"},21420:{type:2,filedName:"pos"}}}},d={29604:{type:2,filedName:"segmentUUID"},2807729:{type:1,filedName:"timestampScale"},17545:{type:5,filedName:"duration"},31657:{type:7,filedName:"title"},19840:{type:7,filedName:"muxingApp"},22337:{type:7,filedName:"writingApp"},17505:{type:8,filedName:"dateUTC"}},f={174:{type:9,isArray:!0,filedName:"entry",child:{215:{type:1,filedName:"number"},29637:{type:1,filedName:"uid"},131:{type:1,filedName:"type"},21358:{type:7,filedName:"name"},136:{type:10,filedName:"default"},185:{type:10,filedName:"enabled"},2274716:{type:7,filedName:"language"},2306383:{type:6,filedName:"timeScale"},134:{type:7,filedName:"codecId"},2459272:{type:7,filedName:"codecName"},25506:{type:8,filedName:"codecPrivate"},225:{type:9,filedName:"audio",child:{181:{type:5,filedName:"sampleRate"},30901:{type:5,filedName:"outSampleRate"},25188:{type:1,filedName:"bitDepth"},159:{type:1,filedName:"channels"}}},224:{type:9,filedName:"video",child:{2327523:{type:1,filedName:"framerate"},21680:{type:1,filedName:"displayWidth"},21690:{type:1,filedName:"displayHeight"},176:{type:1,filedName:"pixelWidth"},186:{type:1,filedName:"pixelHeight"},3061028:{type:8,filedName:"colorSpace"},21440:{type:1,filedName:"alphaMode"},21936:{type:9,filedName:"color",child:{21937:{type:1,filedName:"matrixCoefficients"},21938:{type:1,filedName:"bitsPerChannel"},21941:{type:1,filedName:"cbSubHorz"},21942:{type:1,filedName:"cbSubVert"},21939:{type:1,filedName:"chromaSubHorz"},21940:{type:1,filedName:"chromaSubVert"},21943:{type:1,filedName:"chromaSitingHorz"},21944:{type:1,filedName:"chromaSitingVert"},21945:{type:1,filedName:"range"},21946:{type:1,filedName:"transferCharacteristics"},21947:{type:1,filedName:"primaries"},21948:{type:1,filedName:"maxCll"},21949:{type:1,filedName:"maxFall"},21968:{type:9,filedName:"masteringMeta",child:{21969:{type:5,filedName:"rx"},21970:{type:5,filedName:"ry"},21971:{type:5,filedName:"gx"},21972:{type:5,filedName:"gy"},21973:{type:5,filedName:"bx"},21974:{type:5,filedName:"by"},21975:{type:5,filedName:"whiteX"},21976:{type:5,filedName:"whiteY"},21978:{type:5,isArray:!0,filedName:"minLuminance"},21977:{type:5,filedName:"maxLuminance"}}}}},30320:{type:9,filedName:"projection",child:{30321:{type:1,filedName:"type"},30322:{type:8,filedName:"private"},30323:{type:5,filedName:"yaw"},30324:{type:5,filedName:"pitch"},30325:{type:5,filedName:"roll"}}},21682:{type:1,filedName:"displayUnit"},154:{type:1,filedName:"interlaced"},157:{type:1,filedName:"fieldOrder"},21432:{type:1,filedName:"stereoMode"},21683:{type:1,filedName:"aspectRatio"}}},226:{type:9,filedName:"operations",child:{227:{type:9,isArray:!0,filedName:"entry",child:{228:{type:9,isArray:!0,filedName:"planes",child:{230:{type:1,filedName:"type"},229:{type:1,filedName:"uid"}}}}}}},28032:{type:9,filedName:"encodings",child:{25152:{type:9,isArray:!0,filedName:"entry",child:{20530:{type:1,filedName:"scope"},20531:{type:1,filedName:"type"},20532:{type:9,filedName:"compression",child:{16980:{type:1,filedName:"algo"},16981:{type:8,filedName:"settings"}}},20533:{type:9,filedName:"encryption",child:{18401:{type:1,filedName:"algo"},18402:{type:8,filedName:"keyId"}}}}}}}}}},h={24999:{type:9,isArray:!0,filedName:"entry",child:{18094:{type:1,filedName:"uid"},18030:{type:7,filedName:"name"},18016:{type:7,filedName:"mime"},18046:{type:7,filedName:"description"},18012:{type:8,filedName:"data"}}}},u={17849:{type:9,isArray:!0,filedName:"entry",child:{182:{type:9,isArray:!0,filedName:"atom",child:{145:{type:2,filedName:"start"},146:{type:2,filedName:"end"},29636:{type:1,filedName:"uid"},128:{type:9,filedName:"display",child:{133:{type:7,filedName:"title"},17276:{type:7,filedName:"language"}}}}}}}},p={187:{type:9,isArray:!0,filedName:"entry",child:{179:{type:2,filedName:"time"},183:{type:9,isArray:!0,filedName:"pos",child:{247:{type:1,filedName:"track"},241:{type:2,filedName:"pos"}}}}}},m={17827:{type:7,filedName:"name"},17543:{type:7,filedName:"string"},17530:{type:7,filedName:"language"},17540:{type:1,filedName:"default"},17588:{type:1,filedName:"default"},26568:{type:9,filedName:"sub"}};m[26568].child=m;const g={29555:{type:9,isArray:!0,filedName:"entry",child:{26568:{type:9,filedName:"tag",child:m},25536:{type:9,filedName:"target",child:{25546:{type:7,filedName:"type"},26826:{type:1,filedName:"typeValue"},25541:{type:1,filedName:"trackUid"},25540:{type:1,filedName:"chapterUid"},25542:{type:1,filedName:"attachUid"}}}}}},U={161:{type:8,filedName:"block"},30113:{type:9,filedName:"additions",child:{166:{type:9,isArray:!0,filedName:"entry",child:{238:{type:1,filedName:"additionalId"},165:{type:8,filedName:"additional"}}}}},155:{type:2,filedName:"duration"},30114:{type:4,filedName:"discardPadding"},251:{type:4,isArray:!0,filedName:"reference"},164:{type:10,filedName:"nonSimple"}},w={163:{type:8,filedName:"block"},160:{type:9,filedName:"blockGroup",child:U},231:{type:2,filedName:"timeCode"},167:{type:2,filedName:"pos"},171:{type:2,filedName:"prevSize"}},b={17030:{type:1,filedName:"version"},17143:{type:1,filedName:"readVersion"},17138:{type:1,filedName:"maxIdLength"},17139:{type:1,filedName:"maxSizeLength"},17026:{type:7,filedName:"docType"},17031:{type:1,filedName:"docTypeVersion"},17029:{type:1,filedName:"docTypeReadVersion"}};async function x(e,t){const i=e.getPos();let n=await e.readUint8();if(!n)return r.z3(`0x00 as pos ${i} invalid as first byte of an EBML number`,o,768),a.LR;let s=1;for(;!(128&n);)s++,n<<=1;if(n&=127,s>t)return r.z3(`Length ${s} indicated by an EBML number's first byte ${n.toString(16)} at pos ${i} exceeds max length ${t}.`,o,781),a.LR;let l=n>>>s-1;for(;--s;)l<<=8,l|=await e.readUint8();return l}async function y(e,t){const i=e.getPos();return await x(e,t)-((1<<7*Number(BigInt.asIntN(32,e.getPos()-i))-1)-1)}async function A(e,t){const i=e.getPos();let n=await e.readUint8(),s=1;if(!n)return r.z3(`0x00 as pos ${i} invalid as first byte of an EBML number`,o,819),BigInt(a.LR);for(;!(128&n);)s++,n<<=1;if(n&=127,s>t)return r.z3(`Length ${s} indicated by an EBML number's first byte ${n.toString(16)} at pos ${i} exceeds max length ${t}.`,o,830),BigInt(a.LR);let l=BigInt(Math.floor(n>>>s-1));for(;--s;){l<<=BigInt(8);const t=await e.readUint8();l|=BigInt(Math.floor(t))}return l}async function I(e,t){switch(t){case BigInt(0):return 0;case BigInt(1):return e.ioReader.readUint8();case BigInt(2):return e.ioReader.readUint16();case BigInt(3):return e.ioReader.readUint24();case BigInt(4):return e.ioReader.readUint32();case BigInt(8):return e.ioReader.readUint64()}let i=BigInt(0),r=0;for(;r++<t;){const t=await e.ioReader.readUint8();i=i<<BigInt(8)|BigInt.asUintN(64,BigInt(Math.floor(t)))}return i}async function v(e,t){switch(t){case BigInt(0):return 0;case BigInt(1):return e.ioReader.readInt8();case BigInt(2):return e.ioReader.readInt16();case BigInt(4):return e.ioReader.readInt32();case BigInt(8):return e.ioReader.readInt64()}let i=BigInt(0),r=0;for(;r++<t;){const t=await e.ioReader.readUint8();i=i<<BigInt(8)|BigInt.asUintN(64,BigInt(Math.floor(t)))}return t===BigInt(3)?Number(BigInt.asIntN(32,BigInt.asIntN(24,i))):BigInt.asIntN(64,i)}async function _(e,t){const i=e.ioReader.getPos();let n=await e.ioReader.peekUint8();if(!n)return r.z3(`0x00 as pos ${i} invalid as first byte of an EBML number`,o,923),a.LR;let s=1;for(;!(128&n);)s++,n<<=1;if(s>t)return r.z3(`Length ${s} indicated by an EBML number's first byte ${n.toString(16)} at pos ${i} exceeds max length ${t}.`,o,935),a.LR;let l=0;for(;s--;)l<<=8,l|=await e.ioReader.readUint8();return l}async function R(e,t,i,r={},a=[]){return await async function(e,t,i){const r=e.privateData,a=e.ioReader.getPos();for(;e.ioReader.getPos()<a+t;){const t=await _(e,r.header.maxIdLength),a=await A(e.ioReader,r.header.maxSizeLength);if(e.ioReader.getPos(),!1===await i(t,a))return}}(e,t,(async(t,o)=>{if(i[t]){const a=i[t];let s;switch(a.type){case 1:s=await I(e,o);break;case 2:s=await I(e,o),n.ai(s)&&(s=BigInt(s));break;case 3:s=await v(e,o);break;case 4:s=await v(e,o),n.ai(s)&&(s=BigInt(s));break;case 6:case 5:s=await async function(e,t){return t===BigInt(4)?e.ioReader.readFloat():t===BigInt(8)?e.ioReader.readDouble():(await e.ioReader.skip(Number(BigInt.asIntN(32,t))),0)}(e,o);break;case 7:s=await e.ioReader.readString(Number(BigInt.asIntN(32,o)));break;case 10:s=!!await I(e,o);break;case 8:s={pos:e.ioReader.getPos(),size:o,data:o<l?await e.ioReader.readBuffer(Number(BigInt.asIntN(32,o))):null};break;case 9:s=a.child?await R(e,o,a.child):{};break;default:await e.ioReader.skip(Number(BigInt.asIntN(32,o)))}if(null!=s)if(a.isArray){const e=r[a.filedName]||[];e.push(s),r[a.filedName]=e}else r[a.filedName]=s}else await e.ioReader.skip(Number(BigInt.asIntN(32,o)));if(a.length&&s.zy(a,t))return!1})),r}},31866:(e,t,i)=>{"use strict";i.d(t,{N:()=>a,e:()=>r});const r={A_AAC:86018,A_AC3:86019,A_ALAC:86032,A_DTS:86020,A_EAC3:86056,A_FLAC:86028,A_MLP:86045,"A_MPEG/L2":86016,"A_MPEG/L1":86058,"A_MPEG/L3":86017,A_OPUS:86076,"A_OPUS/EXPERIMENTAL":86076,"A_PCM/FLOAT/IEEE":65557,"A_PCM/INT/BIG":65537,"A_PCM/INT/LIT":65536,"A_QUICKTIME/QDMC":86066,"A_QUICKTIME/QDM2":86035,"A_REAL/14_4":77824,"A_REAL/28_8":77825,"A_REAL/ATRC":86047,"A_REAL/COOK":86036,"A_REAL/SIPR":86057,A_TRUEHD:86060,A_TTA1:86038,A_VORBIS:86021,A_WAVPACK4:86041,"D_WEBVTT/SUBTITLES":94226,"D_WEBVTT/CAPTIONS":94226,"D_WEBVTT/DESCRIPTIONS":94226,"D_WEBVTT/METADATA":94226,"S_TEXT/UTF8":94225,"S_TEXT/ASCII":94210,"S_TEXT/ASS":94230,"S_TEXT/SSA":94230,S_ASS:94230,S_SSA:94230,S_VOBSUB:94208,S_DVBSUB:94209,"S_HDMV/PGS":94214,"S_HDMV/TEXTST":94231,V_AV1:225,V_DIRAC:116,V_FFV1:33,V_MJPEG:7,V_MPEG1:1,V_MPEG2:2,"V_MPEG4/ISO/ASP":12,"V_MPEG4/ISO/AP":12,"V_MPEG4/ISO/SP":12,"V_MPEG4/ISO/AVC":27,"V_MPEGH/ISO/HEVC":173,"V_MPEGH/ISO/VVC":196,"V_MPEG4/MS/V3":16,V_PRORES:147,"V_REAL/RV10":5,"V_REAL/RV20":6,"V_REAL/RV30":68,"V_REAL/RV40":69,V_SNOW:208,V_THEORA:30,V_UNCOMPRESSED:13,V_VP8:139,V_VP9:167},a={V_VP8:139,V_VP9:167,V_AV1:225,A_VORBIS:86021,A_OPUS:86076,"D_WEBVTT/SUBTITLES":94226,"D_WEBVTT/CAPTIONS":94226,"D_WEBVTT/DESCRIPTIONS":94226,"D_WEBVTT/METADATA":94226}},53260:(e,t,i)=>{"use strict";i.d(t,{g:()=>a,n:()=>n});var r=i(79682);const a={1:65541,2:69638,3:65557,6:65543,7:65542,10:86052,16:69664,17:69633,23:69664,32:69646,34:86037,49:86046,50:86046,56:73728,66:86068,69:69643,20:69643,64:69643,97:69635,98:69634,100:69643,105:69633,117:86079,131:86069,255:86018,273:86068,5632:86018,5634:86065,8192:86019},n={[(0,r.A)("H264")]:27,[(0,r.A)("h264")]:27,[(0,r.A)("X264")]:27,[(0,r.A)("x264")]:27,[(0,r.A)("avc1")]:27,[(0,r.A)("DAVC")]:27,[(0,r.A)("SMV2")]:27,[(0,r.A)("VSSH")]:27,[(0,r.A)("Q264")]:27,[(0,r.A)("V264")]:27,[(0,r.A)("GAVC")]:27,[(0,r.A)("UMSV")]:27,[(0,r.A)("tshd")]:27,[(0,r.A)("INMC")]:27,[(0,r.A)("FMP4")]:12,[(0,r.A)("DIVX")]:12,[(0,r.A)("DX50")]:12,[(0,r.A)("XVID")]:12,[(0,r.A)("MP4S")]:12,[(0,r.A)("M4S2")]:12,[(0,r.A)("DIVX")]:12,4:12,[(0,r.A)("ZMP4")]:12,[(0,r.A)("DIV1")]:12,[(0,r.A)("BLZ0")]:12,[(0,r.A)("mp4v")]:12,[(0,r.A)("UMP4")]:12,[(0,r.A)("WV1F")]:12,[(0,r.A)("SEDG")]:12,[(0,r.A)("RMP4")]:12,[(0,r.A)("3IV2")]:12,[(0,r.A)("WAWV")]:12,[(0,r.A)("FFDS")]:12,[(0,r.A)("FVFW")]:12,[(0,r.A)("DCOD")]:12,[(0,r.A)("MVXM")]:12,[(0,r.A)("PM4V")]:12,[(0,r.A)("SMP4")]:12,[(0,r.A)("DXGM")]:12,[(0,r.A)("VIDM")]:12,[(0,r.A)("M4T3")]:12,[(0,r.A)("GEOX")]:12,[(0,r.A)("G264")]:12,[(0,r.A)("HDX4")]:12,[(0,r.A)("DM4V")]:12,[(0,r.A)("DMK2")]:12,[(0,r.A)("DYM4")]:12,[(0,r.A)("DIGI")]:12,[(0,r.A)("EPHV")]:12,[(0,r.A)("EM4A")]:12,[(0,r.A)("M4CC")]:12,[(0,r.A)("SN40")]:12,[(0,r.A)("VSPX")]:12,[(0,r.A)("ULDX")]:12,[(0,r.A)("GEOV")]:12,[(0,r.A)("SIPP")]:12,[(0,r.A)("SM4V")]:12,[(0,r.A)("XVIX")]:12,[(0,r.A)("DreX")]:12,[(0,r.A)("QMP4")]:12,[(0,r.A)("PLV1")]:12,[(0,r.A)("GLV4")]:12,[(0,r.A)("GMP4")]:12,[(0,r.A)("MNM4")]:12,[(0,r.A)("GTM4")]:12,[(0,r.A)("MPG4")]:14,[(0,r.A)("MP41")]:14,[(0,r.A)("MP42")]:15,[(0,r.A)("DIV2")]:15,[(0,r.A)("MP43")]:16,[(0,r.A)("DIV3")]:16,[(0,r.A)("MPG3")]:16,[(0,r.A)("DIV5")]:16,[(0,r.A)("DIV6")]:16,[(0,r.A)("DIV4")]:16,[(0,r.A)("DVX3")]:16,[(0,r.A)("AP41")]:16,[(0,r.A)("COL1")]:16,[(0,r.A)("COL0")]:16,[(0,r.A)("VP80")]:139,[(0,r.A)("VP90")]:167}},79682:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var r=i(4624),a="src/avformat/function/mktagle.ts";function n(e){4!==e.length&&r.R8(`tag length is not 4, tag: ${e}`,a,30);let t=0;for(let i=3;i>=0;i--)t=t<<8|e.charCodeAt(i);return t}},11573:(e,t,i)=>{"use strict";function r(e,t){let i=0;for(let r=0;r<t;r++)i=2*i+e.readU1();return i}function a(e){let t=0;for(;!r(e,1);)t++;return t>=32?0:r(e,t)+(1<<t)-1}function n(e){let t=0,i=0;for(let a=0;a<8;a++){let n=r(e,8);if(t|=(127&n)<<7*a,i+=1,!(128&n))break}return t}i.d(t,{d:()=>a,f:()=>r,v:()=>n})},23991:(e,t,i)=>{"use strict";function r(e){let t=0,i=0;for(;i<32&&0===e.readU1();)i++;return t=e.readU(i),t+=(1<<i)-1,t}function a(e){let t=r(e);return t=1&t?(t+1)/2:-t/2,t}i.d(t,{$x:()=>a,xb:()=>r})},39381:(e,t,i)=>{"use strict";i.d(t,{E3:()=>n,Sg:()=>c,Y0:()=>l,ht:()=>o,r8:()=>a,yd:()=>s});var r=i(63939);function a(e){return r.f[2](e)}function n(e){return a(e+1)<<8|a(e)}function s(e){return a(e)<<8|a(e+1)}function o(e){return a(e)<<16|a(e+1)<<8|a(e+2)}function l(e){return n(e+2)<<16|n(e)}function c(e){return s(e)<<16|s(e+2)}},82774:(e,t,i)=>{"use strict";i.d(t,{Cv:()=>o});var r=i(50932);function a(e,t){r.M[2](e,255&t)}function n(e,t){a(e,t>>>8),a(e+1,t)}function s(e,t){n(e,t>>>16),n(e+2,65535&t)}function o(e,t){s(e,Number(BigInt.asUintN(32,t>>BigInt(32)))),s(e+4,Number(BigInt.asUintN(32,t)))}},60264:(e,t,i)=>{"use strict";function r(e){return e.length>4&&0===e[0]&&0===e[1]&&(1===e[2]||0===e[2]&&1===e[3])}function a(e,t){let i=0;for(let r=t;r<e.length;r++)switch(e[r]){case 0:i++;break;case 1:if(i>=2)return{offset:r-Math.min(i,3),startCode:Math.min(i+1,4)};i=0;break;default:i=0}return{offset:-1,startCode:0}}function n(e){const t=[];let i=a(e,0),r={offset:-1,startCode:0};for(;r=a(e,i.offset+i.startCode),r.offset>-1;)t.push(e.subarray(i.offset+i.startCode,r.offset,!0)),i=r;return t.push(e.subarray(i.offset+i.startCode,void 0,!0)),t}function s(e,t=0,i){i||(i=e.length);const r=new Uint8Array(e.length);let a=0,n=0;for(let s=0;s<e.length;s++){if(s>=t&&s<i)if(0===e[s])a++;else if(3===e[s]&&2===a&&s+1<e.length&&e[s+1]<=3){if(s++,s===e.length)break;a=0===e[s]?1:0}else a=0;r[n++]=e[s]}return r.slice(0,n)}i.d(t,{BN:()=>s,Bs:()=>r,Ky:()=>a,py:()=>n})},37246:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var r=i(134),a=i(4624);class n{constructor(e=1048576){(0,r.A)(this,"buffer",void 0),(0,r.A)(this,"pointer",void 0),(0,r.A)(this,"bitsLeft",void 0),(0,r.A)(this,"size",void 0),(0,r.A)(this,"endPointer",void 0),(0,r.A)(this,"pos",void 0),(0,r.A)(this,"error",void 0),(0,r.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.pos=BigInt(0),this.size=e,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}peekU1(){let e=0;(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();let t=this.pointer,i=this.bitsLeft;return 0===i&&(t++,i=8),e=this.buffer[t]>>i-1&1,e}readU1(){let e=0;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8,this.pos++),e}readU(e){let t=0;for(let i=0;i<e;i++)t|=this.readU1()<<e-i-1;return t}peekU(e){const t=this.pointer,i=this.bitsLeft,r=this.pos,a=this.readU(e);return this.pointer=t,this.bitsLeft=i,this.pos=r,a}remainingLength(){return this.endPointer-this.pointer}getBitLeft(){return this.bitsLeft}getPointer(){return this.pointer}setPointer(e){this.pointer=e}getPos(){return this.pos}skip(e){const t=(e-e%8)/8;this.pointer+=t,this.pos+=BigInt(t);const i=e%8;this.bitsLeft<=i?(this.pointer++,this.pos++,this.bitsLeft=8-(i-this.bitsLeft)):this.bitsLeft-=i}flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&(this.pointer++,this.pos++),!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);const e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{const e=this.onFlush(this.buffer);if(this.endPointer=e,this.pointer=0,this.bitsLeft=8,e<0)throw this.error=e,Error("IOReader error, flush failed")}}getBuffer(){return this.buffer}appendBuffer(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{const t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,a.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",257)}}reset(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0,this.pos=BigInt(0)}skipPadding(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++,this.pos++)}}},83314:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var r=i(134);class a{constructor(e=1048576){(0,r.A)(this,"buffer",void 0),(0,r.A)(this,"pointer",void 0),(0,r.A)(this,"pos",void 0),(0,r.A)(this,"bitPointer",void 0),(0,r.A)(this,"size",void 0),(0,r.A)(this,"error",void 0),(0,r.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=e,this.error=0,this.pos=BigInt(0),this.buffer=new Uint8Array(this.size)}writeU1(e){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&e?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.pos++,this.bitPointer=0)}writeU(e,t){for(let i=0;i<e;i++)this.writeU1(t>>e-i-1&1)}remainingLength(){return this.size-this.pointer}flush(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>1){const e=this.onFlush(this.buffer.subarray(0,this.pointer-1));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){const e=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed")}this.pointer=0}padding(){for(;0!==this.bitPointer;)this.writeU1(0)}reset(){this.pointer=0,this.bitPointer=0,this.error=0,this.pos=BigInt(0)}getBuffer(){return this.buffer}getPointer(){return this.pointer}getPos(){return this.pos}}},729:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var r=i(134),a=i(4624),n=i(50011);class s{constructor(e,t=!0){(0,r.A)(this,"data",void 0),(0,r.A)(this,"buffer",void 0),(0,r.A)(this,"byteStart",void 0),(0,r.A)(this,"pos",void 0),(0,r.A)(this,"size",void 0),(0,r.A)(this,"littleEndian",void 0),this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}writeUint8(e){this.data.setUint8(this.pos+++this.byteStart,e)}writeUint16(e){this.data.setUint16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}writeUint24(e){const t=3840&e,i=240&e,r=15&e;this.littleEndian?(this.writeUint8(r),this.writeUint8(i),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(i),this.writeUint8(r))}writeUint32(e){this.data.setUint32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}writeUint64(e){const t=e&BigInt(4294967295),i=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeUint32(Number(t)),this.writeUint32(Number(i))):(this.writeUint32(Number(i)),this.writeUint32(Number(t)))}writeInt8(e){this.data.setInt8(this.pos+++this.byteStart,e)}writeInt16(e){this.data.setInt16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}writeInt24(e){this.writeUint24(e<0?e+16777216:e)}writeInt32(e){this.data.setInt32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}writeInt64(e){const t=e&BigInt(4294967295),i=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeInt32(Number(t)),this.writeInt32(Number(i))):(this.writeInt32(Number(i)),this.writeInt32(Number(t)))}writeFloat(e){this.data.setFloat32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}writeDouble(e){this.data.setFloat64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}getPos(){return this.pos}seek(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}skip(e){this.seek(this.pos+e)}back(e){this.seek(this.pos-e)}remainingSize(){return this.size-this.pos}writeBuffer(e){let t=e.length;this.remainingSize()<t&&(t=this.remainingSize(),a.R8(`the remaining buffer size is smaller then the wrote buffer, hope set ${e.length}, but set ${t}`,"src/common/io/BufferWriter.ts",218)),this.buffer.set(e,this.pos),this.pos+=e.length}writeString(e){const t=n.encode(e);return this.writeBuffer(t),t.length}getWroteBuffer(){return this.buffer.subarray(0,this.pos)}resetBuffer(e,t=!0){this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}},28795:(e,t,i)=>{i(78978),i(97863),i(7914),i(21640),i(871),i(52584),i(98345),e.exports=i(46438).Set},21640:(e,t,i)=>{"use strict";var r=i(95933),a=i(6096);e.exports=i(99373)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(a(this,"Set"),e=0===e?0:e,e)}},r)},98345:(e,t,i)=>{i(643)("Set")},52584:(e,t,i)=>{i(44398)("Set")},871:(e,t,i)=>{var r=i(88535);r(r.P+r.R,"Set",{toJSON:i(5874)("Set")})},97860:(e,t,i)=>{e.exports=i(28795)}}]);