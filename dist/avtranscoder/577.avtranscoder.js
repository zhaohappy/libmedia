(self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[]).push([[577],{58469:(e,t,a)=>{"use strict";a.d(t,{Bq:()=>p,Hm:()=>o,Ij:()=>f,XC:()=>l,_5:()=>d,f7:()=>u,uF:()=>n});var i=a(77231),r=a(37246);const n={1:"Main",2:"LC",3:"LC",4:"LC",5:"HE",6:"HE"},o={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,i.N_,i.N_,i.N_],s=[i.N_,1,2,3,4,5,6,7];function d(e){let t=i.N_,a=i.N_,r=i.N_;var n,o;return e.length>=2&&(t=e[0]>>3&31,a=null!==(n=c[(7&e[0])<<1|e[1]>>7])&&void 0!==n?n:48e3,r=null!==(o=s[e[1]>>3&15])&&void 0!==o?o:2),{profile:t,sampleRate:a,channels:r}}function l(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){const{profile:a,sampleRate:i,channels:r}=d(t);e.codecpar.profile=a,e.codecpar.sampleRate=i,e.codecpar.chLayout.nbChannels=r}}function f(e){const t=o[e.sampleRate],a=e.chLayout.nbChannels,i=new Uint8Array(2);return i[0]=(31&e.profile)<<3|(14&t)>>1,i[1]=(1&t)<<7|(15&a)<<3,i}function p(e){if(e.length<7)return-1;const t=e[0]<<4|e[1]>>4;if(4095!==t)return-1;const a=1&e[1],i=(192&e[2])>>>6,r=(60&e[2])>>>2,n=(1&e[2])<<2|(192&e[3])>>>6,o=(3&e[3])<<11|e[4]<<3|(224&e[5])>>>5,d=3&e[6];let l=1===a?7:9,f=o-l;return{syncWord:t,profile:i+1,sampleRate:c[r],channels:s[n],aacFrameLength:o,numberOfRawDataBlocksInFrame:d,headerLength:l,framePayloadLength:f}}function u(e,t){function a(){const e=t.readU(2);let a=0;for(let i=0;i<=e;i++)a<<=8,a|=t.readU(8);return a}t||(t=new r.A).appendBuffer(e);const i=t.getPointer(),n={syncWord:0,profile:0,sampleRate:0,channels:0,useSameStreamMux:!1,headerLength:0,framePayloadLength:0,muxLengthBytes:0},o=t.readU(11);if(695!==o)return-1;n.syncWord=o,n.muxLengthBytes=t.readU(13);const d=1===t.readU1();if(n.useSameStreamMux=d,!d){const e=1===t.readU1();if(e&&1===t.readU1())return-1;if(e&&a(),1!==t.readU1())return-1;if(0!==t.readU(6))return-1;if(0!==t.readU(4))return-1;if(0!==t.readU(3))return-1;let i=e?a():0;const r=t.readU(5);i-=5;const o=t.readU(4);i-=4;const d=t.readU(4);if(i-=4,t.readU(3),i-=3,i>0&&t.readU(i),0!==t.readU(3))return-1;if(t.readU(8),1===t.readU1())if(e)a();else{let e=0;for(;;){e<<=8;const a=1===t.readU1();if(e+=t.readU(8),!a)break}}1===t.readU1()&&t.readU(8),n.profile=r+1,n.sampleRate=c[o],n.channels=s[d]}let l=0;for(;;){const e=t.readU(8);if(l+=e,255!==e)break}return n.framePayloadLength=l,n.headerLength=t.getPointer()-i+(8===t.getBitLeft()?0:1),n}},90412:(e,t,a)=>{"use strict";a.d(t,{Ui:()=>u,XC:()=>p,Yj:()=>m,k9:()=>f,zk:()=>s});var i=a(63939),r=a(37246),n=a(11573),o=a(83314),c=a(97317);const s={0:"Main",1:"High",2:"Professional"},d=[{level:20,maxResolution:2359296},{level:21,maxResolution:4460544},{level:30,maxResolution:10653696},{level:31,maxResolution:17040384},{level:40,maxResolution:21233664},{level:41,maxResolution:21233664},{level:50,maxResolution:35651584},{level:51,maxResolution:35651584},{level:52,maxResolution:35651584},{level:53,maxResolution:35651584},{level:60,maxResolution:142606336},{level:61,maxResolution:142606336},{level:62,maxResolution:142606336},{level:63,maxResolution:142606336}],l=[20,21,22,23,30,31,32,33,40,41,42,43,50,51,52,53,60,61,62,63,70,71,72,73];function f(e,t,a){const i=e*t;for(const e of d)if(i<=e.maxResolution)return e.level}function p(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=4){const a=u(t);e.codecpar.profile=a.profile,e.codecpar.level=a.level}}function u(e){const t=new r.A(e.length);t.appendBuffer(e),t.readU1(),t.readU(7);const a=t.readU(3),i=t.readU(5),n=t.readU1();let o=t.readU1()?10:8;return t.readU1()&&(o=12),{profile:a,level:i,tier:n,bitDepth:o,monochrome:t.readU1(),chromaSubsamplingX:t.readU1(),chromaSubsamplingY:t.readU1(),chromaSamplePosition:t.readU(2)}}function m(e,t){const a=new o.A(4);a.writeU1(1),a.writeU(7,1);const s=function(e){const t=new r.A;t.appendBuffer(e);const a=[];for(;t.remainingLength();){const i=t.getPointer();t.readU1(),t.readU(4);const r=t.readU1(),o=t.readU1();t.readU1(),r&&t.readU(8);const c=o?n.v(t):e.length-1-r,s=t.getPointer()-i;a.push(e.subarray(i,i+s+c)),t.skip(8*c)}return a}(t).find((e=>1==(e[0]>>>3&15)));if(s){const e=function(e){const t=new r.A(e.length);t.appendBuffer(e),t.readU1(),t.readU(4);const a=t.readU1(),i=t.readU1();t.readU1(),a&&t.readU(8),i&&n.v(t);const o=n.f(t,3),c=(n.f(t,1),n.f(t,1));let s=0,d=0,f=[0],p=[0],u=[0],m=[0],h=[0],g=[0],A=0,y=[0],I=[0],x=[0];if(c)p[0]=n.f(t,5);else{s=n.f(t,1),s?(n.f(t,32),n.f(t,32),n.f(t,1)&&n.d(t),n.f(t,1)&&(A=n.f(t,5),n.f(t,32),n.f(t,5),n.f(t,5))):d=0;let e=n.f(t,1),a=n.f(t,5);for(let i=0;i<=a;i++){if(f[i]=n.f(t,12),p[i]=n.f(t,5),p[i]>7?u[i]=n.f(t,1):u[i]=0,d){if(m[i]=n.f(t,1),m[i]){let e=A+1;y[i]=n.f(t,e),I[i]=n.f(t,e),x[i]=n.f(t,1)}}else m[i]=0;e&&(h[i]=n.f(t,1),h[i]&&(g[i]=n.f(t,4)))}}let N=n.f(t,4),R=n.f(t,4),b=N+1,v=n.f(t,b);b=R+1;let P=n.f(t,b),B=0,k=0,S=0;B=c?0:n.f(t,1),B&&(n.f(t,4),n.f(t,3)),n.f(t,1),n.f(t,1),n.f(t,1);let U=0,w=0,C=0,D=0,V=0,_=0,L=2,M=2,T=0;c||(n.f(t,1),n.f(t,1),n.f(t,1),n.f(t,1),D=n.f(t,1),D?(V=n.f(t,1),_=n.f(t,1)):(V=0,_=0),L=n.f(t,1)?2:n.f(t,1),L>0?n.f(t,1)?2:n.f(t,1):2,D&&n.f(t,3)),n.f(t,1),n.f(t,1),n.f(t,1);let E=n.f(t,1),z=0,G=0,X=0;2==o&&E?(z=n.f(t,1),G=z?12:10):o<=2&&(G=E?10:8),X=1==o?0:n.f(t,1);let O=0,F=0,W=0;n.f(t,1)?(O=n.f(t,8),F=n.f(t,8),W=n.f(t,8)):(O=2,F=2,W=2);let H=0,$=0,K=0,Y=0,Q=0;return X?(H=n.f(t,1),$=1,K=1,Y=0,Q=0):1==O&&13==F&&0==W?(H=1,$=0,K=0,Q=n.f(t,1)):(H=n.f(t,1),0==o?($=1,K=1):1==o?($=0,K=0):12==G?($=n.f(t,1),K=$?n.f(t,1):0):($=1,K=0),$&&K&&(Y=n.f(t,2)),Q=n.f(t,1)),n.f(t,1),{width:v+1,height:P+1,profile:o,level:l[p[0]],tier:u[0],bitDepth:G,monoChrome:X,colorRange:H,colorPrimaries:O,transferCharacteristics:F,matrixCoefficients:W,subsamplingX:$,subsamplingY:K,chromaSamplePosition:Y}}(s);a.writeU(3,e.profile),a.writeU(5,e.level),a.writeU(1,e.tier),a.writeU(1,e.bitDepth>8?1:0),a.writeU(1,12===e.bitDepth?1:0),a.writeU(1,e.monoChrome),a.writeU(1,e.subsamplingX),a.writeU(1,e.subsamplingY),a.writeU(1,e.chromaSamplePosition)}else{const t=c.g[i.f[15](e+28)];a.writeU(3,i.f[15](e+48)),a.writeU(5,i.f[15](e+52)),a.writeU(1,0),a.writeU(1,t.comp[0].depth>8?1:0),a.writeU(1,12===t.comp[0].depth?1:0),a.writeU(1,0),a.writeU(1,1),a.writeU(1,1),a.writeU(1,0)}return a.writeU(8,0),a.getBuffer()}},89088:(e,t,a)=>{"use strict";a.d(t,{Au:()=>y,He:()=>I,XC:()=>x,Y2:()=>h,hG:()=>g,oz:()=>A});var i=a(77231);const r=[44100,48e3,32e3,0],n=[22050,24e3,16e3,0],o=[11025,12e3,8e3,0],c=[0,1152,1152,384],s=[0,576,1152,384],d=[0,576,1152,384],l=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],f=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],p=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],u=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],m=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function h(e,t){switch(e){case 0:return o[t];case 2:return n[t];case 3:return r[t]}return i.N_}function g(e,t){switch(e){case 0:return d[t];case 2:return s[t];case 3:return c[t]}return i.N_}function A(e,t,a){switch(t){case 1:switch(e){case 0:case 2:return m[a];case 3:return p[a]}break;case 2:switch(e){case 0:case 2:return m[a];case 3:return f[a]}case 3:switch(e){case 0:case 2:return u[a];case 3:return l[a]}}return i.N_}function y(e){switch(e){case 1:return 34;case 2:return 33;case 3:return 32}return i.N_}const I={32:"Layer1",33:"Layer2",34:"Layer3"};function x(e,t){if(t&&t.length>=4){const a=t[1]>>>3&3,i=(6&t[1])>>1,r=(12&t[2])>>>2,n=3&~(t[3]>>>6)?2:1,o=y(i),c=h(a,r);e.codecpar.profile=o,e.codecpar.sampleRate=c,e.codecpar.chLayout.nbChannels=n}}},65451:(e,t,a)=>{"use strict";a.d(t,{Ij:()=>d,XC:()=>s,kt:()=>c});var i=a(31865),r=a(729),n=a(44328);const o=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function c(e){let t=0,a=0,i=0;if(e.length<1)return 0;switch(t=e[0],a=o[t>>3],3&t){case 0:i=1;break;case 1:case 2:i=2;break;case 3:if(e.length<2)return 0;i=63&e[1]}return i*a}function s(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=19){const a=new i.A(t,!1);a.skip(9),e.codecpar.chLayout.nbChannels=a.readUint8(),e.codecpar.initialPadding=a.readUint16(),e.codecpar.sampleRate=a.readUint32(),e.codecpar.seekPreroll=Number((0,n.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function d(e){const t=new Uint8Array(19),a=new r.A(t,!1);return a.writeString("OpusHead"),a.writeUint8(1),a.writeUint8(e.chLayout.nbChannels),a.writeUint16(e.initialPadding),a.writeUint32(e.sampleRate),t}},14392:(e,t,a)=>{"use strict";a.d(t,{U:()=>n,X:()=>r});var i=a(37246);function r(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){const a=n(t);e.codecpar.profile=a.profile,e.codecpar.level=a.level}}function n(e){const t=new i.A(e.length);return t.appendBuffer(e.subarray(4)),{profile:t.readU(8),level:t.readU(8),bitDepth:t.readU(4),chromaSubsampling:t.readU(3),fullRangeFlag:t.readU1(),colorPrimaries:t.readU(8),colorTrc:t.readU(8),colorSpace:t.readU(8)}}},58919:(e,t,a)=>{"use strict";a.d(t,{Ui:()=>h,XC:()=>m,Yj:()=>g,k9:()=>u,wN:()=>f});var i=a(63939),r=a(9599),n=a(29170),o=a(37246),c=a(77231),s=a(97317),d=a(44328),l=a(729);const f={0:"Profile0",1:"Profile1",2:"Profile2",3:"Profile3"},p=[{level:10,maxResolution:196608,maxFrameRate:30},{level:11,maxResolution:196608,maxFrameRate:60},{level:20,maxResolution:518400,maxFrameRate:30},{level:21,maxResolution:518400,maxFrameRate:60},{level:30,maxResolution:2073600,maxFrameRate:30},{level:31,maxResolution:2073600,maxFrameRate:60},{level:40,maxResolution:3686400,maxFrameRate:30},{level:41,maxResolution:3686400,maxFrameRate:60},{level:50,maxResolution:8294400,maxFrameRate:30},{level:51,maxResolution:8294400,maxFrameRate:60},{level:60,maxResolution:8847360,maxFrameRate:30},{level:61,maxResolution:8847360,maxFrameRate:60},{level:70,maxResolution:35389440,maxFrameRate:30},{level:71,maxResolution:35389440,maxFrameRate:60}];function u(e,t,a){const i=e*t;for(const e of p)if(i<=e.maxResolution&&a<=e.maxFrameRate)return e.level}function m(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){const a=h(t);e.codecpar.profile=a.profile,e.codecpar.level=a.level}}function h(e){const t=new o.A(e.length);return t.appendBuffer(e),{profile:t.readU(8),level:t.readU(8),bitDepth:t.readU(4),chromaSubsampling:t.readU(3),fullRangeFlag:t.readU1(),colorPrimaries:t.readU(8),colorTrc:t.readU(8),colorSpace:t.readU(8)}}function g(e){const t=new l.A(new Uint8Array(8)),a=function(e){let t=i.f[15](e+48),a=i.f[15](e+52);a===c.N_&&(a=u(i.f[15](e+56),i.f[15](e+60),(0,d.lb)((0,n.A)(e+72,r.P))));const o=s.g[i.f[15](e+28)];let l=i.f[15](e+40),f=1;o&&(l=o.comp[0].depth,1===o.log2ChromaW&&1===o.log2ChromaH?1===i.f[15](e+100)&&(f=0):1===o.log2ChromaW&&0===o.log2ChromaH?f=2:0===o.log2ChromaW&&0===o.log2ChromaH&&(f=3));const p=2===i.f[15](e+84)?1:0;return t===c.N_&&l&&(t=0==f||1==f?8==l?0:2:8==l?1:3),{profile:t,level:a,bitDepth:l,chromaSubsampling:f,fullRange:p}}(e);return t.writeUint8(a.profile),t.writeUint8(a.level),t.writeUint8(a.bitDepth<<4|a.chromaSubsampling<<1|a.fullRange),t.writeUint8(i.f[15](e+88)),t.writeUint8(i.f[15](e+92)),t.writeUint8(i.f[15](e+96)),t.writeUint16(0),t.getWroteBuffer()}},85947:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var i=a(134);class r{constructor(){(0,i.A)(this,"type",-1),(0,i.A)(this,"onStreamAdd",void 0)}async destroy(e){}}},34577:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>F});var i=a(134),r=a(80662),n=a.n(r),o=a(97860),c=a.n(o),s=a(14686),d=a(61499),l=a(63939),f=a(50932),p=a(4624),u=a(9705),m=a(85947),h=a(37837),g=a(71517),A=a(77231),y=a(31866),I=a(33919),x=a(72739),N=a(20620),R=a(53e3),b=a(55611),v=a(14392),P=a(58919),B=a(90412),k=a(89088),S=a(65451),U=a(58469),w=a(44328),C=a(31865),D=a(93082),V=a(5783),_=a(82774),L=a(67672),M=a(95335),T=a(53260),E=a(13663),z=a(92647),G=a(50011),X=a(34677),O="src/avformat/formats/IMatroskaFormat.ts";class F extends m.A{constructor(){super(),(0,i.A)(this,"type",8),(0,i.A)(this,"context",void 0),(0,i.A)(this,"blockReader",void 0)}init(e){e.ioReader&&e.ioReader.setEndian(!0);const t={isLive:!0,firstCluster:-BigInt(1),segmentStart:-BigInt(1),header:{version:0,readVersion:0,maxIdLength:4,maxSizeLength:8,docType:"",docTypeVersion:0,docTypeReadVersion:0},seekHead:null,info:null,tracks:null,attachments:null,chapters:null,cues:null,tags:null,currentCluster:{timeCode:BigInt(0),pos:-BigInt(1),block:{pos:-BigInt(1),size:-BigInt(1)},blockGroup:{block:null}},clusterIndexes:[],clusterIndexesPosMap:new(n())};e.privateData=this.context=t}analyzeStreams(e){const t="webm"===this.context.header.docType?y.N:y.e;this.context.tracks&&x.__(this.context.tracks.entry,(a=>{var i,r,n;const o=e.createStream();switch(o.privData=a,o.codecpar.codecId=t[a.codecId]||0,a.type){case 2:o.codecpar.codecType=1;break;case 1:o.codecpar.codecType=0;break;case 17:o.codecpar.codecType=3;break;default:o.codecpar.codecType=-1}a.language&&(o.metadata.language=a.language),a.name&&(o.metadata.name=a.name),a.currentDts=-BigInt(1),a.audio?("A_PCM/FLOAT/IEEE"===a.codecName?64===a.audio.bitDepth?o.codecpar.codecId=65559:32===a.audio.bitDepth&&(o.codecpar.codecId=65557):"A_PCM/INT/BIG"===a.codecName?16===a.audio.bitDepth?o.codecpar.codecId=65537:24===a.audio.bitDepth?o.codecpar.codecId=65549:32===a.audio.bitDepth&&(o.codecpar.codecId=65545):"A_PCM/INT/LIT"===a.codecName&&(8===a.audio.bitDepth?o.codecpar.codecId=65541:16===a.audio.bitDepth?o.codecpar.codecId=65536:24===a.audio.bitDepth?o.codecpar.codecId=65548:32===a.audio.bitDepth&&(o.codecpar.codecId=65544)),o.codecpar.chLayout.nbChannels=a.audio.channels,o.codecpar.sampleRate=0|a.audio.sampleRate,o.codecpar.bitsPerCodedSample=a.audio.bitDepth):a.video&&(o.codecpar.width=a.video.pixelWidth,o.codecpar.height=a.video.pixelHeight,a.video.color&&(L.ai(a.video.color.primaries)&&(o.codecpar.colorPrimaries=a.video.color.primaries),L.ai(a.video.color.transferCharacteristics)&&(o.codecpar.colorTrc=a.video.color.transferCharacteristics),L.ai(a.video.color.range)&&(o.codecpar.colorRange=a.video.color.range),L.ai(a.video.color.matrixCoefficients)&&(o.codecpar.colorSpace=a.video.color.matrixCoefficients)));let c=0;if("V_MS/VFW/FOURCC"===a.codecId&&(null===(i=a.codecPrivate)||void 0===i?void 0:i.size)>=40)o.codecpar.bitsPerCodedSample=a.codecPrivate.data[15]<<8|a.codecPrivate.data[14],o.codecpar.codecTag=a.codecPrivate.data[19]<<24|a.codecPrivate.data[18]<<16|a.codecPrivate.data[17]<<8|a.codecPrivate.data[16],o.codecpar.codecId=T.n[o.codecpar.codecTag]||0,0===o.codecpar.codecId&&(o.codecpar.codecId,E.h[o.codecpar.codecTag]),c=40;else if("V_QUICKTIME"===a.codecId&&(null===(r=a.codecPrivate)||void 0===r?void 0:r.size)>=21){const e=1===o.codecpar.codecType?E.u:E.h;o.codecpar.codecTag=a.codecPrivate.data[3]<<24|a.codecPrivate.data[2]<<16|a.codecPrivate.data[1]<<8|a.codecPrivate.data[0];const t=e[o.codecpar.codecTag];if(t){const e=new Uint8Array(4),t=Number(BigInt.asIntN(32,a.codecPrivate.size));e[0]=t>>>24&255,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=255&t,a.codecPrivate.size+=BigInt(4),a.codecPrivate.data=(0,z.A)(Uint8Array,[e,a.codecPrivate.data])}o.codecpar.codecId=t||0}if(null!==(n=a.codecPrivate)&&void 0!==n&&n.data&&a.codecPrivate.size-BigInt(Math.floor(c))>0){let e=a.codecPrivate.data.subarray(c);if(94212===o.codecpar.codecId||94230===o.codecpar.codecId){let t=G.decode(e).split(/\r?\n/);for(let e=0;e<t.length;e++)if("[Events]"===t[e].trim()){t=t.slice(0,e);break}t.push("[Events]"),t.push("Format: ReadOrder, Layer, Style, Name, MarginL, MarginR, MarginV, Effect, Text"),e=G.encode(t.join("\n"))}if(o.codecpar.extradataSize=e.length,o.codecpar.extradata=(0,h.sY)(e.length),(0,s.lW)(o.codecpar.extradata,e.length,e),o.codecpar.extradata)switch(o.codecpar.codecId){case 27:N.XC(o,(0,s.s3)(o.codecpar.extradata,o.codecpar.extradataSize));break;case 173:R.XC(o,(0,s.s3)(o.codecpar.extradata,o.codecpar.extradataSize));break;case 196:b.XC(o,(0,s.s3)(o.codecpar.extradata,o.codecpar.extradataSize));break;case 225:B.XC(o,(0,s.s3)(o.codecpar.extradata,o.codecpar.extradataSize));break;case 139:v.X(o,(0,s.s3)(o.codecpar.extradata,o.codecpar.extradataSize));break;case 167:P.XC(o,(0,s.s3)(o.codecpar.extradata,o.codecpar.extradataSize));break;case 86018:U.XC(o,(0,s.s3)(o.codecpar.extradata,o.codecpar.extradataSize));break;case 86017:k.XC(o,(0,s.s3)(o.codecpar.extradata,o.codecpar.extradataSize));break;case 86076:S.XC(o,(0,s.s3)(o.codecpar.extradata,o.codecpar.extradataSize))}else{let e;86018===o.codecpar.codecId&&(e=U.Ij(o.codecpar)),e&&(o.codecpar.extradataSize=e.length,o.codecpar.extradata=(0,h.sY)(o.codecpar.extradataSize),(0,s.lW)(o.codecpar.extradata,o.codecpar.extradataSize,e))}}this.context.info&&(o.timeBase.num=1,this.context.info.timestampScale?o.timeBase.den=1e3*A.SF/this.context.info.timestampScale|0:(o.timeBase.den=1e3,this.context.info.timestampScale=A.SF),this.context.info.duration&&(o.duration=BigInt(Math.floor(this.context.info.duration)))),(null==a.default||a.default)&&(o.disposition|=1),a.encodings&&x.__(a.encodings.entry,(e=>{e.compression&&(0,X.A)(e.compression.algo)&&(a.needDecompression=!0),e.encryption&&(0,X.A)(e.encryption.algo)&&(a.needDecryption=!0)}))})),this.context.attachments&&x.__(this.context.attachments.entry,(t=>{const a=e.createStream();a.codecpar.codecType=4,a.privData=t,t.data&&(a.codecpar.extradataSize=Number(BigInt.asIntN(32,t.data.size)),a.codecpar.extradata=(0,h.sY)(a.codecpar.extradataSize),(0,s.lW)(a.codecpar.extradata,a.codecpar.extradataSize,t.data.data))})),this.context.tags&&x.__(this.context.tags.entry,(t=>{var a;if("DURATION"===(null===(a=t.tag)||void 0===a?void 0:a.name)){let a=t.tag.string.replaceAll("\0","").split("."),i=a[0].split(":"),r=BigInt(+i[0])*BigInt(36e8)+BigInt(+i[1])*BigInt(6e7)+BigInt(+i[2])*BigInt(1e6)+BigInt(+a[1])/BigInt(1e3);const n=(0,D.A)(e.streams,t.target.trackUid);n&&(n.duration=(0,w.k)(r,A.KR,n.timeBase))}})),this.context.chapters&&x.__(this.context.chapters.entry,(t=>{const a=t.atom;a&&x.__(a,(t=>{var a,i;e.chapters.push({id:t.uid,start:t.start,end:t.end,timeBase:{num:1,den:1e9},metadata:{title:(null===(a=t.display)||void 0===a?void 0:a.title)||"",language:(null===(i=t.display)||void 0===i?void 0:i.language)||""}})}))}))}async readHeader(e){if(440786851!==await(0,I.aL)(e,this.context.header.maxIdLength))return p.z3("not matroska format",O,409),u.LR;const t=await(0,I.Qb)(e.ioReader,this.context.header.maxSizeLength);if(this.context.header=M.X$(this.context.header,await(0,I.Pb)(e,t,I.jt)),408125543!==await(0,I.aL)(e,this.context.header.maxIdLength))return p.z3("not matroska format",O,418),u.LR;const a=await(0,I.Qb)(e.ioReader,this.context.header.maxSizeLength);this.context.segmentStart=e.ioReader.getPos();const i=e.ioReader.getPos()+a,r=new(c());let n=!1,o=!1;for(;e.ioReader.getPos()<i||!n||!o;){const t=e.ioReader.getPos(),a=await(0,I.aL)(e,this.context.header.maxIdLength);if(a===u.LR){await this.syncTopLevelElement(e,2);continue}const i=await(0,I.Qb)(e.ioReader,this.context.header.maxSizeLength);if(i!==BigInt(u.LR)){if(290298740===a)this.context.isLive=!1,this.context.seekHead=await(0,I.Pb)(e,i,I.Cr);else if(475249515===a)this.context.isLive=!1,this.context.cues=await(0,I.Pb)(e,i,I.eG);else if(272869232===a)this.context.isLive=!1,this.context.chapters=await(0,I.Pb)(e,i,I.Y0);else if(357149030===a)this.context.info=await(0,I.Pb)(e,i,I.qi);else if(307544935===a)this.context.tags=await(0,I.Pb)(e,i,I.hK);else if(423732329===a)this.context.attachments=await(0,I.Pb)(e,i,I.qp);else if(374648427===a)n=!0,this.context.tracks=await(0,I.Pb)(e,i,I.Wy);else if(524531317===a){if(o=!0,this.context.firstCluster=t,this.context.isLive||!this.context.seekHead||!(1&e.ioReader.flags))break;const a=this.context.seekHead.entry;let i=0;for(;i<a.length;i++)if(!r.has(a[i].id)){await e.ioReader.seek(a[i].pos+this.context.segmentStart);break}if(i===a.length)break}else await e.ioReader.skip(Number(BigInt.asIntN(32,i)));r.add(a)}else await this.syncTopLevelElement(e,2)}return this.context.firstCluster>0&&await e.ioReader.seek(this.context.firstCluster),this.analyzeStreams(e),0}parseAdditions(e,t){for(let i=0;i<t.entry.length;i++){var a;const r=t.entry[i];if(null!==(a=r.additional)&&void 0!==a&&a.size){4===r.additionalId&&p.R8("ITU_T_T35 not support now",O,512);const t=(0,h.sY)(r.additional.data.length+8);_.Cv(t,BigInt(r.additionalId>>>0)),(0,s.lW)(t+8,r.additional.data.length,r.additional.data),(0,g.Ow)(e,15,t,r.additional.data.length+8)}}}async parseBlock(e,t){var a,i,r;const n=(null===(a=this.context.currentCluster.block)||void 0===a?void 0:a.data)||this.context.currentCluster.blockGroup.block.data;let o=null===(i=this.context.currentCluster.block)||void 0===i?void 0:i.pos;o<0&&(o=this.context.currentCluster.blockGroup.block.pos);let c,m=-1,y=BigInt(0);null!==(r=this.context.currentCluster.blockGroup)&&void 0!==r&&r.block&&(c=this.context.currentCluster.blockGroup.additions,m=this.context.currentCluster.blockGroup.reference?0===this.context.currentCluster.blockGroup.reference.length?1:0:1,this.context.currentCluster.blockGroup.duration&&(y=this.context.currentCluster.blockGroup.duration)),this.blockReader?this.blockReader.resetBuffer(n):this.blockReader=new C.A(n);const x=this.blockReader.getPos(),N=Number(BigInt.asUintN(32,await(0,I.Qb)(this.blockReader,8))),R=(0,V.A)(e.streams,N);if(!R)return p.z3(`invalid track number ${N}`,O,563),u.OY;const b=this.blockReader.readInt16(),v=this.blockReader.readUint8();-1===m&&(m=128&v?1:0);let P=0,B=[];switch(v>>>1&3){case 1:{P=this.blockReader.readUint8()+1;let e=0;for(let t=0;t<P-1;t++){let t=0;for(;;){const e=this.blockReader.readUint8();if(0===e)break;if(255!==e){t+=e;break}t+=255}e+=t,B.push(t)}B.push(n.length-Number(BigInt.asIntN(32,this.blockReader.getPos()-x))-e);break}case 3:{P=this.blockReader.readUint8()+1,B.push(await(0,I.Ag)(this.blockReader,4));let e=B[0];for(let t=1;t<P-1;t++){let a=await(0,I.pf)(this.blockReader,4)+B[t-1];e+=a,B.push(a)}B.push(n.length-Number(BigInt.asIntN(32,this.blockReader.getPos()-x))-e);break}case 2:P=this.blockReader.readUint8()+1;const e=(n.length-Number(BigInt.asIntN(32,this.blockReader.getPos()-x)))/P;for(let t=0;t<P;t++)B.push(e);break;case 0:P=1,B.push(n.length-Number(BigInt.asIntN(32,this.blockReader.getPos()-x)))}const k=R.privData,S=k.timeScale||1;if(k.needDecryption)throw new Error("not support encryption stream");let U=(this.context.currentCluster.timeCode+BigInt(Math.floor(b*S)))*BigInt(0|this.context.info.timestampScale);k.codecDelay&&(U-=k.codecDelay),U/=BigInt(1e3),U=(0,w.k)(U,A.KR,R.timeBase),y=BigInt(Math.floor(Number(BigInt.asIntN(32,y))*S))*BigInt(0|this.context.info.timestampScale),y/=BigInt(1e3),y=(0,w.k)(y,A.KR,R.timeBase);for(let a=0;a<P;a++){const i=0!==a?(0,g._5)():t;let r,n=B[a],u=0;if(k.needDecompression){const e=k.encodings.entry.find((e=>!!e.compression));3===e.compression.algo?(r=e.compression.settings.data,n+=r.length,u=r.length):p.h2(`not support compression stream, algo: ${e.compression.algo}`,O,673)}f.M[17](i+56,o+this.blockReader.getPos()),f.M[15](i+32,R.index),(0,s.Mr)(i+72,R.timeBase[d.o9],8),f.M[17](i+8,U),f.M[15](i+28,n),f.M[17](i+48,y);const I=(0,h.sY)(n);r&&(0,s.lW)(I,u,r),(0,s.lW)(I+u,B[a],this.blockReader.readBuffer(B[a])),(0,g.NX)(i,I,n),0!==R.codecpar.codecType?(m&&f.M[15](i+36,1|l.f[15](i+36)),f.M[17](i+16,U)):(27!==R.codecpar.codecId&&173!==R.codecpar.codecId&&196!==R.codecpar.codecId||f.M[15](i+80,1),m?(f.M[15](i+36,1|l.f[15](i+36)),k.gopCount>1?(k.dtsDelta=(0,w.k)(k.maxPts-k.minPts,R.timeBase,A.KR)/BigInt(k.gopCount-1|0),k.firstGopGot=!0):k.dtsDelta||(k.dtsDelta=(0,w.k)(BigInt(33),A.i0,A.KR)),k.gopCount=1,k.minPts=U,k.maxPts=U):(!k.firstGopGot&&k.gopCount>2&&U>k.maxPts?k.dtsDelta=(0,w.k)(k.maxPts-k.minPts,R.timeBase,A.KR)/BigInt(k.gopCount-1|0):k.dtsDelta||(k.dtsDelta=(0,w.k)(BigInt(33),A.i0,A.KR)),k.gopCount++),U>k.maxPts&&(k.maxPts=U),k.currentDts>=BigInt(0)?y?(k.currentDts=k.currentDts+(0,w.k)(y,R.timeBase,A.KR),f.M[17](i+16,(0,w.k)(k.currentDts,A.KR,R.timeBase))):(k.currentDts=k.currentDts+k.dtsDelta,f.M[17](i+16,(0,w.k)(k.currentDts,A.KR,R.timeBase))):(k.currentDts=(0,w.k)(l.f[17](i+8),R.timeBase,A.KR),f.M[17](i+16,l.f[17](i+8)),k.currentDts<BigInt(1e5)&&(k.currentDts=BigInt(0),f.M[17](i+16,BigInt(0))))),c&&this.parseAdditions(i,c),0!==a&&e.interval.packetBuffer.push(i)}return this.context.currentCluster.block={pos:-BigInt(1),size:-BigInt(1)},this.context.currentCluster.blockGroup={block:null},0}addClusterIndex(e){if(this.context.clusterIndexesPosMap.has(e.pos))return;const t=x.El(this.context.clusterIndexes,(t=>t.time<e.time?1:-1));t>-1?(this.context.clusterIndexesPosMap.set(e.pos,t),this.context.clusterIndexes.splice(t,0,e)):(this.context.clusterIndexesPosMap.set(e.pos,this.context.clusterIndexes.length),this.context.clusterIndexes.push(e))}async readAVPacket_(e,t){const a=e.ioReader.getPos(),i=await(0,I.aL)(e,this.context.header.maxIdLength);if(i===u.LR)return await this.syncTopLevelElement(e),this.readAVPacket_(e,t);const r=await(0,I.Qb)(e.ioReader,this.context.header.maxSizeLength);if(r===BigInt(u.LR))return await this.syncTopLevelElement(e),this.readAVPacket_(e,t);if(524531317===i){this.context.currentCluster.pos=a,this.context.currentCluster.timeCode=BigInt(0),await(0,I.Pb)(e,r,I.GZ,this.context.currentCluster,[163,160]),this.addClusterIndex({time:this.context.currentCluster.timeCode,pos:a});let i=await this.parseBlock(e,t);if(i===u.OY)return this.readAVPacket_(e,t);if(i<0)return i}else if(163===i){this.context.currentCluster.block={pos:e.ioReader.getPos(),size:r,data:await e.ioReader.readBuffer(Number(BigInt.asIntN(32,r)))};let a=await this.parseBlock(e,t);if(a===u.OY)return this.readAVPacket_(e,t);if(a<0)return a}else{if(160!==i)return 475249515===i||307544935===i||423732329===i||272869232===i||357149030===i||374648427===i||290298740===i?(await e.ioReader.skip(Number(BigInt.asIntN(32,r))),this.readAVPacket_(e,t)):(await this.syncTopLevelElement(e),this.readAVPacket_(e,t));{await(0,I.Pb)(e,r,I.Wg,this.context.currentCluster.blockGroup);let a=await this.parseBlock(e,t);if(a===u.OY)return this.readAVPacket_(e,t);if(a<0)return a}}return 0}async readAVPacket(e,t){try{return await this.readAVPacket_(e,t)}catch(t){return-1048576!==e.ioReader.error?(p.z3(`read packet error, ${t}`,O,890),u.LR):e.ioReader.error}}async syncTopLevelElement(e,t=3){let a=A.Dh;for(;;)try{const i=e.ioReader.getPos(),r=await e.ioReader.peekUint32();if(524531317===r||475249515===r||307544935===r||423732329===r||272869232===r||357149030===r||374648427===r||290298740===r){a=i;let r=0;await e.ioReader.skip(4);const n=await(0,I.Qb)(e.ioReader,this.context.header.maxSizeLength);if(n===BigInt(u.LR)){await e.ioReader.seek(i+BigInt(1));continue}for(await e.ioReader.skip(Number(BigInt.asIntN(32,n)));r<=t;){const t=await(0,I.aL)(e,this.context.header.maxIdLength),a=await(0,I.Qb)(e.ioReader,this.context.header.maxSizeLength);if(524531317!==t&&475249515!==t&&307544935!==t&&423732329!==t&&272869232!==t&&357149030!==t&&374648427!==t&&290298740!==t)break;r++,await e.ioReader.skip(Number(BigInt.asIntN(32,a)))}if(!(r<t))break;await e.ioReader.seek(a+BigInt(1)),a=A.Dh}else await e.ioReader.skip(1),a=A.Dh}catch(e){break}a!==A.Dh&&await e.ioReader.seek(a)}async seek(e,t,a,i){var r;const n=e.ioReader.getPos(),o=(0,w.k)(a,t.timeBase,A.KR);let c=A.Dh;if(null!==(r=this.context.cues)&&void 0!==r&&r.entry.length){const e=t.privData;for(let t=0;t<this.context.cues.entry.length;t++)if((this.context.cues.entry[t].time||BigInt(0))*BigInt(0|this.context.info.timestampScale)/BigInt(1e3)>o){const a=this.context.cues.entry[Math.max(t-1,0)].pos;if(a.length){const t=a.find((t=>t.track===e.number));if(t){c=t.pos+this.context.segmentStart;break}}}}if(c===A.Dh&&this.context.clusterIndexes.length){for(let e=0;e<this.context.clusterIndexes.length;e++)if(this.context.clusterIndexes[e].time*BigInt(0|this.context.info.timestampScale)/BigInt(1e3)>o){c=this.context.clusterIndexes[Math.max(e-1,0)].pos;break}c===A.Dh&&(c=this.context.clusterIndexes[this.context.clusterIndexes.length-1].pos)}return c!==A.Dh?(await e.ioReader.seek(c),x.__(this.context.tracks.entry,(e=>{e.currentDts=-BigInt(1)})),n):BigInt(u.E$)}getAnalyzeStreamsCount(){var e,t;return null!==(e=null===(t=this.context.tracks)||void 0===t?void 0:t.entry.length)&&void 0!==e?e:2}}},13663:(e,t,a)=>{"use strict";a.d(t,{h:()=>r,u:()=>n});var i=a(79682);const r={[(0,i.A)("mp4v")]:12,[(0,i.A)("DIVX")]:12,[(0,i.A)("XVID")]:12,[(0,i.A)("3IV2")]:12,[(0,i.A)("vvc1")]:196,[(0,i.A)("vvi1")]:196,[(0,i.A)("hev1")]:173,[(0,i.A)("hvc1")]:173,[(0,i.A)("dvhe")]:173,[(0,i.A)("hev1")]:173,[(0,i.A)("avc1")]:27,[(0,i.A)("avc2")]:27,[(0,i.A)("avc3")]:27,[(0,i.A)("avc4")]:27,[(0,i.A)("ai5p")]:27,[(0,i.A)("ai5q")]:27,[(0,i.A)("ai52")]:27,[(0,i.A)("ai53")]:27,[(0,i.A)("ai55")]:27,[(0,i.A)("ai56")]:27,[(0,i.A)("ai1p")]:27,[(0,i.A)("ai1q")]:27,[(0,i.A)("ai12")]:27,[(0,i.A)("ai13")]:27,[(0,i.A)("ai15")]:27,[(0,i.A)("ai16")]:27,[(0,i.A)("AVin")]:27,[(0,i.A)("aivx")]:27,[(0,i.A)("rv64")]:27,[(0,i.A)("xalg")]:27,[(0,i.A)("avlg")]:27,[(0,i.A)("dva1")]:27,[(0,i.A)("dvav")]:27,[(0,i.A)("vp08")]:139,[(0,i.A)("vp09")]:167,[(0,i.A)("av01")]:225},n={[(0,i.A)("mp4a")]:86018,[(0,i.A)("ac-3")]:86019,[(0,i.A)("sac3")]:86019,[(0,i.A)("ac-4")]:86119,[(0,i.A)("dtsc")]:86020,[(0,i.A)("dtsh")]:86020,[(0,i.A)("dtsl")]:86020,[(0,i.A)("dtse")]:86020,[(0,i.A)("DTS ")]:86020,[(0,i.A)("ec-3")]:86056,[(0,i.A)(".mp3")]:86017,[(0,i.A)("mp3 ")]:86017,1836253269:86017,[(0,i.A)("spex")]:86051,[(0,i.A)("SPXN")]:86051,[(0,i.A)("fLaC")]:86028,[(0,i.A)("Opus")]:86076,[(0,i.A)("alaw")]:65543,[(0,i.A)("ulaw")]:65542,[(0,i.A)("fl32")]:65557,[(0,i.A)("fl64")]:65559,[(0,i.A)("twos")]:65537,[(0,i.A)("lpcm")]:65536,[(0,i.A)("sowt")]:65536,[(0,i.A)("in24")]:65548,[(0,i.A)("in32")]:65544,[(0,i.A)("sowt")]:65540,[(0,i.A)("raw ")]:65541,[(0,i.A)("NONE")]:65541}},5783:(e,t,a)=>{"use strict";function i(e,t){for(let a=0;a<e.length;a++)if(e[a].privData.number===t)return e[a]}a.d(t,{A:()=>i})},93082:(e,t,a)=>{"use strict";function i(e,t){for(let a=0;a<e.length;a++)if(e[a].privData.uid===t)return e[a]}a.d(t,{A:()=>i})},33919:(e,t,a)=>{"use strict";a.d(t,{Ag:()=>x,Cr:()=>d,GZ:()=>y,Pb:()=>B,Qb:()=>R,Wg:()=>A,Wy:()=>f,Y0:()=>u,aL:()=>P,eG:()=>m,hK:()=>g,jt:()=>I,pf:()=>N,qi:()=>l,qp:()=>p});var i=a(4624),r=a(9705),n=a(67672),o=a(72739),c="src/avformat/formats/matroska/imatroska.ts";const s=BigInt(20971520),d={19899:{type:9,isArray:!0,filedName:"entry",child:{21419:{type:1,filedName:"id"},21420:{type:2,filedName:"pos"}}}},l={29604:{type:2,filedName:"segmentUUID"},2807729:{type:1,filedName:"timestampScale"},17545:{type:5,filedName:"duration"},31657:{type:7,filedName:"title"},19840:{type:7,filedName:"muxingApp"},22337:{type:7,filedName:"writingApp"},17505:{type:8,filedName:"dateUTC"}},f={174:{type:9,isArray:!0,filedName:"entry",child:{215:{type:1,filedName:"number"},29637:{type:1,filedName:"uid"},131:{type:1,filedName:"type"},21358:{type:7,filedName:"name"},136:{type:10,filedName:"default"},185:{type:10,filedName:"enabled"},2274716:{type:7,filedName:"language"},2306383:{type:6,filedName:"timeScale"},134:{type:7,filedName:"codecId"},2459272:{type:7,filedName:"codecName"},25506:{type:8,filedName:"codecPrivate"},225:{type:9,filedName:"audio",child:{181:{type:5,filedName:"sampleRate"},30901:{type:5,filedName:"outSampleRate"},25188:{type:1,filedName:"bitDepth"},159:{type:1,filedName:"channels"}}},224:{type:9,filedName:"video",child:{2327523:{type:1,filedName:"framerate"},21680:{type:1,filedName:"displayWidth"},21690:{type:1,filedName:"displayHeight"},176:{type:1,filedName:"pixelWidth"},186:{type:1,filedName:"pixelHeight"},3061028:{type:8,filedName:"colorSpace"},21440:{type:1,filedName:"alphaMode"},21936:{type:9,filedName:"color",child:{21937:{type:1,filedName:"matrixCoefficients"},21938:{type:1,filedName:"bitsPerChannel"},21941:{type:1,filedName:"cbSubHorz"},21942:{type:1,filedName:"cbSubVert"},21939:{type:1,filedName:"chromaSubHorz"},21940:{type:1,filedName:"chromaSubVert"},21943:{type:1,filedName:"chromaSitingHorz"},21944:{type:1,filedName:"chromaSitingVert"},21945:{type:1,filedName:"range"},21946:{type:1,filedName:"transferCharacteristics"},21947:{type:1,filedName:"primaries"},21948:{type:1,filedName:"maxCll"},21949:{type:1,filedName:"maxFall"},21968:{type:9,filedName:"masteringMeta",child:{21969:{type:5,filedName:"rx"},21970:{type:5,filedName:"ry"},21971:{type:5,filedName:"gx"},21972:{type:5,filedName:"gy"},21973:{type:5,filedName:"bx"},21974:{type:5,filedName:"by"},21975:{type:5,filedName:"whiteX"},21976:{type:5,filedName:"whiteY"},21978:{type:5,isArray:!0,filedName:"minLuminance"},21977:{type:5,filedName:"maxLuminance"}}}}},30320:{type:9,filedName:"projection",child:{30321:{type:1,filedName:"type"},30322:{type:8,filedName:"private"},30323:{type:5,filedName:"yaw"},30324:{type:5,filedName:"pitch"},30325:{type:5,filedName:"roll"}}},21682:{type:1,filedName:"displayUnit"},154:{type:1,filedName:"interlaced"},157:{type:1,filedName:"fieldOrder"},21432:{type:1,filedName:"stereoMode"},21683:{type:1,filedName:"aspectRatio"}}},226:{type:9,filedName:"operations",child:{227:{type:9,isArray:!0,filedName:"entry",child:{228:{type:9,isArray:!0,filedName:"planes",child:{230:{type:1,filedName:"type"},229:{type:1,filedName:"uid"}}}}}}},28032:{type:9,filedName:"encodings",child:{25152:{type:9,isArray:!0,filedName:"entry",child:{20530:{type:1,filedName:"scope"},20531:{type:1,filedName:"type"},20532:{type:9,filedName:"compression",child:{16980:{type:1,filedName:"algo"},16981:{type:8,filedName:"settings"}}},20533:{type:9,filedName:"encryption",child:{18401:{type:1,filedName:"algo"},18402:{type:8,filedName:"keyId"}}}}}}}}}},p={24999:{type:9,isArray:!0,filedName:"entry",child:{18094:{type:1,filedName:"uid"},18030:{type:7,filedName:"name"},18016:{type:7,filedName:"mime"},18046:{type:7,filedName:"description"},18012:{type:8,filedName:"data"}}}},u={17849:{type:9,isArray:!0,filedName:"entry",child:{182:{type:9,isArray:!0,filedName:"atom",child:{145:{type:2,filedName:"start"},146:{type:2,filedName:"end"},29636:{type:1,filedName:"uid"},128:{type:9,filedName:"display",child:{133:{type:7,filedName:"title"},17276:{type:7,filedName:"language"}}}}}}}},m={187:{type:9,isArray:!0,filedName:"entry",child:{179:{type:2,filedName:"time"},183:{type:9,isArray:!0,filedName:"pos",child:{247:{type:1,filedName:"track"},241:{type:2,filedName:"pos"}}}}}},h={17827:{type:7,filedName:"name"},17543:{type:7,filedName:"string"},17530:{type:7,filedName:"language"},17540:{type:1,filedName:"default"},17588:{type:1,filedName:"default"},26568:{type:9,filedName:"sub"}};h[26568].child=h;const g={29555:{type:9,isArray:!0,filedName:"entry",child:{26568:{type:9,filedName:"tag",child:h},25536:{type:9,filedName:"target",child:{25546:{type:7,filedName:"type"},26826:{type:1,filedName:"typeValue"},25541:{type:1,filedName:"trackUid"},25540:{type:1,filedName:"chapterUid"},25542:{type:1,filedName:"attachUid"}}}}}},A={161:{type:8,filedName:"block"},30113:{type:9,filedName:"additions",child:{166:{type:9,isArray:!0,filedName:"entry",child:{238:{type:1,filedName:"additionalId"},165:{type:8,filedName:"additional"}}}}},155:{type:2,filedName:"duration"},30114:{type:4,filedName:"discardPadding"},251:{type:4,isArray:!0,filedName:"reference"},164:{type:10,filedName:"nonSimple"}},y={163:{type:8,filedName:"block"},160:{type:9,filedName:"blockGroup",child:A},231:{type:2,filedName:"timeCode"},167:{type:2,filedName:"pos"},171:{type:2,filedName:"prevSize"}},I={17030:{type:1,filedName:"version"},17143:{type:1,filedName:"readVersion"},17138:{type:1,filedName:"maxIdLength"},17139:{type:1,filedName:"maxSizeLength"},17026:{type:7,filedName:"docType"},17031:{type:1,filedName:"docTypeVersion"},17029:{type:1,filedName:"docTypeReadVersion"}};async function x(e,t){const a=e.getPos();let n=await e.readUint8();if(!n)return i.z3(`0x00 as pos ${a} invalid as first byte of an EBML number`,c,768),r.LR;let o=1;for(;!(128&n);)o++,n<<=1;if(n&=127,o>t)return i.z3(`Length ${o} indicated by an EBML number's first byte ${n.toString(16)} at pos ${a} exceeds max length ${t}.`,c,781),r.LR;let s=n>>>o-1;for(;--o;)s<<=8,s|=await e.readUint8();return s}async function N(e,t){const a=e.getPos();return await x(e,t)-((1<<7*Number(BigInt.asIntN(32,e.getPos()-a))-1)-1)}async function R(e,t){const a=e.getPos();let n=await e.readUint8(),o=1;if(!n)return i.z3(`0x00 as pos ${a} invalid as first byte of an EBML number`,c,819),BigInt(r.LR);for(;!(128&n);)o++,n<<=1;if(n&=127,o>t)return i.z3(`Length ${o} indicated by an EBML number's first byte ${n.toString(16)} at pos ${a} exceeds max length ${t}.`,c,830),BigInt(r.LR);let s=BigInt(Math.floor(n>>>o-1));for(;--o;){s<<=BigInt(8);const t=await e.readUint8();s|=BigInt(Math.floor(t))}return s}async function b(e,t){switch(t){case BigInt(0):return 0;case BigInt(1):return e.ioReader.readUint8();case BigInt(2):return e.ioReader.readUint16();case BigInt(3):return e.ioReader.readUint24();case BigInt(4):return e.ioReader.readUint32();case BigInt(8):return e.ioReader.readUint64()}let a=BigInt(0),i=0;for(;i++<t;){const t=await e.ioReader.readUint8();a=a<<BigInt(8)|BigInt.asUintN(64,BigInt(Math.floor(t)))}return a}async function v(e,t){switch(t){case BigInt(0):return 0;case BigInt(1):return e.ioReader.readInt8();case BigInt(2):return e.ioReader.readInt16();case BigInt(4):return e.ioReader.readInt32();case BigInt(8):return e.ioReader.readInt64()}let a=BigInt(0),i=0;for(;i++<t;){const t=await e.ioReader.readUint8();a=a<<BigInt(8)|BigInt.asUintN(64,BigInt(Math.floor(t)))}return t===BigInt(3)?Number(BigInt.asIntN(32,BigInt.asIntN(24,a))):BigInt.asIntN(64,a)}async function P(e,t){const a=e.ioReader.getPos();let n=await e.ioReader.peekUint8();if(!n)return i.z3(`0x00 as pos ${a} invalid as first byte of an EBML number`,c,923),r.LR;let o=1;for(;!(128&n);)o++,n<<=1;if(o>t)return i.z3(`Length ${o} indicated by an EBML number's first byte ${n.toString(16)} at pos ${a} exceeds max length ${t}.`,c,935),r.LR;let s=0;for(;o--;)s<<=8,s|=await e.ioReader.readUint8();return s}async function B(e,t,a,i={},r=[]){return await async function(e,t,a){const i=e.privateData,r=e.ioReader.getPos();for(;e.ioReader.getPos()<r+t;){const t=await P(e,i.header.maxIdLength),r=await R(e.ioReader,i.header.maxSizeLength);if(e.ioReader.getPos(),!1===await a(t,r))return}}(e,t,(async(t,c)=>{if(a[t]){const r=a[t];let o;switch(r.type){case 1:o=await b(e,c);break;case 2:o=await b(e,c),n.ai(o)&&(o=BigInt(o));break;case 3:o=await v(e,c);break;case 4:o=await v(e,c),n.ai(o)&&(o=BigInt(o));break;case 6:case 5:o=await async function(e,t){return t===BigInt(4)?e.ioReader.readFloat():t===BigInt(8)?e.ioReader.readDouble():(await e.ioReader.skip(Number(BigInt.asIntN(32,t))),0)}(e,c);break;case 7:o=await e.ioReader.readString(Number(BigInt.asIntN(32,c)));break;case 10:o=!!await b(e,c);break;case 8:o={pos:e.ioReader.getPos(),size:c,data:c<s?await e.ioReader.readBuffer(Number(BigInt.asIntN(32,c))):null};break;case 9:o=r.child?await B(e,c,r.child):{};break;default:await e.ioReader.skip(Number(BigInt.asIntN(32,c)))}if(null!=o)if(r.isArray){const e=i[r.filedName]||[];e.push(o),i[r.filedName]=e}else i[r.filedName]=o}else await e.ioReader.skip(Number(BigInt.asIntN(32,c)));if(r.length&&o.zy(r,t))return!1})),i}},31866:(e,t,a)=>{"use strict";a.d(t,{N:()=>r,e:()=>i});const i={A_AAC:86018,A_AC3:86019,A_ALAC:86032,A_DTS:86020,A_EAC3:86056,A_FLAC:86028,A_MLP:86045,"A_MPEG/L2":86016,"A_MPEG/L1":86058,"A_MPEG/L3":86017,A_OPUS:86076,"A_OPUS/EXPERIMENTAL":86076,"A_PCM/FLOAT/IEEE":65557,"A_PCM/INT/BIG":65537,"A_PCM/INT/LIT":65536,"A_QUICKTIME/QDMC":86066,"A_QUICKTIME/QDM2":86035,"A_REAL/14_4":77824,"A_REAL/28_8":77825,"A_REAL/ATRC":86047,"A_REAL/COOK":86036,"A_REAL/SIPR":86057,A_TRUEHD:86060,A_TTA1:86038,A_VORBIS:86021,A_WAVPACK4:86041,"D_WEBVTT/SUBTITLES":94226,"D_WEBVTT/CAPTIONS":94226,"D_WEBVTT/DESCRIPTIONS":94226,"D_WEBVTT/METADATA":94226,"S_TEXT/UTF8":94225,"S_TEXT/ASCII":94210,"S_TEXT/ASS":94230,"S_TEXT/SSA":94230,S_ASS:94230,S_SSA:94230,S_VOBSUB:94208,S_DVBSUB:94209,"S_HDMV/PGS":94214,"S_HDMV/TEXTST":94231,V_AV1:225,V_DIRAC:116,V_FFV1:33,V_MJPEG:7,V_MPEG1:1,V_MPEG2:2,"V_MPEG4/ISO/ASP":12,"V_MPEG4/ISO/AP":12,"V_MPEG4/ISO/SP":12,"V_MPEG4/ISO/AVC":27,"V_MPEGH/ISO/HEVC":173,"V_MPEGH/ISO/VVC":196,"V_MPEG4/MS/V3":16,V_PRORES:147,"V_REAL/RV10":5,"V_REAL/RV20":6,"V_REAL/RV30":68,"V_REAL/RV40":69,V_SNOW:208,V_THEORA:30,V_UNCOMPRESSED:13,V_VP8:139,V_VP9:167},r={V_VP8:139,V_VP9:167,V_AV1:225,A_VORBIS:86021,A_OPUS:86076,"D_WEBVTT/SUBTITLES":94226,"D_WEBVTT/CAPTIONS":94226,"D_WEBVTT/DESCRIPTIONS":94226,"D_WEBVTT/METADATA":94226}},53260:(e,t,a)=>{"use strict";a.d(t,{g:()=>r,n:()=>n});var i=a(79682);const r={1:65541,2:69638,3:65557,6:65543,7:65542,10:86052,16:69664,17:69633,23:69664,32:69646,34:86037,49:86046,50:86046,56:73728,66:86068,69:69643,20:69643,64:69643,97:69635,98:69634,100:69643,105:69633,117:86079,131:86069,255:86018,273:86068,5632:86018,5634:86065,8192:86019},n={[(0,i.A)("H264")]:27,[(0,i.A)("h264")]:27,[(0,i.A)("X264")]:27,[(0,i.A)("x264")]:27,[(0,i.A)("avc1")]:27,[(0,i.A)("DAVC")]:27,[(0,i.A)("SMV2")]:27,[(0,i.A)("VSSH")]:27,[(0,i.A)("Q264")]:27,[(0,i.A)("V264")]:27,[(0,i.A)("GAVC")]:27,[(0,i.A)("UMSV")]:27,[(0,i.A)("tshd")]:27,[(0,i.A)("INMC")]:27,[(0,i.A)("FMP4")]:12,[(0,i.A)("DIVX")]:12,[(0,i.A)("DX50")]:12,[(0,i.A)("XVID")]:12,[(0,i.A)("MP4S")]:12,[(0,i.A)("M4S2")]:12,[(0,i.A)("DIVX")]:12,4:12,[(0,i.A)("ZMP4")]:12,[(0,i.A)("DIV1")]:12,[(0,i.A)("BLZ0")]:12,[(0,i.A)("mp4v")]:12,[(0,i.A)("UMP4")]:12,[(0,i.A)("WV1F")]:12,[(0,i.A)("SEDG")]:12,[(0,i.A)("RMP4")]:12,[(0,i.A)("3IV2")]:12,[(0,i.A)("WAWV")]:12,[(0,i.A)("FFDS")]:12,[(0,i.A)("FVFW")]:12,[(0,i.A)("DCOD")]:12,[(0,i.A)("MVXM")]:12,[(0,i.A)("PM4V")]:12,[(0,i.A)("SMP4")]:12,[(0,i.A)("DXGM")]:12,[(0,i.A)("VIDM")]:12,[(0,i.A)("M4T3")]:12,[(0,i.A)("GEOX")]:12,[(0,i.A)("G264")]:12,[(0,i.A)("HDX4")]:12,[(0,i.A)("DM4V")]:12,[(0,i.A)("DMK2")]:12,[(0,i.A)("DYM4")]:12,[(0,i.A)("DIGI")]:12,[(0,i.A)("EPHV")]:12,[(0,i.A)("EM4A")]:12,[(0,i.A)("M4CC")]:12,[(0,i.A)("SN40")]:12,[(0,i.A)("VSPX")]:12,[(0,i.A)("ULDX")]:12,[(0,i.A)("GEOV")]:12,[(0,i.A)("SIPP")]:12,[(0,i.A)("SM4V")]:12,[(0,i.A)("XVIX")]:12,[(0,i.A)("DreX")]:12,[(0,i.A)("QMP4")]:12,[(0,i.A)("PLV1")]:12,[(0,i.A)("GLV4")]:12,[(0,i.A)("GMP4")]:12,[(0,i.A)("MNM4")]:12,[(0,i.A)("GTM4")]:12,[(0,i.A)("MPG4")]:14,[(0,i.A)("MP41")]:14,[(0,i.A)("MP42")]:15,[(0,i.A)("DIV2")]:15,[(0,i.A)("MP43")]:16,[(0,i.A)("DIV3")]:16,[(0,i.A)("MPG3")]:16,[(0,i.A)("DIV5")]:16,[(0,i.A)("DIV6")]:16,[(0,i.A)("DIV4")]:16,[(0,i.A)("DVX3")]:16,[(0,i.A)("AP41")]:16,[(0,i.A)("COL1")]:16,[(0,i.A)("COL0")]:16,[(0,i.A)("VP80")]:139,[(0,i.A)("VP90")]:167}},79682:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var i=a(4624),r="src/avformat/function/mktagle.ts";function n(e){4!==e.length&&i.R8(`tag length is not 4, tag: ${e}`,r,30);let t=0;for(let a=3;a>=0;a--)t=t<<8|e.charCodeAt(a);return t}},11573:(e,t,a)=>{"use strict";function i(e,t){let a=0;for(let i=0;i<t;i++)a=2*a+e.readU1();return a}function r(e){let t=0;for(;!i(e,1);)t++;return t>=32?0:i(e,t)+(1<<t)-1}function n(e){let t=0,a=0;for(let r=0;r<8;r++){let n=i(e,8);if(t|=(127&n)<<7*r,a+=1,!(128&n))break}return t}a.d(t,{d:()=>r,f:()=>i,v:()=>n})},82774:(e,t,a)=>{"use strict";a.d(t,{Cv:()=>c});var i=a(50932);function r(e,t){i.M[2](e,255&t)}function n(e,t){r(e,t>>>8),r(e+1,t)}function o(e,t){n(e,t>>>16),n(e+2,65535&t)}function c(e,t){o(e,Number(BigInt.asUintN(32,t>>BigInt(32)))),o(e+4,Number(BigInt.asUintN(32,t)))}},28795:(e,t,a)=>{a(78978),a(97863),a(7914),a(21640),a(871),a(52584),a(98345),e.exports=a(46438).Set},21640:(e,t,a)=>{"use strict";var i=a(95933),r=a(6096);e.exports=a(99373)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(r(this,"Set"),e=0===e?0:e,e)}},i)},98345:(e,t,a)=>{a(643)("Set")},52584:(e,t,a)=>{a(44398)("Set")},871:(e,t,a)=>{var i=a(88535);i(i.P+i.R,"Set",{toJSON:a(5874)("Set")})},97860:(e,t,a)=>{e.exports=a(28795)}}]);