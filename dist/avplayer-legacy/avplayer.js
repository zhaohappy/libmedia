/*! For license information please see avplayer.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AVPlayer=t():e.AVPlayer=t()}(self,(()=>(()=>{var e,t,r={92246:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(16030),f=r(4624),h=function(){function e(t){(0,i.A)(this,e),(0,s.A)(this,"resampler",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"inputParameters",void 0),(0,s.A)(this,"outputParameters",void 0),this.options=t,this.resampler=new c.A(this.options.resource)}var t;return(0,a.A)(e,[{key:"open",value:(t=(0,n.A)(u().mark((function e(t,r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.inputParameters=t,this.outputParameters=r,e.next=4,this.resampler.run();case 4:this.resampler.call("resample_set_input_parameters",t.sampleRate,t.channels,t.format,t.layout||0),this.resampler.call("resample_set_output_parameters",r.sampleRate,r.channels,r.format,r.layout||0),(n=this.resampler.call("resample_init"))<0&&f.h2("open resampler failed, ret: ".concat(n),"src/audioresample/Resampler.ts",84);case 8:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"resample",value:function(e,t,r){return this.resampler.call("resample_process",e,t,r)}},{key:"getOutputSampleCount",value:function(e){return this.resampler.call("resample_nb_sample",e)}},{key:"close",value:function(){this.resampler.call("resample_destroy"),this.resampler.destroy(),this.resampler=null}},{key:"getInputPCMParameters",value:function(){return this.inputParameters}},{key:"getOutputPCMParameters",value:function(){return this.outputParameters}}]),e}()},70089:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(16030),f=function(){function e(t){(0,i.A)(this,e),(0,s.A)(this,"processor",void 0),(0,s.A)(this,"options",void 0),this.options=t,this.processor=new c.A(this.options.resource)}var t;return(0,a.A)(e,[{key:"open",value:(t=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.processor.run();case 2:this.processor.call("stretchpitch_init"),this.processor.call("stretchpitch_set_channels",t.channels),this.processor.call("stretchpitch_set_samplerate",t.sampleRate);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setRate",value:function(e){this.processor.call("stretchpitch_set_rate",e)}},{key:"setRateChange",value:function(e){this.processor.call("stretchpitch_set_rate_change",e)}},{key:"setTempo",value:function(e){this.processor.call("stretchpitch_set_tempo",e)}},{key:"setTempoChange",value:function(e){this.processor.call("stretchpitch_set_tempo_change",e)}},{key:"setPitch",value:function(e){this.processor.call("stretchpitch_set_pitch",e)}},{key:"setPitchOctaves",value:function(e){this.processor.call("stretchpitch_set_pitch_octaves",e)}},{key:"setPitchSemiTones",value:function(e){this.processor.call("stretchpitch_set_pitch_semi_tones",e)}},{key:"sendSamples",value:function(e,t){this.processor.call("stretchpitch_send_samples",e,t)}},{key:"receiveSamples",value:function(e,t){return this.processor.call("stretchpitch_receive_samples",e,t)}},{key:"flush",value:function(){this.processor.call("stretchpitch_flush")}},{key:"clear",value:function(){this.processor.call("stretchpitch_clear")}},{key:"getUnprocessedSamplesCount",value:function(){return this.processor.call("stretchpitch_get_unprocessed_samples_num")}},{key:"getInputOutputSamplesRatio",value:function(){return this.processor.call("stretchpitch_get_input_output_sample_ratio")}},{key:"getLatency",value:function(){return this.processor.call("get_latency")}},{key:"close",value:function(){this.processor.call("stretchpitch_destroy"),this.processor.destroy(),this.processor=null}}]),e}()},51128:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var n,i=r(134),a=(n={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,86017,"mp3"),86018,"mp4a.40"),86021,"vorbis"),86028,"flac"),86076,"opus"),65542,"ulaw"),65543,"alaw"),225,"av01"),27,"avc1"),173,"hev1"),(0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,196,"vvc1"),139,"vp8"),167,"vp09"),12,"mp4v"))},1984:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(63939),i=r(51128);function a(e){var t=n.f[15](e+4),r=n.f[15](e+48),a=i.d[t];return 86018===t&&(a="".concat(a,".").concat(r)),a||"unknown"}},21233:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var n=r(86834);function i(e){return e?!n.A.chrome||n.A.checkVersion(n.A.majorVersion,"94",!0)?"prefer-hardware":"allow":!n.A.chrome||n.A.checkVersion(n.A.majorVersion,"94",!0)?"prefer-software":"deny"}},94663:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(63939),i=r(51128),a=r(90412),s=r(14392),o=r(58919),u=r(55611),c=r(20525),f=r(77231),h=r(14686),d=r(90932);function l(e,t){var r=n.f[15](e+4),l=n.f[15](e+48),p=n.f[15](e+52);!t&&0!==n.f[20](e+12)&&n.f[15](e+16)&&(t=(0,h.s3)(n.f[20](e+12),n.f[15](e+16)));var v=i.d[r],m="";if(27===r)110===l&&(l=100),m=c.GP("%s.%02x00%02x",v,255&l,255&p);else if(173===r){var A,g=0,k=0,y=0,b=0;(null===(A=t)||void 0===A?void 0:A.length)>13&&(g=t[1]>>>6&3,y=t[1]>>>5&1,k=t[2]|t[3]<<8|t[4]<<16|t[5]<<24,b=240&t[6]),m=c.GP("%s.%s%d.%x.%s%d.%x",v,{0:"",1:"A",2:"B",3:"C"}[g],l,k,0===y?"L":"H",p,b)}else if(196===r){var x,w=0;if((null===(x=t)||void 0===x?void 0:x.length)>13&&(w=1&t[5]),m=c.GP("%s.%d.%s%d",v,l,0===w?"L":"H",p),t){var _=u.Ui(t);if(_.generalConstraintInfo.length){for(var T=_.generalConstraintInfo.length-1;T>0&&0===_.generalConstraintInfo[T];)T--;var P=_.generalConstraintInfo.slice(0,T+1);P.length&&(m+=".C".concat(d.l(new Uint8Array(P),!1)))}_.generalSubProfileIdc.length&&(m+=".S".concat(_.generalSubProfileIdc.map((function(e){return e.toString(16)})).join("+"))),m+=".O".concat(_.olsIdx,"+").concat(_.numSublayers)}}else if(225===r)if(t){var I=a.Ui(t);m=c.GP("%s.%d.%02d%s.%02d.%d.%d%d%d",v,I.profile,I.level,I.tier?"H":"M",I.bitDepth,I.monochrome,I.chromaSubsamplingX,I.chromaSubsamplingY,I.chromaSamplePosition)}else m=c.GP("%s.%d.%02dM.08",v,l,p);else if(139===r)if(t){var B=s.U(t);m=c.GP("%s.%02d.%02d.%02d",v,B.profile,B.level,B.bitDepth)}else m=l!==f.N_&&p!==f.N_?c.GP("%s.%02d.%02d.08",v,l,p):v;else if(167===r)if(t){var C=o.Ui(t);m=c.GP("%s.%02d.%02d.%02d.%02d.%02d.%02d.%02d.%02d",v,C.profile,C.level,C.bitDepth,C.chromaSubsampling,C.colorPrimaries,C.colorTrc,C.colorSpace,C.fullRangeFlag)}else m=l!==f.N_&&p!==f.N_?c.GP("%s.%02d.%02d.08.00",v,l,p):c.GP("%s.%02d.%02d.08.00",v,0,40);else m=v||"unknown";return m}},75742:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(16030),f=r(56024),h=r(4624),d=r(95797),l=function(){function e(t){(0,i.A)(this,e),(0,s.A)(this,"options",void 0),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"frame",void 0),this.options=t,this.decoder=new c.A(t.resource)}var t,r;return(0,a.A)(e,[{key:"getAVFrame",value:function(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,f.FP)()}},{key:"outputAVFrame",value:function(){this.frame&&(this.options.onReceiveFrame?this.options.onReceiveFrame(this.frame):this.options.avframePool?this.options.avframePool.release(this.frame):(0,f.xj)(this.frame),this.frame=0)}},{key:"receiveAVFrame",value:function(){return this.decoder.call("decoder_receive",this.getAVFrame())}},{key:"open",value:(r=(0,n.A)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decoder.run();case 2:if(r=0,!d.A.jspi){e.next=9;break}return e.next=6,this.decoder.callAsync("decoder_open",t,0,1);case 6:r=e.sent,e.next=12;break;case 9:return r=this.decoder.call("decoder_open",t,0,1),e.next=12,this.decoder.childrenThreadReady();case 12:r<0&&h.h2("open audio decoder failed, ret: ".concat(r),"src/avcodec/wasmcodec/AudioDecoder.ts",90);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"decode",value:function(e){var t=this.decoder.call("decoder_decode",e);if(t)return t;for(;;){if(1!==(t=this.receiveAVFrame())){if(t<0)return t;break}this.outputAVFrame()}return 0}},{key:"flush",value:(t=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.decoder.call("decoder_flush");case 1:if(!(this.receiveAVFrame()<1)){e.next=5;break}return e.abrupt("return");case 5:this.outputAVFrame(),e.next=1;break;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"close",value:function(){this.decoder.call("decoder_close"),this.decoder.destroy(),this.decoder=null,this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,f.xj)(this.frame),this.frame=0)}}]),e}()},40417:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(16030),f=r(56024),h=r(4624),d=r(95797),l=function(){function e(t){(0,i.A)(this,e),(0,s.A)(this,"options",void 0),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"frame",void 0),(0,s.A)(this,"parameters",void 0),this.options=t,this.decoder=new c.A(this.options.resource)}var t,r;return(0,a.A)(e,[{key:"getAVFrame",value:function(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,f.FP)()}},{key:"outputAVFrame",value:function(){this.frame&&(this.options.onReceiveFrame?this.options.onReceiveFrame(this.frame):this.options.avframePool?this.options.avframePool.release(this.frame):(0,f.xj)(this.frame),this.frame=0)}},{key:"receiveAVFrame",value:function(){return this.decoder.call("decoder_receive",this.getAVFrame())}},{key:"open",value:(r=(0,n.A)(u().mark((function e(t){var r,n,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:1,e.next=3,this.decoder.run(null,r);case 3:if(n=0,!d.A.jspi){e.next=10;break}return e.next=7,this.decoder.callAsync("decoder_open",t,0,r);case 7:n=e.sent,e.next=13;break;case 10:return n=this.decoder.call("decoder_open",t,0,r),e.next=13,this.decoder.childrenThreadReady();case 13:return n<0&&h.h2("open video decoder failed, ret: ".concat(n),"src/avcodec/wasmcodec/VideoDecoder.ts",129),this.parameters=t,e.next=17,this.decoder.childrenThreadReady();case 17:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"decode",value:function(e){var t=this.decoder.call("decoder_decode",e);if(t)return t;for(;;){if(1!==(t=this.receiveAVFrame())){if(t<0)return t;break}this.outputAVFrame()}return 0}},{key:"flush",value:(t=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.decoder.call("decoder_flush");case 1:if(!(this.receiveAVFrame()<1)){e.next=5;break}return e.abrupt("return");case 5:this.outputAVFrame(),e.next=1;break;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"close",value:function(){this.decoder.call("decoder_close"),this.decoder.destroy(),this.decoder=null,this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,f.xj)(this.frame),this.frame=0),this.parameters=0}},{key:"setSkipFrameDiscard",value:function(e){this.decoder.call("decoder_discard",e)}}]),e}()},77104:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(63939),f=r(1984),h=r(14686),d=r(71517),l=r(22898),p=function(){function e(t){(0,i.A)(this,e),(0,s.A)(this,"options",void 0),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"extradata",void 0),(0,s.A)(this,"currentError",void 0),this.options=t}var t,r;return(0,a.A)(e,[{key:"output",value:function(e){this.options.onReceiveFrame?this.options.onReceiveFrame(e):e.close()}},{key:"error",value:function(e){this.currentError=e,this.options.onError(e)}},{key:"open",value:(r=(0,n.A)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentError=null,this.parameters=t,this.extradata=null,0!==c.f[20](t+12)&&(this.extradata=(0,h.s3)(c.f[20](t+12),c.f[15](t+16)).slice()),(r={codec:(0,f.A)(this.parameters),sampleRate:c.f[15](t+136),numberOfChannels:c.f[15](t+116),description:this.extradata}).description||delete r.description,e.next=8,AudioDecoder.isConfigSupported(r);case 8:if(e.sent.supported){e.next=11;break}throw new Error("not support");case 11:if(this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=new AudioDecoder({output:this.output.bind(this),error:this.error.bind(this)}),this.decoder.reset(),this.decoder.configure(r),!this.currentError){e.next=17;break}throw this.currentError;case 17:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"changeExtraData",value:function(e){if(e.length===this.extradata.length){for(var t=!0,r=0;r<e.length;r++)if(e[r]!==this.extradata[r]){t=!1;break}if(t)return}if(this.extradata=e.slice(),this.decoder.reset(),this.decoder.configure({codec:(0,f.A)(this.parameters),sampleRate:c.f[15](this.parameters+136),numberOfChannels:c.f[15](this.parameters+116),description:this.extradata}),this.currentError)throw this.currentError}},{key:"decode",value:function(e,t){var r=(0,d.rU)(e,1);0!==r&&this.changeExtraData((0,h.s3)(c.f[20](r),c.f[15](r+4)));var n=(0,l.A)(e,t);try{this.decoder.decode(n)}catch(e){return-1}return 0}},{key:"flush",value:(t=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decoder.flush();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"close",value:function(){"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=null}},{key:"getQueueLength",value:function(){return this.decoder.decodeQueueSize}}]),e}()},71039:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(63939),f=r(86834),h=r(94663),d=r(14686),l=r(71517),p=r(21233),v=r(28917),m=function(){function e(t){(0,i.A)(this,e),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"extradata",void 0),(0,s.A)(this,"currentError",void 0),(0,s.A)(this,"inputQueue",void 0),(0,s.A)(this,"outputQueue",void 0),(0,s.A)(this,"sort",void 0),(0,s.A)(this,"keyframeRequire",void 0),this.options=t,this.inputQueue=[],this.outputQueue=[],this.sort=f.A.safari}var t,r,o;return(0,a.A)(e,[{key:"output",value:(o=(0,n.A)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sort){e.next=13;break}r=0;case 2:if(!(r<this.outputQueue.length)){e.next=9;break}if(!(this.outputQueue[r].timestamp>t.timestamp)){e.next=6;break}return this.outputQueue.splice(r,0,t),e.abrupt("break",9);case 6:r++,e.next=2;break;case 9:for(r===this.outputQueue.length&&this.outputQueue.push(t);this.outputQueue.length>2&&this.outputQueue[0].timestamp===this.inputQueue[0];)n=this.outputQueue.shift(),this.options.onReceiveFrame?this.options.onReceiveFrame(n):n.close(),this.inputQueue.shift();e.next=14;break;case 13:this.options.onReceiveFrame?this.options.onReceiveFrame(t):t.close();case 14:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"error",value:function(e){this.currentError=e,this.options.onError(e)}},{key:"changeExtraData",value:function(e){var t;if(e.length===this.extradata.length){for(var r=!0,n=0;n<e.length;n++)if(e[n]!==this.extradata[n]){r=!1;break}if(r)return}this.extradata=e.slice(),this.decoder.reset(),this.decoder.configure({codec:(0,h.A)(this.parameters,e),description:this.extradata,hardwareAcceleration:(0,p.C)(null===(t=this.options.enableHardwareAcceleration)||void 0===t||t)}),this.keyframeRequire=!0}},{key:"open",value:(r=(0,n.A)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentError=null,this.extradata=null,0!==c.f[20](t+12)&&(this.extradata=(0,d.s3)(c.f[20](t+12),c.f[15](t+16)).slice()),this.parameters=t,(n={codec:(0,h.A)(t),codedWidth:c.f[15](t+56),codedHeight:c.f[15](t+60),description:2!==c.f[15](t+160)?this.extradata:void 0,hardwareAcceleration:(0,p.C)(null===(r=this.options.enableHardwareAcceleration)||void 0===r||r)}).description||delete n.description,e.next=8,VideoDecoder.isConfigSupported(n);case 8:if(e.sent.supported){e.next=11;break}throw new Error("not support");case 11:if(this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=new VideoDecoder({output:this.output.bind(this),error:this.error.bind(this)}),this.decoder.reset(),this.decoder.configure(n),!this.currentError){e.next=17;break}throw this.currentError;case 17:this.keyframeRequire=!0,this.inputQueue.length=0,this.outputQueue.length=0;case 20:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"decode",value:function(e){var t=(0,l.rU)(e,1);0!==t&&this.changeExtraData((0,d.s3)(c.f[20](t),c.f[15](t+4)));var r=1&c.f[15](e+36);if(!this.keyframeRequire||r){var n=Number(c.f[17](e+8)),i=(0,v.A)(e);if(this.sort){for(var a=0;a<this.inputQueue.length;a++)if(this.inputQueue[a]>n){this.inputQueue.splice(a,0,n);break}a===this.inputQueue.length&&this.inputQueue.push(n)}try{this.decoder.decode(i)}catch(e){return-1}return r&&(this.keyframeRequire=!1),0}}},{key:"flush",value:(t=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decoder.flush();case 2:if(this.sort)for(;this.outputQueue.length;)t=this.outputQueue.shift(),this.options.onReceiveFrame?this.options.onReceiveFrame(t):t.close();this.keyframeRequire=!0;case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"close",value:function(){var e;this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=null,this.currentError=null,null!==(e=this.outputQueue)&&void 0!==e&&e.length&&this.outputQueue.forEach((function(e){e.close()})),this.inputQueue=null,this.outputQueue=null}},{key:"getQueueLength",value:function(){return this.decoder.decodeQueueSize}},{key:"setSkipFrameDiscard",value:function(e){}}]),e}()},44315:(e,t,r)=>{"use strict";r.d(t,{Xv:()=>f,fG:()=>h,oD:()=>c});var n=r(81570),i=r(78716),a=r(134),s=r(15017),o=r(71517),u=(0,n.A)((function e(){(0,i.A)(this,e),(0,a.A)(this,"packetBuffer",void 0),this.packetBuffer=[]})),c=function(){function e(){(0,i.A)(this,e),(0,a.A)(this,"metadataHeaderPadding",-1),(0,a.A)(this,"metadata",void 0),(0,a.A)(this,"streams",void 0),(0,a.A)(this,"options",void 0),(0,a.A)(this,"chapters",void 0),(0,a.A)(this,"privateData",void 0),(0,a.A)(this,"processPrivateData",void 0),(0,a.A)(this,"iformat",void 0),(0,a.A)(this,"oformat",void 0),(0,a.A)(this,"ioReader",void 0),(0,a.A)(this,"ioWriter",void 0),(0,a.A)(this,"errorFlag",void 0),(0,a.A)(this,"interval",void 0),(0,a.A)(this,"streamIndex",void 0),(0,a.A)(this,"getDecoderResource",null),this.streams=[],this.errorFlag=0,this.streamIndex=0,this.interval=new u,this.options={},this.privateData={},this.metadata={},this.chapters=[]}return(0,n.A)(e,[{key:"format",get:function(){return this.iformat?this.iformat.type:this.oformat?this.oformat.type:-1}},{key:"getStreamById",value:function(e){return this.streams.find((function(t){return t.id===e}))}},{key:"getStreamByIndex",value:function(e){return this.streams.find((function(t){return t.index===e}))}},{key:"getStreamByMediaType",value:function(e){return this.streams.find((function(t){var r;return(null===(r=t.codecpar)||void 0===r?void 0:r.codecType)===e}))}},{key:"createStream",value:function(){var e=new s.A;return e.index=this.streamIndex++,e.id=e.index,this.removeStreamByIndex(e.index),this.streams.push(e),e}},{key:"addStream",value:function(e){this.removeStreamByIndex(e.index),this.streams.push(e)}},{key:"removeStream",value:function(e){this.removeStreamByIndex(e.index)}},{key:"removeStreamById",value:function(e){var t=this.streams.findIndex((function(t){return t.id===e}));if(t>-1){var r=this.streams.splice(t,1);r[0]&&r[0].destroy()}}},{key:"removeStreamByIndex",value:function(e){var t=this.streams.findIndex((function(t){return t.index===e}));if(t>-1){var r=this.streams.splice(t,1);r[0]&&r[0].destroy()}}},{key:"destroy",value:function(){this.oformat&&this.oformat.destroy(this),this.iformat&&this.iformat.destroy(this),this.interval.packetBuffer.length&&this.interval.packetBuffer.forEach((function(e){(0,o.Qe)(e)})),this.streams.forEach((function(e){e.destroy()})),this.streams=[],this.interval=null,this.ioReader=this.ioWriter=null,this.oformat=this.iformat=null}}]),e}();function f(){return new c}function h(){return new c}},15017:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(78716),i=r(81570),a=r(134),s=r(80662),o=r.n(s),u=r(74503),c=r(94300),f=r(77162),h=r(77231),d=r(9599),l=function(){function e(){(0,n.A)(this,e),(0,a.A)(this,"index",h.N_),(0,a.A)(this,"id",h.N_),(0,a.A)(this,"privData",null),(0,a.A)(this,"codecpar",(0,u.A)(f.A,new f.A)),(0,a.A)(this,"sideData",{}),(0,a.A)(this,"nbFrames",BigInt(0)),(0,a.A)(this,"metadata",{}),(0,a.A)(this,"duration",h.Dh),(0,a.A)(this,"startTime",h.Dh),(0,a.A)(this,"firstDTS",BigInt(0)),(0,a.A)(this,"disposition",0),(0,a.A)(this,"timeBase",(0,u.A)(d.P)),(0,a.A)(this,"sampleIndexes",[]),(0,a.A)(this,"sampleIndexesPosMap",new(o()))}return(0,i.A)(e,[{key:"destroy",value:function(){this.codecpar&&(this.codecpar.destroy(),(0,c.A)(this.codecpar),this.codecpar=null),this.timeBase&&((0,c.A)(this.timeBase),this.timeBase=null),this.sampleIndexes.length=0,this.sampleIndexesPosMap.clear()}}]),e}()},64436:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(78716),i=r(81570),a=r(134),s=r(63939),o=r(37837),u=r(71766),c=function(){function e(){(0,n.A)(this,e),(0,a.A)(this,"inCodecpar",void 0),(0,a.A)(this,"inTimeBase",void 0),(0,a.A)(this,"outCodecpar",void 0)}return(0,i.A)(e,[{key:"init",value:function(e,t){return this.inCodecpar=(0,o.Gy)(168),(0,u.Yi)(this.inCodecpar,e),this.inTimeBase={den:s.f[15](t+4),num:s.f[15](t)},0}},{key:"destroy",value:function(){this.inCodecpar&&((0,u.dn)(this.inCodecpar),this.inCodecpar=0)}}]),e}()},26173:(e,t,r)=>{"use strict";r.d(t,{A:()=>I});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(63939),p=r(50932),v=r(64436),m=r(71517),A=r(20620),g=r(53e3),k=r(55611),y=r(14686),b=r(9705),x=r(60264),w=r(37837),_=r(4624);function T(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,P()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}var I=function(e){function t(){var e;(0,a.A)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=T(this,t,[].concat(n)),(0,d.A)((0,u.A)(e),"cache",void 0),(0,d.A)((0,u.A)(e),"cached",void 0),e}return(0,h.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,c.A)((0,f.A)(t.prototype),"init",this).call(this,e,r),this.cache=(0,m._5)(),this.cached=!1,0}},{key:"destroy",value:function(){(0,c.A)((0,f.A)(t.prototype),"destroy",this).call(this),(0,m.Qe)(this.cache),this.cache=0}},{key:"sendAVPacket",value:function(e){var t,r=(0,y.JW)(l.f[20](e+24),l.f[15](e+28));if(1!==l.f[15](e+80)&&(0,x.Bs)(r)){if((0,m.zu)(this.cache,e),27===l.f[15](this.inCodecpar+4)?t=A.oT(r):173===l.f[15](this.inCodecpar+4)?t=g.oT(r):196===l.f[15](this.inCodecpar+4)?t=k.oT(r):_.h2("not support for codecId: ".concat(l.f[15](this.inCodecpar+4)),"src/avformat/bsf/h2645/Annexb2AvccFilter.ts",91),p.M[15](this.cache+80,1),(0,m.NX)(this.cache,t.bufferPointer,t.length),t.key&&p.M[15](this.cache+36,1|l.f[15](this.cache+36)),t.extradata){var n=(0,w.sY)(t.extradata.length);(0,y.lW)(n,t.extradata.length,t.extradata),(0,m.Ow)(this.cache,1,n,t.extradata.length)}}else(0,m.rN)(this.cache,e);return this.cached=!0,0}},{key:"receiveAVPacket",value:function(e){return this.cached?((0,m.Up)(e),(0,m.rN)(e,this.cache),this.cached=!1,0):b.LR}}]),t}(v.A)},58469:(e,t,r)=>{"use strict";r.d(t,{En:()=>u,Ij:()=>f,XC:()=>c,hY:()=>o,uF:()=>a});var n=r(134),i=r(77231),a=(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},1,"Main"),2,"LC"),3,"LC"),4,"LC"),5,"HE"),6,"HE"),s={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,i.N_,i.N_,i.N_],u=[i.N_,1,2,3,4,5,6,7];function c(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){var r=function(e){var t,r,n=i.N_,a=i.N_,s=i.N_;return e.length>=2&&(n=e[0]>>3&31,a=null!==(t=o[(7&e[0])<<1|e[1]>>7])&&void 0!==t?t:48e3,s=null!==(r=u[e[1]>>3&15])&&void 0!==r?r:2),{profile:n,sampleRate:a,channels:s}}(t),n=r.profile,a=r.sampleRate,s=r.channels;e.codecpar.profile=n,e.codecpar.sampleRate=a,e.codecpar.chLayout.nbChannels=s}}function f(e){var t=s[e.sampleRate],r=e.chLayout.nbChannels,n=new Uint8Array(2);return n[0]=(31&e.profile)<<3|(14&t)>>1,n[1]=(1&t)<<7|(15&r)<<3,n}},87771:(e,t,r)=>{"use strict";r.d(t,{R:()=>p,j:()=>a});var n=r(14686),i=r(37246),a=[3,4,3,7,259,263,1539,1543],s=[[64,69,96],[64,70,96],[80,87,120],[80,88,120],[96,104,144],[96,105,144],[112,121,168],[112,122,168],[128,139,192],[128,140,192],[160,174,240],[160,175,240],[192,208,288],[192,209,288],[224,243,336],[224,244,336],[256,278,384],[256,279,384],[320,348,480],[320,349,480],[384,417,576],[384,418,576],[448,487,672],[448,488,672],[512,557,768],[512,558,768],[640,696,960],[640,697,960],[768,835,1152],[768,836,1152],[896,975,1344],[896,976,1344],[1024,1114,1536],[1024,1115,1536],[1152,1253,1728],[1152,1254,1728],[1280,1393,1920],[1280,1394,1920]],o=[4,5,6,5],u=[4,6,7,6],c=[48e3,44100,32e3,0],f=[32,40,48,56,64,80,96,112,128,160,192,224,256,320,384,448,512,576,640],h=[2,1,2,3,3,4,4,5],d=[1,2,3,6],l=7;function p(e,t){var r=new i.A(t);r.appendBuffer((0,n.s3)(e,t));var p={syncWord:0,crc1:0,srCode:0,bitstreamId:0,bitstreamMode:0,channelMode:0,lfeOn:0,frameType:0,substreamId:0,centerMixLevel:0,surroundMixLevel:0,channelMap:0,numBlocks:0,dolbySurroundMode:0,srShift:0,sampleRate:0,bitRate:0,channels:0,frameSize:0,channelLayout:BigInt(0),ac3BitrateCode:0};if(p.syncWord=r.readU(16),2935!==p.syncWord)return-1;if(p.bitstreamId=31&r.readU(29),p.bitstreamId>16)return-2;if(p.numBlocks=6,p.ac3BitrateCode=-1,p.centerMixLevel=5,p.surroundMixLevel=6,p.dolbySurroundMode=0,p.bitstreamId<=10){if(p.crc1=r.readU(16),p.srCode=r.readU(2),3===p.srCode)return-3;var v=r.readU(6);if(v>37)return-4;p.ac3BitrateCode=v>>1,r.readU(5),p.bitstreamMode=r.readU(3),p.channelMode=r.readU(3),2==p.channelMode?p.dolbySurroundMode=r.readU(2):(1&p.channelMode&&1!=p.channelMode&&(p.centerMixLevel=o[r.readU(2)]),4&p.channelMode&&(p.surroundMixLevel=u[r.readU(2)])),p.lfeOn=r.readU(1),p.srShift=Math.max(p.bitstreamId,8)-8,p.sampleRate=c[p.srCode]>>p.srShift,p.bitRate=1e3*f[p.ac3BitrateCode]>>p.srShift,p.channels=h[p.channelMode]+p.lfeOn,p.frameSize=2*s[v][p.srCode],p.frameType=2,p.substreamId=0}else{if(p.crc1=0,p.frameType=r.readU(2),3==p.frameType)return-5;if(p.substreamId=r.readU(3),p.frameSize=r.readU(11)+1<<1,p.frameSize<l)return-6;if(p.srCode=r.readU(2),3==p.srCode){var m=r.readU(2);if(3==m)return-7;p.sampleRate=c[m]/2,p.srShift=1}else p.numBlocks=d[r.readU(2)],p.sampleRate=c[p.srCode],p.srShift=0;p.channelMode=r.readU(3),p.lfeOn=r.readU(1),p.bitRate=8*p.frameSize*p.sampleRate/(256*p.numBlocks),p.channels=h[p.channelMode]+p.lfeOn}return p.channelLayout=BigInt.asUintN(64,a[p.channelMode]),p.lfeOn&&(p.channelLayout|=BigInt(8)),p}},90412:(e,t,r)=>{"use strict";r.d(t,{Ui:()=>o,XC:()=>s,zk:()=>a}),r(42096),r(75062),r(16091),r(68632);var n=r(134),i=r(37246),a=(0,n.A)((0,n.A)((0,n.A)({},0,"Main"),1,"High"),2,"Professional");function s(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=4){var r=o(t);e.codecpar.profile=r.profile,e.codecpar.level=r.level}}function o(e){var t=new i.A(e.length);t.appendBuffer(e),t.readU1(),t.readU(7);var r=t.readU(3),n=t.readU(5),a=t.readU1(),s=t.readU1()?10:8;return t.readU1()&&(s=12),{profile:r,level:n,tier:a,bitDepth:s,monochrome:t.readU1(),chromaSubsamplingX:t.readU1(),chromaSubsamplingY:t.readU1(),chromaSamplePosition:t.readU(2)}}},20620:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>b,XC:()=>w,ci:()=>x,oT:()=>y,tZ:()=>g}),r(42096),r(75062),r(16091),r(68632);var n=r(134),i=r(63939),a=r(50932),s=r(72739),o=r(729),u=r(31865),c=r(37246),f=r(4624),h=r(14686),d=r(71517),l=r(60264),p=r(37837),v=r(23991),m="src/avformat/codecs/h264.ts",A=3,g=(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},66,"Constrained Baseline"),77,"Main"),100,"High"),110,"High10"),122,"High422"),244,"High444");function k(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length>32&&(f.R8("h264 metadata's sps max length is 32, but get ".concat(e.length),m,199),e=e.slice(0,32)),e.length>256&&(f.R8("h264 metadata's pps max length is 256, but get ".concat(e.length),m,203),e=e.slice(0,256));var n=7;n=e.reduce((function(e,t){return e+2+t.length}),n),n=t.reduce((function(e,t){return e+2+t.length}),n);var i=e[0],a=_(i);66!==a.profile&&77!==a.profile&&88!==a.profile&&(n+=4,r.length&&(n=r.reduce((function(e,t){return e+2+t.length}),n)));var u=new Uint8Array(n),c=new o.A(u);return c.writeUint8(1),c.writeUint8(i[1]),c.writeUint8(i[2]),c.writeUint8(i[3]),c.writeUint8(252|A),c.writeUint8(224|31&e.length),s.__(e,(function(e){c.writeUint16(e.length),c.writeBuffer(e)})),c.writeUint8(t.length),s.__(t,(function(e){c.writeUint16(e.length),c.writeBuffer(e)})),66!==a.profile&&77!==a.profile&&88!==a.profile&&(c.writeUint8(252|a.chromaFormatIdc),c.writeUint8(248|a.bitDepthLumaMinus8),c.writeUint8(248|a.bitDepthChromaMinus8),r.length&&s.__(r,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),u}function y(e){var t,r=(0,l.py)(e),n=!1;if(r.length>1){var i=[],a=[],u=[];r.forEach((function(e){var t=31&e[0];7===t?i.push(e):8===t?a.push(e):13===t&&u.push(e)})),i.length&&a.length&&(t=k(i,a,u)),r=r.filter((function(e){var t=31&e[0];return 9!==t&&8!==t&&7!==t&&13!==t}))}var c=r.reduce((function(e,t){return e+A+1+t.length}),0),f=(0,p.sY)(c),d=(0,h.s3)(f,c),v=new o.A(d);return s.__(r,(function(e){3===A?v.writeUint32(e.length):2===A?v.writeUint24(e.length):1===A?v.writeUint16(e.length):v.writeUint8(e.length),v.writeBuffer(e.subarray(0)),5==(31&e[0])&&(n=!0)})),{bufferPointer:f,length:c,key:n,extradata:t}}function b(e,t){var r;if(1&i.f[15](e+36)){var n=(0,d.iI)(e);if(!(0,l.Bs)(n)){for(var a=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:A,s=[],o=[],c=[],f=[],v=new u.A(n);v.remainingSize()>0;){var m;m=3===a?v.readUint32():2===a?v.readUint24():1===a?v.readUint16():v.readUint8();var g=n.subarray(0|Number(0xffffffffn&v.getPos()),(0|Number(0xffffffffn&v.getPos()))+m);v.skip(m);var y=31&g[0];7===y?s.push(g):8===y?o.push(g):13===y?c.push(g):f.push(g)}if(s.length||o.length){var b=k(s,o,c),x=(0,p.sY)(b.length);(0,h.lW)(x,b.length,b),(0,d.Ow)(e,1,x,b.length)}}}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&i.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,l.Bs)(r)){var n=(0,l.py)(r);if(n.length>1){var s=[],o=[],u=[];if(n.forEach((function(e){var t=31&e[0];7===t?s.push(e):8===t?o.push(e):13===t&&u.push(e)})),s.length&&o.length){var c=k(s,o,u),f=(0,p.sY)(c.length);(0,h.lW)(f,c.length,c),(0,d.Ow)(e,1,f,c.length),a.M[15](e+36,1|i.f[15](e+36))}}}}}function w(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[4];var r=function(e){var t=new u.A(e);t.skip(5);for(var r=[],n=[],i=[],a=31&t.readUint8(),s=0;s<a;s++){var o=t.readUint16();r.push(t.readBuffer(o))}for(var c=t.readUint8(),f=0;f<c;f++){var h=t.readUint16();n.push(t.readBuffer(h))}if(t.remainingSize()>4){t.skip(3);var d=t.readUint8();if(d>0)for(var l=0;l<d;l++){var p=t.readUint16();i.push(t.readBuffer(p))}}return{spss:r,ppss:n,spsExts:i}}(t).spss;if(r.length){var n=_(r[0]),i=n.profile,a=n.level,s=n.width,o=n.height;e.codecpar.profile=i,e.codecpar.level=a,e.codecpar.width=s,e.codecpar.height=o}}}function _(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,l.BN)(e.subarray(t)),n=new c.A(r.length);n.appendBuffer(r),n.readU1(),n.readU(2),n.readU(5);var i=n.readU(8);n.readU1(),n.readU1(),n.readU1(),n.readU1(),n.readU1(),n.readU1(),n.readU(2);var a=n.readU(8);v.xb(n);var s=1,o=0,u=0;if((100==i||110==i||122==i||244==i||44==i||83==i||86==i||118==i||128==i||138==i||139==i||134==i||135==i)&&(3===(s=v.xb(n))&&n.readU1(),o=v.xb(n),u=v.xb(n),n.readU1(),n.readU1()))for(var f=new Array(8),h=0;h<(3!=s?8:12);h++)f[h]=n.readU1();v.xb(n);var d=v.xb(n);if(0===d)v.xb(n);else if(1===d){n.readU1(),v.$x(n),v.$x(n);for(var p=v.xb(n),m=0;m<p;m++)v.$x(n)}v.xb(n),n.readU1();var A=v.xb(n),g=v.xb(n),k=n.readU1(),y=16*(A+1),b=(2-k)*(g+1)*16;k||n.readU1(),n.readU1();var x=n.readU1();if(x){var w=1,_=2-x;1===s?(w=2,_=2*(2-x)):2===x&&(w=2,_=2-x),y-=w*(v.xb(n)+v.xb(n)),b-=_*(v.xb(n)+v.xb(n))}return{profile:i,level:a,width:y,height:b,chromaFormatIdc:s,bitDepthLumaMinus8:o,bitDepthChromaMinus8:u}}}},53e3:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>k,XC:()=>b,ci:()=>y,dT:()=>v,oT:()=>g}),r(42096),r(75062),r(16091),r(68632);var n=r(134),i=r(63939),a=r(50932),s=r(72739),o=r(729),u=r(31865),c=r(37246),f=r(14686),h=r(60264),d=r(71517),l=r(37837),p=r(23991),v=(0,n.A)((0,n.A)((0,n.A)((0,n.A)({},1,"Main"),2,"Main10"),3,"MainStillPicture"),4,"Main444"),m=3;function A(e,t,r){var n=t[0],i=23;e.length&&(i+=3,i=e.reduce((function(e,t){return e+2+t.length}),i)),t.length&&(i+=3,i=t.reduce((function(e,t){return e+2+t.length}),i)),r.length&&(i+=3,i=r.reduce((function(e,t){return e+2+t.length}),i));var a=new Uint8Array(i),u=new o.A(a,!0),c=x(n);u.writeUint8(1),u.writeUint8(n[1]),u.writeUint8(n[2]),u.writeUint8(n[3]),u.writeUint8(n[4]),u.writeUint8(n[5]),u.writeUint8(n[6]),u.writeUint8(n[7]),u.writeUint8(n[8]),u.writeUint8(n[9]),u.writeUint8(n[10]),u.writeUint8(n[11]),u.writeUint8(c.level),u.writeUint8(1020),u.writeUint8(0),u.writeUint8(16320),u.writeUint8(16320|c.chromaFormatIdc),u.writeUint8(8160|c.bitDepthLumaMinus8),u.writeUint8(8160|c.bitDepthChromaMinus8),u.writeUint16(0),u.writeUint8(8|(1&n[0])<<2|m);var f=0;return e.length&&f++,t.length&&f++,r.length&&f++,u.writeUint8(f),e.length&&(u.writeUint8(160),u.writeUint16(e.length),s.__(e,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),t.length&&(u.writeUint8(161),u.writeUint16(t.length),s.__(t,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),r.length&&(u.writeUint8(162),u.writeUint16(r.length),s.__(r,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),a}function g(e){var t,r=!1,n=(0,h.py)(e);if(n.length>2){var i=[],a=[],u=[];n.forEach((function(e){var t=e[0]>>>1&63;32===t?i.push(e):33===t?a.push(e):34===t&&u.push(e)})),i.length&&a.length&&u.length&&(t=A(i,a,u),n=n.filter((function(e){var t=e[0]>>>1&63;return 32!==t&&33!==t&&34!==t&&35!==t})))}var c=n.reduce((function(e,t){return e+m+1+t.length}),0),d=(0,l.sY)(c),p=(0,f.s3)(d,c),v=new o.A(p);return s.__(n,(function(e){3===m?v.writeUint32(e.length):2===m?v.writeUint24(e.length):1===m?v.writeUint16(e.length):v.writeUint8(e.length),v.writeBuffer(e.subarray(0));var t=e[0]>>>1&63;19!==t&&20!==t&&21!==t||(r=!0)})),{bufferPointer:d,length:c,extradata:t,key:r}}function k(e,t){var r;if(1&i.f[15](e+36)){var n=(0,d.iI)(e);if(!(0,h.Bs)(n)){for(var a=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:m,s=[],o=[],c=[],p=new u.A(n);p.remainingSize()>0;){var v;v=3===a?p.readUint32():2===a?p.readUint24():1===a?p.readUint16():p.readUint8();var g=n.subarray(0|Number(0xffffffffn&p.getPos()),(0|Number(0xffffffffn&p.getPos()))+v);p.skip(v);var k=g[0]>>>1&63;33===k?o.push(g):34===k?c.push(g):32===k&&s.push(g)}if(o.length||c.length||s.length){var y=A(s,o,c),b=(0,l.sY)(y.length);(0,f.lW)(b,y.length,y),(0,d.Ow)(e,1,b,y.length)}}}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&i.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,h.Bs)(r)){var n=(0,h.py)(r);if(n.length>2){var s=[],o=[],u=[];if(n.forEach((function(e){var t=e[0]>>>1&63;32===t?s.push(e):33===t?o.push(e):34===t&&u.push(e)})),s.length&&o.length&&u.length){var c=A(s,o,u),p=(0,l.sY)(c.length);(0,f.lW)(p,c.length,c),(0,d.Ow)(e,1,p,c.length),a.M[15](e+36,1|i.f[15](e+36))}}}}}function b(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[21];var r=function(e){var t=new u.A(e,!0);t.skip(22);for(var r=[],n=[],i=[],a=t.readUint8(),s=0;s<a;s++){for(var o=63&t.readUint8(),c=t.readUint16(),f=[],h=0;h<c;h++){var d=t.readUint16();f.push(t.readBuffer(d))}32===o?r=f:33===o?n=f:34===o&&(i=f)}return{vpss:r,spss:n,ppss:i}}(t).spss;if(r.length){var n=x(r[0]),i=n.profile,a=n.level,s=n.width,o=n.height;e.codecpar.profile=i,e.codecpar.level=a,e.codecpar.width=s,e.codecpar.height=o}}}function x(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=0,n=0,i=0,a=0,s=0,o=0,u=1,f=0,d=0,l=0,v=0,m=(0,h.BN)(e.subarray(t)),A=new c.A(m.length);A.appendBuffer(m),A.readU1(),A.readU(6),A.readU(6),A.readU(3),A.readU(4);var g=A.readU(3);if(A.readU1(),g<=6){f=A.readU(2),d=A.readU1(),r=A.readU(5),l=A.readU(32),v=A.readU(48),n=A.readU(8);for(var k=new Array(6),y=new Array(6),b=0;b<g;b++)k[b]=A.readU1(),y[b]=A.readU1();if(g>0)for(var x=g;x<8;x++)A.readU(2);for(var w=0;w<g;w++)k[w]&&(A.readU(2),A.readU(1),A.readU(5),A.readU(32),A.readU(1),A.readU(1),A.readU(1),A.readU(1),A.readU(44)),y[w]&&A.readU(8);p.xb(A),3===(u=p.xb(A))&&A.readU(1),i=p.xb(A),a=p.xb(A);var _=0,T=0,P=0,I=0;A.readU1()&&(_=p.xb(A),T=p.xb(A),P=p.xb(A),I=p.xb(A)),s=p.xb(A),o=p.xb(A);var B=2,C=2;0===u?B=C=0:2===u?(B=2,C=1):3===u&&(B=C=1),i-=B*(1<<s+1)*(_+T),a-=C*(1<<s+1)*(P+I)}return{profile:r,level:n,width:i,height:a,chromaFormatIdc:u,bitDepthLumaMinus8:s,bitDepthChromaMinus8:o,generalProfileSpace:f,generalTierFlag:d,generalProfileCompatibilityFlag:l,constraintFlags:v}}}},89088:(e,t,r)=>{"use strict";r.d(t,{Au:()=>k,He:()=>y,XC:()=>b,Y2:()=>m,hG:()=>A,oz:()=>g});var n=r(134),i=r(77231),a=[44100,48e3,32e3,0],s=[22050,24e3,16e3,0],o=[11025,12e3,8e3,0],u=[0,1152,1152,384],c=[0,576,1152,384],f=[0,576,1152,384],h=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],d=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],l=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],p=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],v=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function m(e,t){switch(e){case 0:return o[t];case 2:return s[t];case 3:return a[t]}return i.N_}function A(e,t){switch(e){case 0:return f[t];case 2:return c[t];case 3:return u[t]}return i.N_}function g(e,t,r){switch(t){case 1:switch(e){case 0:case 2:return v[r];case 3:return l[r]}break;case 2:switch(e){case 0:case 2:return v[r];case 3:return d[r]}case 3:switch(e){case 0:case 2:return p[r];case 3:return h[r]}}return i.N_}function k(e){switch(e){case 1:return 34;case 2:return 33;case 3:return 32}return i.N_}var y=(0,n.A)((0,n.A)((0,n.A)({},32,"Layer1"),33,"Layer2"),34,"Layer3");function b(e,t){if(t&&t.length>=4){var r=t[1]>>>3&3,n=(6&t[1])>>1,i=(12&t[2])>>>2,a=3&~(t[3]>>>6)?2:1,s=k(n),o=m(r,i);e.codecpar.profile=s,e.codecpar.sampleRate=o,e.codecpar.chLayout.nbChannels=a}}},14392:(e,t,r)=>{"use strict";r.d(t,{U:()=>a,X:()=>i});var n=r(37246);function i(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){var r=a(t);e.codecpar.profile=r.profile,e.codecpar.level=r.level}}function a(e){var t=new n.A(e.length);return t.appendBuffer(e.subarray(4)),{profile:t.readU(8),level:t.readU(8),bitDepth:t.readU(4),chromaSubsampling:t.readU(3),fullRangeFlag:t.readU1(),colorPrimaries:t.readU(8),colorTrc:t.readU(8),colorSpace:t.readU(8)}}},58919:(e,t,r)=>{"use strict";r.d(t,{Ui:()=>o,XC:()=>s,wN:()=>a}),r(42096),r(75062),r(16091),r(68632);var n=r(134),i=r(37246),a=(0,n.A)((0,n.A)((0,n.A)((0,n.A)({},0,"Profile0"),1,"Profile1"),2,"Profile2"),3,"Profile3");function s(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){var r=o(t);e.codecpar.profile=r.profile,e.codecpar.level=r.level}}function o(e){var t=new i.A(e.length);return t.appendBuffer(e),{profile:t.readU(8),level:t.readU(8),bitDepth:t.readU(4),chromaSubsampling:t.readU(3),fullRangeFlag:t.readU1(),colorPrimaries:t.readU(8),colorTrc:t.readU(8),colorSpace:t.readU(8)}}},55611:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>k,Ui:()=>w,XC:()=>b,ci:()=>y,oT:()=>g});var n=r(63939),i=r(50932),a=r(72739),s=r(729),o=r(31865),u=r(37246),c=r(14686),f=r(60264),h=r(71517),d=r(37837),l=r(23991),p=r(83314),v=3;function m(e){var t=e.readU(9),r=e.readU(3),n=e.readU(2),i=e.readU(2),a=e.readU(3);e.readU(5),e.readU(2);var s=e.readU(6),o=e.readU(7),u=e.readU(1),c=e.readU(8),f=e.readU(1),h=e.readU(1),d=[],l=[];if(s){for(var p=0;p<s-1;p++)d[p]=e.readU(8);d[s-1]=e.readU(6)}else e.readU(6);if(r>1){for(var v=0,m=r-2;m>=0;--m)v|=e.readU(1)<<m;for(var A=r;A<=8&&r>1;++A)e.readU(1);for(var g=r-2;g>=0;--g)v&1<<g&&(l[g]=e.readU(8))}var k=e.readU(8),y=[];if(k)for(var b=0;b<k;b++)y.push(e.readU(8));return{olsIdx:t,numSublayers:r,bitDepthMinus8:a,chromaFormatIdc:i,constantFrameRate:n,generalProfileIdc:o,generalTierFlag:u,generalLevelIdc:c,ptlFrameOnlyConstraintFlag:f,ptlMultilayerEnabledFlag:h,generalConstraintInfo:d,sublayerLevelIdc:l,generalSubProfileIdc:y,maxPictureWidth:e.readU(16),maxPictureHeight:e.readU(16),avgFramerate:e.readU(16)}}function A(e,t,r){var n,i=t[0];if(i){var o=x(i),u=new p.A;if(u.writeU(9,0),u.writeU(3,o.spsMaxSublayersMinus1+1),u.writeU(2,1),u.writeU(2,o.chromaFormatIdc),u.writeU(3,o.bitDepthMinus8),u.writeU(5,31),u.writeU(2,3),u.writeU(6,o.generalConstraintInfo.length),u.writeU(7,o.profile),u.writeU1(o.tierFlag),u.writeU(8,o.level),u.writeU1(o.ptlFrameOnlyConstraintFlag),u.writeU1(o.ptlMultilayerEnabledFlag),o.generalConstraintInfo.length){for(var c=0;c<o.generalConstraintInfo.length-1;c++)u.writeU(8,o.generalConstraintInfo[c]);u.writeU(6,o.generalConstraintInfo[o.generalConstraintInfo.length-1])}else u.writeU(6,63);if(o.spsMaxSublayersMinus1+1>1){for(var f=0,h=o.spsMaxSublayersMinus1-1;h>=0;h--)f=f<<1|o.ptlSublayerLevelPresentFlag[h];u.writeU(8,f)}for(var d=o.spsMaxSublayersMinus1-1;d>=0;d--)o.ptlSublayerLevelPresentFlag[d]&&u.writeU(8,o.sublayerLevelIdc[d]);u.writeU(8,o.generalSubProfileIdc.length);for(var l=0;l<o.generalSubProfileIdc.length;l++)u.writeU(32,o.sublayerLevelIdc[l]);u.writeU(16,o.width),u.writeU(16,o.height),u.writeU(16,0),u.padding(),n=u.getBuffer().subarray(0,u.getPointer())}var m=1+(n?n.length:0);e.length&&(m+=3,m=e.reduce((function(e,t){return e+2+t.length}),m)),t.length&&(m+=3,m=t.reduce((function(e,t){return e+2+t.length}),m)),r.length&&(m+=3,m=r.reduce((function(e,t){return e+2+t.length}),m));var A=new Uint8Array(m),g=new s.A(A,!0);g.writeUint8(v<<1|(n?1:0)|248),n&&g.writeBuffer(n);var k=0;return e.length&&k++,t.length&&k++,r.length&&k++,g.writeUint8(k),e.length&&(g.writeUint8(142),g.writeUint16(e.length),a.__(e,(function(e){g.writeUint16(e.length),g.writeBuffer(e)}))),t.length&&(g.writeUint8(143),g.writeUint16(t.length),a.__(t,(function(e){g.writeUint16(e.length),g.writeBuffer(e)}))),r.length&&(g.writeUint8(144),g.writeUint16(r.length),a.__(r,(function(e){g.writeUint16(e.length),g.writeBuffer(e)}))),A}function g(e){var t,r=!1,n=(0,f.py)(e);if(n.length>2){var i=[],o=[],u=[];n.forEach((function(e){var t=e[0]>>>1&63;14===t?i.push(e):15===t?o.push(e):16===t&&u.push(e)})),i.length&&o.length&&u.length&&(t=A(i,o,u),n=n.filter((function(e){var t=e[0]>>>1&63;return 14!==t&&15!==t&&16!==t&&20!==t})))}var h=n.reduce((function(e,t){return e+v+1+t.length}),0),l=(0,d.sY)(h),p=(0,c.s3)(l,h),m=new s.A(p);return a.__(n,(function(e){3===v?m.writeUint32(e.length):2===v?m.writeUint24(e.length):1===v?m.writeUint16(e.length):m.writeUint8(e.length),m.writeBuffer(e.subarray(0));var t=e[0]>>>1&63;8!==t&&7!==t&&9!==t&&10!==t||(r=!0)})),{bufferPointer:l,length:h,extradata:t,key:r}}function k(e,t){var r;if(1&n.f[15](e+36)){var i=(0,h.iI)(e);if(!(0,f.Bs)(i)){for(var a=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:v,s=[],u=[],l=[],p=new o.A(i);p.remainingSize()>0;){var m;m=3===a?p.readUint32():2===a?p.readUint24():1===a?p.readUint16():p.readUint8();var g=i.subarray(0|Number(0xffffffffn&p.getPos()),(0|Number(0xffffffffn&p.getPos()))+m);p.skip(m);var k=g[0]>>>1&63;15===k?u.push(g):16===k?l.push(g):14===k&&s.push(g)}if(u.length||l.length||s.length){var y=A(s,u,l),b=(0,d.sY)(y.length);(0,c.lW)(b,y.length,y),(0,h.Ow)(e,1,b,y.length)}}}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&n.f[15](e+36)||t){var r=(0,h.iI)(e);if((0,f.Bs)(r)){var a=(0,f.py)(r);if(a.length>2){var s=[],o=[],u=[];if(a.forEach((function(e){var t=e[0]>>>1&63;14===t?s.push(e):15===t?o.push(e):16===t&&u.push(e)})),s.length&&o.length&&u.length){var l=A(s,o,u),p=(0,d.sY)(l.length);(0,c.lW)(p,l.length,l),(0,h.Ow)(e,1,p,l.length),i.M[15](e+36,1|n.f[15](e+36))}}}}}function b(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=t[0]>>>1&3;var r=function(e){var t=new o.A(e,!0);if(1&t.readUint8()){var r=new u.A;r.appendBuffer(e.subarray(1)),m(r),t.skip(r.getPos())}for(var n=[],i=[],a=[],s=t.readUint8(),c=0;c<s;c++){var f=31&t.readUint8(),h=1;13!==f&&12!==f&&(h=t.readUint16());for(var d=[],l=0;l<h;l++){var p=t.readUint16();d.push(t.readBuffer(p))}14===f?n=d:15===f?i=d:16===f&&(a=d)}return{vpss:n,spss:i,ppss:a}}(t).spss;if(r.length){var n=x(r[0]),i=n.profile,a=n.level,s=n.width,c=n.height;e.codecpar.profile=i,e.codecpar.level=a,e.codecpar.width=s,e.codecpar.height=c}}}function x(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r,n,i,a=0,s=0,o=0,c=0,h=0,d=[],p=[],v=[],m=[],A=(0,f.BN)(e.subarray(t)),g=new u.A(A.length);g.appendBuffer(A),g.readU1(),g.readU1(),g.readU(6),g.readU(5),g.readU(3),g.readU(8);var k=g.readU(3);i=g.readU(2);var y=g.readU(2);if(g.readU(1)){if(a=g.readU(7),o=g.readU(1),s=g.readU(8),c=g.readU(1),h=g.readU(1),g.readU(1)){for(var b=0;b<8;b++)d[b]=g.readU(8);d[8]=g.readU(7);var x=g.readU(8);g.readU(x)}g.skipPadding();for(var w=k-1;w>=0;w--)p[w]=g.readU(1);g.skipPadding();for(var _=k-1;_>=0;_--)p[_]&&(v[_]=g.readU(8));var T=g.readU(8);if(T)for(var P=0;P<T;P++)m[P]=g.readU(32)}g.readU1(),g.readU1()&&g.readU1();var I=r=l.xb(g),B=n=l.xb(g);if(g.readU1()&&(l.xb(g),l.xb(g),l.xb(g),l.xb(g)),g.readU1()){var C,S=l.xb(g),M=y+5,U=1<<M,R=I/(1<<M),E=B/(1<<M),D=Math.ceil(Math.log2(R)),L=Math.ceil(Math.log2(E)),F=0,O=0;S>0&&(O=g.readU1(),F=g.readU1());for(var N=0;S>0&&N<=S;N++)F&&0!=N||(N>0&&I>U&&g.readU(D),N>0&&B>U&&g.readU(L),N<S&&I>U&&g.readU(D),N<S&&B>U&&g.readU(L)),O||g.readU(2);if(C=l.xb(g)+1,g.readU(1)&&g.readU(1))for(var z=0;z<=S;z++)g.readU(C)}return{profile:a,level:s,width:r,height:n,chromaFormatIdc:i,bitDepthMinus8:l.xb(g),generalProfileSpace:0,tierFlag:o,generalConstraintInfo:d,generalSubProfileIdc:m,ptlFrameOnlyConstraintFlag:c,ptlMultilayerEnabledFlag:h,spsMaxSublayersMinus1:k,ptlSublayerLevelPresentFlag:p,sublayerLevelIdc:v}}}function w(e){var t=new u.A;return t.appendBuffer(e),1&t.readU(8)?m(t):{}}},16160:(e,t,r)=>{"use strict";r.d(t,{V:()=>i,v:()=>n});var n=256e3,i=BigInt(5e3)},75:(e,t,r)=>{"use strict";r.d(t,{Cj:()=>R,Ib:()=>B,ho:()=>_,jF:()=>D});var n=r(25182),i=r(36443),a=r.n(i),s=r(61499),o=r(63939),u=r(9599),c=r(29170),f=r(95335),h=r(72739),d=r(77231),l=r(31425),p=r(44328),v=r(71517),m=r(16160),A=r(9705),g=r(4624),k=r(40417),y=r(75742),b=r(56024),x="src/avformat/demux.ts",w={fastOpen:!1,maxAnalyzeDuration:1e3};function _(e){return T.apply(this,arguments)}function T(){return T=(0,n.A)(a().mark((function e(t){var r,n,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=f.X$({},w,r),t.ioReader||g.h2("need IOReader",x,65),t.iformat||g.h2("need iformat",x,68),2===t.iformat.type&&(n.maxAnalyzeDuration=Math.max(n.maxAnalyzeDuration,2e3)),t.iformat.init(t),t.options=n,e.abrupt("return",t.iformat.readHeader(t));case 8:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function P(e){return I.apply(this,arguments)}function I(){return(I=(0,n.A)(a().mark((function e(t){var r,n,i,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ioReader.fileSize();case 2:if(!((r=e.sent)<=BigInt(0))){e.next=5;break}return e.abrupt("return");case 5:n=t.interval.packetBuffer,t.interval.packetBuffer=[],i=t.ioReader.getPos(),s=0,u=a().mark((function e(){var n,u,c,f,l,p,A;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r-BigInt(Math.floor(m.v<<s)),e.next=3,t.iformat.seek(t,null,n,2);case 3:(u=e.sent)>BigInt(0)&&(i=u),c={},f=(0,v._5)();case 7:return e.next=10,R(t,f);case 10:if(!(e.sent<0)){e.next=15;break}return e.abrupt("break",21);case 15:l=o.f[17](f+8),(p=t.getStreamByIndex(o.f[15](f+32))).startTime!==d.Dh?l-=p.startTime:l-=p.firstDTS,l>BigInt(0)&&((p.duration===d.Dh||!c[o.f[15](f+32)]||p.duration<l&&Math.abs(Number(l-p.duration))<60*p.timeBase.den/p.timeBase.num)&&(p.duration=l),c[f.streamIndex]=l);case 19:e.next=7;break;case 21:if((0,v.Qe)(f),A=!0,h.__(t.streams,(function(e){if(e.duration===d.Dh)return A=!1,!1})),!A){e.next=26;break}return e.abrupt("return",1);case 26:s++;case 27:case"end":return e.stop()}}),e)}));case 10:if(!(s<4)){e.next=16;break}return e.delegateYield(u(),"t0",12);case 12:if(!e.t0){e.next=14;break}return e.abrupt("break",16);case 14:e.next=10;break;case 16:return h.__(t.interval.packetBuffer,(function(e){(0,v.Qe)(e)})),t.interval.packetBuffer=n,e.next=20,t.iformat.seek(t,null,i,2);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return C.apply(this,arguments)}function C(){return(C=(0,n.A)(a().mark((function e(t){var r,n,i,h,m,A,g,x,w,_,T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_=function(){if(!t.getDecoderResource)return!0;for(var e=0;e<t.streams.length;e++)if(x[t.streams[e].index]&&!w[t.streams[e].index])return!1;return!0},r=t.iformat.getAnalyzeStreamsCount(),n={},i={},h={},m=0,A=[],g=0,x={},w={},T=a().mark((function e(){var T,P,I,B,C,S,M,U,E;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.streams.length>=r&&(0,l.$)(t)&&t.options.fastOpen&&_())){e.next=2;break}return e.abrupt("return",0);case 2:return m||(m=(0,v._5)()),T=!1,e.next=6,R(t,m);case 6:if(0===(g=e.sent)){e.next=9;break}return e.abrupt("return",0);case 9:if(P=t.getStreamByIndex(o.f[15](m+32)),!o.f[15](m+28)){e.next=29;break}if(T=!0,A.push(m),n[P.index]||(P.firstDTS=o.f[17](m+16),P.startTime=o.f[17](m+8),n[P.index]=!0),o.f[17](m+8)<P.startTime&&(P.startTime=o.f[17](m+8)),i[P.index]?i[P.index].push(o.f[17](m+16)):i[P.index]=[o.f[17](m+16)],h[P.index]?h[P.index]+=o.f[15](m+28):h[P.index]=o.f[15](m+28),w[P.index]||!t.getDecoderResource){e.next=29;break}if(I=x[P.index]){e.next=28;break}return e.next=22,t.getDecoderResource(P.codecpar.codecType,P.codecpar.codecId);case 22:if(!(B=e.sent)){e.next=28;break}return 1===P.codecpar.codecType?I=new y.A({resource:B,onReceiveFrame:function(e){P.codecpar.format=o.f[15](e+80),P.codecpar.frameSize=o.f[15](e+76),(0,b.xj)(e),w[P.index]=!0},onError:function(){w[P.index]=!0}}):0===P.codecpar.codecType&&(B.threadModule&&delete B.threadModule,I=new k.A({resource:B,onReceiveFrame:function(e){P.codecpar.format=o.f[15](e+80),P.codecpar.colorSpace=o.f[15](e+220),P.codecpar.colorPrimaries=o.f[15](e+212),P.codecpar.colorTrc=o.f[15](e+216),P.codecpar.chromaLocation=o.f[15](e+224),P.codecpar.sampleAspectRatio=(0,c.A)(e+92,u.P),(0,b.xj)(e),w[P.index]=!0},onError:function(){w[P.index]=!0}})),e.next=27,I.open(P.codecpar[s.o9]);case 27:x[P.index]=I;case 28:I&&I.decode(m);case 29:if(i[P.index]&&12===i[P.index].length){for(C=BigInt(0),S=1;S<i[P.index].length;S++)C+=i[P.index][S]-i[P.index][S-1];M=Number(C)/(i[P.index].length-1),1===P.codecpar.codecType&&P.codecpar.sampleRate>0?P.codecpar.frameSize=Math.round(M/P.timeBase.den*P.timeBase.num*P.codecpar.sampleRate):0===P.codecpar.codecType&&(U=P.timeBase.den*P.timeBase.num/M,P.codecpar.framerate.num=Math.round(U),P.codecpar.framerate.den=1),(E=Number(o.f[17](m+16)-P.firstDTS)*P.timeBase.num/P.timeBase.den)&&(P.codecpar.bitRate=BigInt(Math.floor(8*h[P.index]/E)))}if(!(o.f[17](m+16)-P.startTime>(0,p.k)(BigInt(Math.floor(t.options.maxAnalyzeDuration)),d.i0,P.timeBase))){e.next=34;break}return f.__(i,(function(e,r){var n=t.getStreamById(+r);if(e&&e.length>1){for(var a=BigInt(0),s=1;s<e.length;s++)a+=e[s]-e[s-1];var u=Number(a)/(i[n.index].length-1);if(1===n.codecpar.codecType&&n.codecpar.sampleRate>0)n.codecpar.frameSize=Math.round(u/n.timeBase.den*n.timeBase.num*n.codecpar.sampleRate);else if(0===n.codecpar.codecType){var c=n.timeBase.den*n.timeBase.num/u;n.codecpar.framerate.num=Math.round(c),n.codecpar.framerate.den=1}var f=Number(o.f[17](m+16)-n.firstDTS)*n.timeBase.num/n.timeBase.den;f&&(n.codecpar.bitRate=BigInt(Math.floor(8*h[n.index]/f)))}})),T&&(m=0),e.abrupt("return",0);case 34:T&&(m=0);case 35:case"end":return e.stop()}}),e)}));case 11:return e.delegateYield(T(),"t0",13);case 13:if(0!==e.t0){e.next=16;break}return e.abrupt("break",18);case 16:e.next=11;break;case 18:if(m&&(0,v.Qe)(m),A.length&&(t.interval.packetBuffer=A.concat(t.interval.packetBuffer)),f.__(x,(function(e){e&&e.close()})),-1048576!==g){e.next=25;break}return e.abrupt("return",0);case 25:if(0===g){e.next=27;break}return e.abrupt("return",g);case 27:if(!(2===t.iformat.type&&1&t.ioReader.flags)){e.next=30;break}return e.next=30,P(t);case 30:return e.abrupt("return",0);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){var r=h.El(e.sampleIndexes,(function(e){return e.pts<o.f[17](t+8)?1:-1})),n={dts:o.f[17](t+16),pts:o.f[17](t+8),pos:o.f[17](t+56),size:o.f[15](t+28),duration:o.f[17](t+48),flags:o.f[15](t+36)};r>-1?(e.sampleIndexesPosMap.set(o.f[17](t+56),r),e.sampleIndexes.splice(r,0,n)):(e.sampleIndexesPosMap.set(o.f[17](t+56),e.sampleIndexes.length),e.sampleIndexes.push(n))}function M(e,t){return U.apply(this,arguments)}function U(){return(U=(0,n.A)(a().mark((function e(t,r){var n,i,s,f,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getStreamById(o.f[15](r+32)),i=0,!n||27!==n.codecpar.codecId&&173!==n.codecpar.codecId&&196!==n.codecpar.codecId&&86018!==n.codecpar.codecId){e.next=37;break}if(o.f[15](r+28)||!(0,v.fQ)(r,1)){e.next=35;break}case 4:return s=(0,v._5)(),e.next=8,t.iformat.readAVPacket(t,s);case 8:if(0===(i=e.sent)){e.next=17;break}if(!t.interval.packetBuffer.length){e.next=16;break}return f=t.interval.packetBuffer.shift(),(0,v.Up)(r),(0,v.rN)(r,f),(0,v.Qe)(f),e.abrupt("return",M(t,r));case 16:return e.abrupt("return",i);case 17:if(o.f[15](s+32)!==o.f[15](r+32)){e.next=30;break}if(!o.f[15](s+28)){e.next=24;break}return(0,v.Zx)(r,s),(0,v.Qe)(s),e.abrupt("return",0);case 24:return(0,v.Up)(r),(0,v.rN)(r,s),(0,v.Qe)(s),e.abrupt("continue",4);case 28:e.next=31;break;case 30:t.interval.packetBuffer.push(s);case 31:e.next=4;break;case 33:e.next=37;break;case 35:if(!(32&o.f[15](r+36))){e.next=37;break}return e.abrupt("return",R(t,r));case 37:return 1&t.ioReader.flags&&(n.sampleIndexesPosMap.has(o.f[17](r+56))||(0===n.codecpar.codecType?1&o.f[15](r+36)&&S(n,r):1===n.codecpar.codecType&&(l=h.El(n.sampleIndexes,(function(e){return e.pts<o.f[17](r+8)?1:-1})),(!n.sampleIndexes.length||l<0&&(0,p.k)(o.f[17](r+8)-n.sampleIndexes[n.sampleIndexes.length-1].pts,(0,c.A)(r+72,u.P),d.i0)>=m.V||l>0&&l<n.sampleIndexes.length-1&&(0,p.k)(o.f[17](r+8)-n.sampleIndexes[l-1].pts,(0,c.A)(r+72,u.P),d.i0)>=m.V||0===l&&(0,p.k)(n.sampleIndexes[0].pts-o.f[17](r+8),(0,c.A)(r+72,u.P),d.i0)>=m.V)&&S(n,r)))),e.abrupt("return",0);case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return E.apply(this,arguments)}function E(){return(E=(0,n.A)(a().mark((function e(t,r){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,(0,v.Up)(r),!t.interval.packetBuffer.length){e.next=7;break}return i=t.interval.packetBuffer.shift(),(0,v.rN)(r,i),(0,v.Qe)(i),e.abrupt("return",M(t,r));case 7:return e.next=9,t.iformat.readAVPacket(t,r);case 9:if(0===(n=e.sent)){e.next=13;break}return(0,v.Up)(r),e.abrupt("return",n);case 13:return e.abrupt("return",M(t,r));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,r,n){return L.apply(this,arguments)}function L(){return(L=(0,n.A)(a().mark((function e(t,r,n,i){var s,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=t.streams[r])||(s=t.getStreamByMediaType(0))||(s=t.getStreamByMediaType(1)),s){e.next=5;break}return g.z3("not found any stream to seek, streamIndex: ".concat(s.index),x,540),e.abrupt("return",BigInt(A.LR));case 5:return g.Yz("seek in ".concat(0===s.codecpar.codecType?"video":"audio"," stream, streamIndex: ").concat(s.index,", timestamp: ").concat(n,", flags: ").concat(i),x,544),n=(0,p.k)(n,d.i0,s.timeBase),e.next=9,t.iformat.seek(t,s,n,i);case 9:if(!((o=e.sent)>=BigInt(0))){e.next=14;break}return h.__(t.interval.packetBuffer,(function(e){(0,v.Qe)(e)})),t.interval.packetBuffer.length=0,e.abrupt("return",BigInt(0));case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},548:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>C,L_:()=>I,eG:()=>P});var n=r(69736),i=r.n(n),a=r(61499),s=r(63939),o=r(9599),u=r(29170),c=r(44315),f=r(95335),h=r(62751),d=r(67672),l=r(44328),p=r(77231),v=r(20525),m=r(62100),A=r(58469),g=r(20620),k=r(53e3),y=r(90412),b=r(58919),x=r(89088);function w(e){e<0&&(e=BigInt(0));var t=0|Number(e%BigInt(1e3)&0xffffffffn),r=0|Number(e/BigInt(1e3)%BigInt(60)&0xffffffffn),n=0|Number(e/BigInt(1e3)/BigInt(60)%BigInt(60)&0xffffffffn),i=0|Number(e/BigInt(1e3)/BigInt(3600)&0xffffffffn);return v.GP("%02d:%02d:%02d.%03d",i,n,r,t)}function _(e){return e<BigInt(1e4)?(0,m.A)(0|Number(0xffffffffn&e))+" bps/s":(0|Number(e/BigInt(1e3)&0xffffffffn))+" kbps/s"}function T(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown";return f.__(e,(function(e,n){if(t===e)return r=n,!1})),r}function P(e,t){return 1===e?T(h.n1,t):0===e?T(h._R,t):"unknown"}function I(e){return T(h.iW,e)}function B(e,t){switch(e){case 86018:return A.uF[t]||"LC";case 86017:return x.He[t]||"Layer3";case 27:return g.tZ[t]||"High";case 173:return k.dT[t]||"Main";case 225:return y.zk[t]||"Main";case 167:return b.wN[t]||"Profile0"}}function C(e,t){var r="";return e.forEach((function(e,n){if(e instanceof c.oD){for(var v=[],A=0;A<e.streams.length;A++){var g=e.streams[A];v.push({index:g.index,id:g.id,codecpar:g.codecpar[a.o9],nbFrames:g.nbFrames,metadata:g.metadata,duration:g.duration,startTime:g.startTime,disposition:g.disposition,timeBase:g.timeBase[a.o9]})}e={metadata:e.metadata,format:e.format,chapters:e.chapters,streams:v}}r+=function(e,t,r){var n="".concat(r.tag," #").concat(t,", ").concat(T(h.iW,e.format),", from '").concat(r.from,":'\n");i()(e.metadata).length&&(n+="  Metadata:\n",f.__(e.metadata,(function(e,t){d.Ik(e)&&d.YO(e)||(n+="    ".concat(t,": ").concat(e,"\n"))})));var a=BigInt(0),c=BigInt(0),v=-BigInt(1);return e.streams.forEach((function(e){var t=(0,l.k)(e.duration,(0,u.A)(e.timeBase,o.P),p.i0),r=(0,l.k)(e.startTime,(0,u.A)(e.timeBase,o.P),p.i0);t>a&&(a=t),(r<v||v===-BigInt(1))&&(v=r),c+=s.f[17](e.codecpar+32)})),n+="  Duration: ".concat(w(a),", start: ").concat(w(v),", bitrate: ").concat(_(c),"\n"),e.streams.forEach((function(e,r){n+=function(e,t,r){var n,a=T(h.Mb,s.f[15](e.codecpar)),c=[];if(1===s.f[15](e.codecpar)){var v=B(s.f[15](e.codecpar+4),s.f[15](e.codecpar+48)),A=T(h.n1,s.f[15](e.codecpar+4));c.push("".concat(A).concat(v?" (".concat(v,")"):"")),c.push("".concat(s.f[15](e.codecpar+136)," Hz"));var g="".concat(s.f[15](e.codecpar+116)," channels");1===s.f[15](e.codecpar+116)?g="mono":2===s.f[15](e.codecpar+116)&&(g="stereo"),c.push(g),c.push(T(h.Sz,s.f[15](e.codecpar+28))),s.f[17](e.codecpar+32)>BigInt(0)&&c.push("".concat(_(s.f[17](e.codecpar+32))))}else if(0===s.f[15](e.codecpar)){var k=B(s.f[15](e.codecpar+4),s.f[15](e.codecpar+48)),y=T(h._R,s.f[15](e.codecpar+4));if(c.push("".concat(y).concat(k?" (".concat(k,")"):"")),s.f[15](e.codecpar+28)!==p.N_){var b=T(h.qO,s.f[15](e.codecpar+28)),x=T(h.mX,s.f[15](e.codecpar+84),"tv"),w=T(h._m,s.f[15](e.codecpar+96),"bt709");c.push("".concat(b,"(").concat(x,", ").concat(w,")"))}var P={num:s.f[15](e.codecpar+56)*s.f[15](e.codecpar+64),den:s.f[15](e.codecpar+60)*s.f[15](e.codecpar+68)};(0,l.iU)(P),c.push("".concat(s.f[15](e.codecpar+56),"x").concat(s.f[15](e.codecpar+60)," [SAR: ").concat(s.f[15](e.codecpar+64),":").concat(s.f[15](e.codecpar+68)," DAR ").concat(P.num,":").concat(P.den,"]")),s.f[17](e.codecpar+32)>BigInt(0)&&c.push("".concat(_(s.f[17](e.codecpar+32)))),(0,l.lb)((0,u.A)(e.codecpar+72,o.P))>0&&(c.push("".concat((0,l.lb)((0,u.A)(e.codecpar+72,o.P)).toFixed(2)," fps")),c.push("".concat((0,l.lb)((0,u.A)(e.codecpar+72,o.P)).toFixed(2)," tbr"))),c.push("".concat((n=BigInt(Math.floor((0,l.lb)({num:s.f[15](e.timeBase+4),den:s.f[15](e.timeBase)}))))<BigInt(1e4)?(0,m.A)(0|Number(0xffffffffn&n)):(0|Number(n/BigInt(1e3)&0xffffffffn))+"k"," tbn"))}else s.f[17](e.codecpar+32)>BigInt(0)&&c.push("".concat(_(s.f[17](e.codecpar+32))));if(e.disposition){var I="";1&e.disposition&&(I+="(".concat(T(h.Ki,1),") ")),2&e.disposition&&(I+="(".concat(T(h.Ki,2),") ")),4&e.disposition&&(I+="(".concat(T(h.Ki,4),") ")),8&e.disposition&&(I+="(".concat(T(h.Ki,8),") ")),16&e.disposition&&(I+="(".concat(T(h.Ki,16),") ")),32&e.disposition&&(I+="(".concat(T(h.Ki,32),") ")),64&e.disposition&&(I+="(".concat(T(h.Ki,64),") ")),128&e.disposition&&(I+="(".concat(T(h.Ki,128),") ")),256&e.disposition&&(I+="(".concat(T(h.Ki,256),") ")),512&e.disposition&&(I+="(".concat(T(h.Ki,512),") ")),1024&e.disposition&&(I+="(".concat(T(h.Ki,1024),") ")),2048&e.disposition&&(I+="(".concat(T(h.Ki,2048),") ")),65536&e.disposition&&(I+="(".concat(T(h.Ki,65536),") ")),131072&e.disposition&&(I+="(".concat(T(h.Ki,131072),") ")),262144&e.disposition&&(I+="(".concat(T(h.Ki,262144),") ")),524288&e.disposition&&(I+="(".concat(T(h.Ki,524288),") ")),1048576&e.disposition&&(I+="(".concat(T(h.Ki,1048576),") ")),I&&c.push(I)}var C="".concat(r,"Stream #").concat(t,":").concat(e.index," ").concat(a,": ").concat(c.join(", "),"\n");return i()(e.metadata).length&&(C+="".concat(r,"  Metadata:\n"),f.__(e.metadata,(function(e,t){d.Ik(e)&&d.YO(e)||(C+="".concat(r,"    ").concat(t,": ").concat(e,"\n"))}))),C}(e,t,"  ")})),n}(e,n,t[n])})),r}},51597:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,E:()=>u});var n,i=r(78716),a=r(81570),s=r(134),o=function(){function e(){(0,i.A)(this,e),(0,s.A)(this,"type",-1)}return(0,a.A)(e,[{key:"destroy",value:function(e){}}]),e}(),u=(n={},(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)(n,9,[86018]),7,[86017,86019,86018,12,27]),11,[86028]),0,[86017,86018,86051,69645,86049,65543,65542,12,27,173,225,167,196]),4,[139,167]),5,[86021,86076,86018,86017,86028,86032,86020,86056,65557,65537,65536,139,167,225,27,173,196,12,94226]),6,[86021,86076,139,167,225,94226]),1,[86021,86076,86018,86017,86028,86051,86019,86056,167,225,27,173,196,12,94226,94213]),8,[86017]),2,[86076,86018,86017,86019,,86020,86065,86056,12,225,27,173,196]),(0,s.A)((0,s.A)((0,s.A)(n,3,[86021]),10,[]),12,[94226]))},69765:(e,t,r)=>{"use strict";r.d(t,{A:()=>W});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(61499),p=r(63939),v=r(9599),m=r(29170),A=r(51597),g=r(9690),k=r(65977),y=r(75473),b=r(38106),x=r(3384),w=r(35336),_=r(72739),T=r(4624),P=r(92647),I=r(79804),B=r(77231),C=r(95335),S=r(20841),M=r(59989),U=r(44328),R=r(71517),E=r(26173),D=r(67672),L=r(87771);function F(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,O()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}var N="src/avformat/formats/OMovFormat.ts",z={fragmentMode:0,movMode:0,fragment:!1,fastOpen:!1,defaultBaseIsMoof:!1},W=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.A)(this,t),e=F(this,t),(0,d.A)((0,u.A)(e),"type",1),(0,d.A)((0,u.A)(e),"context",void 0),(0,d.A)((0,u.A)(e),"options",void 0),(0,d.A)((0,u.A)(e),"annexb2AvccFilter",void 0),e.options=C.X$({},z,r),e.context=(0,g.A)(),e}return(0,h.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e){e.ioWriter.setEndian(!0);var t=e.getStreamByMediaType(0);return t&&(this.annexb2AvccFilter=new E.A,this.annexb2AvccFilter.init(t.codecpar[l.o9],t.timeBase[l.o9])),0}},{key:"destroy",value:function(e){(0,c.A)((0,f.A)(t.prototype),"destroy",this).call(this,e),this.annexb2AvccFilter&&(this.annexb2AvccFilter.destroy(),this.annexb2AvccFilter=null)}},{key:"enableStreams",value:function(e){for(var t=[],r=[],n=0;n<5;n++)t[n]=0,r[n]=-1;_.__(e.streams,(function(e,n){if(-1===e.codecpar.codecType||e.codecpar.codecType>=5)return!0;r[e.codecpar.codecType]<0&&(r[e.codecpar.codecType]=n),1&e.disposition&&(t[e.codecpar.codecType]++,e.privData.flags|=1)}));for(var i=0;i<5;i++)switch(i){case 0:case 1:case 3:t[i]>1&&(e.streams[t[i]].privData.perStreamGrouping=!0),!t[i]&&r[i]>=0&&(e.streams[r[i]].privData.flags|=1)}}},{key:"writeHeader",value:function(e){var t=this;if(this.context.majorBrand=(0,k.A)("isom"),this.context.minorVersion=512,this.context.compatibleBrand=[(0,k.A)("isom")],this.context.timescale=1e3,this.options.fragment&&(this.context.compatibleBrand.push((0,k.A)("iso6")),this.context.fragment=!0),1===this.options.movMode&&(this.context.isom=!0,this.context.majorBrand=(0,k.A)("qt  "),this.context.compatibleBrand=[this.context.majorBrand]),1!==this.options.movMode){this.context.compatibleBrand.push((0,k.A)("iso2"));var r=e.getStreamByMediaType(0);r&&27===r.codecpar.codecId&&this.context.compatibleBrand.push((0,k.A)("avc1")),this.context.compatibleBrand.push((0,k.A)("mp41"))}if(y.l7(e.ioWriter,this.context),this.context.holdMoovPos=e.ioWriter.getPos(),this.options.fragment)this.context.currentFragment={pos:BigInt(0),currentTrack:null,sequence:1,tracks:[],size:0,firstWrote:!1},_.__(e.streams,(function(e,r){var n=(0,b.A)();e.privData=n,n.chunkOffsets=[],n.cttsSampleCounts=[],n.cttsSampleOffsets=[],n.stscFirstChunk=[],n.stscSamplesPerChunk=[],n.stscSampleDescriptionIndex=[],n.stssSampleNumbers=[],n.sampleSizes=[],n.sttsSampleCounts=[],n.sttsSampleDeltas=[],n.alternateGroup=r;var i=(0,x.A)();i.baseIsMoof=t.options.defaultBaseIsMoof,i.streamIndex=e.index,i.trackId=t.context.nextTrackId++,n.trackId=i.trackId,i.ioWriter=new w.A,i.ioWriter.onFlush=function(e){return i.buffers.push(e.slice()),0},t.context.currentFragment.tracks.push(i)})),this.enableStreams(e),y.dI(e.ioWriter,e,this.context),e.ioWriter.flush();else{_.__(e.streams,(function(e,r){var n=(0,b.A)();e.privData=n,n.trackId=t.context.nextTrackId++,n.chunkOffsets=[],n.cttsSampleCounts=[],n.cttsSampleOffsets=[],n.stscFirstChunk=[],n.stscSamplesPerChunk=[],n.stscSampleDescriptionIndex=[],n.stssSampleNumbers=[],n.sampleSizes=[],n.sttsSampleCounts=[],n.sttsSampleDeltas=[],n.alternateGroup=r})),this.enableStreams(e);var n=e.ioWriter.getPos();e.ioWriter.writeUint32(0),e.ioWriter.writeUint32((0,k.A)("mdat")),this.context.boxsPositionInfo.push({pos:n,type:"mdat",size:0})}return 0}},{key:"updateCurrentChunk",value:function(e){var t=this.context.currentChunk;if(t.sampleCount){var r=e.streams.find((function(e){return e.index===t.streamIndex})).privData;r.chunkCount++,r.chunkOffsets.push(t.pos),r.stscFirstChunk.length?r.lastStscCount!==t.sampleCount&&(r.stscFirstChunk.push(r.chunkCount),r.stscSamplesPerChunk.push(t.sampleCount),r.stscSampleDescriptionIndex.push(1),r.lastStscCount=t.sampleCount):(r.stscFirstChunk.push(r.chunkCount),r.stscSamplesPerChunk.push(t.sampleCount),r.stscSampleDescriptionIndex.push(1),r.lastStscCount=t.sampleCount)}}},{key:"checkMdat",value:function(e,t){var r=this.context.boxsPositionInfo[this.context.boxsPositionInfo.length-1];if("mdat"===r.type){var n=e.ioWriter.getPos(),i=Number(n-r.pos);i+t>B.f7&&(r.size=i,e.ioWriter.writeUint32(0),e.ioWriter.writeUint32((0,k.A)("mdat")),this.context.boxsPositionInfo.push({pos:n,type:"mdat",size:0}))}else T.z3("last box is not mdat",N,301)}},{key:"updateCurrentFragment",value:function(e,t){if(this.context.currentFragment.firstWrote){_.__(this.context.currentFragment.tracks,(function(r){var n=e.streams.find((function(e){return e.index===r.streamIndex}));if(!r.sampleCount||!n)return!0;var i,a=n.privData;r.baseDataOffset=e.ioWriter.getPos(),r.sampleDurations.length?t&&r.sampleDurations.length===r.sampleSizes.length-1&&r.sampleDurations.push(Number(t-a.lastDts)):1===n.codecpar.codecType?t?r.sampleDurations.push(Number(t-a.lastDts)):n.codecpar.frameSize>0?r.sampleDurations.push(Number((0,U.k)(BigInt(n.codecpar.frameSize/n.codecpar.sampleRate*B.SF),B.KR,n.timeBase))):(n.codecpar.codecId,r.sampleDurations.push(Number((0,U.k)(BigInt(1024/n.codecpar.sampleRate*B.SF),B.KR,n.timeBase)))):0===n.codecpar.codecType?t?r.sampleDurations.push(Number(t-a.lastDts)):(0,U.lb)(n.codecpar.framerate)>0?r.sampleDurations.push(Number((0,U.k)(BigInt(Math.floor(1/(0,U.lb)(n.codecpar.framerate)*B.SF)),B.KR,n.timeBase))):r.sampleDurations.push(n.timeBase.den/(30*n.timeBase.num)>>>0):r.sampleDurations.push(0),a.lastDuration=r.sampleDurations[r.sampleSizes.length-1],(1===r.sampleFlags.length||(0,M.A)(r.sampleFlags,1))&&(r.firstSampleFlags=r.sampleFlags[0],r.defaultSampleFlags=null!==(i=r.sampleFlags[1])&&void 0!==i?i:r.firstSampleFlags,r.sampleFlags=[]),(1===r.sampleSizes.length||(0,M.A)(r.sampleSizes))&&(r.defaultSampleSize=r.sampleSizes[0],r.sampleSizes=[]),(1===r.sampleDurations.length||(0,M.A)(r.sampleDurations))&&(r.defaultSampleDuration=r.sampleDurations[0],r.sampleDurations=[]),1===n.codecpar.codecType?r.defaultSampleFlags=33554432:r.sampleFlags.length&&(r.defaultSampleFlags=r.sampleFlags[0]),r.sampleSizes.length&&(r.defaultSampleSize=r.sampleSizes[0]),r.sampleDurations.length&&(r.defaultSampleDuration=r.sampleDurations[0])})),e.ioWriter.flush(),y.Ro(e.ioWriter,e,this.context);var r=this.context.currentFragment.size+8,n=[],i=8;_.__(this.context.currentFragment.tracks,(function(t){if(!t.sampleCount)return!0;t.ioWriter.flush();var a=(0,P.A)(Uint8Array,t.buffers);t.dataOffset=r,r+=a.length,i+=a.length,n.push(a),(0,S.A)(e.ioWriter,t.dataOffsetPos,t.dataOffset,"int32"),t.buffers=[],t.sampleFlags=[],t.sampleSizes=[],t.sampleDurations=[],t.sampleCompositionTimeOffset=[],t.sampleCount=0,t.firstSampleFlags=0})),e.ioWriter.writeUint32(i),e.ioWriter.writeUint32((0,k.A)("mdat")),_.__(n,(function(t){e.ioWriter.writeBuffer(t)})),(0,I.A)(e.ioWriter,this.context),e.ioWriter.flush(),this.context.currentFragment.firstWrote=!1,this.context.currentFragment.sequence++}}},{key:"handleEAC3",value:function(e,t){this.context.ac3Info||(this.context.ac3Info={done:!1,numBlocks:0,dataRate:0,ac3BitrateCode:-1,numIndSub:0,substream:[]});var r=this.context.ac3Info,n=L.R(p.f[20](e+24),p.f[15](e+28));if(D.ai(n))r.done=!0;else if(r.dataRate=Math.max(r.dataRate,n.bitRate/1e3),r.ac3BitrateCode=Math.max(r.ac3BitrateCode,n.ac3BitrateCode),!r.done){if(n.bitstreamId<=10&&0!=n.substreamId)return;if(0===n.frameType||2==n.frameType){var i;if(n.substreamId>r.numIndSub+1)return;if(n.substreamId==r.numIndSub+1)return;if(n.substreamId<r.numIndSub||0==n.substreamId&&null!==(i=r.substream[0])&&void 0!==i&&i.bsid)return void(r.done=!0)}else if(0!=n.substreamId)return;if(r.substream[n.substreamId]||(r.substream[n.substreamId]={fscod:0,bsid:0,bsmod:0,acmod:0,lfeon:0,numDepSub:0,chanLoc:0}),r.substream[n.substreamId].fscod=n.srCode,r.substream[n.substreamId].bsid=n.bitstreamId,r.substream[n.substreamId].bsmod=n.bitstreamMode,r.substream[n.substreamId].acmod=n.channelMode,r.substream[n.substreamId].lfeon=n.lfeOn,86019===t.codecpar.codecId)return void(r.done=!0)}}},{key:"writeAVPacket",value:function(e,t){if(!p.f[15](t+28))return T.R8("packet's size is 0: ".concat(p.f[15](t+32),", ignore it"),N,542),0;var r=e.getStreamByIndex(p.f[15](t+32));if(r){var n=r.privData,i=(0,U.k)(p.f[17](t+16),(0,m.A)(t+72,v.P),r.timeBase),a=(0,U.k)(p.f[17](t+8)<BigInt(0)?p.f[17](t+16):p.f[17](t+8),(0,m.A)(t+72,v.P),r.timeBase);if(27!==r.codecpar.codecId&&173!==r.codecpar.codecId&&196!==r.codecpar.codecId||1===p.f[15](t+80)?86019!==r.codecpar.codecId&&86056!==r.codecpar.codecId||this.context.ac3Info&&this.context.ac3Info.done||this.handleEAC3(t,r):(this.annexb2AvccFilter.sendAVPacket(t),this.annexb2AvccFilter.receiveAVPacket(t)),this.context.fragment){var s=this.context.currentFragment.tracks.find((function(e){return e.streamIndex===p.f[15](t+32)}));if(s){if((0===this.options.fragmentMode&&0===r.codecpar.codecType&&1&p.f[15](t+36)||1===this.options.fragmentMode)&&(1===this.context.currentFragment.tracks.length?this.updateCurrentFragment(e,i):this.updateCurrentFragment(e)),s.ioWriter.writeBuffer((0,R.iI)(t)),s.sampleSizes.length||(s.baseMediaDecodeTime=i),s.sampleSizes.length&&(!s.sampleDurations[s.sampleSizes.length-1]||s.sampleDurations[s.sampleSizes.length-1]<=0)&&(s.sampleDurations[s.sampleSizes.length-1]=Number(i-n.lastDts)),p.f[17](t+48)>0&&s.sampleDurations.push(Number((0,U.k)(p.f[17](t+48),(0,m.A)(t+72,v.P),r.timeBase))),s.sampleSizes.push(p.f[15](t+28)),0===r.codecpar.codecType){var o=0;1&p.f[15](t+36)?o|=33554432:o|=16842752,s.sampleCompositionTimeOffset.push(Number((a||i)-i)),s.sampleFlags.push(o)}s.sampleCount++,n.lastPts=a>n.lastPts?a:n.lastPts,n.lastDts=i,this.context.currentFragment.firstWrote=!0}else T.R8("can not found track width streamIndex ".concat(p.f[15](t+32),", ignore it"),N,635)}else{this.checkMdat(e,p.f[15](t+28));var u=e.ioWriter.getPos(),c=this.context.currentChunk;if(c?c.streamIndex!==p.f[15](t+32)?(this.updateCurrentChunk(e),c.streamIndex=p.f[15](t+32),c.sampleCount=1,c.pos=u):c.sampleCount++:c=this.context.currentChunk={pos:u,streamIndex:p.f[15](t+32),sampleCount:1},e.ioWriter.writeBuffer((0,R.iI)(t)),n.sampleSizes.push(p.f[15](t+28)),0===r.codecpar.codecType&&1&p.f[15](t+36)&&n.stssSampleNumbers.push(n.sampleSizes.length),n.firstWrote){var f=Number(i-n.lastDts);n.sttsSampleCounts.length&&n.sttsSampleDeltas[n.sttsSampleDeltas.length-1]===f?n.sttsSampleCounts[n.sttsSampleCounts.length-1]++:(n.sttsSampleCounts.push(1),n.sttsSampleDeltas.push(f))}else n.startDts=i,n.startCT=Number((a||i)-i),n.firstWrote=!0;if(0===r.codecpar.codecType){var h=Number((a||i)-i);n.cttsSampleCounts.length&&n.cttsSampleOffsets[n.cttsSampleOffsets.length-1]===h?n.cttsSampleCounts[n.cttsSampleCounts.length-1]++:(n.cttsSampleCounts.push(1),n.cttsSampleOffsets.push(h))}n.lastPts=(a||i)>n.lastPts?a||i:n.lastPts,n.lastDts=i}return 0}T.R8("can not found the stream width the avpacket's streamIndex: ".concat(p.f[15](t+32),", ignore it"),N,549)}},{key:"writeTrailer",value:function(e){if(this.context.fragment)_.__(this.context.currentFragment.tracks,(function(t){var r=e.streams.find((function(e){return e.index===t.streamIndex})).privData;t.sampleCount&&(t.sampleDurations.length?t.sampleDurations.push(t.sampleDurations[t.sampleDurations.length-1]):t.sampleDurations=[r.lastDuration])})),this.updateCurrentFragment(e),e.ioWriter.writeUint32(8),e.ioWriter.writeString("mfra"),e.ioWriter.flush();else{this.updateCurrentChunk(e);var t,r=BigInt(0);_.__(e.streams,(function(e){var n=e.privData;n.sampleSizes.length&&(n.sttsSampleDeltas.length?n.sttsSampleCounts[n.sttsSampleCounts.length-1]++:(n.sttsSampleCounts=[1],n.sttsSampleDeltas=[0])),n.lastPts>r&&(r=n.lastPts,t=e.timeBase)})),r&&(this.context.duration=(0,U.k)(r,t,{den:1e3,num:1}));var n=this.context.boxsPositionInfo[this.context.boxsPositionInfo.length-1];if("mdat"!==n.type&&T.z3("last box is not mdat",N,751),n.size=Number(e.ioWriter.getPos()-n.pos),(0,I.A)(e.ioWriter,this.context),this.options.fastOpen){e.ioWriter.flush();var i=[],a=e.ioWriter.onFlush;e.ioWriter.onFlush=function(e){return i.push(e.slice()),0},y.dI(e.ioWriter,e,this.context),e.ioWriter.flush();var s=(0,P.A)(Uint8Array,i);_.__(e.streams,(function(e){var t=e.privData;if(t.chunkOffsets.length)for(var r=0;r<t.chunkOffsets.length;r++)t.chunkOffsets[r]+=BigInt(Math.floor(s.length))})),i=[],y.dI(e.ioWriter,e,this.context),e.ioWriter.flush(),s=(0,P.A)(Uint8Array,i),a&&a(s,this.context.holdMoovPos),e.ioWriter.onFlush=a}else y.dI(e.ioWriter,e,this.context),e.ioWriter.flush()}return 0}},{key:"flush",value:function(e){return this.options.fragment&&(_.__(this.context.currentFragment.tracks,(function(t){var r=e.streams.find((function(e){return e.index===t.streamIndex})).privData;t.sampleCount&&(t.sampleDurations.length?t.sampleDurations.push(t.sampleDurations[t.sampleDurations.length-1]):t.sampleDurations=[r.lastDuration])})),this.updateCurrentFragment(e)),e.ioWriter.flush(),0}}]),t}(A.A)},21071:(e,t,r)=>{"use strict";r.d(t,{_l:()=>n,gQ:()=>i});var n=["hmhd","nmhd","iods","xml ","url ","bxml","ipro","mere","stts","ctts","stss","stsz","stz2","stsc","stco","co64","stsd","dref","mvhd","tkhd","mdhd","hdlr"],i=["moov","trak","edts","mdia","minf","dinf","stbl","mvex","moof","traf","vttc","tref","iref","mfra","hnti","hinf","strd","sinf","rinf","schi","trgr","udta","iprp","ipco","strk","meco"]},3384:(e,t,r)=>{"use strict";function n(){return{trackId:0,baseDataOffset:BigInt(0),defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0,baseMediaDecodeTime:BigInt(0),sampleCount:0,dataOffset:0,dataOffsetPos:BigInt(0),firstSampleFlags:0,sampleDurations:[],sampleSizes:[],sampleFlags:[],sampleCompositionTimeOffset:[],baseIsMoof:!1,ioWriter:null,buffers:[]}}r.d(t,{A:()=>n})},9690:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(77231);function i(){return{isom:!1,timescale:n.N_,duration:n.Dh,foundMoov:!1,foundMdat:!1,majorBrand:0,minorVersion:0,compatibleBrand:[],creationTime:BigInt(0),modificationTime:BigInt(0),rate:n.N_,volume:n.N_,matrix:null,nextTrackId:1,fragment:!1,trexs:[],currentFragment:null,boxsPositionInfo:[],holdMoovPos:BigInt(0),currentChunk:null}}},38106:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(77231);function i(){return{chunkOffsets:null,cttsSampleCounts:null,cttsSampleOffsets:null,stscFirstChunk:null,stscSamplesPerChunk:null,stscSampleDescriptionIndex:null,stssSampleNumbersMap:null,stssSampleNumbers:null,sampleSizes:null,sttsSampleCounts:null,sttsSampleDeltas:null,timescale:0,duration:BigInt(0),trackId:n.N_,layer:0,alternateGroup:0,volume:0,matrix:null,width:0,height:0,audioCid:0,samplesPerFrame:0,bytesPerFrame:0,currentSample:0,sampleEnd:!1,samplesIndex:[],fragIndexes:[],lastPts:BigInt(0),lastDts:BigInt(0),startDts:BigInt(0),startCT:0,lastDuration:0,chunkCount:0,firstWrote:!1,lastStscCount:0,perStreamGrouping:!1,index:0,flags:0}}},79804:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(72739);function i(e,t){var r=e.getPos(),i=e.getPointer(),a=r-BigInt(Math.floor(i)),s=[];n.__(t.boxsPositionInfo,(function(t){t.pos<r&&t.pos>=a?(e.seekInline(i+Number(t.pos-r)),e.writeUint32(t.size)):s.push(t)})),n.__(s,(function(t){e.seek(t.pos),e.writeUint32(t.size)})),s.length?e.seek(r):e.seekInline(i),t.boxsPositionInfo=[]}},14202:(e,t,r)=>{"use strict";r.d(t,{BB:()=>a,Ip:()=>s,Jl:()=>i});var n=r(134),i=(0,n.A)((0,n.A)({},1,(function(e){return[{type:"tkhd"},{type:"mdia",children:[{type:"mdhd"},{type:"hdlr"},{type:"minf",children:[{type:"smhd"},e.isom?{type:"minf_hdlr"}:null,{type:"dinf",children:[{type:"dref",children:[{type:"url "}]}]},{type:"stbl",children:[{type:"stsd"},{type:"stts"},{type:"stsc"},{type:"stsz"},{type:"stco"}]}]}]}]})),0,(function(e){return[{type:"tkhd"},{type:"mdia",children:[{type:"mdhd"},{type:"hdlr"},{type:"minf",children:[{type:"vmhd"},e.isom?{type:"minf_hdlr"}:null,{type:"dinf",children:[{type:"dref",children:[{type:"url "}]}]},{type:"stbl",children:[{type:"stsd"},{type:"stts"},{type:"stsc"},{type:"stsz"},{type:"stco"}]}]}]}]})),a=(0,n.A)((0,n.A)({},1,(function(e){return[{type:"tkhd"},{type:"edts"},{type:"mdia",children:[{type:"mdhd"},{type:"hdlr"},{type:"minf",children:[{type:"smhd"},e.isom?{type:"minf_hdlr"}:null,{type:"dinf",children:[{type:"dref",children:[{type:"url "}]}]},{type:"stbl",children:[{type:"stsd"},{type:"stts"},{type:"stsc"},{type:"stsz"},{type:"stco"}]}]}]}]})),0,(function(e){return[{type:"tkhd"},{type:"edts"},{type:"mdia",children:[{type:"mdhd"},{type:"hdlr"},{type:"minf",children:[{type:"vmhd"},e.isom?{type:"minf_hdlr"}:null,{type:"dinf",children:[{type:"dref",children:[{type:"url "}]}]},{type:"stbl",children:[{type:"stsd"},{type:"stts"},{type:"stss"},{type:"ctts"},{type:"stsc"},{type:"stsz"},{type:"stco"}]}]}]}]})),s=[{type:"tfhd"},{type:"tfdt"},{type:"trun"}]},6660:(e,t,r)=>{"use strict";r.d(t,{Q9:()=>u,f3:()=>c,uf:()=>f,zs:()=>o});var n,i,a=r(134),s=r(65977),o=(n={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(n,86018,64),86017,105),86076,173),86028,193),86021,221),12,32),27,33),173,35),196,51),167,177),(0,a.A)(n,0,0)),u={32:12,33:27,35:173,51:196,177:167,64:86018,102:86018,103:86018,104:86018,105:86017,107:86017,173:86076,193:86028,221:86021,0:0},c={vide:0,soun:1,clcp:3,sbtl:3,subt:3,subp:3,text:3},f=(i={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(i,(0,s.A)("mp4a"),86018),1836253269,86017),(0,s.A)("Opus"),86076),(0,s.A)("fLaC"),86028),(0,s.A)("spex"),86051),(0,s.A)("SPXN"),86051),(0,s.A)("ac-3"),86019),(0,s.A)("sac3"),86019),s.A.mp4v,12),(0,s.A)("av01"),225),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(i,(0,s.A)("vp08"),139),(0,s.A)("vp09"),167),(0,s.A)("avc1"),27),(0,s.A)("hev1"),173),(0,s.A)("hvc1"),173),(0,s.A)("vvc1"),196),(0,s.A)("vvi1"),196),(0,s.A)("text"),94213),(0,s.A)("tx3g"),94213))},75473:(e,t,r)=>{"use strict";r.d(t,{Ro:()=>d,dI:()=>h,l7:()=>c});var n=r(65977),i=r(21071),a=r(72739),s=r(80025),o=r(14202),u=r(79804);function c(e,t){e.flush();var r=e.getPointer(),i=e.getPos();e.writeUint32(0),e.writeUint32((0,n.A)("ftyp")),e.writeUint32(t.majorBrand||(0,n.A)("isom")),e.writeUint32(t.minorVersion||512),a.__(t.compatibleBrand,(function(t){e.writeUint32(t)})),function(e,t,r){var n=e.getPointer();e.seekInline(t),e.writeUint32(r),e.seekInline(n)}(e,r,Number(e.getPos()-i)),t.isom?(e.writeUint32(8),e.writeUint32((0,n.A)("wide"))):t.fragment||(e.writeUint32(8),e.writeUint32((0,n.A)("free")))}function f(e,t,r,o){a.__(t,(function(t){if(!t)return!0;if(s.A[t.type])s.A[t.type](e,r,o);else if(t.children){var u=e.getPos();e.writeUint32(0),e.writeUint32((0,n.A)(t.type)),f(e,t.children,r,o),o.boxsPositionInfo.push({pos:u,type:t.type,size:Number(e.getPos()-u)})}else!function(e,t){var r=a.zy(i._l,t);e.writeUint32(r?12:8),e.writeUint32((0,n.A)(t)),r&&e.writeUint32(0)}(e,t.type)}))}function h(e,t,r){var i=e.getPos();if(e.writeUint32(0),e.writeUint32((0,n.A)("moov")),s.A.mvhd(e,null,r),a.__(t.streams,(function(t){var i=e.getPos();e.writeUint32(0),e.writeUint32((0,n.A)("trak")),f(e,r.fragment?o.Jl[t.codecpar.codecType](r):o.BB[t.codecpar.codecType](r),t,r),r.boxsPositionInfo.push({pos:i,type:"trak",size:Number(e.getPos()-i)})})),r.fragment){var c=e.getPos();e.writeUint32(0),e.writeUint32((0,n.A)("mvex")),a.__(t.streams,(function(t){s.A.trex(e,t,r)})),r.boxsPositionInfo.push({pos:c,type:"mvex",size:Number(e.getPos()-c)})}r.boxsPositionInfo.push({pos:i,type:"moov",size:Number(e.getPos()-i)}),(0,u.A)(e,r)}function d(e,t,r){var i=e.getPos();e.writeUint32(0),e.writeUint32((0,n.A)("moof")),s.A.mfhd(e,null,r),a.__(r.currentFragment.tracks,(function(i){if(!i.sampleCount)return!0;var a=e.getPos();e.writeUint32(0),e.writeUint32((0,n.A)("traf"));var s=t.streams.find((function(e){return e.privData.trackId===i.trackId}));f(e,o.Ip,s,r),r.boxsPositionInfo.push({pos:a,type:"traf",size:Number(e.getPos()-a)})}));var u=Number(e.getPos()-i);r.boxsPositionInfo.push({pos:i,type:"moof",size:u}),r.currentFragment.size=u}},39878:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(14686);function i(e,t,r){var i;e.writeUint32(null!==(i=8+t.codecpar.extradataSize)&&void 0!==i?i:0),e.writeString("av1C"),r.fragment&&t.sideData[1]?(e.writeBuffer(t.sideData[1]),delete t.sideData[1]):t.codecpar.extradata&&e.writeBuffer((0,n.s3)(t.codecpar.extradata,t.codecpar.extradataSize))}},61600:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(14686);function i(e,t,r){var i;e.writeUint32(null!==(i=8+t.codecpar.extradataSize)&&void 0!==i?i:0),e.writeString("avcC"),r.fragment&&t.sideData[1]?(e.writeBuffer(t.sideData[1]),delete t.sideData[1]):t.codecpar.extradata&&e.writeBuffer((0,n.s3)(t.codecpar.extradata,t.codecpar.extradataSize))}},93861:(e,t,r)=>{"use strict";function n(e,t,r){e.writeUint32(20),e.writeString("btrt"),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0)}r.d(t,{A:()=>n})},34445:(e,t,r)=>{"use strict";function n(e,t,r){var n=t.privData.chunkOffsets||[];e.writeUint32(8+8*n.length),e.writeString("co64"),e.writeUint8(0),e.writeUint24(0),e.writeUint32(n.length);for(var i=0;i<n.length;i++)e.writeUint64(n[i])}r.d(t,{A:()=>n})},853:(e,t,r)=>{"use strict";function n(e,t,r){var n=t.sideData[28];if(n)e.writeUint32(12+n.length),e.writeString("colr"),e.writeString("prof"),e.writeBuffer(n);else{var i=2===t.codecpar.colorRange;e.writeUint32(19),e.writeString("colr"),e.writeString("nclx"),e.writeUint16(t.codecpar.colorPrimaries),e.writeUint16(t.codecpar.colorTrc),e.writeUint16(t.codecpar.colorSpace),e.writeUint8(i?128:0)}}r.d(t,{A:()=>n})},18387:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(4624),i="src/avformat/formats/mov/writing/ctts.ts";function a(e,t,r){var a=t.privData,s=a.cttsSampleCounts||[],o=a.cttsSampleOffsets||[];s.length!==o.length&&n.R8("ctts sampleCounts's length is not match sampleOffsets's length",i,39);var u=Math.min(s.length,o.length);e.writeUint32(16+8*u),e.writeString("ctts"),e.writeUint8(1),e.writeUint24(0),e.writeUint32(u);for(var c=0;c<u;c++)e.writeUint32(s[c]),e.writeInt32(o[c])}},80648:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(83314);function i(e,t,r){e.writeUint32(11),e.writeString("dac3");var i=new n.A(3),a=r.ac3Info;i.writeU(2,a.substream[0].fscod),i.writeU(5,a.substream[0].bsid),i.writeU(3,a.substream[0].bsmod),i.writeU(3,a.substream[0].acmod),i.writeU(1,a.substream[0].lfeon),i.writeU(5,a.ac3BitrateCode),i.writeU(5,0),e.writeBuffer(i.getBuffer())}},55668:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(83314);function i(e,t,r){var i=r.ac3Info,a=new n.A(2+(34*(i.numIndSub+1)+7>>3));a.writeU(13,i.dataRate),a.writeU(3,i.numIndSub);for(var s=0;s<i.numIndSub;s++)a.writeU(2,i.substream[s].fscod),a.writeU(5,i.substream[s].bsid),a.writeU(1,0),a.writeU(1,0),a.writeU(3,i.substream[s].bsmod),a.writeU(3,i.substream[s].acmod),a.writeU(1,i.substream[s].lfeon),a.writeU(5,0),a.writeU(4,i.substream[s].numDepSub),i.substream[s].numDepSub?a.writeU(9,i.substream[s].chanLoc):a.writeU(1,0);a.padding();var o=a.getPointer();e.writeUint32(8+o),e.writeString("dec3"),e.writeBuffer(a.getBuffer().subarray(0,o))}},47280:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(14686),i=r(4624),a="src/avformat/formats/mov/writing/dfla.ts";function s(e,t,r){var s;r.fragment&&t.sideData[1]?(s=t.sideData[1],delete t.sideData[1]):t.codecpar.extradata&&(s=(0,n.s3)(t.codecpar.extradata,t.codecpar.extradataSize)),s?(e.writeUint32(s.length+16),e.writeString("dfLa"),e.writeUint8(0),e.writeUint24(0),e.writeUint8(128),e.writeUint24(s.length),e.writeBuffer(s)):i.z3("invalid extradata",a,56)}},82181:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(14686),i=r(31865);function a(e,t,r){var a;if(r.fragment&&t.sideData[1]?(a=t.sideData[1],delete t.sideData[1]):t.codecpar.extradata&&(a=(0,n.s3)(t.codecpar.extradata,t.codecpar.extradataSize)),!a||a.length<19)e.writeUint32(19),e.writeString("dOps"),e.writeUint8(0),e.writeUint8(t.codecpar.chLayout.nbChannels),e.writeUint16(t.codecpar.initialPadding),e.writeUint32(t.codecpar.sampleRate),e.writeUint16(0),e.writeUint8(0);else{var s=new i.A(a,!1);e.writeUint32(a.length),e.writeString("dOps"),e.writeUint8(0),s.seek(9),e.writeUint8(s.readUint8()),e.writeUint16(s.readUint16()),e.writeUint32(s.readUint32()),e.writeUint16(s.readUint16()),e.writeBuffer(a.subarray(18))}}},12412:(e,t,r)=>{"use strict";function n(e,t,r){e.writeUint32(28),e.writeString("dref"),e.writeUint32(0),e.writeUint32(1),e.writeUint32(12),e.writeString("url "),e.writeUint32(1)}r.d(t,{A:()=>n})},44473:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(77231),i=r(44328);function a(e,t,r){var a=t.privData,s=(0,i.k)(a.lastPts,t.timeBase,{den:r.timescale,num:1}),o=a.startCT,u=(0,i.k)(a.startDts+BigInt(Math.floor(o)),t.timeBase,{den:a.timescale,num:1}),c=s<n.go?0:1,f=1+(u>0?1:0),h=24+f*(1==(c|=u<n.go?0:1)?20:12);e.writeUint32(h),e.writeString("edts"),e.writeUint32(h-8),e.writeString("elst"),e.writeUint8(c),e.writeUint24(0),e.writeUint32(f),u>0?(1===c?(e.writeUint64(u),e.writeInt64(n.Dh)):(e.writeUint32(Number(u)),e.writeInt32(-1)),e.writeUint32(65536)):(o=-Math.min(Number(a.startDts),0),s+=u),r.fragment&&(s=BigInt(0)),1===c?(e.writeUint64(s),e.writeInt64(BigInt(Math.floor(o)))):(e.writeUint32(Number(s)),e.writeInt32(o)),e.writeUint32(65536)}},4652:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(6660),i=r(14686);function a(e,t,r){e.writeUint8(t);for(var n=3;n>0;n--)e.writeUint8(r>>7*n|128);e.writeUint8(127&r)}function s(e,t,r){var s=t.privData,o=t.codecpar.extradata?5+t.codecpar.extradataSize:0,u=e.getPos();e.writeUint32(0),e.writeString("esds"),e.writeUint32(0),a(e,3,21+o+5+1),e.writeUint16(s.trackId),e.writeUint8(0),a(e,4,13+o),(86016===t.codecpar.codecId||86017===t.codecpar.codecId)&&t.codecpar.sampleRate>24e3?e.writeUint8(107):e.writeUint8(n.zs[t.codecpar.codecId]),94208===t.codecpar.codecId?e.writeUint8(225):1===t.codecpar.codecType?e.writeUint8(21):e.writeUint8(17),e.writeUint24(0),e.writeUint32(0),e.writeUint32(0),t.codecpar.extradata&&(a(e,5,t.codecpar.extradataSize),e.writeBuffer((0,i.s3)(t.codecpar.extradata,t.codecpar.extradataSize))),a(e,6,1),e.writeUint8(2),r.boxsPositionInfo.push({pos:u,type:"esds",size:Number(e.getPos()-u)})}},87384:(e,t,r)=>{"use strict";function n(e,t,r,n,i,a,s){e.writeUint32(t<<16),e.writeUint32(r<<16),e.writeUint32(0),e.writeUint32(n<<16),e.writeUint32(i<<16),e.writeUint32(0),e.writeUint32(a<<16),e.writeUint32(s<<16),e.writeUint32(1073741824)}r.d(t,{A:()=>n})},17923:(e,t,r)=>{"use strict";function n(e,t,r){var n=e.getPos();e.writeUint32(0),e.writeString("hdlr"),e.writeUint8(0),e.writeUint24(0);var i="dhlr",a="url ",s="DataHandler";t&&(i="mhlr",1===t.codecpar.codecType?(a="soun",s="SoundHandler"):0===t.codecpar.codecType?(a="vide",s="VideoHandler"):3===t.codecpar.codecType?(a="text",s="SubtitleHandler"):(t.metadata.handlerName&&(s=t.metadata.handlerName),t.metadata.hdlrType&&(a=t.metadata.hdlrType))),e.writeString(i),e.writeString(a),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),t&&!r.isom||e.writeUint8(s.length),e.writeString(s),t&&!r.isom&&e.writeUint8(0),r.boxsPositionInfo.push({pos:n,type:"hdlr",size:Number(e.getPos()-n)})}r.d(t,{A:()=>n})},78669:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(14686);function i(e,t,r){var i;e.writeUint32(null!==(i=8+t.codecpar.extradataSize)&&void 0!==i?i:0),e.writeString("hvcC"),r.fragment&&t.sideData[1]?(e.writeBuffer(t.sideData[1]),delete t.sideData[1]):t.codecpar.extradata&&e.writeBuffer((0,n.s3)(t.codecpar.extradata,t.codecpar.extradataSize))}},6e3:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(77231);function i(e,t,r){var i=t.privData.lastPts,a=t.metadata.creationTime||0,s=t.metadata.modificationTime||0,o=t.metadata.language||21956,u=BigInt(n.f7);n.f7,u=s<n.f7?0:1,e.writeUint32(1===u?44:32),e.writeString("mdhd"),e.writeUint8(u),e.writeUint24(0),1===u?(e.writeUint64(a),e.writeUint64(s)):(e.writeUint32(Number(a)),e.writeUint32(Number(s))),e.writeUint32(t.timeBase.den),1===u?e.writeUint64(i):e.writeUint32(Number(i)),e.writeUint16(o),e.writeUint16(0)}},31130:(e,t,r)=>{"use strict";function n(e,t,r){e.writeUint32(16),e.writeString("mfhd"),e.writeUint8(0),e.writeUint24(0),e.writeUint32(r.currentFragment.sequence)}r.d(t,{A:()=>n})},48669:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(17923);function i(e,t,r){(0,n.A)(e,null,r)}},7114:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(77231),i=r(87384);function a(e,t,r){var a=r.duration,s=r.creationTime||0,o=r.modificationTime||0,u=r.timescale||0,c=r.nextTrackId||1;r.fragment&&(c=2);var f=BigInt(n.f7);n.f7,f=o<n.f7?0:1,e.writeUint32(1===f?120:108),e.writeString("mvhd"),e.writeUint8(f),e.writeUint24(0),1===f?(e.writeUint64(s),e.writeUint64(o)):(e.writeUint32(Number(s)),e.writeUint32(Number(o))),e.writeUint32(u),1===f?e.writeUint64(a):e.writeUint32(Number(a)),e.writeUint32(65536),e.writeUint16(256),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),(0,i.A)(e,1,0,0,1,0,0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(c)}},65629:(e,t,r)=>{"use strict";function n(e,t,r){e.writeUint32(16),e.writeString("pasp"),e.writeUint32(1),e.writeUint32(1)}r.d(t,{A:()=>n})},11573:(e,t,r)=>{"use strict";function n(e,t,r){e.writeUint32(16),e.writeString("smhd"),e.writeUint32(0),e.writeUint16(0),e.writeUint16(0)}r.d(t,{A:()=>n})},2204:(e,t,r)=>{"use strict";function n(e,t,r){var n=t.privData.chunkOffsets||[];e.writeUint32(16+4*n.length),e.writeString("stco"),e.writeUint8(0),e.writeUint24(0),e.writeUint32(n.length);for(var i=0;i<n.length;i++)e.writeUint32(Number(n[i]))}r.d(t,{A:()=>n})},84360:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(4624),i="src/avformat/formats/mov/writing/stsc.ts";function a(e,t,r){var a=t.privData,s=a.stscFirstChunk,o=a.stscSamplesPerChunk,u=a.stscSampleDescriptionIndex;s.length===o.length&&s.length===u.length||n.R8("ctts firstChunk's length is not match samplesPerChunk's length or sampleDescriptionIndex's length",i,42);var c=Math.min(s.length,o.length,u.length);e.writeUint32(16+12*c),e.writeString("stsc"),e.writeUint8(0),e.writeUint24(0),e.writeUint32(c);for(var f=0;f<c;f++)e.writeUint32(s[f]),e.writeUint32(o[f]),e.writeUint32(u[f])}},69301:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var n=r(134),i=r(61600),a=r(78669),s=r(1263),o=r(99193),u=r(39878),c=r(47280),f=r(82181),h=r(4652),d=r(853),l=r(65629),p=r(93861),v=r(57756),m=r(80648),A=r(55668),g=r(14686),k=r(61619),y=(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},27,"avc1"),173,"hvc1"),196,"vvc1"),225,"av01"),167,"vp09"),86019,"ac-3"),86056,"ec-3");function b(e){if(e.codecTag)return(0,k.A)(e.codecTag);var t=y[e.codecId];return t||(t=0===e.codecType?"mp4v":1===e.codecType?86076===e.codecId?"Opus":86028===e.codecId?"fLaC":"mp4a":3===e.codecType?"text":"none"),t}function x(e,t,r){var n=e.getPos();e.writeUint32(0),e.writeString("stsd"),e.writeUint8(0),e.writeUint24(0),e.writeUint32(1),1===t.codecpar.codecType?function(e,t,r){var n=e.getPos(),i=b(t.codecpar),a=r.isom?1:0;e.writeUint32(0),e.writeString(i),e.writeUint32(0),e.writeUint16(0),e.writeUint16(1),e.writeUint16(a),e.writeUint16(0),e.writeUint32(0),r.isom?(e.writeUint16(t.codecpar.chLayout.nbChannels),65541===t.codecpar.codecId||65540===t.codecpar.codecId?e.writeUint16(8):69643===t.codecpar.codecId?e.writeUint16(t.codecpar.bitsPerCodedSample):e.writeUint16(16),e.writeUint16(-2)):(86028===t.codecpar.codecId||86032===t.codecpar.codecId||86076===t.codecpar.codecId?e.writeUint16(t.codecpar.chLayout.nbChannels):e.writeUint16(2),86028===t.codecpar.codecId||86032===t.codecpar.codecId?e.writeUint16(t.codecpar.bitsPerCodedSample):e.writeUint16(16),e.writeUint16(0)),e.writeUint16(0),86076===t.codecpar.codecId?e.writeUint16(48e3):86060===t.codecpar.codecId?e.writeUint32(t.codecpar.sampleRate):e.writeUint16(t.codecpar.sampleRate),86060!==t.codecpar.codecId&&e.writeUint16(0),1===a&&(e.writeUint32(t.codecpar.frameSize),e.writeUint32(0),e.writeUint32(0),e.writeUint32(2)),!r.isom||86018!==t.codecpar.codecId&&86019!==t.codecpar.codecId&&86056!==t.codecpar.codecId&&73728!==t.codecpar.codecId&&86032!==t.codecpar.codecId&&69638!==t.codecpar.codecId&&69633!==t.codecpar.codecId&&86035!==t.codecpar.codecId?86028===t.codecpar.codecId?(0,c.A)(e,t,r):86076===t.codecpar.codecId?(0,f.A)(e,t,r):86019===t.codecpar.codecId?(0,m.A)(e,t,r):86056===t.codecpar.codecId?(0,A.A)(e,t,r):"mp4a"==i&&(0,h.A)(e,t,r):(0,v.A)(e,t,r),r.isom||(0,p.A)(e,t,r),r.boxsPositionInfo.push({pos:n,type:i,size:Number(e.getPos()-n)})}(e,t,r):0===t.codecpar.codecType?function(e,t,r){var n=e.getPos(),c=b(t.codecpar),f=13==t.codecpar.codecId&&15==t.codecpar.format||13==t.codecpar.codecId&&1==t.codecpar.format||202==t.codecpar.codecId||203==t.codecpar.codecId||156==t.codecpar.codecId||127==t.codecpar.codecId;e.writeUint32(0),e.writeString(c),e.writeUint32(0),e.writeUint16(0),e.writeUint16(1),e.writeUint16(f?2:0),e.writeUint16(0),r.isom?(e.writeString("FFMP"),13===t.codecpar.codecId||f?(e.writeUint32(0),e.writeUint32(1024)):(e.writeUint32(512),e.writeUint32(512))):(e.writeUint32(0),e.writeUint32(0),e.writeUint32(0)),e.writeUint16(t.codecpar.width),e.writeUint16(t.codecpar.height),e.writeUint32(4718592),e.writeUint32(4718592),e.writeUint32(0),e.writeUint16(1);var v=t.metadata.compressorName||"";if(v=v.slice(0,31),e.writeUint8(v.length),e.writeString(v),v.length<31)for(var m=31-v.length;m>0;)e.writeUint8(0),m--;r.isom&&t.codecpar.bitsPerCodedSample?e.writeUint16(t.codecpar.bitsPerCodedSample):e.writeUint16(24),e.writeUint16(65535),"mp4v"===c?(0,h.A)(e,t,r):27===t.codecpar.codecId?(0,i.A)(e,t,r):173===t.codecpar.codecId?(0,a.A)(e,t,r):196===t.codecpar.codecId?(0,s.A)(e,t,r):167===t.codecpar.codecId?(0,o.A)(e,t,r):225===t.codecpar.codecId&&(0,u.A)(e,t,r),(0,d.A)(e,t,r),(0,l.A)(e,t,r),r.isom||(0,p.A)(e,t,r),r.boxsPositionInfo.push({pos:n,type:c,size:Number(e.getPos()-n)})}(e,t,r):3===t.codecpar.codecType&&function(e,t,r){var n=e.getPos(),i=b(t.codecpar);e.writeUint32(0),e.writeString(i),e.writeUint32(0),e.writeUint16(0),e.writeUint16(1),94208===t.codecpar.codecId?(0,h.A)(e,t,r):t.codecpar.extradata&&e.writeBuffer((0,g.s3)(t.codecpar.extradata,t.codecpar.extradataSize)),r.isom||(0,p.A)(e,t,r),r.boxsPositionInfo.push({pos:n,type:i,size:Number(e.getPos()-n)})}(e,t,r),r.boxsPositionInfo.push({pos:n,type:"esds",size:Number(e.getPos()-n)})}},20184:(e,t,r)=>{"use strict";function n(e,t,r){var n=t.privData.stssSampleNumbers;e.writeUint32(16+4*n.length),e.writeString("stss"),e.writeUint8(0),e.writeUint24(0),e.writeUint32(n.length);for(var i=0;i<n.length;i++)e.writeUint32(n[i])}r.d(t,{A:()=>n})},57247:(e,t,r)=>{"use strict";function n(e,t,r){var n=t.privData.sampleSizes;e.writeUint32(20+4*n.length),e.writeString("stsz"),e.writeUint8(0),e.writeUint24(0),e.writeUint32(0),e.writeUint32(n.length);for(var i=0;i<n.length;i++)e.writeUint32(n[i])}r.d(t,{A:()=>n})},86051:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(4624),i="src/avformat/formats/mov/writing/stts.ts";function a(e,t,r){var a=t.privData,s=a.sttsSampleCounts||[],o=a.sttsSampleDeltas||[];s.length!==o.length&&n.R8("stts sampleCounts's length is not match sampleDeltas's length",i,39);var u=Math.min(s.length,o.length);e.writeUint32(16+8*u),e.writeString("stts"),e.writeUint8(0),e.writeUint24(0),e.writeUint32(u);for(var c=0;c<u;c++)e.writeUint32(s[c]),e.writeInt32(o[c])}},11251:(e,t,r)=>{"use strict";function n(e,t,r){var n=r.currentFragment.tracks.find((function(e){return e.trackId===t.privData.trackId})),i=n?n.baseMediaDecodeTime:BigInt(0);e.writeUint32(20),e.writeString("tfdt"),e.writeUint8(1),e.writeUint24(0),e.writeUint64(i)}r.d(t,{A:()=>n})},11903:(e,t,r)=>{"use strict";function n(e,t,r){var n=r.currentFragment.tracks.find((function(e){return e.trackId===t.privData.trackId})),i=57;n.baseIsMoof&&(i&=-2,i|=131072);var a=e.getPos();e.writeUint32(0),e.writeString("tfhd"),e.writeUint8(0),e.writeUint24(i),e.writeUint32(n.trackId),1&i&&e.writeUint64(n.baseDataOffset),8&i&&e.writeUint32(n.defaultSampleDuration),16&i&&e.writeUint32(n.defaultSampleSize),32&i&&e.writeUint32(n.defaultSampleFlags),r.boxsPositionInfo.push({pos:a,type:"tfhd",size:Number(e.getPos()-a)})}r.d(t,{A:()=>n})},59868:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(77231),i=r(87384),a=r(44328);function s(e,t,r){var s=t.privData,o=(0,a.k)(s.lastPts,t.timeBase,{den:r.timescale,num:1}),u=t.metadata.creationTime||0,c=t.metadata.modificationTime||0,f=s.layer||0,h=s.alternateGroup||0,d=t.codecpar.width>0?t.codecpar.width:0,l=t.codecpar.height>0?t.codecpar.height:0;d<n.zg&&(d<<=16),l<n.zg&&(l<<=16);var p=BigInt(n.f7);n.f7,p=c<n.f7?0:1;var v=2;1&s.flags&&(v|=1),e.writeUint32(1===p?100:92),e.writeString("tkhd"),e.writeUint8(p),e.writeUint24(v),1===p?(e.writeUint64(u),e.writeUint64(c)):(e.writeUint32(Number(u)),e.writeUint32(Number(c))),e.writeUint32(s.trackId),e.writeUint32(0),1===p?e.writeUint64(o):e.writeUint32(Number(o)),e.writeUint32(0),e.writeUint32(0),e.writeInt16(f),e.writeInt16(s.perStreamGrouping?h:t.codecpar.codecType),1===t.codecpar.codecType?e.writeInt16(256):e.writeInt16(0),e.writeInt16(0),(0,i.A)(e,1,0,0,1,0,0),e.writeUint32(d),e.writeUint32(l)}},35010:(e,t,r)=>{"use strict";function n(e,t,r){var n,i,a,s=r.currentFragment.tracks.find((function(e){return e.trackId===t.privData.trackId})),o=r.trexs.find((function(e){e.trackId,t.privData.trackId})),u=null!==(n=null==o?void 0:o.duration)&&void 0!==n?n:0,c=null!==(i=null==o?void 0:o.size)&&void 0!==i?i:0,f=null!==(a=null==o?void 0:o.flags)&&void 0!==a?a:0;e.writeUint32(32),e.writeString("trex"),e.writeUint8(0),e.writeUint24(0),e.writeUint32(s.trackId),e.writeUint32(1),e.writeUint32(u),e.writeUint32(c),e.writeUint32(f)}r.d(t,{A:()=>n})},48516:(e,t,r)=>{"use strict";function n(e,t,r){var n=t.privData,i=r.currentFragment.tracks.find((function(e){return e.trackId===n.trackId})),a=i.firstSampleFlags||0,s=i.dataOffset||0,o=i.sampleDurations,u=i.sampleSizes,c=i.sampleFlags,f=i.sampleCompositionTimeOffset,h=i.sampleCount,d=o.length>0,l=u.length>0,p=c.length>0,v=f.length>0,m=0!==a,A=1;m&&(A|=4),d&&(A|=256),l&&(A|=512),p&&(A|=1024),v&&(A|=2048);var g=e.getPos();e.writeUint32(0),e.writeString("trun"),e.writeUint8(1),e.writeUint24(A),e.writeUint32(h),i.dataOffsetPos=e.getPos(),e.writeInt32(s),m&&e.writeUint32(a);for(var k=0;k<h;k++)d&&e.writeUint32(o[k]||0),l&&e.writeUint32(u[k]||0),p&&e.writeUint32(c[k]||0),v&&e.writeInt32(f[k]||0);r.boxsPositionInfo.push({pos:g,type:"trun",size:Number(e.getPos()-g)})}r.d(t,{A:()=>n})},54012:(e,t,r)=>{"use strict";function n(e,t,r){e.writeUint32(20),e.writeString("vmhd"),e.writeUint8(0),e.writeUint24(1),e.writeUint64(BigInt(0))}r.d(t,{A:()=>n})},99193:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(14686);function i(e,t,r){var i;e.writeUint32(null!==(i=12+t.codecpar.extradataSize)&&void 0!==i?i:0),e.writeString("vpcC"),e.writeUint8(1),e.writeUint24(0),r.fragment&&t.sideData[1]?(e.writeBuffer(t.sideData[1]),delete t.sideData[1]):t.codecpar.extradata&&e.writeBuffer((0,n.s3)(t.codecpar.extradata,t.codecpar.extradataSize))}},1263:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(14686);function i(e,t,r){var i;e.writeUint32(null!==(i=8+t.codecpar.extradataSize)&&void 0!==i?i:0),e.writeString("vvcC"),e.writeUint8(0),e.writeUint24(0),r.fragment&&t.sideData[1]?(e.writeBuffer(t.sideData[1]),delete t.sideData[1]):t.codecpar.extradata&&e.writeBuffer((0,n.s3)(t.codecpar.extradata,t.codecpar.extradataSize))}},57756:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(14686),i=r(4652);function a(e,t,r){var a=e.getPos();e.writeUint32(0),e.writeString("wave"),86035!==t.codecpar.codecId&&(e.writeUint32(12),e.writeString("frma"),e.writeUint32(t.codecpar.codecTag)),86018===t.codecpar.codecId?(e.writeUint32(12),e.writeString("mp4a"),e.writeUint32(0),(0,i.A)(e,t,r)):r.fragment&&t.sideData[1]?(e.writeBuffer(t.sideData[1]),delete t.sideData[1]):t.codecpar.extradata&&e.writeBuffer((0,n.s3)(t.codecpar.extradata,t.codecpar.extradataSize)),e.writeUint32(8),e.writeUint32(0),r.boxsPositionInfo.push({pos:a,type:"wave",size:Number(e.getPos()-a)})}},80025:(e,t,r)=>{"use strict";r.d(t,{A:()=>I});var n,i=r(134),a=r(86051),s=r(18387),o=r(20184),u=r(57247),c=r(84360),f=r(2204),h=r(34445),d=r(6e3),l=r(7114),p=r(59868),v=r(17923),m=r(69301),A=r(54012),g=r(44473),k=r(11573),y=r(12412),b=r(35010),x=r(31130),w=r(11903),_=r(11251),T=r(48516),P=r(48669);const I=(n={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,"stts",a.A),"ctts",s.A),"stss",o.A),"stsz",u.A),"stsc",c.A),"stco",f.A),"co64",h.A),"mdhd",d.A),"mvhd",l.A),"tkhd",p.A),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,"hdlr",v.A),"stsd",m.A),"vmhd",A.A),"edts",g.A),"smhd",k.A),"dref",y.A),"trex",b.A),"mfhd",x.A),"tfhd",w.A),"tfdt",_.A),(0,i.A)((0,i.A)(n,"trun",T.A),"minf_hdlr",P.A))},59989:(e,t,r)=>{"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return!1;if(e.length<2)return!0;for(var r=e[t],n=t+1;n<e.length&&r===e[n];n++);return n===e.length}r.d(t,{A:()=>n})},31425:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});var n=r(77231),i=r(72739),a=r(44328);function s(e){var t=!0;return i.__(e.streams,(function(e){switch(e.codecpar.codecType){case 1:e.codecpar.chLayout.nbChannels!==n.N_&&e.codecpar.sampleRate!==n.N_&&e.codecpar.frameSize!==n.N_&&e.codecpar.bitRate!==BigInt(0)||(t=!1);break;case 0:0!==(0,a.lb)(e.codecpar.framerate)&&e.codecpar.width!==n.N_&&e.codecpar.height!==n.N_&&e.codecpar.bitRate!==BigInt(0)||(t=!1),27!==e.codecpar.codecId&&173!==e.codecpar.codecId&&196!==e.codecpar.codecId&&12!==e.codecpar.codecId||e.codecpar.profile!==n.N_&&e.codecpar.level!==n.N_||(t=!1)}})),t}},61619:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(67672);function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r="",i=0;i<t;i++)n.ai(e)?(r=String.fromCharCode(255&e)+r,e>>>=8):(r=String.fromCharCode(Number(e&BigInt(255)))+r,e>>=BigInt(8));return r}},65977:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(4624),i="src/avformat/function/mktag.ts";function a(e){4!==e.length&&n.R8("tag length is not 4, tag: ".concat(e),i,30);for(var t=0,r=0;r<4;r++)t=t<<8|e.charCodeAt(r);return t}},20841:(e,t,r)=>{"use strict";function n(e,t,r,n){var i=e.getPos(),a=e.getPointer(),s=i-BigInt(Math.floor(a)),o=!1;switch(t<i&&t>=s?(e.seekInline(a+Number(t-i)),o=!0):e.seek(t),n){case"uint8":e.writeUint8(255&r);break;case"int8":e.writeInt8(r);break;case"uint16":e.writeUint16(65535&r);break;case"int16":e.writeInt16(r);break;case"uint32":e.writeUint32(r>>>0);break;case"int32":e.writeInt32(r);break;case"uint64":e.writeUint64(BigInt.asUintN(64,r));break;case"int64":e.writeInt64(r);break;case"float":e.writeFloat(r);break;case"double":e.writeDouble(r)}o?e.seekInline(a):e.seek(i)}r.d(t,{A:()=>n})},92174:(e,t,r)=>{"use strict";r.d(t,{XA:()=>A,bX:()=>k,bx:()=>m,dJ:()=>g,ho:()=>v});var n=r(80662),i=r.n(n),a=r(63939),s=r(50932),o=r(95335),u=r(4624),c=r(51597),f=r(72739),h=r(9705),d=r(548),l="src/avformat/mux.ts",p={paddingZero:!1};function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.X$({},p,t);e.ioWriter||u.h2("need ioWriter",l,52),e.oformat||u.h2("need oformat",l,55),e.options=r,e.processPrivateData={first:new(i())};var n=c.E[e.oformat.type];if(n)for(var a=0;a<e.streams.length;a++){var s=e.streams[a].codecpar.codecId;if(10===e.oformat.type){if(s<65536||s>69683)return u.z3("format ".concat((0,d.L_)(e.oformat.type)," not support codecId ").concat((0,d.eG)(e.streams[a].codecpar.codecType,s)),l,71),h.r8}else if(!f.zy(n,s))return u.z3("format ".concat((0,d.L_)(e.oformat.type)," not support codecId ").concat((0,d.eG)(e.streams[a].codecpar.codecType,s)),l,76),h.r8}return e.oformat.init(e)}function m(e){return e.oformat.writeHeader(e),0}function A(e,t){var r=e.processPrivateData;return r.first.has(a.f[15](t+32))||(a.f[17](t+16)>BigInt(0)?r.first.set(a.f[15](t+32),a.f[17](t+16)):r.first.set(a.f[15](t+32),BigInt(0))),e.options.paddingZero&&(s.M[17](t+16,a.f[17](t+16)-r.first.get(a.f[15](t+32))),s.M[17](t+8,a.f[17](t+8)-r.first.get(a.f[15](t+32)))),e.oformat.writeAVPacket(e,t)}function g(e){return e.oformat.writeTrailer(e),0}function k(e){e.oformat.flush(e)}},77580:(e,t,r)=>{"use strict";r.d(t,{A:()=>_});var n=r(88435),i=r.n(n),a=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(25767),f=r(43070),h=r(31060),d=r(134),l=r(36443),p=r.n(l),v=r(29967),m=r.n(v),A=r(13724),g=r(82800),k=r(95335),y=r(4624);function b(e,t,r){return t=(0,c.A)(t),(0,u.A)(e,x()?i()(t,r||[],(0,c.A)(e).constructor):t.apply(e,r))}function x(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}var w="src/avnetwork/ioLoader/FetchIOLoader.ts",_=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.A)(this,t),e=b(this,t,[r]),(0,d.A)((0,f.A)(e),"contentLength",void 0),(0,d.A)((0,f.A)(e),"receivedLength",void 0),(0,d.A)((0,f.A)(e),"info",void 0),(0,d.A)((0,f.A)(e),"range",void 0),(0,d.A)((0,f.A)(e),"startBytes",void 0),(0,d.A)((0,f.A)(e),"endBytes",void 0),(0,d.A)((0,f.A)(e),"eofIndex",void 0),(0,d.A)((0,f.A)(e),"abortController",void 0),(0,d.A)((0,f.A)(e),"reader",void 0),(0,d.A)((0,f.A)(e),"buffers",void 0),e}var r,n,i,u,c,l,v,g;return(0,h.A)(t,e),(0,o.A)(t,[{key:"open",value:(g=(0,a.A)(p().mark((function e(t,r){var n,i,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.info=t,this.range=r,this.range.to||(this.range.to=-1),this.range.from=Math.max(this.range.from,0),this.eofIndex<0&&(this.eofIndex=r.to),this.startBytes=0,this.endBytes=-1,this.receivedLength=0,this.buffers=[],this.range&&!this.options.isLive&&(this.startBytes=null!==(n=this.range.from)&&void 0!==n?n:0),this.status=1,this.options.isLive||this.options.disableSegment){e.next=27;break}return i={method:"HEAD",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},this.info.headers&&k.__(this.info.headers,(function(e,t){i.headers[t]=e})),this.info.withCredentials&&(i.credentials="include"),this.info.referrerPolicy&&(i.referrerPolicy=this.info.referrerPolicy),AbortController&&(this.abortController=new AbortController,i.signal=this.abortController.signal),e.prev=17,e.next=20,fetch(this.info.url,i);case 20:(a=e.sent).ok&&a.status>=200&&a.status<=299?(null!=(s=a.headers.get("X-Content-Length")||a.headers.get("Content-Length"))&&(this.contentLength=m()(s),this.range.to<0&&(this.eofIndex=this.contentLength+this.range.to)),this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex),this.status=2):this.endBytes=-1,e.next=27;break;case 24:e.prev=24,e.t0=e.catch(17),this.endBytes=-1;case 27:case"end":return e.stop()}}),e,this,[[17,24]])}))),function(e,t){return g.apply(this,arguments)})},{key:"openReader",value:(v=(0,a.A)(p().mark((function e(){var t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},this.info.headers&&k.__(this.info.headers,(function(e,r){t.headers[r]=e})),this.options.isLive||this.options.disableSegment||(t.headers.range="bytes=".concat(this.startBytes,"-").concat(this.endBytes>0?this.endBytes:"")),this.info.withCredentials&&(t.credentials="include"),this.info.referrerPolicy&&(t.referrerPolicy=this.info.referrerPolicy),this.abortController&&this.abortController.abort(),"function"==typeof AbortController&&(this.abortController=new AbortController,t.signal=this.abortController.signal),e.prev=7,e.next=10,fetch(this.info.url,t);case 10:(r=e.sent).ok&&r.status>=200&&r.status<=299?this.reader=r.body.getReader():(this.status=3,y.h2("FetchStreamLoader: Http code invalid, ".concat(r.status," ").concat(r.statusText),w,189)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(7),!(this.retryCount<this.options.retryCount)||this.options.isLive&&this.receivedLength){e.next=24;break}return this.retryCount++,this.status=1,e.next=21,new A.A(this.options.retryInterval);case 21:return e.abrupt("return",this.openReader());case 24:y.h2("FetchStreamLoader: exception ".concat(e.t0.message),w,202);case 25:case"end":return e.stop()}}),e,this,[[7,14]])}))),function(){return v.apply(this,arguments)})},{key:"readInterval",value:(l=(0,a.A)(p().mark((function e(t){var r,n,i,a,s,o=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=o.length>1&&void 0!==o[1]?o[1]:0,n=0;this.buffers.length&&n<t.length;)(i=this.buffers.shift()).length>t.length-n?(t.set(i.subarray(0,t.length-n),n),this.buffers.unshift(i.subarray(t.length-n)),n=t.length):(t.set(i,n),n+=i.length);if(!(n>=t.length)){e.next=5;break}return e.abrupt("return",t.length+r);case 5:if(4!==this.status){e.next=7;break}return e.abrupt("return",n>0?n+r:r>0?r:-1048576);case 7:if(this.reader){e.next=10;break}return e.next=10,this.openReader();case 10:return e.next=12,this.reader.read();case 12:if(a=e.sent,s=a.value,!a.done){e.next=36;break}if(!(null!==this.contentLength&&this.receivedLength+this.range.from<this.endBytes+1)){e.next=21;break}this.status=3,y.h2("Fetch stream meet Early-EOF",w,241),e.next=34;break;case 21:if(!(this.options.isLive||this.options.disableSegment||this.receivedLength+this.range.from>=this.eofIndex)){e.next=27;break}return this.status=4,this.startBytes=0,e.abrupt("return",n>0?n+r:r>0?r:-1048576);case 27:return e.next=29,this.reader.cancel();case 29:return this.abortController&&this.abortController.abort(),this.reader=null,this.startBytes=this.endBytes+1,this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex),e.abrupt("return",this.readInterval(t.subarray(n),n));case 34:e.next=46;break;case 36:if(this.receivedLength+=s.length,!(s.length>t.length-n)){e.next=43;break}return t.set(s.subarray(0,t.length-n),n),this.buffers.push(s.subarray(t.length-n)),e.abrupt("return",t.length+r);case 43:return t.set(s,n),n+=s.length,e.abrupt("return",n+r);case 46:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"read",value:(c=(0,a.A)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readInterval(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"seek",value:(u=(0,a.A)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.abort();case 2:this.receivedLength=Number(t)-this.range.from,this.startBytes=Number(t),this.options.disableSegment||(this.endBytes=Math.min(this.startBytes+this.options.preload,this.eofIndex)),this.buffers.length=0,4===this.status&&(this.status=2);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"size",value:(i=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.options.isLive){e.next=2;break}return e.abrupt("return",BigInt(0));case 2:return e.abrupt("return",BigInt(Math.floor(this.contentLength)));case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"abort",value:(n=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reader){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.reader.cancel();case 4:this.abortController&&this.abortController.abort(),this.reader=null;case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"stop",value:(r=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.abort();case 2:this.status=0;case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),t}(g.A)},79686:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var n=r(88435),i=r.n(n),a=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(25767),f=r(43070),h=r(31060),d=r(134),l=r(54001),p=r.n(l),v=r(36443),m=r.n(v),A=r(82800),g=r(67672);function k(e,t,r){return t=(0,c.A)(t),(0,u.A)(e,y()?i()(t,r||[],(0,c.A)(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var b=function(e){function t(){var e;(0,s.A)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=k(this,t,[].concat(n)),(0,d.A)((0,f.A)(e),"info",void 0),(0,d.A)((0,f.A)(e),"range",void 0),(0,d.A)((0,f.A)(e),"readPos",void 0),(0,d.A)((0,f.A)(e),"endPos",void 0),(0,d.A)((0,f.A)(e),"reader",void 0),(0,d.A)((0,f.A)(e),"readerResolve",void 0),e}var r,n,i,u,c,l,v;return(0,h.A)(t,e),(0,o.A)(t,[{key:"open",value:(v=(0,a.A)(m().mark((function e(t,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.info=t,this.range=r,this.readPos=0,this.endPos=this.info.file.size,r.from>0&&(this.readPos=r.from),r.to>0&&(this.endPos=r.to),this.status=2;case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"readBufferByReader",value:(l=(0,a.A)(m().mark((function e(t){var r,n=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reader||(this.reader=new FileReader,this.reader.onloadend=function(e){n.readerResolve&&n.readerResolve(e.target.result)}),r=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,e.abrupt("return",new(p())((function(e){n.readerResolve=e,n.reader.readAsArrayBuffer(r.call(n.info.file,n.readPos,n.readPos+t))})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"read",value:(c=(0,a.A)(m().mark((function e(t){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.readPos>=this.endPos)){e.next=3;break}return this.status,e.abrupt("return",-1048576);case 3:if(r=Math.min(t.length,this.endPos-this.readPos),!g.Pc(Blob.prototype.arrayBuffer)){e.next=14;break}return e.t0=t,e.t1=Uint8Array,e.next=9,this.info.file.slice(this.readPos,this.readPos+r).arrayBuffer();case 9:e.t2=e.sent,e.t3=new e.t1(e.t2),e.t0.set.call(e.t0,e.t3,0),e.next=21;break;case 14:return e.t4=t,e.t5=Uint8Array,e.next=18,this.readBufferByReader(r);case 18:e.t6=e.sent,e.t7=new e.t5(e.t6),e.t4.set.call(e.t4,e.t7,0);case 21:return this.readPos+=r,this.readPos>=this.endPos&&(this.status=4),e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"seek",value:(u=(0,a.A)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.abort();case 2:return this.readPos=Number(t),4===this.status&&(this.status=2),e.abrupt("return",0);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"size",value:(i=(0,a.A)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",BigInt(Math.floor(this.info.file.size)));case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"abort",value:(n=(0,a.A)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"stop",value:(r=(0,a.A)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.abort();case 2:this.status=0;case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),t}(A.A)},82800:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(81570),i=r(78716),a=r(134),s=r(95335),o={isLive:!0,preload:5242880,retryCount:20,retryInterval:1},u=(0,n.A)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.A)(this,e),(0,a.A)(this,"options",void 0),(0,a.A)(this,"status",void 0),(0,a.A)(this,"retryCount",void 0),(0,a.A)(this,"retryTimeout",void 0),this.options=t,this.status=0,this.retryCount=0,this.options=s.X$({},o),s.X$(this.options,t)}))},18667:(e,t,r)=>{"use strict";r.d(t,{A:()=>J});var n=r(88435),i=r.n(n),a=r(69736),s=r.n(a),o=r(44301),u=r.n(o),c=r(82731),f=r.n(c),h=r(59614),d=r.n(h),l=r(969),p=r.n(l),v=r(66681),m=r.n(v),A=r(25182),g=r(134),k=r(78716),y=r(81570),b=r(77193),x=r(25767),w=r(31060),_=r(54001),T=r.n(_),P=r(36443),I=r.n(P),B=r(63939),C=r(50932),S=r(12264),M=r(29170),U=r(9599),R=r(44527),E=r(9705),D=r(84149),L=r(75742),F=r(4624),O=r(16041),N=r(77104),z=r(84290),W=r(72739),V=r(86932),G=r(36204),j=r(44328),q=r(77231);function H(e,t){var r=s()(e);if(u()){var n=u()(e);t&&(n=n.filter((function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){(0,g.A)(e,t,r[t])})):d()?p()(e,d()(r)):H(Object(r)).forEach((function(t){m()(e,t,f()(r,t))}))}return e}function Q(e,t,r){return t=(0,x.A)(t),(0,b.A)(e,K()?i()(t,r||[],(0,x.A)(e).constructor):t.apply(e,r))}function K(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}var X="src/avpipeline/AudioDecodePipeline.ts",J=function(e){function t(){return(0,k.A)(this,t),Q(this,t)}var r,n,i,a,s;return(0,w.A)(t,e),(0,y.A)(t,[{key:"createWebcodecDecoder",value:function(e){return new N.A({onError:function(t){F.z3("audio decode error, taskId: ".concat(e.taskId,", error: ").concat(t),X,85),e.openReject&&(e.openReject(E.r8),e.openReject=null)},onReceiveFrame:function(t){var r=(0,G.t)(t,e.avframePool.alloc());C.M[17](r+104,(0,j.k)(B.f[17](r+104),q.KR,e.timeBase)),e.frameCaches.push(r),C.M[17](e.stats+56,B.f[17](e.stats+56)+BigInt(1)),e.lastDecodeTimestamp&&C.M[15](e.stats+240,Math.max((0,V.A)()-e.lastDecodeTimestamp,B.f[15](e.stats+240))),e.lastDecodeTimestamp=(0,V.A)(),t.close()}})}},{key:"createWasmcodecDecoder",value:function(e,t){return new L.A({resource:t,onError:function(t){F.z3("audio decode error, taskId: ".concat(e.taskId,", error: ").concat(t),X,114),e.openReject&&(e.openReject(E.r8),e.openReject=null)},onReceiveFrame:function(t){e.frameCaches.push(t),C.M[17](e.stats+56,B.f[17](e.stats+56)+BigInt(1)),e.lastDecodeTimestamp&&C.M[15](e.stats+240,Math.max((0,V.A)()-e.lastDecodeTimestamp,B.f[15](e.stats+240))),e.lastDecodeTimestamp=(0,V.A)()},avframePool:e.avframePool})}},{key:"createTask",value:function(e){var t=new D.Ay(e.leftPort),r=new D.Ay(e.rightPort),n=[],i=new O.A((0,M.A)(e.avframeList,S.A),e.avframeListMutex),a=Y(Y({},e),{},{frameCaches:n,inputEnd:!1,decoder:null,parameters:0,lastDecodeTimestamp:0,avframePool:i,avpacketPool:new z.A((0,M.A)(e.avpacketList,S.A),e.avpacketListMutex),pullPadding:null,openReject:null});return e.resource?a.decoder=this.createWasmcodecDecoder(a,e.resource):a.decoder=this.createWebcodecDecoder(a),this.tasks.set(e.taskId,a),r.on(D.S3,function(){var i=(0,A.A)(I().mark((function i(s){var o,u,c,f,h;return I().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.t0=s.method,i.next="pull"===i.t0?3:56;break;case 3:if(!n.length){i.next=9;break}return o=n.shift(),r.reply(s,o),i.abrupt("break",56);case 9:if(a.inputEnd){i.next=54;break}case 10:if(!n.length){i.next=15;break}return u=n.shift(),r.reply(s,u),i.abrupt("break",53);case 15:return i.next=17,t.request("pull");case 17:if(c=i.sent,!a.pullPadding){i.next=22;break}return i.next=21,a.pullPadding;case 21:a.pullPadding=null;case 22:if(-1048576!==c){i.next=37;break}return i.next=25,a.decoder.flush();case 25:if(a.inputEnd=!0,!n.length){i.next=32;break}return f=n.shift(),r.reply(s,f),i.abrupt("break",53);case 32:return F.pq("audio decoder ended, taskId: ".concat(a.taskId),X,201),r.reply(s,-1048576),i.abrupt("break",53);case 35:i.next=51;break;case 37:if(!(c>0)){i.next=48;break}if(h=a.decoder.decode(c,(0,j.k)(B.f[17](c+8),(0,M.A)(c+72,U.P),q.KR)),a.avpacketPool.release(c),!(h<0)){i.next=45;break}return C.M[15](a.stats+48,B.f[15](a.stats+48)+1),F.z3("audio decode error, taskId: ".concat(e.taskId,", ret: ").concat(h),X,214),r.reply(s,h),i.abrupt("break",53);case 45:return i.abrupt("continue",10);case 48:return F.z3("audio decode pull avpacket error, taskId: ".concat(e.taskId,", ret: ").concat(c),X,221),r.reply(s,c),i.abrupt("break",53);case 51:i.next=10;break;case 53:return i.abrupt("break",56);case 54:return r.reply(s,-1048576),i.abrupt("break",56);case 56:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()),0}},{key:"open",value:(s=(0,A.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.tasks.get(t))){e.next=3;break}return e.abrupt("return",new(T())(function(){var e=(0,A.A)(I().mark((function e(t,i){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.openReject=t,e.prev=1,e.next=4,n.decoder.open(r);case 4:n.parameters=r,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),F.z3("open audio decoder failed, error: ".concat(e.t0),X,247),t(E.r8),e.abrupt("return");case 12:t(0);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()));case 3:F.h2("task not found",X,254);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"reopenDecoder",value:(a=(0,A.A)(I().mark((function e(t,r,n){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=this.tasks.get(t))){e.next=4;break}return a=n?this.createWasmcodecDecoder(i,n):this.createWebcodecDecoder(i),e.abrupt("return",new(T())(function(){var e=(0,A.A)(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.openReject=t,e.prev=1,e.next=4,i.decoder.open(r);case 4:i.parameters=r,i.decoder.close(),i.decoder=a,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(1),F.z3("open audio decoder failed, error: ".concat(e.t0),X,276),t(E.r8),e.abrupt("return");case 14:t(0);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()));case 4:F.h2("task not found",X,283);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"resetTask",value:(i=(0,A.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=10;break}if(!r.decoder){e.next=5;break}return e.next=5,r.decoder.flush();case 5:W.__(r.frameCaches,(function(e){r.avframePool.release(e)})),r.frameCaches.length=0,r.inputEnd=!1,r.lastDecodeTimestamp=(0,V.A)(),F.pq("reset audio decoder, taskId: ".concat(r.taskId),X,299);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"registerTask",value:(n=(0,A.A)(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tasks.has(t.taskId)){e.next=2;break}return e.abrupt("return",E.lh);case 2:return e.abrupt("return",this.createTask(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"unregisterTask",value:(r=(0,A.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))&&(r.rightPort.close(),r.leftPort.close(),r.decoder.close(),r.frameCaches.forEach((function(e){r.avframePool.release(e)})),this.tasks.delete(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(R.A)},59377:(e,t,r)=>{"use strict";r.d(t,{A:()=>Ae});var n=r(88435),i=r.n(n),a=r(69736),s=r.n(a),o=r(44301),u=r.n(o),c=r(82731),f=r.n(c),h=r(59614),d=r.n(h),l=r(969),p=r.n(l),v=r(66681),m=r.n(v),A=r(42096),g=r.n(A),k=r(75062),y=r.n(k),b=r(16091),x=r.n(b),w=r(68632),_=r.n(w),T=r(25182),P=r(78716),I=r(81570),B=r(77193),C=r(43070),S=r(60394),M=r(25767),U=r(31060),R=r(134),E=r(36443),D=r.n(E),L=r(80662),F=r.n(L),O=r(54001),N=r.n(O),z=r(61499),W=r(74503),V=r(12264),G=r(29170),j=r(63939),q=r(50932),H=r(94300),Y=r(44527),Q=r(9705),K=r(84149),X=r(4624),J=r(73783),$=r(16041),Z=r(92246),ee=r(10278),te=r(47442),re=r(37837),ne=r(70089),ie=r(14686),ae=r(44328),se=r(77231),oe=r(86932),ue=r(13724),ce=r(43607);function fe(e,t){var r=void 0!==y()&&e[x()]||e["@@iterator"];if(!r){if(_()(e)||(r=function(e,t){if(e){if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?g()(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function de(e,t){var r=s()(e);if(u()){var n=u()(e);t&&(n=n.filter((function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){(0,R.A)(e,t,r[t])})):d()?p()(e,d()(r)):de(Object(r)).forEach((function(t){m()(e,t,f()(r,t))}))}return e}function pe(e,t,r){return t=(0,M.A)(t),(0,B.A)(e,ve()?i()(t,r||[],(0,M.A)(e).constructor):t.apply(e,r))}function ve(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(ve=function(){return!!e})()}var me="src/avpipeline/AudioRenderPipeline.ts",Ae=function(e){function t(){var e;return(0,P.A)(this,t),e=pe(this,t),(0,R.A)((0,C.A)(e),"avPCMBufferPool",void 0),(0,R.A)((0,C.A)(e),"avPCMBufferList",void 0),(0,R.A)((0,C.A)(e),"avPCMBufferListMutex",void 0),e.avPCMBufferList=(0,W.A)(V.A),e.avPCMBufferListMutex=(0,W.A)(J.eu),e.avPCMBufferPool=new te.A(e.avPCMBufferList,e.avPCMBufferListMutex[z.o9]),e}var r,n,i,a,s,o,u,c,f,h,d,l,p;return(0,U.A)(t,e),(0,I.A)(t,[{key:"createTask",value:(p=(0,T.A)(D().mark((function e(t){var r,n,i,a,s,o,u,c,f,h,d;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=function(){return(d=(0,T.A)(D().mark((function e(t){var r,n,i,s,o,f,h,d,l,p,v,m,A,g;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,!a.seeking){e.next=4;break}return e.next=4,new(N())((function(e){a.receivePCMSync=e}));case 4:if(a.enableJitterBuffer&&j.f[15](a.stats+32)/j.f[15](a.stats+236)*1e3<=j.f[15](a.jitterBuffer)&&u.setPlayRate(a.taskId,1),!a.frameEnded||!a.useStretchpitcher){e.next=11;break}for(n=0,i=0;i<a.playChannels;i++)s=a.stretchpitcher.get(i),j.f[20](j.f[20](t)+4*i)&&(n=s.receiveSamples(j.f[20](j.f[20](t)+4*i)+4*r,j.f[15](t+12)-r));if(r+n<j.f[15](t+12))for(a.stretchpitcherEnded=!0,o=0;o<a.playChannels;o++)(0,ie.sO)(j.f[20](j.f[20](t)+4*o)+r,0,4*(j.f[15](t+12)-r));return q.M[15](t+8,r),e.abrupt("return",0);case 11:if(!(r<j.f[15](t+12))){e.next=29;break}if(f=0,a.useStretchpitcher)for(d=0;d<a.playChannels;d++)l=a.stretchpitcher.get(d),j.f[20](j.f[20](t)+4*d)&&(f=l.receiveSamples(j.f[20](j.f[20](t)+4*d)+4*r,j.f[15](t+12)-r));else if(a.waitPCMBuffer){if(f=Math.min(j.f[15](a.waitPCMBuffer+8)-a.waitPCMBufferPos,j.f[15](t+12)-r)){for(h=0;h<a.playChannels;h++)(0,ie.Mr)(j.f[20](j.f[20](t)+4*h)+4*r,j.f[20](j.f[20](a.waitPCMBuffer)+4*h)+4*a.waitPCMBufferPos,4*f);a.waitPCMBufferPos+=f}j.f[15](a.waitPCMBuffer+8)===a.waitPCMBufferPos&&(a.waitAVFrame&&(q.M[20](a.waitPCMBuffer,0),q.M[15](a.waitPCMBuffer+12,0),a.avframePool.release(a.waitAVFrame),a.waitAVFrame=0),u.avPCMBufferPool.release(a.waitPCMBuffer),a.waitPCMBuffer=0)}if(!((r+=f)<j.f[15](t+12))){e.next=27;break}return e.next=18,c();case 18:if(-1048576!==(p=e.sent)){e.next=25;break}if(a.frameEnded=!0,a.useStretchpitcher){for(v=0;v<a.playChannels;v++)m=a.stretchpitcher.get(v),j.f[20](j.f[20](t)+4*v)&&(m.flush(),p=m.receiveSamples(j.f[20](j.f[20](t)+4*v)+4*r,j.f[15](t+12)-r));if(r+p<j.f[15](t+12))for(a.stretchpitcherEnded=!0,A=0;A<a.playChannels;A++)(0,ie.sO)(j.f[20](j.f[20](t)+4*A)+r,0,4*(j.f[15](t+12)-r));r+=p}return e.abrupt("break",29);case 25:if(!(p<0)){e.next=27;break}return e.abrupt("return",p);case 27:e.next=11;break;case 29:return q.M[15](t+8,r),a.currentPTS-a.lastNotifyPTS>=BigInt(1e3)&&(a.lastNotifyPTS=a.currentPTS,g=((a.useStretchpitcher?a.stretchpitcher.get(0).getLatency():0)+(3*j.f[15](t+12)>>>1))/a.playSampleRate*1e3>>>0,a.controlIPCPort.notify("syncPts",{pts:ce.T9(a.currentPTS-BigInt(Math.floor(g)),BigInt(0))})),a.seekSync&&(a.seekSync(),a.seekSync=null),e.abrupt("return",0);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)},h=function(e){return d.apply(this,arguments)},f=function(){return(f=(0,T.A)(D().mark((function e(){var t,r,n,i,s,o,c,f,h,d;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.paddingAVFrame){e.next=5;break}t=a.paddingAVFrame,a.paddingAVFrame=0,e.next=8;break;case 5:return e.next=7,a.leftIPCPort.request("pull");case 7:t=e.sent;case 8:if(-1048576!==t){e.next=14;break}for(r=0;r<a.playChannels;r++)a.stretchpitcher.get(r).flush();return X.pq("audio render ended, taskId: ".concat(a.taskId),me,203),e.abrupt("return",-1048576);case 14:if(!(t<0)){e.next=19;break}return X.z3("pull audio frame failed, taskId: ".concat(a.taskId),me,207),e.abrupt("return",t);case 19:if(1!==a.playRate||1!==a.playTempo||1!==a.playPitch||a.enableJitterBuffer?a.useStretchpitcher=!0:a.useStretchpitcher=!1,a.firstPlayed||(n=(0,ae.k)(j.f[17](t+104),a.timeBase,se.i0),a.firstPlayed=!0,X.Yz("got first audio frame, pts: ".concat(j.f[17](t+104),"(").concat(n,"ms), taskId: ").concat(a.taskId),me,229)),a.currentPTS=(0,ae.k)(j.f[17](t+104),a.timeBase,se.i0),q.M[17](a.stats+72,j.f[17](a.stats+72)+BigInt(1)),a.lastRenderTimestamp&&q.M[15](a.stats+244,Math.max((0,oe.A)()-a.lastRenderTimestamp,j.f[15](a.stats+244))),a.lastRenderTimestamp=(0,oe.A)(),i=!0,j.f[15](t+152)===a.playSampleRate&&j.f[15](t+80)===a.playFormat){e.next=40;break}if(a.resampler&&((s=a.resampler.getInputPCMParameters()).format===j.f[15](t+80)&&s.sampleRate===j.f[15](t+152)||(a.resampler.close(),a.resampler=null)),a.resampler){e.next=32;break}return a.resampler=new Z.A({resource:a.resamplerResource}),e.next=32,a.resampler.open({sampleRate:j.f[15](t+152),format:j.f[15](t+80),channels:j.f[15](t+292)},{sampleRate:a.playSampleRate,format:a.playFormat,channels:j.f[15](t+292)});case 32:if(o=u.avPCMBufferPool.alloc(),!((c=a.resampler.resample(j.f[20](t+64),o,j.f[15](t+76)))<0)){e.next=37;break}return X.z3("resample error, ret: ".concat(c,", taskId: ").concat(a.taskId),me,274),e.abrupt("return",c);case 37:if(a.useStretchpitcher){for(f=0;f<a.playChannels;f++)a.stretchpitcher.get(f).sendSamples(j.f[20](j.f[20](o)+4*f),j.f[15](o+8));u.avPCMBufferPool.release(o)}else a.waitPCMBuffer=o,a.waitPCMBufferPos=0;e.next=41;break;case 40:if(a.useStretchpitcher)for(d=0;d<a.playChannels;d++)a.stretchpitcher.get(d).sendSamples(j.f[20](j.f[20](t+64)+4*d),j.f[15](t+76));else h=u.avPCMBufferPool.alloc(),q.M[15](h+8,j.f[15](t+76)),q.M[15](h+12,j.f[15](t+76)),q.M[15](h+20,j.f[15](t+152)),q.M[15](h+16,j.f[15](t+292)),q.M[20](h,j.f[20](t+64)),a.waitAVFrame=t,a.waitPCMBuffer=h,a.waitPCMBufferPos=0,i=!1;case 41:q.M[15](a.stats+4,j.f[15](t+152)),q.M[15](a.stats,j.f[15](t+292)),q.M[15](a.stats+8,j.f[15](t+76)),i&&a.avframePool.release(t);case 45:return e.abrupt("return",0);case 46:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(){return f.apply(this,arguments)},r=new K.Ay(t.leftPort),n=new K.Ay(t.rightPort),i=new K.Ay(t.controlPort),(a=le(le({},t),{},{leftIPCPort:r,rightIPCPort:n,controlIPCPort:i,resampler:null,stretchpitcher:new(F()),outPCMBuffer:null,waitPCMBuffer:0,waitAVFrame:0,waitPCMBufferPos:0,frameEnded:!1,stretchpitcherEnded:!1,playRate:1,playTempo:1,playPitch:1,useStretchpitcher:!1,lastNotifyPTS:BigInt(0),currentPTS:se.Dh,firstPlayed:!1,seeking:!1,pausing:!1,seekSync:null,receivePCMSync:null,paddingAVFrame:0,fakePlayStartTimestamp:0,fakePlaySamples:BigInt(0),fakePlayTimer:null,fakePlay:!1,lastRenderTimestamp:0,avframePool:new $.A((0,G.A)(t.avframeList,V.A),t.avframeListMutex)})).startPTS=(0,ae.k)(a.startPTS,a.timeBase,se.i0),s=0;case 10:if(!(s<t.playChannels)){e.next=21;break}return o=new ne.A({resource:t.stretchpitcherResource}),a.stretchpitcher.set(s,o),e.next=15,o.open({sampleRate:t.playSampleRate,channels:1});case 15:o.setTempo(a.playTempo),o.setPitch(a.playPitch),o.setRate(a.playRate);case 18:s++,e.next=10;break;case 21:return u=this,n.on(K.S3,function(){var e=(0,T.A)(D().mark((function e(t){var r,i,s,o,u,c,f;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.method,e.next="pull"===e.t0?3:"pullBuffer"===e.t0?13:28;break;case 3:if(a.fakePlay&&(a.fakePlay=!1,a.fakePlayTimer&&(clearTimeout(a.fakePlayTimer),a.fakePlayTimer=null),a.fakePlaySamples=BigInt(0),a.fakePlayStartTimestamp=0),!a.frameEnded||!a.stretchpitcherEnded&&a.useStretchpitcher){e.next=7;break}return n.reply(t,-1048576),e.abrupt("return");case 7:return r=t.params.buffer,e.next=10,h(r);case 10:return i=e.sent,n.reply(t,i),e.abrupt("break",28);case 13:if(a.fakePlay&&(a.fakePlay=!1,a.fakePlayTimer&&(clearTimeout(a.fakePlayTimer),a.fakePlayTimer=null),a.fakePlaySamples=BigInt(0),a.fakePlayStartTimestamp=0),!a.frameEnded||!a.stretchpitcherEnded&&a.useStretchpitcher){e.next=17;break}return n.reply(t,-1048576),e.abrupt("return");case 17:if(s=t.params.nbSamples,!a.outPCMBuffer||a.outPCMBuffer.maxnbSamples!==s){for(a.outPCMBuffer&&((0,re.aI)(a.outPCMBuffer.data),(0,re.aI)(a.outPCMBuffer[z.o9]),(0,H.A)(a.outPCMBuffer)),a.outPCMBuffer=(0,W.A)(ee.A),a.outPCMBuffer.data=(0,re.sY)(4*a.playChannels),o=(0,re.Gy)(4*s*a.playChannels),u=0;u<a.playChannels;u++)q.M[20](a.outPCMBuffer.data+4*u,o+4*s*u);a.outPCMBuffer.maxnbSamples=s}return e.next=21,h(a.outPCMBuffer[z.o9]);case 21:if(!((c=e.sent)<0)){e.next=25;break}return n.reply(t,c),e.abrupt("return");case 25:return f=(0,ie.s3)(j.f[20](a.outPCMBuffer.data),4*a.outPCMBuffer.nbSamples*a.playChannels).slice(),n.reply(t,f.buffer,null,[f.buffer]),e.abrupt("break",28);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tasks.set(t.taskId,a),e.abrupt("return",0);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"checkUseStretchpitcher",value:function(e){var t=1!==e.playRate||1!==e.playTempo||1!==e.playPitch||e.enableJitterBuffer;if(e.useStretchpitcher&&!t)for(var r=0;r<e.playChannels;r++)e.stretchpitcher.get(r).flush()}},{key:"setPlayRate",value:function(e,t){var r=this.tasks.get(e);if(r){r.enableJitterBuffer&&j.f[15](r.stats+32)/j.f[15](r.stats+236)*1e3<=j.f[15](r.jitterBuffer)&&(t=1),r.playRate=t;for(var n=0;n<r.playChannels;n++)r.stretchpitcher.get(n).setRate(t);this.checkUseStretchpitcher(r)}}},{key:"setPlayTempo",value:(l=(0,T.A)(D().mark((function e(t,r){var n,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.tasks.get(t)){for(n.playTempo=r,i=0;i<n.playChannels;i++)n.stretchpitcher.get(i).setTempo(r);this.checkUseStretchpitcher(n)}case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"setPlayPitch",value:function(e,t){var r=this.tasks.get(e);if(r){r.playPitch=t;for(var n=0;n<r.playChannels;n++)r.stretchpitcher.get(n).setPitch(t);this.checkUseStretchpitcher(r)}}},{key:"beforeSeek",value:(d=(0,T.A)(D().mark((function e(t){var r,n,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=13;break}if(r.fakePlay){e.next=8;break}return X.Yz("wait current pull front frame before seek, taskId: ".concat(r.taskId),me,604),e.next=6,new(N())((function(e){r.seekSync=e}));case 6:e.next=9;break;case 8:r.fakePlayTimer&&(clearTimeout(r.fakePlayTimer),r.fakePlayTimer=null);case 9:if(r.seeking=!0,r.stretchpitcher.size){n=fe(r.stretchpitcher.keys());try{for(n.s();!(i=n.n()).done;)a=i.value,r.stretchpitcher.get(a).clear()}catch(e){n.e(e)}finally{n.f()}}r.waitPCMBuffer&&(r.waitAVFrame&&(q.M[20](r.waitPCMBuffer,0),q.M[15](r.waitPCMBuffer+12,0),r.avframePool.release(r.waitAVFrame),r.waitAVFrame=0),this.avPCMBufferPool.release(r.waitPCMBuffer),r.waitPCMBuffer=0),X.Yz("before seek end, taskId: ".concat(r.taskId),me,635);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"syncSeekTime",value:(h=(0,T.A)(D().mark((function e(t,r,n){var i,a,s,o,u,c;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=this.tasks.get(t))){e.next=35;break}a=!1;case 3:s=(0,oe.A)(),o=j.f[15](i.stats+120);case 6:if(!(!a&&n&&j.f[15](i.stats+120)>n)){e.next=13;break}return e.next=9,new ue.A(0);case 9:(0,oe.A)()-s>200&&o===j.f[15](i.stats+120)&&(a=!0),o!==j.f[15](i.stats+120)&&(o=j.f[15](i.stats+120),s=(0,oe.A)()),e.next=6;break;case 13:return e.next=15,i.leftIPCPort.request("pull");case 15:if(!((u=e.sent)<0)){e.next=20;break}return X.R8("pull audio frame end after seek, taskId: ".concat(t),me,665),i.frameEnded=!0,e.abrupt("break",34);case 20:if(!(r<BigInt(0))){e.next=23;break}return X.pq("use the first audio frame because of the seek time".concat(r," < 0"),me,671),e.abrupt("break",34);case 23:if(!((c=(0,ae.k)(j.f[17](u+104),i.timeBase,se.i0))-i.startPTS>=r)){e.next=31;break}return i.paddingAVFrame=u,i.frameEnded=!1,i.lastNotifyPTS=c,e.abrupt("break",34);case 31:i.avframePool.release(u);case 32:e.next=3;break;case 34:X.Yz("sync seek time end, taskId: ".concat(i.taskId),me,695);case 35:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return h.apply(this,arguments)})},{key:"afterSeek",value:(f=(0,T.A)(D().mark((function e(t,r){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))&&(n.seeking=!1,n.receivePCMSync&&(n.receivePCMSync(),n.receivePCMSync=null),n.pausing||(n.fakePlay&&(n.fakePlayStartTimestamp=(0,oe.A)(),n.fakePlaySamples=BigInt(0),this.fakePlayNext(n)),n.lastRenderTimestamp=(0,oe.A)()),X.Yz("after seek end, taskId: ".concat(n.taskId),me,717));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"restart",value:(c=(0,T.A)(D().mark((function e(t){var r,n,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.tasks.get(t)){if(r.lastNotifyPTS=BigInt(0),r.frameEnded=!1,r.firstPlayed=!1,r.stretchpitcherEnded=!1,null!==(n=r.stretchpitcher)&&void 0!==n&&n.size)for(i=0;i<r.playChannels;i++)null===(a=r.stretchpitcher.get(i))||void 0===a||a.clear();r.fakePlayTimer&&clearTimeout(r.fakePlayTimer),r.fakePlaySamples=BigInt(0),r.fakePlayStartTimestamp=0,r.lastRenderTimestamp=(0,oe.A)(),X.Yz("restart task, taskId: ".concat(r.taskId),me,740)}case 2:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"fakePlayNext",value:(u=(0,T.A)(D().mark((function e(t){var r,n,i,a,s=this;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leftIPCPort.request("pull");case 2:if(!((r=e.sent)<0)){e.next=8;break}return t.frameEnded=!0,X.pq("audio fake render ended, taskId: ".concat(t.taskId),me,751),t.controlIPCPort.notify("ended"),e.abrupt("return");case 8:if(t.fakePlay&&!t.pausing){e.next=11;break}return t.avframePool.release(r),e.abrupt("return");case 11:n=j.f[15](r+76)/j.f[15](r+152)*1e3>>>0,n/=t.playRate*t.playTempo,i=BigInt(Math.floor((0,oe.A)()-t.fakePlayStartTimestamp))*BigInt(j.f[15](r+152)>>>0)/BigInt(1e3),a=Number(i-t.fakePlaySamples),n-=a/j.f[15](r+152)*1e3>>>0,t.fakePlaySamples+=BigInt(j.f[15](r+76)>>>0),t.avframePool.release(r),t.fakePlayTimer=setTimeout((function(){t.fakePlayTimer=null,s.fakePlayNext(t)}),n);case 19:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"fakePlay",value:(o=(0,T.A)(D().mark((function e(t){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))&&(r.fakePlayStartTimestamp=(0,oe.A)(),r.fakePlay=!0,r.fakePlaySamples=BigInt(0),this.fakePlayNext(r),X.pq("start fake play, taskId: ".concat(r.taskId),me,789));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"pause",value:(s=(0,T.A)(D().mark((function e(t){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))&&(r.pausing=!0,r.fakePlay&&r.fakePlayTimer&&(clearTimeout(r.fakePlayTimer),r.fakePlayTimer=null),X.pq("task paused, taskId: ".concat(r.taskId),me,804));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"unpause",value:(a=(0,T.A)(D().mark((function e(t){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))&&(r.pausing=!1,r.fakePlay&&(r.fakePlayStartTimestamp=(0,oe.A)(),r.fakePlaySamples=BigInt(0),r.lastRenderTimestamp=(0,oe.A)(),this.fakePlayNext(r)),X.pq("task unpaused, taskId: ".concat(r.taskId),me,819));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"registerTask",value:(i=(0,T.A)(D().mark((function e(t){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tasks.has(t.taskId)){e.next=2;break}return e.abrupt("return",Q.lh);case 2:return e.next=4,this.createTask(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"unregisterTask",value:(n=(0,T.A)(D().mark((function e(t){var r,n,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.tasks.get(t)){if(r.resampler&&r.resampler.close(),r.stretchpitcher.size){n=fe(r.stretchpitcher.keys());try{for(n.s();!(i=n.n()).done;)a=i.value,r.stretchpitcher.get(a).close()}catch(e){n.e(e)}finally{n.f()}r.stretchpitcher.clear()}r.outPCMBuffer&&((0,re.aI)(r.outPCMBuffer.data),(0,re.aI)(r.outPCMBuffer[z.o9]),(0,H.A)(r.outPCMBuffer)),r.waitPCMBuffer&&(r.waitAVFrame&&(q.M[20](r.waitPCMBuffer,0),q.M[15](r.waitPCMBuffer+12,0),r.avframePool.release(r.waitAVFrame)),this.avPCMBufferPool.release(r.waitPCMBuffer),r.waitPCMBuffer=0),r.paddingAVFrame&&r.avframePool.release(r.paddingAVFrame),r.leftIPCPort.destroy(),r.rightIPCPort.destroy(),this.tasks.delete(t)}case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"clear",value:(r=(0,T.A)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.A)((0,M.A)(t.prototype),"clear",this).call(this);case 2:this.avPCMBufferList.clear((function(e){j.f[20](e)&&((0,re.aI)(j.f[20](e)),(0,re.aI)(e))}),20),(0,H.A)(this.avPCMBufferList),(0,H.A)(this.avPCMBufferListMutex);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),t}(Y.A)},72480:(e,t,r)=>{"use strict";r.d(t,{A:()=>he});var n=r(88435),i=r.n(n),a=r(69736),s=r.n(a),o=r(44301),u=r.n(o),c=r(82731),f=r.n(c),h=r(59614),d=r.n(h),l=r(969),p=r.n(l),v=r(66681),m=r.n(v),A=r(42096),g=r.n(A),k=r(75062),y=r.n(k),b=r(16091),x=r.n(b),w=r(68632),_=r.n(w),T=r(134),P=r(25182),I=r(78716),B=r(81570),C=r(77193),S=r(25767),M=r(31060),U=r(80662),R=r.n(U),E=r(36443),D=r.n(E),L=r(61499),F=r(12264),O=r(29170),N=r(63939),z=r(50932),W=r(9599),V=r(44527),G=r(9705),j=r(84149),q=r(44315),H=r(24175),Y=r(75),Q=r(37837),K=r(79630),X=r(4624),J=r(84290),$=r(39148),Z=r(72739),ee=r(44328),te=r(77231),re=r(43607);function ne(e,t){var r=void 0!==y()&&e[x()]||e["@@iterator"];if(!r){if(_()(e)||(r=function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?g()(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ae(e,t){var r=s()(e);if(u()){var n=u()(e);t&&(n=n.filter((function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){(0,T.A)(e,t,r[t])})):d()?p()(e,d()(r)):ae(Object(r)).forEach((function(t){m()(e,t,f()(r,t))}))}return e}function oe(e,t,r){return t=(0,S.A)(t),(0,C.A)(e,ue()?i()(t,r||[],(0,S.A)(e).constructor):t.apply(e,r))}function ue(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}var ce="src/avpipeline/DemuxPipeline.ts",fe=-1,he=function(e){function t(){return(0,I.A)(this,t),oe(this,t)}var n,i,a,s,o,u,c,f,h,d;return(0,M.A)(t,e),(0,B.A)(t,[{key:"judgeFormat",value:(d=(0,P.A)(D().mark((function e(t){var r,n,i,a=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:-1,e.next=3,t.peekString(8);case 3:if(n=e.sent,!/^FLV/.test(n)){e.next=8;break}return e.abrupt("return",0);case 8:if(!/^DKIF/.test(n)){e.next=12;break}return e.abrupt("return",4);case 12:if(!/^ftyp/.test(n.slice(4,8))){e.next=16;break}return e.abrupt("return",1);case 16:if(!/^OggS/.test(n)){e.next=20;break}return e.abrupt("return",3);case 20:if(!/^ID3/.test(n)){e.next=24;break}return e.abrupt("return",8);case 24:if(!/^fLaC/.test(n)){e.next=28;break}return e.abrupt("return",11);case 28:if(!/^RIFF/.test(n)){e.next=36;break}return e.next=31,t.peekString(12);case 31:if(i=e.sent.slice(8),!/^WAVE/.test(i)){e.next=34;break}return e.abrupt("return",10);case 34:e.next=41;break;case 36:return e.next=38,t.peekUint32();case 38:if(e.t0=e.sent,440786851!==e.t0){e.next=41;break}return e.abrupt("return",5);case 41:return e.abrupt("return",r);case 42:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"createTask",value:function(e){var t,r;if(e.mainTaskId){var n=this.tasks.get(e.mainTaskId);t=n.leftIPCPort,r=n.controlIPCPort}else t=new j.Ay(e.leftPort),e.controlPort&&(r=new j.Ay(e.controlPort));var i=e.bufferLength||1048576,a=(0,Q.sY)(i);if(!a)return G.gR;var s=new K.A(a,i),o=new H.A(i,!0,s);e.isLive||(o.flags|=1),e.flags&&(o.flags|=e.flags),o.onFlush=function(){var r=(0,P.A)(D().mark((function r(n){var i,a;return D().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={pointer:n.byteOffset,length:n.length},e.ioloaderOptions&&(i.ioloaderOptions=e.ioloaderOptions),r.prev=2,r.next=5,t.request("read",i);case 5:return a=r.sent,r.abrupt("return",a);case 9:return r.prev=9,r.t0=r.catch(2),r.abrupt("return",-1048574);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}(),o.onSeek=function(){var r=(0,P.A)(D().mark((function r(n){var i;return D().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i={pos:n},e.ioloaderOptions&&(i.ioloaderOptions=e.ioloaderOptions),r.next=5,t.request("seek",i);case 5:return r.abrupt("return",0);case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",-1048574);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}(),o.onSize=(0,P.A)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.request("size");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",BigInt(-1048574));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));var u=(0,q.Xv)();return u.ioReader=o,u.getDecoderResource=function(){var e=(0,P.A)(D().mark((function e(t,n){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",r.request("getDecoderResource",{codecId:n,mediaType:t}));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.tasks.set(e.taskId,se(se({},e),{},{leftIPCPort:t,rightIPCPorts:new(R()),controlIPCPort:r,formatContext:u,ioReader:o,buffer:a,cacheAVPackets:new(R()),cacheRequests:new(R()),realFormat:-1,demuxEnded:!1,loop:null,gopCounter:0,lastKeyFramePts:BigInt(0),lastAudioDts:BigInt(0),lastVideoDts:BigInt(0),avpacketPool:new J.A((0,O.A)(e.avpacketList,F.A),e.avpacketListMutex)})),0}},{key:"openStream",value:(h=(0,P.A)(D().mark((function e(t){var n,i,a,s,o=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:2e3,!(i=this.tasks.get(t))){e.next=75;break}return e.next=5,i.leftIPCPort.request("open");case 5:return e.prev=5,e.next=8,this.judgeFormat(i.ioReader,i.format);case 8:a=e.sent,i.format=a,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",G.LR);case 15:e.t1=a,e.next=0===e.t1?18:1===e.t1?23:2===e.t1?28:4===e.t1?33:3===e.t1?38:8===e.t1?43:5===e.t1||6===e.t1?48:9===e.t1?53:11===e.t1?58:10===e.t1?63:68;break;case 18:return e.next=20,r.e(531).then(r.bind(r,28773));case 20:return e.t2=e.sent.default,s=new e.t2,e.abrupt("break",70);case 23:return e.next=25,r.e(809).then(r.bind(r,92047));case 25:return e.t3=e.sent.default,s=new e.t3,e.abrupt("break",70);case 28:return e.next=30,r.e(905).then(r.bind(r,59331));case 30:return e.t4=e.sent.default,s=new e.t4,e.abrupt("break",70);case 33:return e.next=35,r.e(634).then(r.bind(r,16634));case 35:return e.t5=e.sent.default,s=new e.t5,e.abrupt("break",70);case 38:return e.next=40,r.e(473).then(r.bind(r,69979));case 40:return e.t6=e.sent.default,s=new e.t6,e.abrupt("break",70);case 43:return e.next=45,r.e(157).then(r.bind(r,6839));case 45:return e.t7=e.sent.default,s=new e.t7,e.abrupt("break",70);case 48:return e.next=50,r.e(941).then(r.bind(r,34577));case 50:return e.t8=e.sent.default,s=new e.t8,e.abrupt("break",70);case 53:return e.next=55,r.e(94).then(r.bind(r,47094));case 55:return e.t9=e.sent.default,s=new e.t9,e.abrupt("break",70);case 58:return e.next=60,r.e(391).then(r.bind(r,18453));case 60:return e.t10=e.sent.default,s=new e.t10,e.abrupt("break",70);case 63:return e.next=65,r.e(197).then(r.bind(r,3791));case 65:return e.t11=e.sent.default,s=new e.t11,e.abrupt("break",70);case 68:return X.z3("format not support",ce,372),e.abrupt("return",G.E$);case 70:return i.realFormat=a,i.formatContext.iformat=s,e.abrupt("return",Y.ho(i.formatContext,{maxAnalyzeDuration:n,fastOpen:i.isLive}));case 75:X.h2("task not found",ce,387);case 76:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(e){return h.apply(this,arguments)})},{key:"getFormat",value:(f=(0,P.A)(D().mark((function e(t){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=5;break}return e.abrupt("return",r.realFormat);case 5:X.h2("task not found",ce,397);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"analyzeStreams",value:(c=(0,P.A)(D().mark((function e(t){var r,n,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=9;break}return e.next=4,Y.Ib(r.formatContext);case 4:for(n=[],i=0;i<r.formatContext.streams.length;i++)a=r.formatContext.streams[i],n.push({index:a.index,id:a.id,codecpar:a.codecpar[L.o9],nbFrames:a.nbFrames,metadata:a.metadata,duration:a.duration,startTime:a.startTime,disposition:a.disposition,timeBase:a.timeBase[L.o9]});return e.abrupt("return",{metadata:r.formatContext.metadata,format:r.realFormat,chapters:r.formatContext.chapters,streams:n});case 9:X.h2("task not found",ce,430);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"connectStreamTask",value:(u=(0,P.A)(D().mark((function e(t,r,n){var i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=this.tasks.get(t))?(a=new j.Ay(n),i.cacheAVPackets.set(r,[]),a.on(j.S3,function(){var e=(0,P.A)(D().mark((function e(t){var n,s;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.method,e.next="pull"===e.t0?3:6;break;case 3:return(n=i.cacheAVPackets.get(r)).length?(s=n.shift(),1===i.formatContext.streams[N.f[15](s+32)].codecpar.codecType?z.M[15](i.stats+32,N.f[15](i.stats+32)-1):0===i.formatContext.streams[N.f[15](s+32)].codecpar.codecType&&z.M[15](i.stats+120,N.f[15](i.stats+120)-1),a.reply(t,s)):i.demuxEnded?a.reply(t,-1048576):(i.cacheRequests.set(r,t),i.loop&&i.loop.isStarted()&&i.loop.resetInterval()),e.abrupt("break",6);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.rightIPCPorts.set(r,a),X.Yz("connect stream ".concat(r,", taskId: ").concat(i.taskId),ce,472)):X.h2("task not found",ce,475);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return u.apply(this,arguments)})},{key:"startDemux",value:(o=(0,P.A)(D().mark((function e(t,r,n){var i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=this.tasks.get(t))?(n=Math.max(n,2===i.format?20:10),i.loop&&i.loop.destroy(),i.loop=new $.A((0,P.A)(D().mark((function e(){var a,s,o,u,c,f,h,d,l;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=6;break}if(a=!1,i.cacheAVPackets.forEach((function(e){e.length<n&&(a=!0)})),a){e.next=6;break}return i.loop.emptyTask(),e.abrupt("return");case 6:return s=i.avpacketPool.alloc(),e.next=9,Y.Cj(i.formatContext,s);case 9:if(o=e.sent){i.avpacketPool.release(s),-1048576!==o&&X.z3("demux error, ret: ".concat(o,", taskId: ").concat(t),ce,606),i.demuxEnded=!0,X.pq("demuxer ended, taskId: ".concat(i.taskId),ce,611),h=ne(i.cacheRequests.keys());try{for(h.s();!(d=h.n()).done;)l=d.value,i.cacheAVPackets.get(l).length||(i.rightIPCPorts.get(l).reply(i.cacheRequests.get(l),-1048576),i.cacheRequests.delete(l))}catch(e){h.e(e)}finally{h.f()}i.loop.stop()}else u=N.f[15](s+32),1===i.formatContext.streams[u].codecpar.codecType&&i.cacheAVPackets.has(u)?(z.M[17](i.stats+24,N.f[17](i.stats+24)+BigInt(1)),z.M[17](i.stats+16,N.f[17](i.stats+16)+BigInt(N.f[15](s+28)>>>0)),N.f[17](i.stats+24)>1&&N.f[17](s+16)>i.lastAudioDts&&((c=i.cacheAVPackets.get(u))&&c.length?z.M[15](i.stats+236,Math.round(N.f[15](s+76)/N.f[15](s+72)/((0|Number(N.f[17](s+16)-N.f[17](c[0]+16)&0xffffffffn))/c.length))):z.M[15](i.stats+236,Math.round(N.f[15](s+76)/N.f[15](s+72)/(0|Number(N.f[17](s+16)-i.lastAudioDts&0xffffffffn))))),i.lastAudioDts=N.f[17](s+16)):0===i.formatContext.streams[u].codecpar.codecType&&i.cacheAVPackets.has(u)&&(z.M[17](i.stats+112,N.f[17](i.stats+112)+BigInt(1)),z.M[17](i.stats+104,N.f[17](i.stats+104)+BigInt(N.f[15](s+28)>>>0)),1&N.f[15](s+36)?(z.M[17](i.stats+176,N.f[17](i.stats+176)+BigInt(1)),N.f[17](i.stats+176)>1&&N.f[17](s+8)>i.lastKeyFramePts&&(z.M[15](i.stats+96,i.gopCounter),i.gopCounter=1,z.M[15](i.stats+92,0|Number(0xffffffffn&(0,ee.k)(N.f[17](s+8)-i.lastKeyFramePts,(0,O.A)(s+72,W.P),te.i0)))),i.lastKeyFramePts=N.f[17](s+8)):i.gopCounter++,N.f[17](i.stats+112)>1&&N.f[17](s+16)>i.lastVideoDts&&((f=i.cacheAVPackets.get(u))&&f.length?z.M[15](i.stats+224,Math.round(N.f[15](s+76)/N.f[15](s+72)/((0|Number(N.f[17](s+16)-N.f[17](f[0]+16)&0xffffffffn))/f.length))):z.M[15](i.stats+224,Math.round(N.f[15](s+76)/N.f[15](s+72)/(0|Number(N.f[17](s+16)-i.lastVideoDts&0xffffffffn))))),i.lastVideoDts=N.f[17](s+16)),i.cacheRequests.has(u)?(i.rightIPCPorts.get(u).reply(i.cacheRequests.get(u),s),i.cacheRequests.delete(u)):i.cacheAVPackets.has(u)?(i.cacheAVPackets.get(u).push(s),1===i.formatContext.streams[u].codecpar.codecType?z.M[15](i.stats+32,N.f[15](i.stats+32)+1):0===i.formatContext.streams[u].codecpar.codecType&&z.M[15](i.stats+120,N.f[15](i.stats+120)+1)):i.rightIPCPorts.has(fe)?i.cacheRequests.has(fe)?(i.rightIPCPorts.get(fe).reply(i.cacheRequests.get(fe),s),i.cacheRequests.delete(fe)):i.cacheAVPackets.get(fe).push(s):i.avpacketPool.release(s);case 11:case"end":return e.stop()}}),e)}))),0,0,!0,!1),i.loop.start(),X.Yz("start demux loop, taskId: ".concat(i.taskId),ce,626)):X.h2("task not found",ce,629);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return o.apply(this,arguments)})},{key:"seek",value:(s=(0,P.A)(D().mark((function e(t,r,n){var i,a,s,o,u,c;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=this.tasks.get(t))){e.next=46;break}if(!i.loop){e.next=39;break}return e.next=5,i.loop.stopBeforeNextTick();case 5:return e.next=7,Y.jF(i.formatContext,-1,r,n);case 7:if(!((a=e.sent)>=BigInt(0))){e.next=36;break}i.cacheAVPackets.forEach((function(e){Z.__(e,(function(e){i.avpacketPool.release(e)})),e.length=0})),z.M[15](i.stats+32,0),z.M[15](i.stats+120,0),s=i.avpacketPool.alloc();case 13:return e.next=16,Y.Cj(i.formatContext,s);case 16:if(!((a=e.sent)<0||i.cacheAVPackets.has(N.f[15](s+32)))){e.next=19;break}return e.abrupt("break",21);case 19:e.next=13;break;case 21:if(!(a>=0)){e.next=32;break}return i.demuxEnded=!1,o=N.f[15](s+32),i.cacheAVPackets.get(o).push(s),1===i.formatContext.streams[N.f[15](s+32)].codecpar.codecType?z.M[15](i.stats+32,N.f[15](i.stats+32)+1):0===i.formatContext.streams[N.f[15](s+32)].codecpar.codecType&&z.M[15](i.stats+120,N.f[15](i.stats+120)+1),i.loop.start(),u=N.f[17](s+8),i.formatContext.streams[o].startTime!==te.Dh?u-=i.formatContext.streams[o].startTime:u-=i.formatContext.streams[o].firstDTS,e.abrupt("return",(0,ee.k)(re.T9(u,BigInt(0)),(0,O.A)(s+72,W.P),te.i0));case 32:return X.R8("got first packet failed after seek, taskId: ".concat(i.taskId),ce,682),i.avpacketPool.release(s),i.demuxEnded=!0,e.abrupt("return",r);case 36:return e.abrupt("return",a);case 39:return X.pq("seek before demux loop start",ce,693),e.next=42,Y.jF(i.formatContext,-1,r,n);case 42:if(!((c=e.sent)<0)){e.next=45;break}return e.abrupt("return",c);case 45:return e.abrupt("return",r);case 46:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return s.apply(this,arguments)})},{key:"croppingAVPacketQueue",value:(a=(0,P.A)(D().mark((function e(t,r){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))&&n.cacheAVPackets.forEach((function(e,t){var i=N.f[17](e[e.length-1]+16),a=e.length-2;for(a=e.length-2;a>=0&&!(1&N.f[15](e[a]+36)&&(0,ee.k)(i-N.f[17](e[a]+16),(0,O.A)(e[a]+72,W.P),te.i0)>=r);a--);a>0&&(e.splice(0,a).forEach((function(e){n.avpacketPool.release(e)})),1===n.formatContext.streams[t].codecpar.codecType?z.M[15](n.stats+32,e.length):0===n.formatContext.streams[t].codecpar.codecType&&z.M[15](n.stats+120,e.length))}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"registerTask",value:(i=(0,P.A)(D().mark((function e(t){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tasks.has(t.taskId)){e.next=2;break}return e.abrupt("return",G.lh);case 2:return e.abrupt("return",this.createTask(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"unregisterTask",value:(n=(0,P.A)(D().mark((function e(t){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=13;break}if(!r.loop){e.next=6;break}return e.next=5,r.loop.stopBeforeNextTick();case 5:r.loop.destroy();case 6:r.leftIPCPort.destroy(),r.rightIPCPorts.forEach((function(e){e.destroy()})),r.rightIPCPorts.clear(),r.formatContext.destroy(),(0,Q.Eb)(r.buffer),r.cacheAVPackets.forEach((function(e){e.forEach((function(e){r.avpacketPool.release(e)}))})),this.tasks.delete(t);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),t}(V.A)},87243:(e,t,r)=>{"use strict";r.d(t,{A:()=>z});var n=r(88435),i=r.n(n),a=r(69736),s=r.n(a),o=r(44301),u=r.n(o),c=r(82731),f=r.n(c),h=r(59614),d=r.n(h),l=r(969),p=r.n(l),v=r(66681),m=r.n(v),A=r(134),g=r(25182),k=r(78716),y=r(81570),b=r(77193),x=r(25767),w=r(31060),_=r(36443),T=r.n(_),P=r(63939),I=r(50932),B=r(44527),C=r(77580),S=r(9705),M=r(84149),U=r(14686),R=r(79686),E=r(4624);function D(e,t){var r=s()(e);if(u()){var n=u()(e);t&&(n=n.filter((function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,A.A)(e,t,r[t])})):d()?p()(e,d()(r)):D(Object(r)).forEach((function(t){m()(e,t,f()(r,t))}))}return e}function F(e,t,r){return t=(0,x.A)(t),(0,b.A)(e,O()?i()(t,r||[],(0,x.A)(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}var N="src/avpipeline/IOPipeline.ts",z=function(e){function t(){return(0,k.A)(this,t),F(this,t)}var n,i,a,s,o,u,c,f,h,d,l,p,v,m,A;return(0,w.A)(t,e),(0,y.A)(t,[{key:"createTask",value:(A=(0,g.A)(T().mark((function e(t){var n,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=0===e.t0?3:1===e.t0?5:2===e.t0?7:3===e.t0?13:19;break;case 3:return n=new C.A(t.options),e.abrupt("break",19);case 5:return n=new R.A(t.options),e.abrupt("break",19);case 7:return e.next=9,r.e(866).then(r.bind(r,15433));case 9:return e.t1=e.sent.default,e.t2=t.options,n=new e.t1(e.t2),e.abrupt("break",19);case 13:return e.next=15,r.e(576).then(r.bind(r,41576));case 15:return e.t3=e.sent.default,e.t4=t.options,n=new e.t3(e.t4),e.abrupt("break",19);case 19:if(n){e.next=21;break}return e.abrupt("return",S.UY);case 21:return i=new M.Ay(t.rightPort),a=L(L({},t),{},{ioLoader:n,ipcPort:i}),i.on(M.S3,function(){var e=(0,g.A)(T().mark((function e(r){var s,o,u,c,f,h,d;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.method,e.next="open"===e.t0?3:"read"===e.t0?14:"seek"===e.t0?31:"size"===e.t0?44:51;break;case 3:return e.prev=3,e.next=6,n.open(t.info,t.range);case 6:i.reply(r,{}),e.next=13;break;case 9:e.prev=9,e.t1=e.catch(3),E.z3("loader open error, ".concat(e.t1,", taskId: ").concat(t.taskId),N,118),i.reply(r,null,e.t1);case 13:return e.abrupt("break",51);case 14:return s=r.params.pointer,o=r.params.length,u=r.params.ioloaderOptions,c=(0,U.JW)(s,o),e.prev=18,e.next=21,n.read(c,u);case 21:f=e.sent,I.M[17](a.stats+192,P.f[17](a.stats+192)+BigInt(f>>>0)),i.reply(r,f),e.next=30;break;case 26:e.prev=26,e.t2=e.catch(18),E.z3("loader read error, ".concat(e.t2,", taskId: ").concat(t.taskId),N,139),i.reply(r,S.LR);case 30:return e.abrupt("break",51);case 31:return h=r.params.pos,d=r.params.ioloaderOptions,e.prev=33,e.next=36,n.seek(h,d);case 36:i.reply(r),e.next=43;break;case 39:e.prev=39,e.t3=e.catch(33),E.z3("loader seek error, ".concat(e.t3,", taskId: ").concat(t.taskId),N,157),i.reply(r,null,e.t3);case 43:return e.abrupt("break",51);case 44:return e.t4=i,e.t5=r,e.next=48,n.size();case 48:return e.t6=e.sent,e.t4.reply.call(e.t4,e.t5,e.t6),e.abrupt("break",51);case 51:case"end":return e.stop()}}),e,null,[[3,9],[18,26],[33,39]])})));return function(t){return e.apply(this,arguments)}}()),this.tasks.set(t.taskId,a),e.abrupt("return",0);case 26:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"open",value:(m=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=5;break}return e.next=4,r.ioLoader.open(r.info,r.range);case 4:return e.abrupt("return",0);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getDuration",value:(v=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=5;break}if(2!==r.type&&3!==r.type){e.next=4;break}return e.abrupt("return",r.ioLoader.getDuration());case 4:return e.abrupt("return",0);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"hasAudio",value:(p=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=5;break}if(3!==r.type){e.next=4;break}return e.abrupt("return",r.ioLoader.hasAudio());case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"hasVideo",value:(l=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=5;break}if(3!==r.type){e.next=4;break}return e.abrupt("return",r.ioLoader.hasVideo());case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"hasSubtitle",value:(d=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=5;break}if(3!==r.type){e.next=4;break}return e.abrupt("return",r.ioLoader.hasSubtitle());case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getVideoList",value:(h=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=9;break}if(3!==r.type){e.next=6;break}return e.abrupt("return",r.ioLoader.getVideoList());case 6:if(2!==r.type){e.next=8;break}return e.abrupt("return",r.ioLoader.getVideoList());case 8:return e.abrupt("return",{list:[],selectedIndex:0});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"getAudioList",value:(f=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=5;break}if(3!==r.type){e.next=4;break}return e.abrupt("return",r.ioLoader.getAudioList());case 4:return e.abrupt("return",{list:[],selectedIndex:0});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"getSubtitleList",value:(c=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=5;break}if(3!==r.type){e.next=4;break}return e.abrupt("return",r.ioLoader.getSubtitleList());case 4:return e.abrupt("return",{list:[],selectedIndex:0});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"selectVideo",value:(u=(0,g.A)(T().mark((function e(t,r){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.tasks.get(t))){e.next=8;break}if(3!==n.type){e.next=6;break}n.ioLoader.selectVideo(r),e.next=8;break;case 6:if(2!==n.type){e.next=8;break}return e.abrupt("return",n.ioLoader.selectVideo(r));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"selectAudio",value:(o=(0,g.A)(T().mark((function e(t,r){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))&&3===n.type&&n.ioLoader.selectAudio(r);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"selectSubtitle",value:(s=(0,g.A)(T().mark((function e(t,r){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))&&3===n.type&&n.ioLoader.selectSubtitle(r);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"getMinBuffer",value:(a=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=7;break}if(3!==r.type){e.next=4;break}return e.abrupt("return",r.ioLoader.getMinBuffer());case 4:if(2!==r.type){e.next=6;break}return e.abrupt("return",r.ioLoader.getMinBuffer());case 6:return e.abrupt("return",0);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"registerTask",value:(i=(0,g.A)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tasks.has(t.taskId)){e.next=2;break}return e.abrupt("return",S.lh);case 2:return e.abrupt("return",this.createTask(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"unregisterTask",value:(n=(0,g.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=6;break}return e.next=4,r.ioLoader.stop();case 4:r.ipcPort.destroy(),this.tasks.delete(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),t}(B.A)},44527:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(80662),f=r.n(c),h=r(42096),d=r.n(h),l=r(75062),p=r.n(l),v=r(16091),m=r.n(v),A=r(68632),g=r.n(A),k=r(4624);function y(e,t){var r=void 0!==p()&&e[m()]||e["@@iterator"];if(!r){if(g()(e)||(r=function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?d()(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=function(){function e(){(0,i.A)(this,e),(0,s.A)(this,"tasks",void 0),this.tasks=new(f())}var t,r,o;return(0,a.A)(e,[{key:"clear",value:(o=(0,n.A)(u().mark((function e(){var t,r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tasks.size){e.next=18;break}t=y(this.tasks.keys()),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=10;break}return n=r.value,e.next=8,this.unregisterTask(n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(){return o.apply(this,arguments)})},{key:"setLogLevel",value:(r=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.V$(t);case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"getTaskCount",value:(t=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.tasks.size);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},31138:(e,t,r)=>{"use strict";r.d(t,{A:()=>Z});var n=r(88435),i=r.n(n),a=r(69736),s=r.n(a),o=r(44301),u=r.n(o),c=r(82731),f=r.n(c),h=r(59614),d=r.n(h),l=r(969),p=r.n(l),v=r(66681),m=r.n(v),A=r(25182),g=r(134),k=r(78716),y=r(81570),b=r(77193),x=r(25767),w=r(31060),_=r(36443),T=r.n(_),P=r(54001),I=r.n(P),B=r(63939),C=r(50932),S=r(12264),M=r(29170),U=r(9599),R=r(44527),E=r(9705),D=r(84149),L=r(40417),F=r(71039),O=r(4624),N=r(16041),z=r(67672),W=r(72739),V=r(13724),G=r(84290),j=r(39638),q=r(44328),H=r(86932),Y=r(95797);function Q(e,t){var r=s()(e);if(u()){var n=u()(e);t&&(n=n.filter((function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,g.A)(e,t,r[t])})):d()?p()(e,d()(r)):Q(Object(r)).forEach((function(t){m()(e,t,f()(r,t))}))}return e}function X(e,t,r){return t=(0,x.A)(t),(0,b.A)(e,J()?i()(t,r||[],(0,x.A)(e).constructor):t.apply(e,r))}function J(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}var $="src/avpipeline/VideoDecodePipeline.ts",Z=function(e){function t(){return(0,k.A)(this,t),X(this,t)}var r,n,i,a,s,o,u;return(0,w.A)(t,e),(0,y.A)(t,[{key:"createWebcodecDecoder",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new F.A({onError:function(r){if(e.hardwareRetryCount>3||!e.firstDecoded)e.targetDecoder===e.hardwareDecoder&&(e.targetDecoder=e.softwareDecoder,e.hardwareDecoder.close(),e.hardwareDecoder=null,e.decoderReady=t.openSoftwareDecoder(e),O.R8("video decode error width hardware(".concat(e.hardwareRetryCount,"), taskId: ").concat(e.taskId,", error: ").concat(r,", try to fallback to software decoder"),$,116));else{e.hardwareRetryCount++;try{O.pq("retry open hardware decoder(".concat(e.hardwareRetryCount,"), taskId: ").concat(e.taskId),$,122),e.decoderReady=e.hardwareDecoder.open(e.parameters)}catch(r){O.R8("retry open hardware decoder failed, fallback to software decoder, taskId: ".concat(e.taskId),$,126)}}e.needKeyFrame=!0,e.leftIPCPort.request("requestKeyframe")},onReceiveFrame:function(t){e.firstDecoded=!0,e.frameCaches.push(t),C.M[17](e.stats+144,B.f[17](e.stats+144)+BigInt(1)),e.lastDecodeTimestamp&&C.M[15](e.stats+248,Math.max((0,H.A)()-e.lastDecodeTimestamp,B.f[15](e.stats+248))),e.lastDecodeTimestamp=(0,H.A)()},enableHardwareAcceleration:r})}},{key:"createTask",value:function(e){var t=this,r=new D.Ay(e.leftPort),n=new D.Ay(e.rightPort),i=[],a=new N.A((0,M.A)(e.avframeList,S.A),e.avframeListMutex),s=K(K({},e),{},{leftIPCPort:r,rightIPCPort:n,softwareDecoder:null,hardwareDecoder:null,frameCaches:i,inputEnd:!1,targetDecoder:null,needKeyFrame:!0,parameters:0,hardwareRetryCount:0,lastDecodeTimestamp:0,firstDecoded:!1,decoderReady:null,softwareDecoderOpened:!1,avframePool:a,avpacketPool:new G.A((0,M.A)(e.avpacketList,S.A),e.avpacketListMutex)});return s.softwareDecoder=e.resource?new L.A({resource:e.resource,onError:function(r){O.z3("video decode error, taskId: ".concat(e.taskId,", error: ").concat(r),$,184);var n=t.tasks.get(e.taskId);n.openReject&&(n.openReject(E.r8),n.openReject=null)},onReceiveFrame:function(e){s.firstDecoded=!0,i.push(e),C.M[17](s.stats+144,B.f[17](s.stats+144)+BigInt(1)),s.lastDecodeTimestamp&&C.M[15](s.stats+248,Math.max((0,H.A)()-s.lastDecodeTimestamp,B.f[15](s.stats+248))),s.lastDecodeTimestamp=(0,H.A)()},avframePool:a}):Y.A.videoDecoder?this.createWebcodecDecoder(s,!1):null,s.softwareDecoder?(Y.A.videoDecoder&&e.enableHardware&&(s.hardwareDecoder=this.createWebcodecDecoder(s)),s.targetDecoder=s.hardwareDecoder||s.softwareDecoder,this.tasks.set(e.taskId,s),n.on(D.S3,function(){var a=(0,A.A)(T().mark((function a(o){var u,c,f,h,d,l;return T().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=o.method,a.next="pull"===a.t0?3:98;break;case 3:if(!i.length){a.next=9;break}return u=i.shift(),n.reply(o,u,null,z.ai(u)?null:[u]),a.abrupt("break",98);case 9:if(s.inputEnd){a.next=95;break}case 10:if(!i.length){a.next=15;break}return c=i.shift(),n.reply(o,c,null,z.ai(c)?null:[c]),a.abrupt("break",94);case 15:if(!s.decoderReady){a.next=19;break}return a.next=18,s.decoderReady;case 18:s.decoderReady=null;case 19:return a.next=21,r.request("pull");case 21:if(-1048576!==(f=a.sent)){a.next=47;break}if(s.targetDecoder!==s.hardwareDecoder){a.next=30;break}return a.next=26,I().race([new V.A(2),s.targetDecoder.flush()]);case 26:h=a.sent,z.ai(h)&&O.R8("video hardware decoder flush failed, ignore it, taskId: ".concat(s.taskId),$,251),a.next=32;break;case 30:return a.next=32,s.targetDecoder.flush();case 32:if(s.inputEnd=!0,s.targetDecoder!==s.hardwareDecoder){a.next=36;break}return a.next=36,new V.A(0);case 36:if(!i.length){a.next=42;break}return d=i.shift(),n.reply(o,d,null,s.targetDecoder===s.hardwareDecoder?[d]:null),a.abrupt("break",94);case 42:return O.pq("video decoder ended, taskId: ".concat(s.taskId),$,268),n.reply(o,-1048576),a.abrupt("break",94);case 45:a.next=92;break;case 47:if(!(f>0)){a.next=89;break}if(!s.needKeyFrame){a.next=55;break}if(!(1&B.f[15](f+36))){a.next=53;break}s.needKeyFrame=!1,a.next=55;break;case 53:return s.avpacketPool.release(f),a.abrupt("continue",10);case 55:if(!((l=s.targetDecoder.decode(f))<0)){a.next=80;break}if(C.M[15](s.stats+136,B.f[15](s.stats+136)+1),s.targetDecoder!==s.hardwareDecoder||!s.softwareDecoder){a.next=76;break}return s.targetDecoder=s.softwareDecoder,s.hardwareDecoder.close(),s.hardwareDecoder=null,a.next=64,t.openSoftwareDecoder(s);case 64:if(O.R8("video decode error width hardware, taskId: ".concat(s.taskId,", error: ").concat(l,", try to fallback to software decoder"),$,297),!(1&B.f[15](f+36))){a.next=72;break}if(!((l=s.targetDecoder.decode(f))>=0)){a.next=70;break}return s.avpacketPool.release(f),a.abrupt("continue",10);case 70:a.next=76;break;case 72:return s.avpacketPool.release(f),s.needKeyFrame=!0,s.leftIPCPort.request("requestKeyframe"),a.abrupt("continue",10);case 76:return s.avpacketPool.release(f),O.z3("video decode error, taskId: ".concat(e.taskId,", ret: ").concat(l),$,313),n.reply(o,l),a.abrupt("break",94);case 80:s.avpacketPool.release(f);case 81:if(!(s.targetDecoder===s.hardwareDecoder&&s.hardwareDecoder.getQueueLength()>20)){a.next=86;break}return a.next=84,new V.A(0);case 84:a.next=81;break;case 86:return a.abrupt("continue",10);case 89:return O.z3("video decode pull avpacket error, taskId: ".concat(e.taskId,", ret: ").concat(f),$,327),n.reply(o,f),a.abrupt("break",94);case 92:a.next=10;break;case 94:return a.abrupt("break",98);case 95:return O.pq("video decoder ended, taskId: ".concat(s.taskId),$,334),n.reply(o,-1048576),a.abrupt("break",98);case 98:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),0):(O.z3("software decoder not support",$,208),E.lh)}},{key:"openSoftwareDecoder",value:(u=(0,A.A)(T().mark((function e(t){var r,n,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.softwareDecoder||t.softwareDecoderOpened){e.next=7;break}return r=t.parameters,n=1,(0,j.A)()&&(i=B.f[15](r+56)*B.f[15](r+60),a=(0,q.lb)((0,M.A)(r+72,U.P)),i>=2073600&&i<=2211840?(173!==B.f[15](r+4)&&196!==B.f[15](r+4)&&225!==B.f[15](r+4)||(n=2),a>30?(n=2,173!==B.f[15](r+4)&&196!==B.f[15](r+4)&&225!==B.f[15](r+4)||(n=4)):a>60&&(n=4,173!==B.f[15](r+4)&&196!==B.f[15](r+4)&&225!==B.f[15](r+4)||(n=6))):i>2211840&&i<=8294400?(n=4,173!==B.f[15](r+4)&&196!==B.f[15](r+4)&&225!==B.f[15](r+4)||(n=6)):i>8294400&&(n=6,173!==B.f[15](r+4)&&196!==B.f[15](r+4)&&225!==B.f[15](r+4)||(n=8)),n=Math.min(n,navigator.hardwareConcurrency)),e.next=6,t.softwareDecoder.open(r,n);case 6:t.softwareDecoderOpened=!0;case 7:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"open",value:(o=(0,A.A)(T().mark((function e(t,r){var n,i=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.tasks.get(t))){e.next=3;break}return e.abrupt("return",new(I())(function(){var e=(0,A.A)(T().mark((function e(t,a){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.openReject=t,!n.hardwareDecoder){e.next=13;break}return e.prev=2,e.next=5,n.hardwareDecoder.open(r);case 5:e.next=13;break;case 7:e.prev=7,e.t0=e.catch(2),O.z3("cannot open hardware decoder, ".concat(e.t0),$,413),n.hardwareDecoder.close(),n.hardwareDecoder=null,n.targetDecoder=n.softwareDecoder;case 13:if(n.parameters=r,n.targetDecoder!==n.softwareDecoder){e.next=26;break}return e.prev=15,e.next=18,i.openSoftwareDecoder(n);case 18:e.next=26;break;case 20:if(e.prev=20,e.t1=e.catch(15),O.z3("open video software decoder failed, error: ".concat(e.t1),$,427),n.hardwareDecoder){e.next=26;break}return t(E.r8),e.abrupt("return");case 26:t(0);case 27:case"end":return e.stop()}}),e,null,[[2,7],[15,20]])})));return function(t,r){return e.apply(this,arguments)}}()));case 3:O.h2("task not found",$,437);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"setPlayRate",value:(s=(0,A.A)(T().mark((function e(t,r){var n,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))&&n.softwareDecoder?(-16,a=(0,q.lb)((0,M.A)(n.parameters+72,U.P)),i=a>=120?r<=1?-16:r<1.5||r<3?8:32:a>=60?r<1.5?-16:r<3?8:r<8?24:32:-16,n.softwareDecoder.setSkipFrameDiscard(i)):O.h2("task not found",$,481);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"resetTask",value:(a=(0,A.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=19;break}if(r.targetDecoder!==r.softwareDecoder){e.next=7;break}return e.next=5,r.targetDecoder.flush();case 5:e.next=13;break;case 7:if(r.targetDecoder!==r.hardwareDecoder){e.next=13;break}return r.hardwareDecoder.close(),r.hardwareDecoder=this.createWebcodecDecoder(r),e.next=12,r.hardwareDecoder.open(r.parameters);case 12:r.targetDecoder=r.hardwareDecoder;case 13:W.__(r.frameCaches,(function(e){z.ai(e)?r.avframePool.release(e):e.close()})),r.frameCaches.length=0,r.needKeyFrame=!0,r.inputEnd=!1,r.lastDecodeTimestamp=(0,H.A)(),O.pq("reset video decoder, taskId: ".concat(r.taskId),$,511);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"registerTask",value:(i=(0,A.A)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tasks.has(t.taskId)){e.next=2;break}return e.abrupt("return",E.lh);case 2:return e.abrupt("return",this.createTask(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"unregisterTask",value:(n=(0,A.A)(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))&&(r.rightPort.close(),r.leftPort.close(),r.softwareDecoder&&r.softwareDecoder.close(),r.hardwareDecoder&&r.hardwareDecoder.close(),r.frameCaches.forEach((function(e){z.ai(e)?r.avframePool.release(e):e.close()})),this.tasks.delete(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getTasksInfo",value:(r=(0,A.A)(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.tasks.forEach((function(e){t.push({codecId:B.f[15](e.parameters+4),width:B.f[15](e.parameters+56),height:B.f[15](e.parameters+60),framerate:(0,q.lb)((0,M.A)(e.parameters+72,U.P)),hardware:e.targetDecoder===e.hardwareDecoder})})),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),t}(R.A)},33968:(e,t,r)=>{"use strict";r.d(t,{A:()=>he});var n=r(88435),i=r.n(n),a=r(69736),s=r.n(a),o=r(44301),u=r.n(o),c=r(82731),f=r.n(c),h=r(59614),d=r.n(h),l=r(969),p=r.n(l),v=r(66681),m=r.n(v),A=r(134),g=r(25182),k=r(78716),y=r(81570),b=r(77193),x=r(25767),w=r(31060),_=r(54001),T=r.n(_),P=r(36443),I=r.n(P),B=r(12264),C=r(29170),S=r(63939),M=r(50932),U=r(44527),R=r(9705),E=r(84149),D=r(67672),L=r(72739),F=r(16041),O=r(95797),N=r(39148),z=r(86932),W=r(44328),V=r(77231),G=r(86834),j=r(4624),q=r(43607),H=r(88103),Y=r(54750),Q=r(55196),K=r(43813),X=r(99293),J=r(37977),$=r(1052),Z=r(90058),ee=r(39638),te=r(7972);function re(e,t){var r=s()(e);if(u()){var n=u()(e);t&&(n=n.filter((function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,A.A)(e,t,r[t])})):d()?p()(e,d()(r)):re(Object(r)).forEach((function(t){m()(e,t,f()(r,t))}))}return e}function ie(e,t,r){return t=(0,x.A)(t),(0,b.A)(e,ae()?i()(t,r||[],(0,x.A)(e).constructor):t.apply(e,r))}function ae(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(ae=function(){return!!e})()}var se="src/avpipeline/VideoRenderPipeline.ts",oe=[J.A,$.A];oe.push(Z.A);var ue,ce=[Q.A,K.A];ce.push(X.A),function(e){e[e.None=0]="None",e[e.Accelerate=1]="Accelerate",e[e.Decelerate=2]="Decelerate"}(ue||(ue={}));var fe=["bt2020","bt2100","st2048","p3-dcl","hlg"],he=function(e){function t(){return(0,k.A)(this,t),ie(this,t)}var r,n,i,a,s,o,u,c,f,h,d,l,p,v,m,A,b,x,_;return(0,w.A)(t,e),(0,y.A)(t,[{key:"createTask",value:(_=(0,g.A)(I().mark((function e(t){var r,n,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new E.Ay(t.leftPort),n=new E.Ay(t.controlPort),(i=ne(ne({},t),{},{leftIPCPort:r,controlIPCPort:n,render:null,currentPTS:V.Dh,firstPTS:BigInt(0),startTimestamp:BigInt(0),playRate:BigInt(100),targetRate:BigInt(100),frontFrame:null,backFrame:null,renderFrame:null,renderFrameCount:BigInt(0),loop:null,renderRedyed:!1,adjust:ue.None,adjustDiff:BigInt(0),lastAdjustTimestamp:BigInt(0),firstRendered:!1,canvasUpdated:!1,renderCreating:!1,pauseTimestamp:0,lastNotifyPTS:BigInt(0),skipRender:!1,isSupport:function(){return!1},frontBuffered:!1,ended:!1,seeking:!1,seekSync:null,afterPullResolver:null,pausing:!1,lastRenderTimestamp:0,avframePool:new F.A((0,C.A)(t.avframeList,B.A),t.avframeListMutex)})).startPTS=(0,W.k)(i.startPTS,i.timeBase,V.i0),n.on(E.Wo,function(){var e=(0,g.A)(I().mark((function e(t){var r,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.method,e.next="syncPts"===e.t0?3:"skipRender"===e.t0?7:9;break;case 3:return r=t.params.pts,(n=Math.abs(Number(r-i.currentPTS)))>100&&i.currentPTS>BigInt(0)&&(r>i.currentPTS?(i.adjust=ue.Accelerate,j.Yz("video render sync pts accelerate, targetPTS: ".concat(r,", currentPTS: ").concat(i.currentPTS,", diff: ").concat(n,", taskId: ").concat(i.taskId),se,231)):(i.adjust=ue.Decelerate,j.Yz("video render sync pts decelerate, targetPTS: ".concat(r,", currentPTS: ").concat(i.currentPTS,", diff: ").concat(n," taskId: ").concat(i.taskId),se,235)),i.adjustDiff=BigInt(Math.floor(n))),e.abrupt("break",9);case 7:return i.skipRender=t.params.skipRender,e.abrupt("break",9);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tasks.set(t.taskId,i),e.abrupt("return",0);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"createRender",value:(x=(0,g.A)(I().mark((function e(t,r){var n,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.renderCreating){e.next=2;break}return e.abrupt("return");case 2:if(t.renderCreating=!0,t.renderRedyed=!1,t.render&&t.render.destroy(),D.ai(r)?t.enableWebGPU&&O.A.webgpu?L.__(oe,(function(e){if(e.isSupport(r))return t.render=new e(t.canvas,{devicePixelRatio:t.devicePixelRatio,renderMode:t.renderMode,onRenderContextLost:function(){t.canvasUpdated=!1,t.renderRedyed=!1,j.R8("render context lost",se,308),t.controlIPCPort.notify("updateCanvas")}}),t.isSupport=e.isSupport,!1})):L.__(ce,(function(e){if(e.isSupport(r))return t.render=new e(t.canvas,{devicePixelRatio:t.devicePixelRatio,renderMode:t.renderMode,onRenderContextLost:function(){t.canvasUpdated=!1,t.renderRedyed=!1,j.R8("render context lost",se,326),t.controlIPCPort.notify("updateCanvas")}}),t.isSupport=e.isSupport,!1})):t.enableWebGPU&&O.A.webgpu&&((G.A.chrome||G.A.newEdge)&&G.A.checkVersion(G.A.majorVersion,"116",!0)||G.A.safari&&G.A.checkVersion(G.A.majorVersion,"17.4",!0)||G.A.firefox&&G.A.checkVersion(G.A.majorVersion,"129",!0))&&(s=r.colorSpace.primaries,!L.zy(fe,s))?(t.render=new Y.A(t.canvas,{devicePixelRatio:t.devicePixelRatio,renderMode:t.renderMode,onRenderContextLost:function(){t.canvasUpdated=!1,t.renderRedyed=!1,j.R8("render context lost",se,282),t.controlIPCPort.notify("updateCanvas")}}),t.isSupport=Y.A.isSupport):(t.render=new H.A(t.canvas,{devicePixelRatio:t.devicePixelRatio,renderMode:t.renderMode}),t.isSupport=H.A.isSupport),t.render){e.next=9;break}return t.renderCreating=!1,e.abrupt("return");case 9:return e.next=11,t.render.init();case 11:t.render.viewport(t.viewportWidth,t.viewportHeight),t.render.clear(),t.render.setRotate(null!==(n=t.renderRotate)&&void 0!==n?n:0),t.render.enableHorizontalFlip(null!==(i=t.flipHorizontal)&&void 0!==i&&i),t.render.enableVerticalFlip(null!==(a=t.flipVertical)&&void 0!==a&&a),t.renderRedyed=!0,t.renderCreating=!1;case 18:case"end":return e.stop()}var s}),e)}))),function(e,t){return x.apply(this,arguments)})},{key:"play",value:(b=(0,g.A)(I().mark((function e(t){var r,n,i,a,s,o=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=32;break}return n=function e(){if(!r.seeking){if(r.backFrame&&(D.ai(r.backFrame)?r.avframePool.release(r.backFrame):r.backFrame.close()),r.backFrame=null,!r.frontBuffered)return!1;if(r.backFrame=r.frontFrame,r.frontFrame=null,!r.ended){r.frontBuffered=!1;var t=(0,z.A)();return r.leftIPCPort.request("pull").then((function(n){if(r.afterPullResolver&&r.afterPullResolver(),D.ai(n)&&n<0)return r.ended=!0,void(r.frontFrame=null);var i=(0,z.A)()-t;if(i>1e3&&(r.startTimestamp+=BigInt(Math.floor(i))),r.frontFrame=n,r.frontBuffered=!0,r.seekSync)return r.seekSync(),void(r.seekSync=null);r.backFrame||e()})),!0}}},r.loop&&j.h2("task has already call play",se,355),e.next=6,r.leftIPCPort.request("pull");case 6:if(r.backFrame=e.sent,!(D.ai(r.backFrame)&&r.backFrame<0)){e.next=12;break}return r.backFrame=0,j.pq("video render ended, taskId: ".concat(r.taskId),se,362),r.controlIPCPort.notify("ended"),e.abrupt("return");case 12:return e.next=14,r.leftIPCPort.request("pull");case 14:return r.frontFrame=e.sent,r.frontBuffered=!0,r.ended=!1,D.ai(r.frontFrame)&&r.frontFrame<0&&(r.ended=!0,r.frontBuffered=!1,r.frontFrame=0),i=this,e.next=21,this.createRender(r,r.backFrame);case 21:r.firstPTS=(0,W.k)(D.ai(r.backFrame)?S.f[17](r.backFrame+104):BigInt(Math.floor(r.backFrame.timestamp)),r.timeBase,V.i0),j.Yz("got first video frame, pts: ".concat(D.ai(r.backFrame)?S.f[17](r.backFrame+104):BigInt(Math.floor(r.backFrame.timestamp)),"(").concat(r.firstPTS,"ms), taskId: ").concat(r.taskId),se,453),r.firstPTS<BigInt(1e3)&&(r.firstPTS=BigInt(0)),r.currentPTS=r.firstPTS,r.startTimestamp=BigInt(Math.floor((0,z.A)()))-r.firstPTS*BigInt(100)/r.playRate,a=(0,ee.A)(),s=a&&O.A.shareArrayBuffer?0:10,r.loop=new N.A((function(){if(r.backFrame){if(!r.isSupport(r.backFrame)){if(r.render)return r.renderRedyed=!1,r.renderFrame=r.backFrame,void r.controlIPCPort.notify("updateCanvas");o.createRender(r,r.backFrame)}var e=(0,W.k)(D.ai(r.backFrame)?S.f[17](r.backFrame+104):BigInt(Math.floor(r.backFrame.timestamp)),r.timeBase,V.i0);if(e<r.currentPTS){if(!(r.currentPTS-e>BigInt(5e3)))return j.R8("dropping frame with pts ".concat(e,", which is earlier then the last rendered frame(").concat(r.currentPTS,"), taskId: ").concat(r.taskId),se,511),void n();r.startTimestamp=BigInt(Math.floor((0,z.A)()))-e*BigInt(100)/r.targetRate}else e-r.currentPTS>BigInt(5e3)&&(r.startTimestamp=BigInt(Math.floor((0,z.A)()))-e*BigInt(100)/r.targetRate);if(r.adjust===ue.Accelerate){if(r.adjustDiff<=0)r.adjust=ue.None,r.startTimestamp=BigInt(Math.floor((0,z.A)()))-e*BigInt(100)/r.targetRate,r.lastAdjustTimestamp=BigInt(0);else if(BigInt(Math.floor((0,z.A)()))-r.lastAdjustTimestamp>=BigInt(200)){var t=r.adjustDiff<=BigInt(100)?r.adjustDiff:q.jk(r.adjustDiff,BigInt(100))*BigInt(100)/r.targetRate;r.startTimestamp-=t,r.adjustDiff-=t,j.Yz("video render accelerate startTimestamp sub: ".concat(t,", taskId: ").concat(r.taskId),se,536),r.lastAdjustTimestamp=BigInt(Math.floor((0,z.A)()))}}else if(r.adjust===ue.Decelerate)if(r.adjustDiff<=0)r.adjust=ue.None,r.startTimestamp=BigInt(Math.floor((0,z.A)()))-e*BigInt(100)/r.targetRate,r.lastAdjustTimestamp=BigInt(0);else if(BigInt(Math.floor((0,z.A)()))-r.lastAdjustTimestamp>=BigInt(300)){var s=r.adjustDiff<BigInt(50)?r.adjustDiff:q.jk(r.adjustDiff,BigInt(50))*BigInt(100)/r.targetRate;r.startTimestamp+=s,r.adjustDiff-=s,j.Yz("video render decelerate startTimestamp add: ".concat(s,", taskId: ").concat(r.taskId),se,557),r.lastAdjustTimestamp=BigInt(Math.floor((0,z.A)()))}r.enableJitterBuffer&&S.f[15](r.stats+120)/S.f[15](r.stats+224)*1e3<=S.f[15](r.jitterBuffer)&&i.setPlayRate(r.taskId,1);var u=e*BigInt(100)/r.playRate+r.startTimestamp-BigInt(Math.floor((0,z.A)()));u<=0?(r.renderRedyed&&!r.skipRender&&(a||-u<BigInt(100)||r.renderFrameCount&BigInt(1))?(r.render.render(r.backFrame),M.M[17](r.stats+160,S.f[17](r.stats+160)+BigInt(1)),r.lastRenderTimestamp&&M.M[15](r.stats+252,Math.max((0,z.A)()-r.lastRenderTimestamp,S.f[15](r.stats+252))),r.lastRenderTimestamp=(0,z.A)()):M.M[15](r.stats+168,S.f[15](r.stats+168)+1),r.renderFrameCount++,D.ai(r.backFrame)?(M.M[15](r.stats+84,S.f[15](r.backFrame+68)),M.M[15](r.stats+88,S.f[15](r.backFrame+72))):(M.M[15](r.stats+84,r.backFrame.displayWidth),M.M[15](r.stats+88,r.backFrame.displayHeight)),r.firstRendered||(r.controlIPCPort.notify(r.canvasUpdated?"firstRenderedAfterUpdateCanvas":"firstRendered"),r.firstRendered=!0,r.canvasUpdated=!1),r.playRate!==r.targetRate&&(r.startTimestamp=BigInt(Math.floor((0,z.A)()))-e*BigInt(100)/r.targetRate,r.playRate=r.targetRate),r.currentPTS=e,e-r.lastNotifyPTS>=BigInt(1e3)&&(r.lastNotifyPTS=e,r.controlIPCPort.notify("syncPts",{pts:e})),n()):r.loop.emptyTask()}else r.ended?(r.render&&r.renderRedyed&&r.render.clear(),r.loop.stop(),r.adjust=ue.None,j.pq("video render ended, taskId: ".concat(r.taskId),se,481),r.controlIPCPort.notify("ended")):r.loop.emptyTask()}),0,s),r.loop.start(),e.next=33;break;case 32:j.h2("task not found",se,628);case 33:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"restart",value:(A=(0,g.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=22;break}return r.loop||j.h2("task has not played",se,636),r.loop.isStarted()&&j.h2("task has already run",se,640),r.backFrame&&(D.ai(r.backFrame)?r.avframePool.release(r.backFrame):r.backFrame.close()),r.frontFrame&&(D.ai(r.frontFrame)?r.avframePool.release(r.frontFrame):r.frontFrame.close()),e.next=8,r.leftIPCPort.request("pull");case 8:return r.backFrame=e.sent,e.next=11,r.leftIPCPort.request("pull");case 11:r.frontFrame=e.sent,r.frontBuffered=!0,r.ended=!1,r.adjust=ue.None,r.lastNotifyPTS=V.Dh,r.firstRendered=!1,r.firstPTS=(0,W.k)(D.ai(r.backFrame)?S.f[17](r.backFrame+104):BigInt(Math.floor(r.backFrame.timestamp)),r.timeBase,V.i0),r.currentPTS=r.firstPTS,r.firstPTS<BigInt(1e3)&&(r.firstPTS=BigInt(0)),r.startTimestamp=BigInt(Math.floor((0,z.A)()))-r.firstPTS*BigInt(100)/r.playRate,r.loop.start();case 22:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"pause",value:(m=(0,g.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))?(r.loop||j.h2("task has not played",se,691),r.pauseTimestamp=(0,z.A)(),r.loop.stop(),r.pausing=!0):j.h2("task not found",se,698);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"unpause",value:(v=(0,g.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=11;break}if(!r.seeking){e.next=4;break}return e.abrupt("return");case 4:r.loop||j.h2("task has not played",se,709),r.startTimestamp+=BigInt(Math.floor((0,z.A)()-r.pauseTimestamp)),r.seeking||r.loop.start(),r.pausing=!1,r.lastRenderTimestamp=(0,z.A)(),e.next=12;break;case 11:j.h2("task not found",se,719);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"updateCanvas",value:(p=(0,g.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))?(n.canvas=r,n.render&&(n.render.destroy(),n.render=null),n.isSupport=function(){return!1},n.canvasUpdated=!0,n.firstRendered=!1,n.renderRedyed=!1):j.h2("task not found",se,737);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"setPlayRate",value:(l=(0,g.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))?(n.enableJitterBuffer&&S.f[15](n.stats+120)/S.f[15](n.stats+224)*1e3<=S.f[15](n.jitterBuffer)&&(r=1),n.targetRate=BigInt(Math.floor(Math.floor(100*r)))):j.h2("task not found",se,753);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"setRenderMode",value:(d=(0,g.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))?n.render&&(n.renderMode=r,n.render.setRenderMode(r),(0,te.A)((function(){n.pausing&&n.backFrame&&n.render&&n.render.render(n.backFrame)}))):j.h2("task not found",se,771);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"setRenderRotate",value:(h=(0,g.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))?n.render&&(n.renderRotate=r,n.render.setRotate(r),(0,te.A)((function(){n.pausing&&n.backFrame&&n.render&&n.render.render(n.backFrame)}))):j.h2("task not found",se,789);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"enableHorizontalFlip",value:(f=(0,g.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))?n.render&&(n.flipHorizontal=r,n.render.enableHorizontalFlip(r),(0,te.A)((function(){n.pausing&&n.backFrame&&n.render&&n.render.render(n.backFrame)}))):j.h2("task not found",se,807);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"enableVerticalFlip",value:(c=(0,g.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))?n.render&&(n.flipVertical=r,n.render.enableVerticalFlip(r),(0,te.A)((function(){n.pausing&&n.backFrame&&n.render&&n.render.render(n.backFrame)}))):j.h2("task not found",se,825);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"resize",value:(u=(0,g.A)(I().mark((function e(t,r,n){var i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=this.tasks.get(t))?i.render&&(i.render.viewport(r,n),(0,te.A)((function(){i.pausing&&i.backFrame&&i.render&&i.render.render(i.backFrame)}))):j.h2("task not found",se,842);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return u.apply(this,arguments)})},{key:"setSkipRender",value:(o=(0,g.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))?n.skipRender=r:j.h2("task not found",se,852);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"beforeSeek",value:(s=(0,g.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=14;break}if(r.ended||r.frontBuffered){e.next=6;break}return j.Yz("wait current pull front frame before seek, taskId: ".concat(r.taskId),se,861),e.next=6,new(T())((function(e){r.seekSync=e}));case 6:r.seeking=!0,r.loop.stop(),r.backFrame&&(D.ai(r.backFrame)?r.avframePool.release(r.backFrame):r.backFrame.close()),r.frontFrame&&(D.ai(r.frontFrame)?r.avframePool.release(r.frontFrame):r.frontFrame.close()),r.frontFrame=null,r.backFrame=null,r.currentPTS=V.Dh,j.Yz("before seek end, taskId: ".concat(r.taskId),se,889);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"syncSeekTime",value:(a=(0,g.A)(I().mark((function e(t,r,n){var i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=this.tasks.get(t))){e.next=23;break}case 2:return e.next=5,i.leftIPCPort.request("pull");case 5:if(i.backFrame=e.sent,!(D.ai(i.backFrame)&&i.backFrame<0)){e.next=13;break}return i.ended=!0,i.seeking=!1,i.adjust=ue.None,j.R8("pull video frame end after seek, taskId: ".concat(t),se,904),i.controlIPCPort.notify("ended"),e.abrupt("return");case 13:if(!(r<BigInt(0))){e.next=16;break}return j.pq("use the first video frame because of the seek time".concat(r," < 0"),se,910),e.abrupt("break",22);case 16:if(!((0,W.k)(D.ai(i.backFrame)?S.f[17](i.backFrame+104):BigInt(Math.floor(i.backFrame.timestamp)),i.timeBase,V.i0)-i.startPTS>=r)){e.next=19;break}return e.abrupt("break",22);case 19:D.ai(i.backFrame)?i.avframePool.release(i.backFrame):i.backFrame.close(),e.next=2;break;case 22:j.Yz("sync seek time end, taskId: ".concat(i.taskId),se,937);case 23:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"afterSeek",value:(i=(0,g.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.tasks.get(t))){e.next=15;break}return n.startTimestamp=BigInt(Math.floor((0,z.A)()))-(r+n.startPTS)*BigInt(100)/n.playRate,e.next=5,n.leftIPCPort.request("pull");case 5:n.frontFrame=e.sent,D.ai(n.frontFrame)&&n.frontFrame<0?(n.frontFrame=null,n.frontBuffered=!1,n.ended=!0):n.frontBuffered=!0,n.ended=!1,n.adjust=ue.None,n.lastRenderTimestamp=(0,z.A)(),n.currentPTS=(0,W.k)(D.ai(n.backFrame)?S.f[17](n.backFrame+104):BigInt(Math.floor(n.backFrame.timestamp)),n.timeBase,V.i0),j.Yz("got first video frame, pts: ".concat(D.ai(n.backFrame)?S.f[17](n.backFrame+104):BigInt(Math.floor(n.backFrame.timestamp)),"(").concat(n.currentPTS,"ms), taskId: ").concat(n.taskId),se,966),n.seeking=!1,n.pausing||n.loop.start(),j.Yz("after seek end, taskId: ".concat(n.taskId),se,975);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"registerTask",value:(n=(0,g.A)(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tasks.has(t.taskId)){e.next=2;break}return e.abrupt("return",R.lh);case 2:return e.next=4,this.createTask(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"unregisterTask",value:(r=(0,g.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=16;break}if(!r.loop){e.next=7;break}return e.next=5,r.loop.stopBeforeNextTick();case 5:r.loop.destroy(),r.loop=null;case 7:if(r.ended||r.frontFrame){e.next=10;break}return e.next=10,new(T())((function(e){r.afterPullResolver=e}));case 10:r.render&&(r.render.destroy(),r.render=null),r.backFrame&&(D.ai(r.backFrame)&&r.backFrame>0?r.avframePool.release(r.backFrame):r.backFrame.close(),r.backFrame=null),r.frontFrame&&(D.ai(r.frontFrame)&&r.frontFrame>0?r.avframePool.release(r.frontFrame):r.frontFrame.close(),r.frontFrame=null),r.leftIPCPort.destroy(),r.controlIPCPort.destroy(),this.tasks.delete(t);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(U.A)},69721:(e,t,r)=>{"use strict";r.d(t,{n:()=>d});var n,i,a=r(81570),s=r(78716),o=r(134),u=r(80662),c=r.n(u),f=r(61499),h=r(12085),d=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"min",void 0),(0,o.A)(this,"max",void 0)}));n=d.prototype,(i=new(c())).set("min",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("max",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,4),(0,h.A)(n,f.g7,8),(0,h.A)(n,f.JY,i)},30128:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n,i,a=r(81570),s=r(78716),o=r(134),u=r(80662),c=r.n(u),f=r(61499),h=r(12085),d=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"channels",void 0),(0,o.A)(this,"sampleRate",void 0),(0,o.A)(this,"audioFrameSize",void 0),(0,o.A)(this,"audioPacketBytes",void 0),(0,o.A)(this,"audioPacketCount",void 0),(0,o.A)(this,"audioPacketQueueLength",void 0),(0,o.A)(this,"audioDropPacketCount",void 0),(0,o.A)(this,"audioDecodeErrorPacketCount",void 0),(0,o.A)(this,"audioEncodeErrorFrameCount",void 0),(0,o.A)(this,"audioFrameDecodeCount",void 0),(0,o.A)(this,"audioPacketEncodeCount",void 0),(0,o.A)(this,"audioFrameRenderCount",void 0),(0,o.A)(this,"audioFrameDropCount",void 0),(0,o.A)(this,"width",void 0),(0,o.A)(this,"height",void 0),(0,o.A)(this,"keyFrameInterval",void 0),(0,o.A)(this,"gop",void 0),(0,o.A)(this,"videoPacketBytes",void 0),(0,o.A)(this,"videoPacketCount",void 0),(0,o.A)(this,"videoPacketQueueLength",void 0),(0,o.A)(this,"videoDropPacketCount",void 0),(0,o.A)(this,"videoDecodeErrorPacketCount",void 0),(0,o.A)(this,"videoEncodeErrorFrameCount",void 0),(0,o.A)(this,"videoFrameDecodeCount",void 0),(0,o.A)(this,"videoPacketEncodeCount",void 0),(0,o.A)(this,"videoFrameRenderCount",void 0),(0,o.A)(this,"videoFrameDropCount",void 0),(0,o.A)(this,"keyFrameCount",void 0),(0,o.A)(this,"bufferDropBytes",void 0),(0,o.A)(this,"bufferReceiveBytes",void 0),(0,o.A)(this,"bufferOutputBytes",void 0),(0,o.A)(this,"audioBitrate",void 0),(0,o.A)(this,"videoBitrate",void 0),(0,o.A)(this,"videoDecodeFramerate",void 0),(0,o.A)(this,"videoRenderFramerate",void 0),(0,o.A)(this,"videoEncodeFramerate",void 0),(0,o.A)(this,"audioDecodeFramerate",void 0),(0,o.A)(this,"audioRenderFramerate",void 0),(0,o.A)(this,"audioEncodeFramerate",void 0),(0,o.A)(this,"audioFrameDecodeIntervalMax",void 0),(0,o.A)(this,"audioFrameRenderIntervalMax",void 0),(0,o.A)(this,"videoFrameDecodeIntervalMax",void 0),(0,o.A)(this,"videoFrameRenderIntervalMax",void 0),(0,o.A)(this,"bandwidth",void 0),(0,o.A)(this,"jitter",void 0),(0,o.A)(this,"audioStutter",void 0),(0,o.A)(this,"videoStutter",void 0),(0,o.A)(this,"audiocodec",void 0),(0,o.A)(this,"videocodec",void 0),(0,o.A)(this,"firstAudioMuxDts",void 0),(0,o.A)(this,"lastAudioMuxDts",void 0),(0,o.A)(this,"firstVideoMuxDts",void 0),(0,o.A)(this,"lastVideoMuxDts",void 0)}));n=d.prototype,(i=new(c())).set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("audioFrameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("audioPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("audioPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("audioPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),i.set("audioDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),i.set("audioDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),i.set("audioEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),i.set("audioFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),i.set("audioPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),i.set("audioFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),i.set("audioFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),i.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),i.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),i.set("keyFrameInterval",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),i.set("gop",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),i.set("videoPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),i.set("videoPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),i.set("videoPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),i.set("videoDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),i.set("videoDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),i.set("videoEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),i.set("videoFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),i.set("videoPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),i.set("videoFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),i.set("videoFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:168,8:0}),i.set("keyFrameCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:176,8:0}),i.set("bufferDropBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:184,8:0}),i.set("bufferReceiveBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),i.set("bufferOutputBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),i.set("audioBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),i.set("videoBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:212,8:0}),i.set("videoDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),i.set("videoRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),i.set("videoEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),i.set("audioDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:228,8:0}),i.set("audioRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),i.set("audioEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:236,8:0}),i.set("audioFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),i.set("audioFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:244,8:0}),i.set("videoFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:248,8:0}),i.set("videoFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:252,8:0}),i.set("bandwidth",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),i.set("jitter",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:264,8:0}),i.set("audioStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:272,8:0}),i.set("videoStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:276,8:0}),i.set("firstAudioMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:280,8:0}),i.set("lastAudioMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:288,8:0}),i.set("firstVideoMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:296,8:0}),i.set("lastVideoMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:304,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,8),(0,h.A)(n,f.g7,312),(0,h.A)(n,f.JY,i)},61634:(e,t,r)=>{"use strict";r.d(t,{default:()=>Ue});var n=r(88435),i=r.n(n),a=r(25182),s=r(77193),o=r(25767),u=r(43070),c=r(31060),f=r(81570),h=r(78716),d=r(134),l=r(36443),p=r.n(l),v=r(80662),m=r.n(v),A=r(54001),g=r.n(A),k=r(73146),y=r.n(k),b=r(61499),x=r(12085),w=r(12264),_=r(73783),T=r(69721),P=r(74503),I=r(63939),B=r(9599),C=r(29170),S=r(94300),M=r(87243),U=r(72480),R=r(31138),E=r(18667),D=r(88506),L=r(96172),F=r(8284),O=r(67672),N=r(95335),z=r(76045),W=r(56024),V=r(71517),G=r(59377),j=r(33968),q=r(8507),H=r(26429),Y=r(41324),Q=r(88397),K=r(11473),X=r(11628),J=r(28090),$=r(47595),Z=r(4624),ee=r(95797),te=r(48641),re=r(36),ne=r(86834),ie=r(44328),ae=r(77231),se=r(30128),oe=r(14686),ue=r(86368),ce=r(94663),fe=r(10333),he=r(85224),de=r(25115),le=r(21233),pe=r(13724),ve=r(78201),me=r(43607),Ae=r(76750),ge=r(2368),ke=r(1984),ye=r(62751),be=r(548),xe=r(72739);function we(e,t,r){return t=(0,o.A)(t),(0,s.A)(e,_e()?i()(t,r||[],(0,o.A)(e).constructor):t.apply(e,r))}function _e(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(_e=function(){return!!e})()}var Te,Pe,Ie="src/avplayer/AVPlayer.ts",Be=(0,d.A)((0,d.A)({},1,"cover"),0,"contain"),Ce=[27,173,12,196,225,139,167,86018,86017,86076,86028,86051,86021,86019,86056,86020],Se={enableHardware:!0,enableWebGPU:!0,loop:!1,jitterBufferMax:10,jitterBufferMin:4,lowLatency:!1},Me=(0,f.A)((function e(){(0,h.A)(this,e),(0,d.A)(this,"avpacketList",void 0),(0,d.A)(this,"avframeList",void 0),(0,d.A)(this,"avpacketListMutex",void 0),(0,d.A)(this,"avframeListMutex",void 0),(0,d.A)(this,"jitterBuffer",void 0)}));Te=Me.prototype,(Pe=new(m())).set("avpacketList",{0:w.A,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),Pe.set("avframeList",{0:w.A,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),Pe.set("avpacketListMutex",{0:_.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),Pe.set("avframeListMutex",{0:_.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),Pe.set("jitterBuffer",{0:T.n,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),(0,x.A)(Te,b.Og,!0),(0,x.A)(Te,b.dc,4),(0,x.A)(Te,b.g7,40),(0,x.A)(Te,b.JY,Pe);var Ue=function(e){function t(e){var r;return(0,h.A)(this,t),r=we(this,t,[!0]),(0,d.A)((0,u.A)(r),"VideoDecoderThread",void 0),(0,d.A)((0,u.A)(r),"GlobalData",void 0),(0,d.A)((0,u.A)(r),"taskId",void 0),(0,d.A)((0,u.A)(r),"subTaskId",void 0),(0,d.A)((0,u.A)(r),"ext",void 0),(0,d.A)((0,u.A)(r),"source",void 0),(0,d.A)((0,u.A)(r),"options",void 0),(0,d.A)((0,u.A)(r),"ioloader2DemuxerChannel",void 0),(0,d.A)((0,u.A)(r),"demuxer2VideoDecoderChannel",void 0),(0,d.A)((0,u.A)(r),"demuxer2AudioDecoderChannel",void 0),(0,d.A)((0,u.A)(r),"videoDecoder2VideoRenderChannel",void 0),(0,d.A)((0,u.A)(r),"audioDecoder2AudioRenderChannel",void 0),(0,d.A)((0,u.A)(r),"audioRender2AudioWorkletChannel",void 0),(0,d.A)((0,u.A)(r),"audioSourceNode",void 0),(0,d.A)((0,u.A)(r),"gainNode",void 0),(0,d.A)((0,u.A)(r),"formatContext",void 0),(0,d.A)((0,u.A)(r),"canvas",void 0),(0,d.A)((0,u.A)(r),"updateCanvas",void 0),(0,d.A)((0,u.A)(r),"video",void 0),(0,d.A)((0,u.A)(r),"audio",void 0),(0,d.A)((0,u.A)(r),"controller",void 0),(0,d.A)((0,u.A)(r),"volume",void 0),(0,d.A)((0,u.A)(r),"playRate",void 0),(0,d.A)((0,u.A)(r),"renderMode",void 0),(0,d.A)((0,u.A)(r),"renderRotate",void 0),(0,d.A)((0,u.A)(r),"flipHorizontal",void 0),(0,d.A)((0,u.A)(r),"flipVertical",void 0),(0,d.A)((0,u.A)(r),"useMSE",void 0),(0,d.A)((0,u.A)(r),"audioEnded",void 0),(0,d.A)((0,u.A)(r),"videoEnded",void 0),(0,d.A)((0,u.A)(r),"status",void 0),(0,d.A)((0,u.A)(r),"lastStatus",void 0),(0,d.A)((0,u.A)(r),"stats",void 0),(0,d.A)((0,u.A)(r),"statsController",void 0),(0,d.A)((0,u.A)(r),"jitterBufferController",void 0),r.options=N.X$({},Se,e),r.taskId=(0,F.A)(),r.status=0,r.volume=1,r.playRate=1,r.renderMode=0,r.renderRotate=0,r.flipHorizontal=!1,r.flipVertical=!1,r.stats=(0,P.A)(se.A),r.statsController=new ve.A(r.stats[b.o9]),r.GlobalData=(0,P.A)(Me),_.Ts(r.GlobalData[b.o9]+24),_.Ts(r.GlobalData[b.o9]+28),Z.pq("create player, taskId: ".concat(r.taskId),Ie,241),r}var r,n,i,s,o,l,v,m,A,k,x,w,T,L,_e,Te,Pe,Ue,Re,Ee,De,Le,Fe,Oe;return(0,c.A)(t,e),(0,f.A)(t,[{key:"isCodecIdSupported",value:function(e){return e>=65536&&e<=65572||xe.zy(Ce,e)}},{key:"findBestStream",value:function(e,t){var r=this,n=e.filter((function(e){return I.f[15](e.codecpar)===t}));if(n.length){if(1===n.length)return n[0];var i=n.find((function(e){return!!(1&e.disposition)}));return i&&this.isCodecIdSupported(I.f[15](i.codecpar+4))?i:n.find((function(e){return r.isCodecIdSupported(I.f[15](e.codecpar+4))}))||n[0]}}},{key:"checkUseMSE",value:(Oe=(0,a.A)(p().mark((function e(){var t,r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee.A.mse){e.next=2;break}return e.abrupt("return",!1);case 2:if(ee.A.wasmBaseSupported){e.next=4;break}return e.abrupt("return",!0);case 4:if(t=this.findBestStream(this.formatContext.streams,0),r=this.findBestStream(this.formatContext.streams,1),!t||(0,Ae.A)().isTypeSupported((0,fe.A)(t.codecpar))){e.next=9;break}return Z.R8("can not support mse for codec: ".concat((0,fe.A)(t.codecpar),", taskId: ").concat(this.taskId),Ie,283),e.abrupt("return",!1);case 9:if(!r||(0,Ae.A)().isTypeSupported((0,he.A)(r.codecpar))){e.next=12;break}return Z.R8("can not support mse for codec: ".concat((0,he.A)(r.codecpar),", taskId: ").concat(this.taskId),Ie,287),e.abrupt("return",!1);case 12:if(!this.options.checkUseMES){e.next=14;break}return e.abrupt("return",this.options.checkUseMES(this.formatContext.streams));case 14:if(!t){e.next=30;break}if(!(I.f[15](t.codecpar+56)*I.f[15](t.codecpar+60)>2073600)){e.next=27;break}if(ee.A.videoDecoder){e.next=18;break}return e.abrupt("return",!0);case 18:return n=null,0!==I.f[20](t.codecpar+12)&&(n=(0,oe.s3)(I.f[20](t.codecpar+12),I.f[15](t.codecpar+16))),e.next=22,VideoDecoder.isConfigSupported({codec:(0,ce.A)(t.codecpar),codedWidth:I.f[15](t.codecpar+56),codedHeight:I.f[15](t.codecpar+60),description:n,hardwareAcceleration:(0,le.C)(!0)});case 22:if(e.sent.supported){e.next=25;break}return e.abrupt("return",!0);case 25:e.next=30;break;case 27:if(I.f[15](t.codecpar+56)*I.f[15](t.codecpar+60)!=2073600){e.next=30;break}if(!(ne.A.safari&&!ne.A.checkVersion(ne.A.version,"16.1",!0)&&(0,ie.lb)((0,C.A)(t.codecpar+72,B.P))>30)){e.next=30;break}return e.abrupt("return",!0);case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}}),e,this)}))),function(){return Oe.apply(this,arguments)})},{key:"createCanvas",value:function(){var e=document.createElement("canvas");return e.className="avplayer-canvas",e.width=this.options.container.offsetWidth*devicePixelRatio,e.height=this.options.container.offsetHeight*devicePixelRatio,e.style.cssText="\n      width: 100%;\n      height: 100%;\n    ",e.ondragstart=function(){return!1},e}},{key:"createVideo",value:function(){this.video&&this.options.container.removeChild(this.video);var e=document.createElement("video");e.autoplay=!0,e.className="avplayer-video",e.style.cssText="\n      width: 100%;\n      height: 100%;\n    ",this.options.container.appendChild(e),this.video=e}},{key:"createAudio",value:function(){this.audio&&this.options.container.removeChild(this.audio);var e=document.createElement("audio");e.autoplay=!0,e.className="avplayer-audio",this.options.container.appendChild(e),this.audio=e}},{key:"handleTimeupdate",value:function(e){var r=this,n=0;e.ontimeupdate=function(){var i=e.currentTime;Math.abs(i-n)>=1&&(4===r.status&&(r.fire(J.E9,[BigInt(Math.floor(1e3*i))]),t.MSEThread.setCurrentTime(r.taskId,i)),n=i)},e.onended=function(){r.audioEnded=!0,r.videoEnded=!0,r.handleEnded()},e.onwaiting=function(){r.audio===e?r.stats.audioStutter++:(r.stats.audioStutter++,r.stats.videoStutter++)},e.oncanplay=function(){4===r.status&&e.play()}}},{key:"handleEnded",value:(Fe=(0,a.A)(p().mark((function e(){var r,n,i,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.audioEnded||!this.videoEnded){e.next=61;break}if(Z.pq("player ended, taskId: ".concat(this.taskId),Ie,409),!this.options.loop||this.options.isLive){e.next=54;break}if(Z.pq("loop play, taskId: ".concat(this.taskId),Ie,413),!this.isHls()){e.next=9;break}return e.next=7,t.DemuxerThread.seek(this.taskId,BigInt(0),16);case 7:e.next=19;break;case 9:if(!this.isDash()){e.next=17;break}return e.next=12,t.DemuxerThread.seek(this.taskId,BigInt(0),16);case 12:if(!this.subTaskId){e.next=15;break}return e.next=15,t.DemuxerThread.seek(this.subTaskId,BigInt(0),16);case 15:e.next=19;break;case 17:return e.next=19,t.DemuxerThread.seek(this.taskId,BigInt(0),8);case 19:if(this.fire(J.E9,[BigInt(0)]),!this.useMSE){e.next=34;break}return null!==(r=this.video||this.audio)&&void 0!==r&&r.src&&URL.revokeObjectURL((this.video||this.audio).src),e.next=24,t.MSEThread.restart(this.taskId);case 24:return e.next=26,t.MSEThread.getMediaSource(this.taskId);case 26:if(!(n=e.sent)){e.next=32;break}return ee.A.workerMSE&&n instanceof MediaSourceHandle?(this.video||this.audio).srcObject=n:(this.video||this.audio).src=URL.createObjectURL(n),this.video?(this.video.currentTime=0,this.video.playbackRate=this.playRate):this.audio&&(this.audio.currentTime=0,this.audio.playbackRate=this.playRate),e.next=32,g().all([null===(i=this.video)||void 0===i?void 0:i.play(),null===(a=this.audio)||void 0===a?void 0:a.play()]);case 32:e.next=52;break;case 34:if(!this.audioDecoder2AudioRenderChannel){e.next=39;break}return e.next=37,t.AudioDecoderThread.resetTask(this.taskId);case 37:return e.next=39,t.AudioRenderThread.restart(this.taskId);case 39:if(!this.audioSourceNode){e.next=46;break}return e.next=42,this.audioSourceNode.request("restart");case 42:if("suspended"!==t.audioContext.state){e.next=45;break}return e.next=45,t.AudioRenderThread.fakePlay(this.taskId);case 45:this.audioEnded=!1;case 46:if(!this.videoDecoder2VideoRenderChannel){e.next=52;break}return e.next=49,this.VideoDecoderThread.resetTask(this.taskId);case 49:return e.next=51,t.VideoRenderThread.restart(this.taskId);case 51:this.videoEnded=!1;case 52:e.next=61;break;case 54:return null!==(s=this.video||this.audio)&&void 0!==s&&s.src&&URL.revokeObjectURL((this.video||this.audio).src),this.video&&(this.options.container.removeChild(this.video),this.video=null),this.audio&&(this.options.container.removeChild(this.audio),this.audio=null),this.canvas&&(this.options.container.removeChild(this.canvas),this.canvas=null),e.next=60,this.stop();case 60:this.fire(J.hV);case 61:case"end":return e.stop()}}),e,this)}))),function(){return Fe.apply(this,arguments)})},{key:"isHls",value:function(){return"m3u8"===this.ext||"m3u"===this.ext}},{key:"isDash",value:function(){return"mpd"===this.ext}},{key:"getResource",value:(Le=(0,a.A)(p().mark((function e(r,n,i){var a,s,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=n?"".concat(r,"-").concat(n):r,!t.Resource.has(a)){e.next=3;break}return e.abrupt("return",t.Resource.get(a));case 3:if(!(s=this.options.getWasm(r,n,i))){e.next=19;break}if(!O.Yj(s)&&!O.sv(s)){e.next=16;break}return e.next=8,(0,z.A)({source:s});case 8:if(o=e.sent,!H._7||0!==i){e.next=13;break}return e.next=12,(0,z.A)({source:ne.A.firefox?s:o.buffer},{child:!0});case 12:o.threadModule=e.sent;case 13:delete o.buffer,e.next=17;break;case 16:o=s;case 17:return t.Resource.set(a,o),e.abrupt("return",o);case 19:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return Le.apply(this,arguments)})},{key:"load",value:(De=(0,a.A)(p().mark((function e(r){var n,i,a,s,o,u,c,f,h,d,l=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z.pq("call load, taskId: ".concat(this.taskId),Ie,551),this.status=1,this.fire(J.F5),this.controller=new X.A(this),this.ioloader2DemuxerChannel=(0,ue.A)(),(0,oe.sO)(this.stats[b.o9],0,312),e.next=8,t.startDemuxPipeline();case 8:if(n=0,!O.Yj(r)){e.next=16;break}return this.ext=q.qg(r).file.split(".").pop(),e.next=13,t.IOThread.registerTask.transfer(this.ioloader2DemuxerChannel.port1).invoke({type:null!==(i=ye.$$[this.ext])&&void 0!==i?i:0,info:{url:r},range:{from:-1,to:-1},taskId:this.taskId,options:{isLive:this.options.isLive},rightPort:this.ioloader2DemuxerChannel.port1,stats:this.stats[b.o9]});case 13:n=e.sent,e.next=21;break;case 16:return this.options.isLive=!1,this.ext=r.name.split(".").pop(),e.next=20,t.IOThread.registerTask.transfer(this.ioloader2DemuxerChannel.port1).invoke({type:1,info:{file:r},range:{from:-1,to:-1},taskId:this.taskId,options:{isLive:!1},rightPort:this.ioloader2DemuxerChannel.port1,stats:this.stats[b.o9]});case 20:n=e.sent;case 21:if(n<0&&Z.h2("register io task failed, ret: ".concat(n,", taskId: ").concat(this.taskId),Ie,611),!this.isDash()){e.next=43;break}return e.next=25,t.IOThread.open(this.taskId);case 25:return e.next=27,t.IOThread.hasAudio(this.taskId);case 27:return a=e.sent,e.next=30,t.IOThread.hasVideo(this.taskId);case 30:if(s=e.sent,!a||!s){e.next=39;break}return this.subTaskId=(0,F.A)(),e.next=35,t.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2,this.controller.getDemuxerRenderControlPort()).invoke({taskId:this.taskId,leftPort:this.ioloader2DemuxerChannel.port2,controlPort:this.controller.getDemuxerRenderControlPort(),format:ye.HR[this.ext],stats:this.stats[b.o9],isLive:this.options.isLive,flags:2,ioloaderOptions:{mediaType:"audio"},avpacketList:this.GlobalData[b.o9],avpacketListMutex:this.GlobalData[b.o9]+24});case 35:return e.next=37,t.DemuxerThread.registerTask({taskId:this.subTaskId,mainTaskId:this.taskId,flags:2,format:ye.HR[this.ext],stats:this.stats[b.o9],isLive:this.options.isLive,ioloaderOptions:{mediaType:"video"},avpacketList:this.GlobalData[b.o9],avpacketListMutex:this.GlobalData[b.o9]+24});case 37:e.next=41;break;case 39:return e.next=41,t.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2,this.controller.getDemuxerRenderControlPort()).invoke({taskId:this.taskId,leftPort:this.ioloader2DemuxerChannel.port2,controlPort:this.controller.getDemuxerRenderControlPort(),format:ye.HR[this.ext],stats:this.stats[b.o9],isLive:this.options.isLive,flags:2,ioloaderOptions:{mediaType:a?"audio":"video"},avpacketList:this.GlobalData[b.o9],avpacketListMutex:this.GlobalData[b.o9]+24});case 41:e.next=45;break;case 43:return e.next=45,t.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2,this.controller.getDemuxerRenderControlPort()).invoke({taskId:this.taskId,leftPort:this.ioloader2DemuxerChannel.port2,controlPort:this.controller.getDemuxerRenderControlPort(),format:ye.HR[this.ext],stats:this.stats[b.o9],isLive:this.options.isLive,flags:this.isHls()?2:0,avpacketList:this.GlobalData[b.o9],avpacketListMutex:this.GlobalData[b.o9]+24});case 45:return e.next=47,t.DemuxerThread.openStream(this.taskId);case 47:return(n=e.sent)<0&&Z.h2("open stream failed, ret: ".concat(n,", taskId: ").concat(this.taskId),Ie,689),e.next=51,t.DemuxerThread.analyzeStreams(this.taskId);case 51:if(o=e.sent,!O.ai(o)&&o.streams.length||Z.h2("analyze stream failed, ret: ".concat(o),Ie,693),!this.subTaskId){e.next=63;break}return e.next=56,t.DemuxerThread.openStream(this.subTaskId);case 56:return(n=e.sent)<0&&Z.h2("open stream failed, ret: ".concat(n,", taskId: ").concat(this.taskId),Ie,699),e.next=60,t.DemuxerThread.analyzeStreams(this.subTaskId);case 60:u=e.sent,!O.ai(u)&&u.streams.length||Z.h2("analyze stream failed, ret: ".concat(u),Ie,703),o.streams=o.streams.concat(u.streams);case 63:if(this.formatContext=o,this.source=r,o.streams.forEach((function(e){1===I.f[15](e.codecpar)?l.stats.audiocodec=(0,ke.A)(e.codecpar):0===I.f[15](e.codecpar)&&(l.stats.videocodec=(0,ce.A)(e.codecpar))})),Z.pq("\n"+(0,be.Ay)([o],[{from:O.Yj(r)?r:r.name,tag:"Input"}]),Ie,720),!this.isHls()&&!this.isDash()){e.next=73;break}return e.next=70,t.IOThread.getDuration(this.taskId);case 70:if(e.t0=e.sent,(c=1e3*e.t0)>0)for(f=0;f<this.formatContext.streams.length;f++)this.formatContext.streams[f].duration=(0,ie.k)(BigInt(Math.floor(c)),ae.i0,(0,C.A)(this.formatContext.streams[f].timeBase,B.P));case 73:if(!this.options.isLive||!this.options.lowLatency){e.next=83;break}return e.t1=Math,e.next=77,t.IOThread.getMinBuffer(this.taskId);case 77:e.t2=e.sent,e.t3=this.options.jitterBufferMin,h=e.t1.max.call(e.t1,e.t2,e.t3),(d=this.options.jitterBufferMax)<=h&&(d=h+(this.isHls()||this.isDash()?h:1)),this.jitterBufferController=new ge.A({stats:this.stats[b.o9],jitterBuffer:this.GlobalData[b.o9]+32,lowLatencyStart:!(this.isHls()||this.isDash()),useMse:this.useMSE,max:d,min:h,observer:{onCroppingBuffer:function(e){var r;Z.Yz("cropping buffer by jitter buffer, max: ".concat(e,", taskId: ").concat(l.taskId),Ie,756),null===(r=t.DemuxerThread)||void 0===r||r.croppingAVPacketQueue(l.taskId,BigInt(e>>>0))},onSetPlayRate:function(e){Z.Yz("set play rate by jitter buffer, rate: ".concat(e,", taskId: ").concat(l.taskId),Ie,760),l.useMSE?(t.MSEThread.setPlayRate(l.taskId,e),l.video?l.video.playbackRate=e:l.audio&&(l.audio.playbackRate=e)):(l.audioDecoder2AudioRenderChannel&&t.AudioRenderThread.setPlayTempo(l.taskId,e),l.videoDecoder2VideoRenderChannel&&t.VideoRenderThread.setPlayRate(l.taskId,e))}}});case 83:this.status=2,this.fire(J.S2);case 85:case"end":return e.stop()}}),e,this)}))),function(e){return De.apply(this,arguments)})},{key:"play",value:(Ee=(0,a.A)(p().mark((function e(){var r,n,i,s,o,u,c,f,h,d,l,v,m,A,k,x,w,_,T,P=this,S=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S.length>0&&void 0!==S[0]?S[0]:{audio:!0,video:!0},Z.pq("call play, options: ".concat(y()(r),", status: ").concat(this.status," taskId: ").concat(this.taskId),Ie,796),4!==this.status){e.next=4;break}return e.abrupt("return");case 4:if(r.audio||r.video||(Z.R8("video and audio must play one, ignore options, we will try to play video and audio, taskId: ".concat(this.taskId),Ie,803),r.audio=!0,r.video=!0),n=[],5!==this.status){e.next=9;break}return this.useMSE?(n.push(t.MSEThread.unpause(this.taskId)),this.audio?this.audio.play():this.video&&this.video.play()):(this.audioSourceNode&&(n.push(this.audioSourceNode.request("unpause")),"suspended"===t.audioContext.state&&n.push(t.AudioRenderThread.unpause(this.taskId))),this.videoDecoder2VideoRenderChannel&&n.push(t.VideoRenderThread.unpause(this.taskId))),e.abrupt("return",g().all(n).then((function(){P.status=4,P.fire(J.CN),P.jitterBufferController&&P.jitterBufferController.start()})));case 9:return this.status=3,this.fire(J.d6),e.next=13,this.checkUseMSE();case 13:if(this.useMSE=e.sent,this.audioEnded=!0,this.videoEnded=!0,!this.useMSE){e.next=59;break}return e.next=19,t.startMSEPipeline();case 19:return e.t0=t.MSEThread.registerTask.transfer(this.controller.getMuxerRenderControlPort()),e.t1=this.taskId,e.t2=this.stats[b.o9],e.next=24,t.DemuxerThread.getFormat(this.taskId);case 24:return e.t3=e.sent,e.t4=this.controller.getMuxerRenderControlPort(),e.t5=this.options.isLive,e.t6=this.GlobalData[b.o9],e.t7=this.GlobalData[b.o9]+24,e.t8=!!this.jitterBufferController,e.t9=this.GlobalData[b.o9]+32,e.t10={taskId:e.t1,stats:e.t2,format:e.t3,controlPort:e.t4,isLive:e.t5,avpacketList:e.t6,avpacketListMutex:e.t7,enableJitterBuffer:e.t8,jitterBuffer:e.t9},e.next=34,e.t0.invoke.call(e.t0,e.t10);case 34:if(i=!1,s=this.findBestStream(this.formatContext.streams,0),o=this.findBestStream(this.formatContext.streams,1),!s||!r.video){e.next=45;break}return i=!0,this.videoEnded=!1,this.demuxer2VideoDecoderChannel=(0,ue.A)(),e.next=43,t.DemuxerThread.connectStreamTask.transfer(this.demuxer2VideoDecoderChannel.port1).invoke(this.subTaskId||this.taskId,s.index,this.demuxer2VideoDecoderChannel.port1);case 43:return e.next=45,t.MSEThread.addStream.transfer(this.demuxer2VideoDecoderChannel.port2).invoke(this.taskId,s.index,s.codecpar,s.timeBase,s.startTime,this.demuxer2VideoDecoderChannel.port2);case 45:if(!o||!r.audio){e.next=52;break}return this.audioEnded=!1,this.demuxer2AudioDecoderChannel=(0,ue.A)(),e.next=50,t.DemuxerThread.connectStreamTask.transfer(this.demuxer2AudioDecoderChannel.port1).invoke(this.taskId,o.index,this.demuxer2AudioDecoderChannel.port1);case 50:return e.next=52,t.MSEThread.addStream.transfer(this.demuxer2AudioDecoderChannel.port2).invoke(this.taskId,o.index,o.codecpar,o.timeBase,o.startTime,this.demuxer2AudioDecoderChannel.port2);case 52:return i?this.createVideo():this.createAudio(),e.next=55,t.MSEThread.getMediaSource(this.taskId);case 55:(u=e.sent)&&(ee.A.workerMSE&&u instanceof MediaSourceHandle?(this.video||this.audio).srcObject=u:(this.video||this.audio).src=URL.createObjectURL(u),this.handleTimeupdate(this.video||this.audio)),e.next=159;break;case 59:if(c=BigInt(0),f=BigInt(0),h=this.findBestStream(this.formatContext.streams,0),d=this.findBestStream(this.formatContext.streams,1),!h||!r.video){e.next=91;break}return e.next=66,this.createVideoDecoderThread();case 66:return e.next=68,t.startVideoRenderPipeline();case 68:return f=(0,ie.k)(h.startTime,(0,C.A)(h.timeBase,B.P),ae.i0),this.demuxer2VideoDecoderChannel=(0,ue.A)(),this.videoDecoder2VideoRenderChannel=(0,ue.A)(),e.next=73,this.getResource("decoder",I.f[15](h.codecpar+4),I.f[15](h.codecpar));case 73:if(l=e.sent){e.next=83;break}if(!ee.A.videoDecoder){e.next=82;break}return e.next=78,VideoDecoder.isConfigSupported({codec:(0,ce.A)(h.codecpar)});case 78:e.sent.supported||Z.h2("".concat((0,be.eG)(I.f[15](h.codecpar),I.f[15](h.codecpar+4))," codecId ").concat(I.f[15](h.codecpar+4)," not support"),Ie,946),e.next=83;break;case 82:Z.h2("".concat((0,be.eG)(I.f[15](h.codecpar),I.f[15](h.codecpar+4))," codecId ").concat(I.f[15](h.codecpar+4)," not support"),Ie,950);case 83:return e.next=85,this.VideoDecoderThread.registerTask.transfer(this.demuxer2VideoDecoderChannel.port2,this.videoDecoder2VideoRenderChannel.port1).invoke({taskId:this.taskId,resource:l,leftPort:this.demuxer2VideoDecoderChannel.port2,rightPort:this.videoDecoder2VideoRenderChannel.port1,stats:this.stats[b.o9],enableHardware:this.options.enableHardware,avpacketList:this.GlobalData[b.o9],avpacketListMutex:this.GlobalData[b.o9]+24,avframeList:this.GlobalData[b.o9]+12,avframeListMutex:this.GlobalData[b.o9]+28});case 85:return e.next=87,this.VideoDecoderThread.open(this.taskId,h.codecpar);case 87:return e.sent<0&&Z.h2("cannot open video ".concat((0,be.eG)(I.f[15](h.codecpar),I.f[15](h.codecpar+4))," decoder"),Ie,972),e.next=91,t.DemuxerThread.connectStreamTask.transfer(this.demuxer2VideoDecoderChannel.port1).invoke(this.subTaskId||this.taskId,h.index,this.demuxer2VideoDecoderChannel.port1);case 91:if(!d||!r.audio){e.next=120;break}return e.next=94,t.startAudioPipeline();case 94:if("suspended"!==t.audioContext.state){e.next=97;break}return e.next=97,g().race([t.audioContext.resume(),new pe.A(.1)]);case 97:return c=(0,ie.k)(d.startTime,(0,C.A)(d.timeBase,B.P),ae.i0),this.demuxer2AudioDecoderChannel=(0,ue.A)(),this.audioDecoder2AudioRenderChannel=(0,ue.A)(),e.next=102,this.getResource("decoder",I.f[15](d.codecpar+4),I.f[15](d.codecpar));case 102:if(v=e.sent){e.next=112;break}if(!ee.A.audioDecoder){e.next=111;break}return e.next=107,AudioDecoder.isConfigSupported({codec:(0,ke.A)(d.codecpar),sampleRate:I.f[15](d.codecpar+136),numberOfChannels:I.f[15](d.codecpar+116)});case 107:e.sent.supported||Z.h2("".concat((0,be.eG)(I.f[15](d.codecpar),I.f[15](d.codecpar+4))," codecId ").concat(I.f[15](d.codecpar+4)," not support"),Ie,1004),e.next=112;break;case 111:Z.h2("".concat((0,be.eG)(I.f[15](d.codecpar),I.f[15](d.codecpar+4))," codecId ").concat(I.f[15](d.codecpar+4)," not support"),Ie,1008);case 112:return e.next=114,t.AudioDecoderThread.registerTask.transfer(this.demuxer2AudioDecoderChannel.port2,this.audioDecoder2AudioRenderChannel.port1).invoke({taskId:this.taskId,resource:v,leftPort:this.demuxer2AudioDecoderChannel.port2,rightPort:this.audioDecoder2AudioRenderChannel.port1,stats:this.stats[b.o9],timeBase:{num:I.f[15](d.timeBase),den:I.f[15](d.timeBase+4)},avpacketList:this.GlobalData[b.o9],avpacketListMutex:this.GlobalData[b.o9]+24,avframeList:this.GlobalData[b.o9]+12,avframeListMutex:this.GlobalData[b.o9]+28});case 114:return e.next=116,t.AudioDecoderThread.open(this.taskId,d.codecpar);case 116:return e.sent<0&&Z.h2("cannot open audio ".concat((0,be.eG)(I.f[15](d.codecpar),I.f[15](d.codecpar+4))," decoder"),Ie,1033),e.next=120,t.DemuxerThread.connectStreamTask.transfer(this.demuxer2AudioDecoderChannel.port1).invoke(this.taskId,d.index,this.demuxer2AudioDecoderChannel.port1);case 120:if(!this.videoDecoder2VideoRenderChannel){e.next=131;break}return this.canvas=this.createCanvas(),this.options.container.appendChild(this.canvas),m=(0,$.A)()&&H._7?this.canvas.transferControlToOffscreen():this.canvas,A=this.formatContext.streams.find((function(e){return 0===I.f[15](e.codecpar)})),e.next=127,t.VideoRenderThread.registerTask.transfer(this.videoDecoder2VideoRenderChannel.port2,this.controller.getVideoRenderControlPort(),m).invoke({taskId:this.taskId,leftPort:this.videoDecoder2VideoRenderChannel.port2,controlPort:this.controller.getVideoRenderControlPort(),canvas:m,renderMode:this.renderMode,renderRotate:this.renderRotate,flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical,timeBase:{num:I.f[15](A.timeBase),den:I.f[15](A.timeBase+4)},viewportWidth:this.options.container.offsetWidth,viewportHeight:this.options.container.offsetHeight,devicePixelRatio,stats:this.stats[b.o9],enableWebGPU:this.options.enableWebGPU,startPTS:A.startTime,avframeList:this.GlobalData[b.o9]+12,avframeListMutex:this.GlobalData[b.o9]+28,enableJitterBuffer:!!this.jitterBufferController&&!this.audioDecoder2AudioRenderChannel,jitterBuffer:this.GlobalData[b.o9]+32});case 127:return this.videoEnded=!1,e.next=130,t.VideoRenderThread.setPlayRate(this.taskId,this.playRate);case 130:n.push(t.VideoRenderThread.play(this.taskId));case 131:if(!this.audioDecoder2AudioRenderChannel){e.next=157;break}return k=this.formatContext.streams.find((function(e){return 1===I.f[15](e.codecpar)})),this.audioRender2AudioWorkletChannel=new MessageChannel,e.next=136,this.getResource("resampler");case 136:return x=e.sent,e.next=139,this.getResource("stretchpitcher");case 139:return w=e.sent,x||Z.h2("resampler not found",Ie,1100),w||Z.h2("stretch pitcher not found",Ie,1103),e.next=144,t.AudioRenderThread.registerTask.transfer(this.audioDecoder2AudioRenderChannel.port2,this.audioRender2AudioWorkletChannel.port1,this.controller.getAudioRenderControlPort()).invoke({taskId:this.taskId,leftPort:this.audioDecoder2AudioRenderChannel.port2,rightPort:this.audioRender2AudioWorkletChannel.port1,controlPort:this.controller.getAudioRenderControlPort(),playFormat:8,playSampleRate:t.audioContext.sampleRate,playChannels:I.f[15](k.codecpar+116),resamplerResource:x,stretchpitcherResource:w,stats:this.stats[b.o9],timeBase:{num:I.f[15](k.timeBase),den:I.f[15](k.timeBase+4)},startPTS:k.startTime,avframeList:this.GlobalData[b.o9]+12,avframeListMutex:this.GlobalData[b.o9]+28,enableJitterBuffer:!!this.jitterBufferController,jitterBuffer:this.GlobalData[b.o9]+32});case 144:if(_=ee.A.audioWorklet?Q.A:te.A,this.audioSourceNode=new _(t.audioContext,{onEnded:function(){P.onAudioEnded()},onFirstRendered:function(){P.onFirstAudioRendered()},onStutter:function(){P.onStutter()}},{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[I.f[15](k.codecpar+116)]}),!H._7||!ee.A.audioWorklet||ne.A.safari&&!ne.A.checkVersion(ne.A.version,"16.1",!0)){e.next=149;break}return e.next=149,this.audioSourceNode.request("init",{memory:K.ce});case 149:return e.next=151,t.AudioRenderThread.setPlayTempo(this.taskId,this.playRate);case 151:this.gainNode=t.audioContext.createGain(),this.gainNode.connect(t.audioContext.destination),this.audioSourceNode.connect(this.gainNode),this.setVolume(this.volume),this.audioEnded=!1,n.push(this.audioSourceNode.request("start",{port:this.audioRender2AudioWorkletChannel.port2,channels:I.f[15](k.codecpar+116)},[this.audioRender2AudioWorkletChannel.port2]));case 157:this.audioDecoder2AudioRenderChannel?this.controller.setTimeUpdateListenType(1):this.videoDecoder2VideoRenderChannel&&this.controller.setTimeUpdateListenType(0),this.videoDecoder2VideoRenderChannel&&this.audioDecoder2AudioRenderChannel&&me.tn(f-c)>BigInt(1e4)&&this.controller.setEnableAudioVideoSync(!1);case 159:return T=10,O.Yj(this.source)&&!this.options.isLive&&this.formatContext.streams.forEach((function(e){T=Math.max(Math.ceil(4*(0,ie.lb)((0,C.A)(e.codecpar+72,B.P))),T)})),n.push(t.DemuxerThread.startDemux(this.taskId,this.options.isLive,T)),this.subTaskId&&n.push(t.DemuxerThread.startDemux(this.subTaskId,this.options.isLive,T)),e.abrupt("return",g().all(n).then((0,a.A)(p().mark((function e(){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.status=4,!P.useMSE){e.next=6;break}return e.next=4,g().all([null===(r=P.video)||void 0===r?void 0:r.play(),null===(n=P.audio)||void 0===n?void 0:n.play()]).catch((function(e){if(P.video)return P.video.muted=!0,P.fire(J.IY),Z.R8("the audioContext was not started. It must be resumed after a user gesture",Ie,1226),P.video.play();throw e}));case 4:e.next=14;break;case 6:if(!P.audioSourceNode||"suspended"!==t.audioContext.state){e.next=14;break}if("suspended"===t.audioContext.state&&(P.fire(J.IY),Z.R8("the audioContext was not started. It must be resumed after a user gesture",Ie,1238)),!P.videoDecoder2VideoRenderChannel){e.next=13;break}t.AudioRenderThread.fakePlay(P.taskId),P.controller.setTimeUpdateListenType(0),e.next=14;break;case 13:throw new Error("the audioContext was not started. It must be resumed after a user gesture");case 14:P.fire(J.CN),P.statsController.start(),P.jitterBufferController&&P.jitterBufferController.start();case 17:case"end":return e.stop()}}),e)})))));case 164:case"end":return e.stop()}}),e,this)}))),function(){return Ee.apply(this,arguments)})},{key:"pause",value:(Re=(0,a.A)(p().mark((function e(){var r,n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z.pq("call pause, taskId: ".concat(this.taskId),Ie,1263),this.options.isLive){e.next=7;break}return r=[],this.useMSE?(this.audio&&this.audio.pause(),this.video&&this.video.pause(),r.push(t.MSEThread.pause(this.taskId))):(this.audioSourceNode&&(r.push(this.audioSourceNode.request("pause")),"suspended"===t.audioContext.state&&r.push(t.AudioRenderThread.pause(this.taskId))),this.videoDecoder2VideoRenderChannel&&r.push(t.VideoRenderThread.pause(this.taskId))),e.abrupt("return",g().all(r).then((function(){6===n.status?n.lastStatus=5:n.status=5,n.fire(J.NN),n.jitterBufferController&&n.jitterBufferController.stop()})));case 7:Z.R8("pause can only used in vod, taskId: ".concat(this.taskId),Ie,1302);case 8:case"end":return e.stop()}}),e,this)}))),function(){return Re.apply(this,arguments)})},{key:"seek",value:(Ue=(0,a.A)(p().mark((function e(r){var n,i,a,s,o,u,c,f,h,d,l,v,m,A,k,y;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z.pq("call seek, timestamp: ".concat(r,", taskId: ").concat(this.taskId),Ie,1314),this.formatContext.streams.length){e.next=4;break}return Z.z3("cannot found any stream to seek, taskId: ".concat(this.taskId),Ie,1317),e.abrupt("return");case 4:if(6!==this.status){e.next=7;break}return Z.R8("player is seeking now, taskId: ".concat(this.taskId),Ie,1322),e.abrupt("return");case 7:if(this.options.isLive){e.next=72;break}if(this.lastStatus=this.status,this.status=6,this.fire(J.Nz),n=BigInt(Math.floor(r)),!this.useMSE){e.next=17;break}return e.next=15,t.MSEThread.beforeSeek(this.taskId);case 15:e.next=19;break;case 17:return e.next=19,g().all([null===(i=t.AudioRenderThread)||void 0===i?void 0:i.beforeSeek(this.taskId),null===(a=t.VideoRenderThread)||void 0===a?void 0:a.beforeSeek(this.taskId)]);case 19:if(s=-BigInt(1),!this.isHls()){e.next=26;break}return e.next=23,t.DemuxerThread.seek(this.taskId,n,16);case 23:s=e.sent,e.next=38;break;case 26:if(!this.isDash()){e.next=35;break}return e.next=29,t.DemuxerThread.seek(this.taskId,n,16);case 29:if(s=e.sent,!this.subTaskId){e.next=33;break}return e.next=33,t.DemuxerThread.seek(this.subTaskId,n,16);case 33:e.next=38;break;case 35:return e.next=37,t.DemuxerThread.seek(this.taskId,n,8);case 37:s=e.sent;case 38:if(s>=BigInt(0)?Z.Yz("seeked to packet timestamp: ".concat(s,", taskId: ").concat(this.taskId),Ie,1359):Z.z3("demuxer seek failed, code: ".concat(s,", taskId: ").concat(this.taskId),Ie,1362),!this.useMSE){e.next=53;break}if(!(s>=BigInt(0))){e.next=47;break}return e.next=43,t.MSEThread.afterSeek(this.taskId,s>n?s:n);case 43:o=e.sent,this.video?this.video.currentTime=o:this.audio&&(this.audio.currentTime=o),e.next=49;break;case 47:return e.next=49,t.MSEThread.afterSeek(this.taskId,ae.Dh);case 49:this.status=this.lastStatus,this.fire(J.mQ),e.next=70;break;case 53:if(u=20,this.formatContext.streams.forEach((function(e){0===I.f[15](e.codecpar)&&(u=Math.max(Math.ceil((0,ie.lb)((0,C.A)(e.codecpar+72,B.P))),u))})),!(s>=BigInt(0))){e.next=64;break}return e.next=58,g().all([null===(c=t.AudioDecoderThread)||void 0===c?void 0:c.resetTask(this.taskId),null===(f=this.VideoDecoderThread)||void 0===f?void 0:f.resetTask(this.taskId)]);case 58:return e.next=60,g().all([null===(h=t.AudioRenderThread)||void 0===h?void 0:h.syncSeekTime(this.taskId,s>n?s:n,u),null===(d=t.VideoRenderThread)||void 0===d?void 0:d.syncSeekTime(this.taskId,s>n?s:n,u)]);case 60:return e.next=62,g().all([null===(l=t.AudioRenderThread)||void 0===l?void 0:l.afterSeek(this.taskId,s>n?s:n),null===(v=t.VideoRenderThread)||void 0===v?void 0:v.afterSeek(this.taskId,s>n?s:n)]);case 62:e.next=68;break;case 64:return e.next=66,g().all([null===(m=t.AudioRenderThread)||void 0===m?void 0:m.syncSeekTime(this.taskId,ae.Dh,u),null===(A=t.VideoRenderThread)||void 0===A?void 0:A.syncSeekTime(this.taskId,ae.Dh,u)]);case 66:return e.next=68,g().all([null===(k=t.AudioRenderThread)||void 0===k?void 0:k.afterSeek(this.taskId,ae.Dh),null===(y=t.VideoRenderThread)||void 0===y?void 0:y.afterSeek(this.taskId,ae.Dh)]);case 68:this.status=this.lastStatus,this.jitterBufferController&&this.jitterBufferController.reset();case 70:e.next=73;break;case 72:Z.R8("seek can only used in vod, taskId: ".concat(this.taskId),Ie,1428);case 73:case"end":return e.stop()}}),e,this)}))),function(e){return Ue.apply(this,arguments)})},{key:"getStreams",value:function(){return this.formatContext.streams}},{key:"getDuration",value:function(){if(!this.options.isLive){var e=BigInt(0);return this.formatContext.streams.forEach((function(t){var r=(0,ie.k)(t.duration,{den:I.f[15](t.timeBase+4),num:I.f[15](t.timeBase)},ae.i0);r>e&&(e=r)})),e}return BigInt(0)}},{key:"stop",value:(Pe=(0,a.A)(p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z.pq("call stop, taskId: ".concat(this.taskId),Ie,1464),0!==this.status){e.next=4;break}return Z.R8("player has already stopped, taskId: ".concat(this.taskId),Ie,1467),e.abrupt("return");case 4:if(!this.audioSourceNode){e.next=9;break}return e.next=7,this.audioSourceNode.request("stop");case 7:this.audioSourceNode.disconnect(),this.audioSourceNode=null;case 9:if(!t.VideoRenderThread){e.next=12;break}return e.next=12,t.VideoRenderThread.unregisterTask(this.taskId);case 12:if(!t.AudioRenderThread){e.next=15;break}return e.next=15,t.AudioRenderThread.unregisterTask(this.taskId);case 15:if(!this.VideoDecoderThread){e.next=18;break}return e.next=18,this.VideoDecoderThread.unregisterTask(this.taskId);case 18:if(!t.AudioDecoderThread){e.next=21;break}return e.next=21,t.AudioDecoderThread.unregisterTask(this.taskId);case 21:if(!t.MSEThread){e.next=24;break}return e.next=24,t.MSEThread.unregisterTask(this.taskId);case 24:if(!t.DemuxerThread){e.next=30;break}return e.next=27,t.DemuxerThread.unregisterTask(this.taskId);case 27:if(!this.subTaskId){e.next=30;break}return e.next=30,t.DemuxerThread.unregisterTask(this.subTaskId);case 30:if(!t.IOThread){e.next=33;break}return e.next=33,t.IOThread.unregisterTask(this.taskId);case 33:this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.controller&&this.controller.destroy(),null!==(r=this.video||this.audio)&&void 0!==r&&r.src&&URL.revokeObjectURL((this.video||this.audio).src),this.video&&(this.options.container.removeChild(this.video),this.video=null),this.audio&&(this.options.container.removeChild(this.audio),this.audio=null),this.canvas&&(this.options.container.removeChild(this.canvas),this.canvas=null),this.ioloader2DemuxerChannel=null,this.demuxer2VideoDecoderChannel=null,this.demuxer2AudioDecoderChannel=null,this.videoDecoder2VideoRenderChannel=null,this.audioDecoder2AudioRenderChannel=null,this.audioRender2AudioWorkletChannel=null,this.statsController.stop(),this.jitterBufferController&&this.jitterBufferController.stop(),this.fire(J.yd),this.status=0;case 49:case"end":return e.stop()}}),e,this)}))),function(){return Pe.apply(this,arguments)})},{key:"setPlaybackRate",value:function(e){var r,n,i;this.options.isLive?Z.R8("setPlaybackRate can only used in playback, taskId: ".concat(this.taskId),Ie,1566):(this.playRate=(0,re.A)(e,.5,2),this.useMSE?(t.MSEThread.setPlayRate(this.taskId,this.playRate),this.video?this.video.playbackRate=this.playRate:this.audio&&(this.audio.playbackRate=this.playRate)):(null===(r=t.AudioRenderThread)||void 0===r||r.setPlayTempo(this.taskId,this.playRate),null===(n=t.VideoRenderThread)||void 0===n||n.setPlayRate(this.taskId,this.playRate),null===(i=this.VideoDecoderThread)||void 0===i||i.setPlayRate(this.taskId,this.playRate)),Z.pq("player call setPlaybackRate, set ".concat(this.playRate,", taskId: ").concat(this.taskId),Ie,1563))}},{key:"getPlaybackRate",value:function(){return this.playRate}},{key:"resume",value:(Te=(0,a.A)(p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("suspended"!==(null===(r=t.audioContext)||void 0===r?void 0:r.state)){e.next=4;break}return e.next=3,g().race([t.audioContext.resume(),new pe.A(.1)]);case 3:"suspended"===t.audioContext.state?Z.R8("the audioContext was not allowed to start. It must be resumed after a user gesture",Ie,1589):(this.audioSourceNode&&this.controller.setTimeUpdateListenType(1),this.video&&(this.video.muted=!1));case 4:if(!this.video){e.next=11;break}if(this.video.muted=!1,this.video.played){e.next=9;break}return e.next=9,this.video.play();case 9:e.next=16;break;case 11:if(!this.audio){e.next=16;break}if(this.audio.muted=!1,this.audio.played){e.next=16;break}return e.next=16,this.audio.play();case 16:Z.pq("call resume, taskId: ".concat(this.taskId),Ie,1613);case 17:case"end":return e.stop()}}),e,this)}))),function(){return Te.apply(this,arguments)})},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.volume=(0,re.A)(e,0,3),this.gainNode&&t.audioContext?(this.gainNode.gain.cancelScheduledValues(t.audioContext.currentTime),ne.A.firefox&&!r?this.gainNode.gain.setValueAtTime(this.volume,t.audioContext.currentTime+1):0===this.gainNode.gain.value||0===this.volume||r?this.gainNode.gain.value=this.volume:this.gainNode.gain.exponentialRampToValueAtTime(this.volume,t.audioContext.currentTime+1)):this.video?this.video.volume=this.volume:this.audio&&(this.audio.volume=this.volume),Z.pq("player call setVolume, set ".concat(e,", used ").concat(this.volume,", taskId: ").concat(this.taskId),Ie,1655)}},{key:"getRenderMode",value:function(){return this.renderMode}},{key:"setRenderMode",value:function(e){var r;this.renderMode=e,this.useMSE&&this.video?this.video.style["object-fit"]=Be[this.renderMode]:null===(r=t.VideoRenderThread)||void 0===r||r.setRenderMode(this.taskId,e),Z.pq("player call setRenderMode, mode: ".concat(e,", taskId: ").concat(this.taskId),Ie,1685)}},{key:"getVideoTransformContext",value:function(){var e="";return 0!==this.renderRotate&&(e+="rotateZ(".concat(this.renderRotate,"deg)")),this.flipHorizontal&&(e+="".concat(e.length?" ":"","scaleX(-1)")),this.flipVertical&&(e+="".concat(e.length?" ":"","scaleY(-1)")),e}},{key:"setRotate",value:function(e){var r;this.renderRotate=e,this.useMSE&&this.video?this.video.style.transform=this.getVideoTransformContext():null===(r=t.VideoRenderThread)||void 0===r||r.setRenderRotate(this.taskId,e),Z.pq("player call setRotate, angle: ".concat(e,", taskId: ").concat(this.taskId),Ie,1715)}},{key:"enableHorizontalFlip",value:function(e){var r;this.flipHorizontal=e,this.useMSE&&this.video?this.video.style.transform=this.getVideoTransformContext():null===(r=t.VideoRenderThread)||void 0===r||r.enableHorizontalFlip(this.taskId,e),Z.pq("player call enableHorizontalFlip, enable: ".concat(e,", taskId: ").concat(this.taskId),Ie,1726)}},{key:"enableVerticalFlip",value:function(e){var r;this.flipVertical=e,this.useMSE&&this.video?this.video.style.transform=this.getVideoTransformContext():null===(r=t.VideoRenderThread)||void 0===r||r.enableVerticalFlip(this.taskId,e),Z.pq("player call enableVerticalFlip, enable: ".concat(e,", taskId: ").concat(this.taskId),Ie,1737)}},{key:"setLoop",value:function(e){this.options.loop=e,Z.pq("call setLoop, enable: ".concat(e,", taskId: ").concat(this.taskId),Ie,1749)}},{key:"resize",value:function(e,r){var n;this.useMSE||null===(n=t.VideoRenderThread)||void 0===n||n.resize(this.taskId,e,r),Z.pq("player call resize, width: ".concat(e,", height: ").concat(r,", taskId: ").concat(this.taskId),Ie,1762)}},{key:"isMSE",value:function(){return this.useMSE}},{key:"getVideoList",value:(_e=(0,a.A)(p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(r=t.IOThread)||void 0===r?void 0:r.getVideoList(this.taskId));case 1:case"end":return e.stop()}}),e,this)}))),function(){return _e.apply(this,arguments)})},{key:"getAudioList",value:(L=(0,a.A)(p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(r=t.IOThread)||void 0===r?void 0:r.getAudioList(this.taskId));case 1:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"getSubtitleList",value:(T=(0,a.A)(p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(r=t.IOThread)||void 0===r?void 0:r.getSubtitleList(this.taskId));case 1:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"selectVideo",value:(w=(0,a.A)(p().mark((function e(r){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=t.IOThread)||void 0===n?void 0:n.selectVideo(this.taskId,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"selectAudio",value:(x=(0,a.A)(p().mark((function e(r){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=t.IOThread)||void 0===n?void 0:n.selectAudio(this.taskId,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"selectSubtitle",value:(k=(0,a.A)(p().mark((function e(r){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=t.IOThread)||void 0===n?void 0:n.selectSubtitle(this.taskId,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"enterFullscreen",value:function(){var e=this.useMSE?this.video:this.canvas;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),Z.pq("player call enterFullscreen, taskId: ".concat(this.taskId),Ie,1810)}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),Z.pq("player call exitFullscreen, taskId: ".concat(this.taskId),Ie,1826)}},{key:"snapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.useMSE&&this.video){var r=document.createElement("canvas");return r.width=this.video.videoWidth,r.height=this.video.videoHeight,r.getContext("2d").drawImage(this.video,0,0),r.toDataURL("image/".concat(e),t)}if(this.canvas)return this.canvas.toDataURL("image/".concat(e),t)}},{key:"getStats",value:function(){return this.stats}},{key:"destroy",value:(A=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z.pq("call destroy, taskId: ".concat(this.taskId),Ie,1855),8!==this.status){e.next=4;break}return Z.R8("player has already destroyed, taskId: ".concat(this.taskId),Ie,1858),e.abrupt("return");case 4:return e.next=6,this.stop();case 6:if((0,S.A)(this.stats),this.stats=null,!this.VideoDecoderThread){e.next=13;break}return e.next=11,this.VideoDecoderThread.clear();case 11:(0,D.nE)(this.VideoDecoderThread),this.VideoDecoderThread=null;case 13:this.GlobalData&&(this.GlobalData.avframeList.clear((function(e){(0,W.to)(e)}),20),this.GlobalData.avpacketList.clear((function(e){(0,V.Up)(e)}),20),_.zr(this.GlobalData[b.o9]+24),_.zr(this.GlobalData[b.o9]+28),(0,S.A)(this.GlobalData),this.GlobalData=null),this.status=8;case 15:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"onVideoEnded",value:function(){this.videoEnded=!0,this.handleEnded()}},{key:"onAudioEnded",value:function(){this.audioEnded=!0,this.handleEnded()}},{key:"onCanvasUpdated",value:function(){this.updateCanvas=this.createCanvas();var e=(0,$.A)()&&H._7?this.updateCanvas.transferControlToOffscreen():this.updateCanvas;t.VideoRenderThread.updateCanvas.transfer(e).invoke(this.taskId,e)}},{key:"onGetDecoderResource",value:(m=(0,a.A)(p().mark((function e(t,r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getResource("decoder",r,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"onFirstVideoRendered",value:function(){Z.pq("first video frame rendered, taskId: ".concat(this.taskId),Ie,1915),this.fire(J.NX)}},{key:"onFirstAudioRendered",value:function(){Z.pq("first audio frame rendered, taskId: ".concat(this.taskId),Ie,1920),this.fire(J.NX)}},{key:"onStutter",value:function(){this.stats.audioStutter++}},{key:"onFirstVideoRenderedAfterUpdateCanvas",value:function(){this.updateCanvas&&(this.canvas&&this.options.container.removeChild(this.canvas),this.canvas=this.updateCanvas,this.options.container.appendChild(this.canvas),this.updateCanvas=null)}},{key:"onTimeUpdate",value:function(e){this.fire(J.E9,[e])}},{key:"onMSESeek",value:function(e){this.audio?this.audio.currentTime=e:this.video&&(this.video.currentTime=e)}},{key:"createVideoDecoderThread",value:(v=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.VideoDecoderThread){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,D.pt)(R.A,{name:"VideoDecoderThread",disableWorker:ne.A.safari&&!ne.A.checkVersion(ne.A.version,"16.1",!0)},31138).run();case 4:this.VideoDecoderThread=e.sent,this.VideoDecoderThread.setLogLevel(t.level);case 6:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})}],[{key:"startDemuxPipeline",value:(l=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.DemuxThreadReady){e.next=2;break}return e.abrupt("return",t.DemuxThreadReady);case 2:return e.abrupt("return",t.DemuxThreadReady=new(g())(function(){var e=(0,a.A)(p().mark((function e(r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.pt)(M.A,{name:"IOThread"},87243).run();case 2:return t.IOThread=e.sent,t.IOThread.setLogLevel(t.level),e.next=6,(0,D.pt)(U.A,{name:"DemuxerThread"},72480).run();case 6:t.DemuxerThread=e.sent,t.DemuxerThread.setLogLevel(t.level),r();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"startAudioPipeline",value:(o=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.AudioThreadReady){e.next=2;break}return e.abrupt("return",t.AudioThreadReady);case 2:return e.abrupt("return",t.AudioThreadReady=new(g())(function(){var e=(0,a.A)(p().mark((function e(r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.audioContext=new(AudioContext||webkitAudioContext),!ee.A.audioWorklet){e.next=4;break}return e.next=4,(0,Y.A)(t.audioContext,!H._7||ne.A.safari&&!ne.A.checkVersion(ne.A.version,"16.1",!0)?34268:5676);case 4:return e.next=6,(0,D.pt)(E.A,{name:"AudioDecoderThread",disableWorker:ne.A.safari&&!ne.A.checkVersion(ne.A.version,"16.1",!0)},18667).run();case 6:return t.AudioDecoderThread=e.sent,t.AudioDecoderThread.setLogLevel(t.level),e.next=10,(0,D.pt)(G.A,{name:"AudioRenderThread",disableWorker:ne.A.safari&&!ne.A.checkVersion(ne.A.version,"16.1",!0)},59377).run();case 10:t.AudioRenderThread=e.sent,t.AudioRenderThread.setLogLevel(t.level),r();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"startVideoRenderPipeline",value:(s=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.VideoThreadReady){e.next=2;break}return e.abrupt("return",t.VideoThreadReady);case 2:return e.abrupt("return",t.VideoThreadReady=new(g())(function(){var e=(0,a.A)(p().mark((function e(r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.pt)(j.A,{name:"VideoRenderThread",disableWorker:!(0,$.A)()},33968).run();case 2:t.VideoRenderThread=e.sent,t.VideoRenderThread.setLogLevel(t.level),r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"startMSEPipeline",value:(i=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.MSEThreadReady){e.next=2;break}return e.abrupt("return",t.MSEThreadReady);case 2:return e.abrupt("return",t.MSEThreadReady=new(g())(function(){var e=(0,a.A)(p().mark((function e(r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.pt)(de.A,{name:"MSEThread",disableWorker:!ee.A.workerMSE},25115).run();case 2:t.MSEThread=e.sent,t.MSEThread.setLogLevel(t.level),r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"startPipelines",value:(n=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.startDemuxPipeline();case 2:return e.next=4,t.startAudioPipeline();case 4:return e.next=6,t.startVideoRenderPipeline();case 6:return e.next=8,t.startMSEPipeline();case 8:Z.pq("AVPlayer pipelines started",Ie,2051);case 9:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"stopPipelines",value:(r=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.VideoRenderThread){e.next=4;break}return e.next=3,t.VideoRenderThread.clear();case 3:(0,D.nE)(t.VideoRenderThread);case 4:if(!t.AudioRenderThread){e.next=8;break}return e.next=7,t.AudioRenderThread.clear();case 7:(0,D.nE)(t.AudioRenderThread);case 8:if(!t.AudioDecoderThread){e.next=12;break}return e.next=11,t.AudioDecoderThread.clear();case 11:(0,D.nE)(t.AudioDecoderThread);case 12:if(!t.DemuxerThread){e.next=16;break}return e.next=15,t.DemuxerThread.clear();case 15:(0,D.nE)(t.DemuxerThread);case 16:if(!t.IOThread){e.next=20;break}return e.next=19,t.IOThread.clear();case 19:(0,D.nE)(t.IOThread);case 20:if(!t.MSEThread){e.next=24;break}return e.next=23,t.MSEThread.clear();case 23:(0,D.nE)(t.MSEThread);case 24:t.AudioDecoderThread=null,t.DemuxerThread=null,t.IOThread=null,t.audioContext=null,t.MSEThread=null,Z.pq("AVPlayer pipelines stopped",Ie,2088);case 30:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"setLogLevel",value:function(e){t.level=e,Z.V$(e),t.IOThread&&t.IOThread.setLogLevel(e),t.DemuxerThread&&t.DemuxerThread.setLogLevel(e),t.AudioDecoderThread&&t.AudioDecoderThread.setLogLevel(e),t.AudioRenderThread&&t.AudioRenderThread.setLogLevel(e),t.VideoRenderThread&&t.VideoRenderThread.setLogLevel(e),t.MSEThread&&t.MSEThread.setLogLevel(e),Z.pq("set log level: ".concat(e),Ie,2115)}}]),t}(L.A);(0,d.A)(Ue,"level",Z.rD),(0,d.A)(Ue,"DemuxThreadReady",void 0),(0,d.A)(Ue,"AudioThreadReady",void 0),(0,d.A)(Ue,"VideoThreadReady",void 0),(0,d.A)(Ue,"MSEThreadReady",void 0),(0,d.A)(Ue,"IOThread",void 0),(0,d.A)(Ue,"DemuxerThread",void 0),(0,d.A)(Ue,"AudioDecoderThread",void 0),(0,d.A)(Ue,"AudioRenderThread",void 0),(0,d.A)(Ue,"VideoRenderThread",void 0),(0,d.A)(Ue,"MSEThread",void 0),(0,d.A)(Ue,"audioContext",void 0),(0,d.A)(Ue,"Resource",new(m()))},11628:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(84149),f=r(86368),h=function(){function e(t){var r=this;(0,i.A)(this,e),(0,s.A)(this,"videoRenderControlChannel",void 0),(0,s.A)(this,"audioRenderControlChannel",void 0),(0,s.A)(this,"muxerControlChannel",void 0),(0,s.A)(this,"demuxerControlChannel",void 0),(0,s.A)(this,"videoRenderControlIPCPort",void 0),(0,s.A)(this,"audioRenderControlIPCPort",void 0),(0,s.A)(this,"muxerControlIPCPort",void 0),(0,s.A)(this,"demuxerControlIPCPort",void 0),(0,s.A)(this,"observer",void 0),(0,s.A)(this,"visibilityHidden",void 0),(0,s.A)(this,"onVisibilityChange",void 0),(0,s.A)(this,"timeUpdateListenType",void 0),(0,s.A)(this,"enableAudioVideoSync",void 0),this.observer=t,this.videoRenderControlChannel=(0,f.A)(),this.audioRenderControlChannel=(0,f.A)(),this.muxerControlChannel=(0,f.A)(),this.demuxerControlChannel=(0,f.A)(),this.videoRenderControlIPCPort=new c.Ay(this.videoRenderControlChannel.port2),this.audioRenderControlIPCPort=new c.Ay(this.audioRenderControlChannel.port2),this.muxerControlIPCPort=new c.Ay(this.muxerControlChannel.port2),this.demuxerControlIPCPort=new c.Ay(this.demuxerControlChannel.port2),this.enableAudioVideoSync=!0,this.videoRenderControlIPCPort.on(c.Wo,(function(e){switch(e.method){case"ended":r.observer.onVideoEnded();break;case"updateCanvas":r.observer.onCanvasUpdated();break;case"firstRendered":r.observer.onFirstVideoRendered();break;case"firstRenderedAfterUpdateCanvas":r.observer.onFirstVideoRenderedAfterUpdateCanvas();break;case"syncPts":0===r.timeUpdateListenType&&r.observer.onTimeUpdate(e.params.pts)}})),this.audioRenderControlIPCPort.on(c.Wo,(function(e){switch(e.method){case"syncPts":r.enableAudioVideoSync&&r.videoRenderControlIPCPort.notify("syncPts",e.params),1===r.timeUpdateListenType&&r.observer.onTimeUpdate(e.params.pts);break;case"ended":r.observer.onAudioEnded()}})),this.muxerControlIPCPort.on(c.Wo,(function(e){"seek"===e.method&&r.observer.onMSESeek(e.params.time)})),this.demuxerControlIPCPort.on(c.S3,function(){var e=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.method,e.next="getDecoderResource"===e.t0?3:10;break;case 3:return e.t1=r.demuxerControlIPCPort,e.t2=t,e.next=7,r.observer.onGetDecoderResource(t.params.mediaType,t.params.codecId);case 7:return e.t3=e.sent,e.t1.reply.call(e.t1,e.t2,e.t3),e.abrupt("break",10);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.onVisibilityChange=function(e){r.visibilityHidden="hidden"===document.visibilityState,r.videoRenderControlIPCPort.notify("skipRender",{skipRender:r.visibilityHidden})},this.visibilityHidden="hidden"===document.visibilityState,document.addEventListener("visibilitychange",this.onVisibilityChange)}return(0,a.A)(e,[{key:"getVideoRenderControlPort",value:function(){return this.videoRenderControlChannel.port1}},{key:"getAudioRenderControlPort",value:function(){return this.audioRenderControlChannel.port1}},{key:"getMuxerRenderControlPort",value:function(){return this.muxerControlChannel.port1}},{key:"getDemuxerRenderControlPort",value:function(){return this.demuxerControlChannel.port1}},{key:"setTimeUpdateListenType",value:function(e){this.timeUpdateListenType=e}},{key:"setEnableAudioVideoSync",value:function(e){this.enableAudioVideoSync=e}},{key:"destroy",value:function(){this.videoRenderControlIPCPort&&this.videoRenderControlIPCPort.destroy(),this.audioRenderControlIPCPort&&this.audioRenderControlIPCPort.destroy(),this.muxerControlIPCPort&&this.muxerControlIPCPort.destroy(),this.demuxerControlIPCPort&&this.demuxerControlIPCPort.destroy(),this.onVisibilityChange&&(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.onVisibilityChange=null),this.videoRenderControlIPCPort=this.audioRenderControlIPCPort=this.muxerControlIPCPort=this.videoRenderControlChannel=this.audioRenderControlChannel=this.demuxerControlChannel=this.muxerControlChannel=null}}]),e}()},2368:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(78716),i=r(81570),a=r(134),s=r(63939),o=r(50932),u=r(54058),c=r(38724),f=200,h=function(){function e(t){var r=this;(0,n.A)(this,e),(0,a.A)(this,"timer",void 0),(0,a.A)(this,"interval",void 0),(0,a.A)(this,"data",void 0),(0,a.A)(this,"lastIncomingPacketCount",void 0),(0,a.A)(this,"shutterCount",void 0),(0,a.A)(this,"lastShutterCount",void 0),(0,a.A)(this,"isFirst",void 0),(0,a.A)(this,"max",void 0),(0,a.A)(this,"min",void 0),(0,a.A)(this,"targetPlaybackRate",void 0),(0,a.A)(this,"currentPlaybackRate",void 0),(0,a.A)(this,"playbackRateTimer",void 0),(0,a.A)(this,"options",void 0),this.options=t,this.interval=1e3,this.isFirst=!0,this.data=[],this.lastIncomingPacketCount=BigInt(0),this.shutterCount=0,this.lastShutterCount=0,this.max=1e3*t.max>>>0,this.min=1e3*t.min>>>0,o.M[15](this.options.jitterBuffer,this.min),o.M[15](this.options.jitterBuffer+4,this.max),t.lowLatencyStart&&o.M[15](this.options.jitterBuffer+4,this.min+f),this.targetPlaybackRate=1,this.currentPlaybackRate=1,this.playbackRateTimer=new u.A((function(){if(r.currentPlaybackRate>r.targetPlaybackRate){var e=Math.max(r.targetPlaybackRate,r.currentPlaybackRate-.01);r.options.observer.onSetPlayRate(e),r.currentPlaybackRate=e}else if(r.currentPlaybackRate<r.targetPlaybackRate){var t=Math.min(r.targetPlaybackRate,r.currentPlaybackRate+.01);r.options.observer.onSetPlayRate(t),r.currentPlaybackRate=t}else r.playbackRateTimer.stop()}),0,200),this.timer=new c.A(this.onTimer.bind(this),1e3,this.interval)}return(0,i.A)(e,[{key:"start",value:function(){this.timer.start(),this.isFirst=!0,this.lastIncomingPacketCount=s.f[17](this.options.stats+24)+s.f[17](this.options.stats+112),this.shutterCount=0,this.lastShutterCount=s.f[15](this.options.stats+276)+s.f[15](this.options.stats+272),this.computePlayRate()}},{key:"stop",value:function(){this.timer.stop(),this.data.length=0,this.isFirst=!0,this.playbackRateTimer.isStarted()&&(this.playbackRateTimer.stop(),this.targetPlaybackRate=this.currentPlaybackRate=1,this.options.observer.onSetPlayRate(1))}},{key:"reset",value:function(){this.data.length=0,this.isFirst=!0,this.lastIncomingPacketCount=s.f[17](this.options.stats+24)+s.f[17](this.options.stats+112),this.shutterCount=0,this.lastShutterCount=s.f[15](this.options.stats+276)+s.f[15](this.options.stats+272),this.targetPlaybackRate=this.currentPlaybackRate=1}},{key:"setPlayRate",value:function(e){this.targetPlaybackRate=e,this.options.useMse?(this.options.observer.onSetPlayRate(this.targetPlaybackRate),this.currentPlaybackRate=this.targetPlaybackRate):this.currentPlaybackRate===e||this.playbackRateTimer.isStarted()||this.playbackRateTimer.start()}},{key:"computePlayRate",value:function(){var e=s.f[15](this.options.stats+236)?s.f[15](this.options.stats+32)/s.f[15](this.options.stats+236)*1e3:s.f[15](this.options.stats+224)?s.f[15](this.options.stats+120)/s.f[15](this.options.stats+224)*1e3:0;e<s.f[15](this.options.jitterBuffer)>>1&&e<2?this.setPlayRate(.8):e<s.f[15](this.options.jitterBuffer)-f&&e<2?this.setPlayRate(.95):e>s.f[15](this.options.jitterBuffer+4)+f?this.setPlayRate(1.05):this.setPlayRate(1),e>this.max<<1&&this.options.observer.onCroppingBuffer(s.f[15](this.options.jitterBuffer+4))}},{key:"process",value:function(){var e=this.data.reduce((function(e,t,r){return e+t*(r+1)}),0)/55,t=this.data.reduce((function(t,r){return t+Math.pow(r-e,2)}),0)/this.data.length,r=Math.sqrt(t),n=Math.round(e/(this.interval/1e3)),i=s.f[15](this.options.stats+224)+s.f[15](this.options.stats+236);n<i>>1||this.shutterCount>3?(o.M[15](this.options.jitterBuffer,Math.min(2*s.f[15](this.options.jitterBuffer),this.max-f)),o.M[15](this.options.jitterBuffer+4,Math.min(2*s.f[15](this.options.jitterBuffer+4),this.max))):n>=i&&r<50?(o.M[15](this.options.jitterBuffer,Math.max(s.f[15](this.options.jitterBuffer)-f,this.min)),o.M[15](this.options.jitterBuffer+4,Math.max(s.f[15](this.options.jitterBuffer+4)-f,this.min+f))):r>100?(o.M[15](this.options.jitterBuffer,Math.min(s.f[15](this.options.jitterBuffer)+f,this.max-f)),o.M[15](this.options.jitterBuffer+4,Math.min(s.f[15](this.options.jitterBuffer+4)+f,this.max))):r<20?s.f[15](this.options.jitterBuffer)===this.min?o.M[15](this.options.jitterBuffer+4,Math.max(s.f[15](this.options.jitterBuffer+4)-f,this.min+f)):o.M[15](this.options.jitterBuffer,Math.max(s.f[15](this.options.jitterBuffer)-f,this.min)):s.f[15](this.options.jitterBuffer+4)===this.max?o.M[15](this.options.jitterBuffer,Math.min(s.f[15](this.options.jitterBuffer)+f,this.max-f)):o.M[15](this.options.jitterBuffer+4,Math.min(s.f[15](this.options.jitterBuffer+4)+f,this.max)),this.computePlayRate(),o.M[19](this.options.stats+264,r)}},{key:"onTimer",value:function(){var e=s.f[17](this.options.stats+24)+s.f[17](this.options.stats+112);this.isFirst?this.isFirst=!1:this.data.push(0|Number(e-this.lastIncomingPacketCount&0xffffffffn)),this.lastIncomingPacketCount=e,s.f[15](this.options.stats+276)+s.f[15](this.options.stats+272)>this.lastShutterCount?this.shutterCount++:this.shutterCount=0,this.lastShutterCount=s.f[15](this.options.stats+276)+s.f[15](this.options.stats+272),this.data.length>10&&this.data.shift(),10===this.data.length&&this.process()}}]),e}()},78201:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(78716),i=r(81570),a=r(134),s=r(63939),o=r(50932),u=r(54058),c=function(){function e(t){(0,n.A)(this,e),(0,a.A)(this,"stats",void 0),(0,a.A)(this,"timer",void 0),(0,a.A)(this,"videoFrameRenderCount",void 0),(0,a.A)(this,"videoFrameDecodeCount",void 0),(0,a.A)(this,"audioFrameRenderCount",void 0),(0,a.A)(this,"audioFrameDecodeCount",void 0),(0,a.A)(this,"videoPacketBytes",void 0),(0,a.A)(this,"audioPacketBytes",void 0),(0,a.A)(this,"bufferReceiveBytes",void 0),this.stats=t,this.timer=new u.A(this.onTimer.bind(this),1e3,1e3)}return(0,i.A)(e,[{key:"reset",value:function(){this.videoFrameRenderCount=s.f[17](this.stats+160),this.videoFrameDecodeCount=s.f[17](this.stats+144),this.audioFrameRenderCount=s.f[17](this.stats+72),this.audioFrameDecodeCount=s.f[17](this.stats+56),this.videoPacketBytes=s.f[17](this.stats+104),this.audioPacketBytes=s.f[17](this.stats+16),this.bufferReceiveBytes=s.f[17](this.stats+192)}},{key:"start",value:function(){this.reset(),this.timer.start()}},{key:"stop",value:function(){this.timer.stop()}},{key:"onTimer",value:function(){o.M[15](this.stats+240,0),o.M[15](this.stats+244,0),o.M[15](this.stats+248,0),o.M[15](this.stats+252,0),o.M[15](this.stats+220,0|Number(s.f[17](this.stats+160)-this.videoFrameRenderCount&0xffffffffn)),o.M[15](this.stats+216,0|Number(s.f[17](this.stats+144)-this.videoFrameDecodeCount&0xffffffffn)),o.M[15](this.stats+232,0|Number(s.f[17](this.stats+72)-this.audioFrameRenderCount&0xffffffffn)),o.M[15](this.stats+228,0|Number(s.f[17](this.stats+56)-this.audioFrameDecodeCount&0xffffffffn)),o.M[15](this.stats+212,0|Number(s.f[17](this.stats+104)-this.videoPacketBytes&0xffffffffn)),o.M[15](this.stats+208,0|Number(s.f[17](this.stats+16)-this.audioPacketBytes&0xffffffffn)),o.M[15](this.stats+256,0|Number(s.f[17](this.stats+192)-this.bufferReceiveBytes&0xffffffffn)),"visible"===document.visibilityState&&(s.f[15](this.stats+220)<.5*s.f[15](this.stats+224)||s.f[15](this.stats+252)>6e3/s.f[15](this.stats+224))&&o.M[15](this.stats+276,s.f[15](this.stats+276)+1),this.reset()}}]),e}()},28090:(e,t,r)=>{"use strict";r.d(t,{CN:()=>s,E9:()=>d,F5:()=>n,IY:()=>l,NN:()=>o,NX:()=>p,Nz:()=>f,S2:()=>i,d6:()=>a,hV:()=>c,mQ:()=>h,yd:()=>u});var n="loading",i="loaded",a="playing",s="played",o="paused",u="stopped",c="ended",f="seeking",h="seeked",d="time",l="resume",p="firstVideoRendered"},76750:(e,t,r)=>{"use strict";function n(){if("function"==typeof MediaSource)return MediaSource;if("function"==typeof ManagedMediaSource)return ManagedMediaSource;throw new Error("not support mse")}r.d(t,{A:()=>n})},47595:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(95797),i=r(44690),a=r(86834);function s(){var e=n.A.offscreenCanvas;return i.A.mac&&a.A.safari&&(i.A.version<"12"||a.A.version<"17")&&(e=!1),e}},25115:(e,t,r)=>{"use strict";r.d(t,{A:()=>le});var n=r(88435),i=r.n(n),a=r(69736),s=r.n(a),o=r(44301),u=r.n(o),c=r(82731),f=r.n(c),h=r(59614),d=r.n(h),l=r(969),p=r.n(l),v=r(66681),m=r.n(v),A=r(134),g=r(25182),k=r(78716),y=r(81570),b=r(77193),x=r(25767),w=r(31060),_=r(54001),T=r.n(_),P=r(36443),I=r.n(P),B=r(14686),C=r(61499),S=r(63939),M=r(9599),U=r(29170),R=r(50932),E=r(12264),D=r(44315),L=r(44527),F=r(9705),O=r(84149),N=r(4624),z=r(35336),W=r(92174),V=r(69765),G=r(71766),j=r(39148),q=r(60120),H=r(84290),Y=r(77231),Q=r(44328),K=r(86932),X=r(85224),J=r(10333),$=r(50400),Z=r(71517),ee=r(37837),te=r(86834),re=r(85103),ne=r(13724),ie=r(43607),ae=r(65977),se=r(76750);function oe(e,t){var r=s()(e);if(u()){var n=u()(e);t&&(n=n.filter((function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){(0,A.A)(e,t,r[t])})):d()?p()(e,d()(r)):oe(Object(r)).forEach((function(t){m()(e,t,f()(r,t))}))}return e}function ce(e,t,r){return t=(0,x.A)(t),(0,b.A)(e,fe()?i()(t,r||[],(0,x.A)(e).constructor):t.apply(e,r))}function fe(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(fe=function(){return!!e})()}var he="src/avplayer/mse/MSEPipeline.ts";function de(e,t,r,n){if(t!==n)return!0;for(var i=!1,a=0;a<t;a++)if(S.f[2](e+a)!==S.f[2](r+a)){i=!0;break}return i}var le=function(e){function t(){return(0,k.A)(this,t),ce(this,t)}var r,n,i,a,s,o,u,c,f,h,d,l,p,v;return(0,w.A)(t,e),(0,y.A)(t,[{key:"syncToKeyframe",value:(v=(0,g.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,!t.video){e.next=30;break}case 2:return e.next=5,this.pullAVPacket(t.video,t);case 5:if(t.video.backPacket=e.sent,!(t.video.backPacket<0)){e.next=10;break}return t.video.packetEnded=!0,t.video.backPacket=0,e.abrupt("break",30);case 10:if(!t.audio||t.audio.packetEnded||t.audio.backPacket&&!((0,Q.k)(S.f[17](t.audio.backPacket+16),(0,U.A)(t.audio.backPacket+72,M.P),Y.i0)<(0,Q.k)(S.f[17](t.video.backPacket+16),(0,U.A)(t.video.backPacket+72,M.P),Y.i0))){e.next=24;break}case 11:return t.audio.backPacket>0&&t.avpacketPool.release(t.audio.backPacket),e.next=15,this.pullAVPacket(t.audio,t);case 15:if(t.audio.backPacket=e.sent,!(t.audio.backPacket<0)){e.next=20;break}return t.audio.packetEnded=!0,t.audio.backPacket=0,e.abrupt("break",24);case 20:if(!((0,Q.k)(S.f[17](t.audio.backPacket+16),(0,U.A)(t.audio.backPacket+72,M.P),Y.i0)>(0,Q.k)(S.f[17](t.video.backPacket+16),(0,U.A)(t.video.backPacket+72,M.P),Y.i0))){e.next=22;break}return e.abrupt("break",24);case 22:e.next=11;break;case 24:if(!(1&S.f[15](t.video.backPacket+36))){e.next=26;break}return e.abrupt("break",30);case 26:r=!1,t.avpacketPool.release(t.video.backPacket),e.next=2;break;case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"getSourceOpenHandler",value:function(e){var t=this;return(0,g.A)(I().mark((function r(){var n,i,a,s;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.syncToKeyframe(e);case 2:return n=[],e.audio&&(e.audio.track.setSourceBuffer(t.createSourceBuffer(e.mediaSource,e.audio.oformatContext.streams[0].codecpar[C.o9])),e.audio.enableRawMpeg||(W.ho(e.audio.oformatContext,{paddingZero:!0}),W.bx(e.audio.oformatContext)),n.push(t.startMux(e.audio,e))),e.video&&(e.video.track.setSourceBuffer(t.createSourceBuffer(e.mediaSource,e.video.oformatContext.streams[0].codecpar[C.o9])),e.video.enableRawMpeg||(W.ho(e.video.oformatContext,{paddingZero:!0}),W.bx(e.video.oformatContext)),n.push(t.startMux(e.video,e))),r.next=7,T().all(n);case 7:if(i=!1,a=!1,!e.audio){r.next=24;break}return r.next=12,t.pullAVPacket(e.audio,e);case 12:if(e.audio.backPacket=r.sent,!(e.audio.backPacket>0)){r.next=21;break}return i=!0,r.next=17,t.pullAVPacket(e.audio,e);case 17:e.audio.frontPacket=r.sent,e.audio.frontPacket>0?e.audio.frontBuffered=!0:(e.audio.frontPacket=0,e.audio.packetEnded=!0),r.next=22;break;case 21:e.audio.packetEnded=!0;case 22:e.audio.enableRawMpeg||e.audio.oformatContext.ioWriter.flush(),e.audio.track.addBuffer(e.audio.bufferQueue.flush());case 24:if(!e.video){r.next=39;break}return r.next=27,t.pullAVPacket(e.video,e);case 27:if(e.video.backPacket=r.sent,!(e.video.backPacket>0)){r.next=36;break}return a=!0,r.next=32,t.pullAVPacket(e.video,e);case 32:e.video.frontPacket=r.sent,e.video.frontPacket>0?e.video.frontBuffered=!0:(e.video.frontPacket=0,e.video.packetEnded=!0),r.next=37;break;case 36:e.video.packetEnded=!0;case 37:e.video.enableRawMpeg||e.video.oformatContext.ioWriter.flush(),e.video.track.addBuffer(e.video.bufferQueue.flush());case 39:return e.audio&&(i?(t.createLoop(e.audio,e),e.audio.loop.start()):e.audio.track.end()),e.video&&(a?(t.createLoop(e.video,e),e.video.loop.start()):e.video.track.end()),r.next=43,new ne.A(.1);case 43:s=0,e.audio?s=e.video?Math.max(e.audio.track.getBufferedStart(),e.video.track.getBufferedStart()):e.audio.track.getBufferedStart():e.video&&(s=e.video.track.getBufferedStart()),(te.A.safari||s>.1)&&e.controlIPCPort.notify("seek",{time:s});case 46:case"end":return r.stop()}}),r)})))}},{key:"createSourceBuffer",value:function(e,t){var r="";return 1===S.f[15](t)?r=(0,X.A)(t):0===S.f[15](t)&&(r=(0,J.A)(t)),r||N.h2("invalid stream",he,343),e.addSourceBuffer(r)}},{key:"mixExtradata",value:function(e,t,r,n){t.oformatContext.streams[0].codecpar.codecId;var i=t.oformatContext.streams[0].codecpar;i.extradata&&(0,ee.Eb)(i.extradata),i.extradata=(0,ee.sY)(n),(0,B.Mr)(i.extradata,r,n),i.extradataSize=n}},{key:"pullAVPacket",value:(p=(0,g.A)(I().mark((function e(t,r){var n,i,a,s,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.pullQueue).ended||n.queue.length){e.next=3;break}return e.abrupt("return",-1048576);case 3:if(!n.queue.length){e.next=7;break}e.t0=n.queue.shift(),e.next=10;break;case 7:return e.next=9,t.pullIPC.request("pull");case 9:e.t0=e.sent;case 10:if(!((i=e.t0)<0)){e.next=14;break}return n.ended=!0,e.abrupt("return",-1048576);case 14:if(S.f[17](i+16)<n.lastDTS&&N.R8("got packet with dts ".concat(S.f[17](i+16),", which is earlier then the last packet(").concat(n.lastDTS,")"),he,386),!("audio"===t.type&&S.f[17](i+16)>0)){e.next=19;break}R.M[17](i+8,S.f[17](i+16)),e.next=54;break;case 19:if("video"!==t.type||r.isLive){e.next=54;break}if(!(1&S.f[15](i+36))){e.next=53;break}if(!(S.f[17](i+8)<n.lastPTS)){e.next=50;break}return N.R8("got packet with pts ".concat(S.f[17](i+8),", which is earlier then the last packet(").concat(n.lastPTS,"), try to fix it!"),he,400),R.M[17](i+8,n.lastPTS+(S.f[17](i+16)-n.lastDTS)),e.next=26,t.pullIPC.request("pull");case 26:if(!((a=e.sent)<0)){e.next=31;break}n.ended=!0,e.next=48;break;case 31:n.queue.push(a),s=S.f[17](a+8),o=S.f[17](a+8);case 34:return e.next=37,t.pullIPC.request("pull");case 37:if(!((u=e.sent)<0)){e.next=41;break}return n.ended=!0,e.abrupt("break",47);case 41:if(n.queue.push(u),!(S.f[17](u+8)>o)){e.next=44;break}return e.abrupt("break",47);case 44:s=ie.jk(s,S.f[17](u+8)),e.next=34;break;case 47:s<S.f[17](i+8)&&(n.diff=S.f[17](i+16)-n.lastDTS);case 48:e.next=51;break;case 50:n.diff=BigInt(0);case 51:e.next=54;break;case 53:R.M[17](i+8,S.f[17](i+8)+n.diff);case 54:return S.f[17](i+8)>n.lastPTS&&(n.lastPTS=S.f[17](i+8)),n.lastDTS=S.f[17](i+16),"audio"===t.type&&n.useSampleRateTimeBase&&(n.frameCount===Y.Dh?(n.frameCount=(0,Q.k)(S.f[17](i+16),(0,U.A)(i+72,M.P),t.oformatContext.streams[0].timeBase),R.M[17](i+16,n.frameCount),R.M[17](i+8,n.frameCount)):(n.frameCount=n.frameCount+BigInt(S.f[15](t.codecpar+144)>>>0),R.M[17](i+16,n.frameCount),R.M[17](i+8,n.frameCount)),(0,B.Mr)(i+72,t.oformatContext.streams[0].timeBase[C.o9],8)),e.abrupt("return",i);case 58:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)})},{key:"writeAVPacket",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.enableRawMpeg){if(!t.timestampOffsetUpdated){var n=(0,Q.k)(S.f[17](e+8),(0,U.A)(e+72,M.P),Y.i0);t.track.updateTimestampOffset((0|Number(0xffffffffn&n))/1e3),t.timestampOffsetUpdated=!0}t.bufferQueue.push((0,B.s3)(S.f[20](e+24),S.f[15](e+28)).slice())}else W.XA(t.oformatContext,e),r&&t.oformatContext.ioWriter.flush()}},{key:"swap",value:function(e,t){var r=this;if(e.backPacket&&t.avpacketPool.release(e.backPacket),e.backPacket=0,!e.frontBuffered)return!1;e.backPacket=e.frontPacket,e.frontPacket=0,e.frontBuffered=!1;var n=(0,K.A)();return this.pullAVPacket(e,t).then((function(i){if(i<0)return e.packetEnded=!0,void(e.frontPacket=0);var a=(0,K.A)()-n;a>5&&(e.startTimestamp+=BigInt(Math.floor(a))),e.frontPacket=i,e.frontBuffered=!0,e.seekSync&&(e.seekSync(),e.seekSync=null),e.backPacket||r.swap(e,t)})),!0}},{key:"createLoop",value:function(e,t){var r=this;e.loop=new j.A((function(){var n=e.track.getBufferedEnd()-(t.currentTime+((0,K.A)()-t.currentTimeNTP)/1e3);if(n>1*(t.playRate>BigInt(100)?Number(t.playRate)/100:1))e.loop.emptyTask();else if(e.backPacket){var i=e.backPacket,a=(0,Q.k)(S.f[17](i+16),(0,U.A)(i+72,M.P),Y.i0);if(t.enableJitterBuffer&&(S.f[15](t.stats+236)?S.f[15](t.stats+32)/S.f[15](t.stats+236)*1e3:S.f[15](t.stats+224)?S.f[15](t.stats+120)/S.f[15](t.stats+224)*1e3:0)<=S.f[15](t.jitterBuffer)&&r.setPlayRate(t.taskId,1),a*BigInt(100)/t.playRate+e.startTimestamp-BigInt(Math.floor((0,K.A)()))<=0||n<.5*(t.playRate>BigInt(100)?Number(t.playRate)/100:1)){e.track.isPaused()&&e.track.enqueue(),R.M[15](i+32,e.oformatContext.streams[0].index);var s=(0,Z.rU)(i,1);s&&de(e.oformatContext.streams[0].codecpar.extradata,e.oformatContext.streams[0].codecpar.extradataSize,S.f[20](s),S.f[15](s+4))&&r.mixExtradata(i,e,S.f[20](s),S.f[15](s+4)),r.writeAVPacket(i,e,!0),e.track.addBuffer(e.bufferQueue.flush());var o=e.oformatContext.streams[0].codecpar.codecType;if(0===o?(R.M[17](t.stats+144,S.f[17](t.stats+144)+BigInt(1)),R.M[17](t.stats+160,S.f[17](t.stats+160)+BigInt(1))):1===o&&(R.M[17](t.stats+56,S.f[17](t.stats+56)+BigInt(1)),R.M[17](t.stats+72,S.f[17](t.stats+72)+BigInt(1))),t.playRate!==t.targetRate&&(e.startTimestamp=BigInt(Math.floor((0,K.A)()))-a*BigInt(100)/t.targetRate,t.playRate=t.targetRate),e.packetEnded&&!e.frontPacket)return e.ended=!0,e.loop.stop(),e.enableRawMpeg||(W.dJ(e.oformatContext),W.bX(e.oformatContext)),e.bufferQueue.size&&e.track.addBuffer(e.bufferQueue.flush()),void e.track.end();r.swap(e,t)}else e.loop.emptyTask()}else e.packetEnded&&!e.frontPacket?(e.ended=!0,e.loop.stop(),e.enableRawMpeg||(W.dJ(e.oformatContext),W.bX(e.oformatContext)),e.bufferQueue.size&&e.track.addBuffer(e.bufferQueue.flush()),e.track.end()):e.loop.emptyTask()}),0,0)}},{key:"startMux",value:(l=(0,g.A)(I().mark((function e(t,r){var n,i,a,s,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Y.Dh,i=Y.Dh,a=BigInt(0),o=t.oformatContext.streams[0].timeBase,t.backPacket>0&&(n=S.f[17](t.backPacket+16),i=S.f[17](t.backPacket+8),R.M[15](t.backPacket+32,t.oformatContext.streams[0].index),this.writeAVPacket(t.backPacket,t),r.avpacketPool.release(t.backPacket),t.backPacket=0);case 5:if(!(n<BigInt(0)||(0,Q.k)(a-n,o,Y.i0)<r.cacheDuration)){e.next=21;break}return e.next=8,this.pullAVPacket(t,r);case 8:if(!((s=e.sent)<0)){e.next=12;break}return t.packetEnded=!0,e.abrupt("break",21);case 12:a=S.f[17](s+16),n<BigInt(0)&&(n=a,i=S.f[17](s+8)),S.f[17](s+8)<i&&(i=S.f[17](s+8)),r.video&&r.video.streamIndex===S.f[15](s+32)&&(u=(0,Z.rU)(s,1))&&de(t.oformatContext.streams[0].codecpar.extradata,t.oformatContext.streams[0].codecpar.extradataSize,S.f[20](u),S.f[15](u+4))&&this.mixExtradata(s,t,S.f[20](u),S.f[15](u+4)),R.M[15](s+32,t.oformatContext.streams[0].index),this.writeAVPacket(s,t),r.avpacketPool.release(s),e.next=5;break;case 21:i!==Y.Dh&&t.startPTS<=BigInt(0)&&(t.startPTS=i),t.pullQueue.diff=BigInt(0),r.currentTimeNTP=(0,K.A)(),r.currentTime=0,t.startTimestamp=BigInt(Math.floor((0,K.A)()))-(0,Q.k)(a,o,Y.i0)*BigInt(100)/r.playRate;case 26:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"resetResource",value:function(e,t){e.bufferQueue.flush();var r=new V.A({fragmentMode:1,fragment:!0,fastOpen:!0,movMode:0,defaultBaseIsMoof:!0});e.oformatContext.oformat=r;var n=new q.A;n.onQuotaExceededError=function(){e.startTimestamp-=BigInt(100)},n.onEnded=function(){t.audio&&!t.audio.ended||t.video&&!t.video.ended||(t.mediaSource.endOfStream(),N.pq("muxer ended, taskId: ".concat(t.taskId),he,718))},e.track=n,e.packetEnded=!1,e.ended=!1,e.startTimestamp=BigInt(0),e.frontBuffered=!1,e.seekSync=null,e.loop&&(e.loop.destroy(),e.loop=null),e.frontPacket&&(t.avpacketPool.release(e.frontPacket),e.frontPacket=0),e.backPacket&&(t.avpacketPool.release(e.backPacket),e.backPacket=0),e.pullQueue.ended=!1,e.pullQueue.index=0,e.pullQueue.frameCount=Y.Dh,e.pullQueue.lastPTS=BigInt(0),e.pullQueue.lastDTS=BigInt(0),e.pullQueue.diff=BigInt(0)}},{key:"addStream",value:(d=(0,g.A)(I().mark((function e(t,r,n,i,a,s){var o,u,c,f,h,d,l,p,v;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=this.tasks.get(t))?(u=new z.A(1048576),c=(0,D.fG)(),f=new V.A({fragmentMode:1,fragment:!0,fastOpen:!0,movMode:0,defaultBaseIsMoof:!0}),h=new $.A,u.onFlush=function(e){return h.push(e.slice()),0},u.onSeek=function(e){return h.seek(e)?0:F.lh},d=c.createStream(),(0,G.Yi)(d.codecpar[C.o9],n),86017===S.f[15](n+4)&&(d.codecpar.codecTag=(0,ae.A)(".mp3")),(l=1===S.f[15](n)&&S.f[15](n+144)&&!o.isLive&&(0,Q.Vt)(i)>(0,Q.lb)({num:1,den:S.f[15](n+136)}))?(d.timeBase.den=S.f[15](n+136),d.timeBase.num=1):(d.timeBase.den=S.f[15](i+4),d.timeBase.num=S.f[15](i)),c.oformat=f,c.ioWriter=u,p=new q.A,v={type:"audio",codecpar:n,ioWriter:u,oformatContext:c,oformat:f,track:p,bufferQueue:h,streamIndex:r,pullIPC:new O.Ay(s),loop:null,frontPacket:0,backPacket:0,frontBuffered:!1,startTimestamp:BigInt(0),packetEnded:!1,ended:!1,seekSync:null,startPTS:a,pullQueue:{queue:[],index:0,frameCount:Y.Dh,diff:BigInt(0),lastPTS:BigInt(0),lastDTS:BigInt(0),ended:!1,useSampleRateTimeBase:l},enableRawMpeg:86017===S.f[15](n+4)&&!te.A.firefox,timestampOffsetUpdated:!1},p.onQuotaExceededError=function(){v.startTimestamp-=BigInt(100)},p.onEnded=function(){o.audio&&!o.audio.ended||o.video&&!o.video.ended||(o.mediaSource.endOfStream(),N.pq("muxer ended, taskId: ".concat(o.taskId),he,851))},1===S.f[15](n)?(o.audio=v,R.M[15](o.stats+4,S.f[15](n+136)),R.M[15](o.stats,S.f[15](n+116))):0===S.f[15](n)&&(v.type="video",o.video=v,R.M[15](o.stats+84,S.f[15](n+56)),R.M[15](o.stats+88,S.f[15](n+60)),S.f[15](o.stats+84)*S.f[15](o.stats+88)>8294400&&te.A.safari&&(o.cacheDuration=ie.T9(BigInt(3e3),o.cacheDuration)))):N.h2("task not found",he,872);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i,a){return d.apply(this,arguments)})},{key:"pause",value:(h=(0,g.A)(I().mark((function e(t){var r,n,i,a,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))?(null!==(n=r.audio)&&void 0!==n&&n.loop||null!==(i=r.video)&&void 0!==i&&i.loop||N.h2("task has not played",he,880),r.pausing=!0,r.pauseTimestamp=(0,K.A)(),null===(a=r.audio)||void 0===a||a.loop.stop(),null===(s=r.video)||void 0===s||s.loop.stop()):N.h2("task not found",he,888);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"unpause",value:(f=(0,g.A)(I().mark((function e(t){var r,n,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))?(null!==(n=r.audio)&&void 0!==n&&n.loop||null!==(i=r.video)&&void 0!==i&&i.loop||N.h2("task has not played",he,896),r.pausing=!1,r.seeking||(r.audio&&(r.audio.startTimestamp+=BigInt(Math.floor((0,K.A)()-r.pauseTimestamp)),r.audio.loop.start()),r.video&&(r.video.startTimestamp+=BigInt(Math.floor((0,K.A)()-r.pauseTimestamp)),r.video.loop.start()))):N.h2("task not found",he,913);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"beforeSeek",value:(c=(0,g.A)(I().mark((function e(t){var r,n,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=47;break}return a=[],r.audio&&(r.audio.ended||r.audio.frontBuffered||a.push(new(T())((function(e){r.audio.seekSync=e})))),r.video&&(r.video.ended||r.video.frontBuffered||a.push(new(T())((function(e){r.video.seekSync=e})))),e.next=7,T().all(a);case 7:if(r.seeking=!0,null===(n=r.audio)||void 0===n||n.loop.stop(),null===(i=r.video)||void 0===i||i.loop.stop(),!r.audio){e.next=29;break}if(r.audio.enableRawMpeg||W.bX(r.audio.oformatContext),r.audio.bufferQueue.flush(),!te.A.safari){e.next=16;break}return e.next=16,new(T())((function(e){r.audio.track.removeAllBuffer((function(){e()}))}));case 16:r.audio.track.reset(),r.audio.packetEnded=!1,r.audio.timestampOffsetUpdated=!1,r.audio.backPacket&&(r.avpacketPool.release(r.audio.backPacket),r.audio.backPacket=0),r.audio.frontPacket&&(r.avpacketPool.release(r.audio.frontPacket),r.audio.frontPacket=0),r.audio.pullQueue.queue.length&&r.audio.pullQueue.queue.forEach((function(e){r.avpacketPool.release(e)})),r.audio.pullQueue.queue.length=0,r.audio.pullQueue.ended=!1,r.audio.pullQueue.index=0,r.audio.pullQueue.lastPTS=BigInt(0),r.audio.pullQueue.lastDTS=BigInt(0),r.audio.pullQueue.diff=BigInt(0),r.audio.pullQueue.frameCount=Y.Dh;case 29:if(!r.video){e.next=47;break}if(r.video.enableRawMpeg||W.bX(r.video.oformatContext),r.video.bufferQueue.flush(),!te.A.safari){e.next=35;break}return e.next=35,new(T())((function(e){r.video.track.removeAllBuffer((function(){e()}))}));case 35:r.video.track.reset(),r.video.packetEnded=!1,r.video.timestampOffsetUpdated=!1,r.video.backPacket&&(r.avpacketPool.release(r.video.backPacket),r.video.backPacket=0),r.video.frontPacket&&(r.avpacketPool.release(r.video.frontPacket),r.video.frontPacket=0),r.video.pullQueue.queue.length&&r.video.pullQueue.queue.forEach((function(e){r.avpacketPool.release(e)})),r.video.pullQueue.queue.length=0,r.video.pullQueue.ended=!1,r.video.pullQueue.index=0,r.video.pullQueue.diff=BigInt(0),r.video.pullQueue.lastPTS=BigInt(0),r.video.pullQueue.lastDTS=BigInt(0);case 47:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"afterSeek",value:(u=(0,g.A)(I().mark((function e(t,r){var n,i,a,s,o,u,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.tasks.get(t))){e.next=93;break}return i=r,e.next=5,this.syncToKeyframe(n);case 5:a=e.sent,n.audio&&n.audio.backPacket>0&&(r<BigInt(0)&&(i=(0,Q.k)(S.f[17](n.audio.backPacket+8)-n.audio.startPTS,(0,U.A)(n.audio.backPacket+72,M.P),Y.i0)),R.M[15](n.audio.backPacket+32,n.audio.oformatContext.streams[0].index),this.writeAVPacket(n.audio.backPacket,n.audio),n.avpacketPool.release(n.audio.backPacket),n.audio.backPacket=0),n.video&&n.video.backPacket>0&&((!a||r<BigInt(0))&&(i=(0,Q.k)(S.f[17](n.video.backPacket+8)-n.video.startPTS,(0,U.A)(n.video.backPacket+72,M.P),Y.i0)),R.M[15](n.video.backPacket+32,n.video.oformatContext.streams[0].index),this.writeAVPacket(n.video.backPacket,n.video),n.avpacketPool.release(n.video.backPacket),n.video.backPacket=0);case 8:if(!n.audio||n.audio.packetEnded){e.next=29;break}return e.next=12,this.pullAVPacket(n.audio,n);case 12:if(n.audio.backPacket=e.sent,!(n.audio.backPacket<0)){e.next=18;break}if(n.audio.packetEnded=!0,n.audio.backPacket=0,n.video&&!n.video.packetEnded){e.next=18;break}return e.abrupt("break",50);case 18:if(i<BigInt(0)&&(i=(0,Q.k)(S.f[17](n.audio.backPacket+8)-n.audio.startPTS,(0,U.A)(n.audio.backPacket+72,M.P),Y.i0)),!((0,Q.k)(S.f[17](n.audio.backPacket+8)-n.audio.startPTS,(0,U.A)(n.audio.backPacket+72,M.P),Y.i0)<i+n.cacheDuration)){e.next=28;break}R.M[15](n.audio.backPacket+32,n.audio.oformatContext.streams[0].index),this.writeAVPacket(n.audio.backPacket,n.audio),n.audio.enableRawMpeg||W.bX(n.audio.oformatContext),n.audio.track.addBuffer(n.audio.bufferQueue.flush()),n.avpacketPool.release(n.audio.backPacket),n.audio.backPacket=0,e.next=29;break;case 28:return e.abrupt("break",50);case 29:if(!n.video||n.video.packetEnded){e.next=48;break}return e.next=32,this.pullAVPacket(n.video,n);case 32:if(n.video.backPacket=e.sent,!(n.video.backPacket<0)){e.next=38;break}if(n.video.packetEnded=!0,n.video.backPacket=0,n.audio&&!n.audio.packetEnded){e.next=38;break}return e.abrupt("break",50);case 38:if(!((0,Q.k)(S.f[17](n.video.backPacket+8)-n.video.startPTS,(0,U.A)(n.video.backPacket+72,M.P),Y.i0)<i+n.cacheDuration)){e.next=47;break}R.M[15](n.video.backPacket+32,n.video.oformatContext.streams[0].index),this.writeAVPacket(n.video.backPacket,n.video),n.video.enableRawMpeg||W.bX(n.video.oformatContext),n.video.track.addBuffer(n.video.bufferQueue.flush()),n.avpacketPool.release(n.video.backPacket),n.video.backPacket=0,e.next=48;break;case 47:return e.abrupt("break",50);case 48:e.next=8;break;case 50:return s=[],n.audio&&(n.audio.enableRawMpeg||W.bX(n.audio.oformatContext),s.push(new(T())((function(e){n.audio.track.addBuffer(n.audio.bufferQueue.flush(),(function(){e()}))})))),n.video&&(n.video.enableRawMpeg||W.bX(n.video.oformatContext),s.push(new(T())((function(e){n.video.track.addBuffer(n.video.bufferQueue.flush(),(function(){e()}))})))),e.next=55,T().all(s);case 55:if(!n.audio||n.audio.packetEnded){e.next=68;break}if(!(n.audio.backPacket<=0)){e.next=61;break}return e.next=59,this.pullAVPacket(n.audio,n);case 59:n.audio.backPacket=e.sent,n.audio.backPacket<0&&(n.audio.packetEnded=!0,n.audio.backPacket=0);case 61:if(n.audio.packetEnded){e.next=68;break}return e.next=64,this.pullAVPacket(n.audio,n);case 64:n.audio.frontPacket=e.sent,n.audio.frontPacket<0?(n.audio.frontPacket=0,n.audio.packetEnded=!0,n.audio.frontBuffered=!1):(n.audio.packetEnded=!1,n.audio.frontBuffered=!0),n.audio.startTimestamp=BigInt(Math.floor((0,K.A)()))-(i+n.cacheDuration+(0,Q.k)(n.audio.startPTS,n.audio.oformatContext.streams[0].timeBase,Y.i0))*BigInt(100)/n.playRate,n.pausing?n.pauseTimestamp=(0,K.A)():n.audio.loop.start();case 68:if(!n.video||n.video.packetEnded){e.next=81;break}if(!(n.video.backPacket<=0)){e.next=74;break}return e.next=72,this.pullAVPacket(n.video,n);case 72:n.video.backPacket=e.sent,n.video.backPacket<0&&(n.video.packetEnded=!0,n.video.backPacket=0);case 74:if(n.video.packetEnded){e.next=81;break}return e.next=77,this.pullAVPacket(n.video,n);case 77:n.video.frontPacket=e.sent,n.video.frontPacket<0?(n.video.packetEnded=!0,n.video.frontBuffered=!1,n.video.frontPacket=0):(n.video.packetEnded=!1,n.video.frontBuffered=!0),n.video.startTimestamp=BigInt(Math.floor((0,K.A)()))-(i+n.cacheDuration+(0,Q.k)(n.video.startPTS,n.video.oformatContext.streams[0].timeBase,Y.i0))*BigInt(100)/n.playRate,n.pausing?n.pauseTimestamp=(0,K.A)():n.video.loop.start();case 81:if(a){e.next=84;break}return e.next=84,new ne.A(.5);case 84:return o=0,u=0,n.audio?n.video?(o=Math.max(n.audio.track.getBufferedStart(),n.video.track.getBufferedStart()),u=Math.min(n.audio.track.getBufferedEnd(),n.video.track.getBufferedEnd())):(o=n.audio.track.getBufferedStart(),u=n.audio.track.getBufferedEnd()):n.video&&(o=n.video.track.getBufferedStart(),u=n.video.track.getBufferedEnd()),(c=(0,re.yw)(i))>=o&&c<=u||(c=Math.abs(c-o)>Math.abs(c-u)?u:o),n.currentTimeNTP=(0,K.A)(),n.currentTime=c,n.seeking=!1,e.abrupt("return",c);case 93:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"setPlayRate",value:(o=(0,g.A)(I().mark((function e(t,r){var n,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))?(n.enableJitterBuffer&&(i=S.f[15](n.stats+236)?S.f[15](n.stats+32)/S.f[15](n.stats+236)*1e3:S.f[15](n.stats+224)?S.f[15](n.stats+120)/S.f[15](n.stats+224)*1e3:0)&&i<=S.f[15](n.jitterBuffer)&&(r=1),n.targetRate=BigInt(Math.floor(Math.floor(100*r))),n.enableJitterBuffer||(n.audio&&n.audio.loop.resetInterval(),n.video&&n.video.loop.resetInterval())):N.h2("task not found",he,1269);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"restart",value:(s=(0,g.A)(I().mark((function e(t){var r,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))&&(r.audio&&this.resetResource(r.audio,r),r.video&&this.resetResource(r.video,r),(n=new((0,se.A)())).onsourceopen=this.getSourceOpenHandler(r),r.mediaSource=n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"setCurrentTime",value:(a=(0,g.A)(I().mark((function e(t,r){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.tasks.get(t))?(n.audio&&n.audio.track.removeBuffer(r),n.video&&S.f[15](n.stats+92)>0&&(n.video.track.setMediaBufferMax(Math.max(n.video.track.getMediaBufferMax(),Math.ceil(S.f[15](n.stats+92)/1e3*1.5),10)),n.video.track.removeBuffer(r)),n.currentTime=r,n.currentTimeNTP=(0,K.A)()):N.h2("task not found",he,1311);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getMediaSource",value:(i=(0,g.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.tasks.get(t))){e.next=10;break}if(!r.mediaSource.handle){e.next=7;break}return this.getMediaSource.transfer.push(r.mediaSource.handle),e.abrupt("return",r.mediaSource.handle);case 7:return e.abrupt("return",r.mediaSource);case 8:e.next=11;break;case 10:N.h2("task not found",he,1328);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"createTask",value:function(e){var t=new O.Ay(e.controlPort),r=new MediaSource||new ManagedMediaSource,n=ue(ue({},e),{},{mediaSource:r,audio:null,video:null,playRate:BigInt(100),targetRate:BigInt(100),pauseTimestamp:0,seeking:!1,pausing:!1,controlIPCPort:t,currentTime:0,currentTimeNTP:0,cacheDuration:BigInt(Math.floor(500)),avpacketPool:new H.A((0,U.A)(e.avpacketList,E.A),e.avpacketListMutex)});return this.tasks.set(e.taskId,n),r.onsourceopen=this.getSourceOpenHandler(n),0}},{key:"registerTask",value:(n=(0,g.A)(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tasks.has(t.taskId)){e.next=2;break}return e.abrupt("return",F.lh);case 2:return e.abrupt("return",this.createTask(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"unregisterTask",value:(r=(0,g.A)(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.tasks.get(t))&&(r.audio&&(r.audio.loop&&(r.audio.oformatContext.destroy(),r.audio.loop.destroy()),r.audio.pullIPC&&r.audio.pullIPC.destroy(),r.audio.pullQueue.queue.length&&(r.audio.pullQueue.queue.forEach((function(e){r.avpacketPool.release(e)})),r.audio.pullQueue.queue.length=0)),r.video&&(r.video.loop&&(r.video.oformatContext.destroy(),r.video.loop.destroy()),r.video.pullIPC&&r.video.pullIPC.destroy(),r.video.pullQueue.queue.length&&(r.video.pullQueue.queue.forEach((function(e){r.avpacketPool.release(e)})),r.video.pullQueue.queue.length=0)),r.controlIPCPort&&r.controlIPCPort.destroy(),this.tasks.delete(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(L.A)},88103:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var n=r(88435),i=r.n(n),a=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(43070),f=r(60394),h=r(25767),d=r(31060),l=r(134),p=r(36443),v=r.n(p);function m(e,t,r){return t=(0,h.A)(t),(0,u.A)(e,A()?i()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var g=function(e){function t(e,r){var n;return(0,s.A)(this,t),n=m(this,t,[e,r]),(0,l.A)((0,c.A)(n),"context",void 0),(0,l.A)((0,c.A)(n),"paddingLeft",void 0),(0,l.A)((0,c.A)(n),"paddingTop",void 0),(0,l.A)((0,c.A)(n),"flipX",void 0),(0,l.A)((0,c.A)(n),"flipY",void 0),n.paddingLeft=0,n.paddingTop=0,n.flipX=1,n.flipY=1,n}var r;return(0,d.A)(t,e),(0,o.A)(t,[{key:"init",value:(r=(0,a.A)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.context=this.canvas.getContext("2d");case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"clear",value:function(){var e=this.canvas.width>>1,t=this.canvas.height>>1;this.rotate&&(this.context.translate(e,t),this.context.rotate(-this.rotate*Math.PI/180),this.context.translate(-e,-t)),this.context.clearRect(0,0,this.canvasWidth*this.options.devicePixelRatio,this.canvasHeight*this.options.devicePixelRatio),this.rotate&&(this.context.translate(e,t),this.context.rotate(this.rotate*Math.PI/180),this.context.translate(-e,-t))}},{key:"checkFrame",value:function(e){e.codedWidth===this.textureWidth&&e.codedHeight===this.videoHeight&&e.codedWidth===this.videoWidth||(this.videoWidth=e.codedWidth,this.videoHeight=e.codedHeight,this.textureWidth=e.codedWidth,this.layout())}},{key:"render",value:function(e){this.lost||(this.checkFrame(e),this.context.drawImage(e,this.paddingLeft,this.paddingTop,this.canvasWidth*this.options.devicePixelRatio-2*this.paddingLeft,this.canvasHeight*this.options.devicePixelRatio-2*this.paddingTop))}},{key:"layout",value:function(){var e=this.videoWidth,t=this.videoHeight,r=this.canvasWidth,n=this.canvasHeight,i=0,a=0;90!==this.rotate&&270!==this.rotate||(a=Math.floor((n-r)/2),i=Math.floor((r-n)/2),r=this.canvasHeight,n=this.canvasWidth);var s,o=e/r,u=t/n;if(s=o>1?!(o<u):o>u,1===this.renderMode&&(s=!s),s){var c=(n-t*r/e)/n;this.paddingTop=(Math.floor(c/2*n)+a)*this.options.devicePixelRatio,this.paddingLeft=i*this.options.devicePixelRatio}else{var f=(r-e*n/t)/r;this.paddingLeft=(Math.floor(f/2*r)+i)*this.options.devicePixelRatio,this.paddingTop=a*this.options.devicePixelRatio}if(this.context){var h=1,d=1;this.flipHorizontal&&(h=-1),this.flipVertical&&(d=-1);var l=this.canvas.width>>1,p=this.canvas.height>>1;this.context.translate(l,p),h!==this.flipX&&this.context.scale(-1,1),d!==this.flipY&&this.context.scale(1,-1),this.context.translate(-l,-p),this.flipX=h,this.flipY=d}}},{key:"setRotate",value:function(e){if((e%=360)!==this.rotate){var t=this.canvas.width>>1,r=this.canvas.height>>1;this.rotate&&(this.context.translate(t,r),this.context.rotate(-this.rotate*Math.PI/180),this.context.translate(-t,-r)),this.clear(),this.rotate=e,this.context&&(this.context.translate(t,r),this.context.rotate(this.rotate*Math.PI/180),this.context.translate(-t,-r)),this.layout()}}},{key:"destroy",value:function(){this.context=null,(0,f.A)((0,h.A)(t.prototype),"destroy",this).call(this)}}],[{key:"isSupport",value:function(e){return e instanceof VideoFrame||e instanceof ImageBitmap}}]),t}(r(43356).A)},43356:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(78716),i=r(81570),a=r(134),s=r(6110),o=function(){function e(t,r){(0,n.A)(this,e),(0,a.A)(this,"canvas",void 0),(0,a.A)(this,"options",void 0),(0,a.A)(this,"textureWidth",void 0),(0,a.A)(this,"videoWidth",void 0),(0,a.A)(this,"videoHeight",void 0),(0,a.A)(this,"canvasWidth",void 0),(0,a.A)(this,"canvasHeight",void 0),(0,a.A)(this,"rotate",void 0),(0,a.A)(this,"renderMode",void 0),(0,a.A)(this,"format",void 0),(0,a.A)(this,"lost",void 0),(0,a.A)(this,"destroyed",void 0),(0,a.A)(this,"srcColorSpace",void 0),(0,a.A)(this,"dstColorSpace",void 0),(0,a.A)(this,"flipHorizontal",void 0),(0,a.A)(this,"flipVertical",void 0),this.canvas=t,this.options=r,this.canvasWidth=t.width,this.canvasHeight=t.height,this.videoWidth=0,this.videoHeight=0,this.textureWidth=0,this.rotate=0,this.renderMode=r.renderMode,this.flipHorizontal=!1,this.flipVertical=!1,this.lost=!1,this.destroyed=!1,r.dstColorSpace?this.dstColorSpace=r.dstColorSpace:this.dstColorSpace=new s.A(1,1,1,1)}return(0,i.A)(e,[{key:"getRotateMatrix",value:function(e){e=Math.PI*e/180;var t=Math.sin(e),r=Math.cos(e);return[r,-t,0,0,t,r,0,0,0,0,1,0,0,0,0,1]}},{key:"setRenderMode",value:function(e){this.renderMode!==e&&(this.renderMode=e,this.layout(),this.clear())}},{key:"enableHorizontalFlip",value:function(e){this.flipHorizontal!==e&&(this.flipHorizontal=e,this.layout(),this.clear())}},{key:"enableVerticalFlip",value:function(e){this.flipVertical!==e&&(this.flipVertical=e,this.layout(),this.clear())}},{key:"viewport",value:function(e,t){var r=this.options.devicePixelRatio;this.canvasWidth=e,this.canvasHeight=t,this.canvas.width=e*r,this.canvas.height=t*r,this.videoWidth&&this.videoHeight&&this.layout()}},{key:"getVideoWidth",value:function(){return this.videoWidth}},{key:"getVideoHeight",value:function(){return this.videoHeight}},{key:"destroy",value:function(){this.canvas=null,this.destroyed=!0}},{key:"setDstColorSpace",value:function(e){this.dstColorSpace=e}}],[{key:"isSupport",value:function(e){return!1}}]),e}()},43813:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(25767),c=r(31060),f=r(63939),h=r(67672),d=r(14686),l=r(97317),p=r(25669),v=r(6110),m=r(37653),A=r(32903);function g(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,k()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function k(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}var y=function(e){function t(e,r){return(0,a.A)(this,t),g(this,t,[e,r])}return(0,c.A)(t,e),(0,s.A)(t,[{key:"generateFragmentSource",value:function(e,t){var r=(0,p.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:0,outputRGB:!0}),n=["r","g","b","a"],i="texture2D(rgb_Sampler, v_color.xy).".concat(n[t.comp[0].offset]),a="texture2D(rgb_Sampler, v_color.xy).".concat(n[t.comp[1].offset]),s="texture2D(rgb_Sampler, v_color.xy).".concat(n[t.comp[2].offset]),o="1.0";128&t.flags&&4===t.nbComponents&&(o="texture2D(rgb_Sampler, v_color.xy).".concat(n[t.comp[3].offset])),this.fragmentSource="\n      precision highp float;\n      varying vec4 v_color;\n      uniform sampler2D rgb_Sampler;\n      void main () {\n        float r = ".concat(i,";\n        float g = ").concat(a,";\n        float b = ").concat(s,";\n        float alpha = ").concat(o,";\n        vec4 color = vec4(r, g, b, alpha);\n        ").concat(r.reduce((function(e,t){return e+t}),""),"\n        gl_FragColor = color;\n      }\n    ")}},{key:"checkFrame",value:function(e){var t=l.g[f.f[15](e+80)];t&&(f.f[15](e+32)===this.textureWidth&&f.f[15](e+72)===this.videoHeight&&f.f[15](e+68)===this.videoWidth||(this.srcColorSpace=new v.A(f.f[15](e+220),f.f[15](e+212),f.f[15](e+216),f.f[15](e+208)),this.generateFragmentSource(f.f[15](e+80),t),this.program=new A.A(this.fragmentSource),this.useProgram(),4===t.nbComponents&&(this.rgbTexture.setFormat(this.gl.RGBA),this.rgbTexture.setInternalformat(this.gl.RGBA)),this.rgbTexture.setSize(f.f[15](e+32),f.f[15](e+72)),this.videoWidth=f.f[15](e+68),this.videoHeight=f.f[15](e+72),this.textureWidth=f.f[15](e+32),this.format=f.f[15](e+80),this.layout()))}},{key:"render",value:function(e){this.lost||(this.checkFrame(e),this.rgbTexture.fill((0,d.s3)(f.f[20](e),this.rgbTexture.width*this.rgbTexture.height)),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4))}}],[{key:"isSupport",value:function(e){if(h.ai(e)){var t=l.g[f.f[15](e+80)];if(t)return 32&t.flags&&t.comp[0].depth+7>>>3==1}return!1}}]),t}(m.A)},37653:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(94012),p=r(17397);function v(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,m()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}var A=function(e){function t(e,r){var n;return(0,a.A)(this,t),n=v(this,t,[e,r]),(0,d.A)((0,u.A)(n),"rgbTexture",void 0),n}return(0,h.A)(t,e),(0,s.A)(t,[{key:"useProgram",value:function(){(0,c.A)((0,f.A)(t.prototype),"useProgram",this).call(this),this.rgbTexture=new p.A(this.gl),this.rgbTexture.bind(0),this.rgbTexture.init(),this.program.bindRGBTexture(0)}},{key:"destroy",value:function(){this.rgbTexture&&(this.rgbTexture.destroy(),this.rgbTexture=null),(0,c.A)((0,f.A)(t.prototype),"destroy",this).call(this)}}]),t}(l.A)},94012:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var n=r(88435),i=r.n(n),a=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(43070),f=r(60394),h=r(25767),d=r(31060),l=r(134),p=r(36443),v=r.n(p),m=r(4624),A=r(43356),g=r(38469);function k(e,t,r){return t=(0,h.A)(t),(0,u.A)(e,y()?i()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var b="src/avrender/image/WebGLRender.ts",x=function(e){function t(e,r){var n;return(0,s.A)(this,t),n=k(this,t,[e,r]),(0,l.A)((0,c.A)(n),"gl",void 0),(0,l.A)((0,c.A)(n),"VAO",void 0),(0,l.A)((0,c.A)(n),"program",void 0),(0,l.A)((0,c.A)(n),"vertex",void 0),(0,l.A)((0,c.A)(n),"webglContextLostTimer",void 0),(0,l.A)((0,c.A)(n),"onWebglContextLost",void 0),(0,l.A)((0,c.A)(n),"onWebglContextRestored",void 0),(0,l.A)((0,c.A)(n),"fragmentSource",void 0),(0,l.A)((0,c.A)(n),"vertexSource",void 0),n}var r;return(0,d.A)(t,e),(0,o.A)(t,[{key:"init",value:(r=(0,a.A)(v().mark((function e(){var t=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.gl=this.canvas.getContext("webgl2",{alpha:!1,antialias:!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer}),this.gl||(this.gl=this.canvas.getContext("webgl",{alpha:!1,antialias:!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer})),this.gl||(this.gl=this.canvas.getContext("experimental-webgl",{alpha:!1,antialias:!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer})),this.gl||m.h2("can not support webgl, got WebGLRenderingContext failed",b,96),this.VAO=this.gl.createBuffer(),this.VAO||m.h2("create vao buffer failed",b,101),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.VAO),this.gl.enable(this.gl.BLEND),this.gl.clearColor(0,0,0,0),this.gl.clearDepth(1),this.viewport(this.canvasWidth||this.canvas.width,this.canvasHeight||this.canvas.height),this.onWebglContextLost=function(e){t.destroyed||(t.webglContextLostTimer=setTimeout((function(){t.lost=!0,t.webglContextLostTimer=null,m.z3("webgl context lost",b,118),t.options.onRenderContextLost&&t.options.onRenderContextLost()}),3e3))},this.onWebglContextRestored=function(e){t.webglContextLostTimer&&(clearTimeout(t.webglContextLostTimer),t.webglContextLostTimer=null)},this.canvas.addEventListener("webglcontextlost",this.onWebglContextLost),this.canvas.addEventListener("webglcontextrestored",this.onWebglContextRestored);case 15:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"viewport",value:function(e,r){this.gl.viewport(0,0,e*this.options.devicePixelRatio,r*this.options.devicePixelRatio),(0,f.A)((0,h.A)(t.prototype),"viewport",this).call(this,e,r)}},{key:"useProgram",value:function(){this.program.link(this.gl),this.program.bind(),this.program.setRotateMatrix(this.getRotateMatrix(this.rotate))}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"layout",value:function(){var e=this.videoWidth,t=this.videoHeight,r=this.canvasWidth,n=this.canvasHeight;90!==this.rotate&&270!==this.rotate||(r=this.canvasHeight,n=this.canvasWidth);var i,a=e/r,s=t/n;i=a>1?!(a<s):a>s,1===this.renderMode&&(i=!i);var o=0;if(this.textureWidth!==this.videoWidth&&(o=(this.textureWidth-this.videoWidth)/this.textureWidth),i){var u=(n-t*r/e)/n;this.vertex=[-1,1-u,0,0,0,0,0,-1,-1+u,0,0,1,0,0,1,1-u,0,1-o,0,0,0,1,-1+u,0,1-o,1,0,0]}else{var c=(r-e*n/t)/r;this.vertex=[-1+c,1,0,0,0,0,0,-1+c,-1,0,0,1,0,0,1-c,1,0,1-o,0,0,0,1-c,-1,0,1-o,1,0,0]}(0,g.A)(this.vertex,this.flipHorizontal,this.flipVertical),this.gl&&this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.vertex),this.gl.STATIC_DRAW)}},{key:"setRotate",value:function(e){(e%=360)!==this.rotate&&(this.rotate=e,this.gl&&this.program.setRotateMatrix(this.getRotateMatrix(this.rotate)),this.layout(),this.clear())}},{key:"destroy",value:function(){this.program&&this.program.stop(),this.gl=null,this.VAO=null,this.vertex=null,this.onWebglContextLost&&(this.canvas.removeEventListener("webglcontextlost",this.onWebglContextLost),this.onWebglContextLost=null),this.onWebglContextRestored&&(this.canvas.removeEventListener("webglcontextrestored",this.onWebglContextRestored),this.onWebglContextRestored=null),(0,f.A)((0,h.A)(t.prototype),"destroy",this).call(this)}}]),t}(A.A)},99293:(e,t,r)=>{"use strict";r.d(t,{A:()=>M});var n=r(88435),i=r.n(n),a=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(43070),f=r(60394),h=r(25767),d=r(31060),l=r(134),p=r(36443),v=r.n(p),m=r(74503),A=r(63939),g=r(94300),k=r(14686),y=r(97317),b=r(22594),x=r(25669),w=r(57517),_=r(6110),T=r(20088),P=r(56024),I=r(73039),B=r(67672);function C(e,t,r){return t=(0,h.A)(t),(0,u.A)(e,S()?i()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function S(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}var M=function(e){function t(e,r){var n;return(0,s.A)(this,t),n=C(this,t,[e,r]),(0,l.A)((0,c.A)(n),"hdrMetadata",void 0),(0,l.A)((0,c.A)(n),"ext",void 0),n.hdrMetadata=(0,m.A)(T.A),n.hdrMetadata.multiplier=1,n}var r;return(0,d.A)(t,e),(0,o.A)(t,[{key:"init",value:(r=(0,a.A)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.A)((0,h.A)(t.prototype),"init",this).call(this);case 2:if(this.ext=this.gl.getExtension("EXT_texture_norm16"),this.ext){e.next=5;break}throw Error("not support");case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"generateFragmentSource",value:function(e,t,r){r.outputRGB=!0;var n=(0,x.A)(this.srcColorSpace,this.dstColorSpace,r),i="texture2D(u_Sampler, v_color.xy).x",a="texture2D(v_Sampler, v_color.xy).x",s="1.0";23===e&&(i="texture2D(u_Sampler, v_color.xy).x",a="texture2D(u_Sampler, v_color.xy).y"),128&t.flags&&4===t.nbComponents&&(s="texture2D(a_Sampler, v_color.xy).x"),this.fragmentSource="\n      precision highp float;\n\n      varying vec4 v_color;\n      uniform sampler2D y_Sampler;\n      uniform sampler2D u_Sampler;\n      uniform sampler2D v_Sampler;\n      \n      uniform float v_max;\n\n      uniform float offset;\n      uniform float multiplier;\n      uniform float pq_tonemap_a;\n      uniform float pq_tonemap_b;\n      uniform float hlg_ootf_gamma_minus_one;\n      uniform float hlg_dst_max_luminance_relative;\n      uniform float nits_to_sdr_relative_factor;\n      uniform float sdr_relative_to_nits_factor;\n\n      ".concat(1&t.flags?"\n        float swap(float x) {\n          int value = int(x * 65535.0);\n          int low = value & 0xff;\n          int high = (value >> 8) & 0xff;\n          value = (low << 8) | high;\n          return float(value) / v_max;\n        }\n      ":"","\n      \n      void main () {\n      \n        float y = texture2D(y_Sampler, v_color.xy).x;\n        float u = ").concat(i,";\n        float v = ").concat(a,";\n        float alpha = ").concat(s,";\n        \n        ").concat(1&t.flags?"\n          y = swap(y);\n          u = swap(u);\n          v = swap(v);\n        ":"\n          y = y * 65535.0 / v_max;\n          u = u * 65535.0 / v_max;\n          v = v * 65535.0 / v_max;\n        ","\n        \n        vec4 color = vec4(y, u, v, alpha);\n\n        if (color.a > 0.0) {\n          color.r /= color.a;\n          color.g /= color.a;\n          color.b /= color.a;\n        }\n        color.r -= offset;\n        color.g -= offset;\n        color.b -= offset;\n\n        color.r *= multiplier;\n        color.g *= multiplier;\n        color.b *= multiplier;\n        \n        ").concat(n.reduce((function(e,t){return e+t}),""),"\n\n        color.r *= color.a;\n        color.g *= color.a;\n        color.b *= color.a;\n\n        gl_FragColor = color;\n      }\n    ")}},{key:"checkFrame",value:function(e){var t=y.g[A.f[15](e+80)];if(t){var r=t.comp[0].depth+7>>>3;if(A.f[15](e+32)/r!==this.textureWidth||A.f[15](e+72)!==this.videoHeight||A.f[15](e+68)!==this.videoWidth||A.f[15](e+80)!==this.format){this.srcColorSpace=new _.A(A.f[15](e+220),A.f[15](e+212),A.f[15](e+216),A.f[15](e+208));var n={type:0,bitDepth:t.comp[0].depth,toneMapPQAndHlgToDst:!0,metadata:this.hdrMetadata,dstSdrMaxLuminanceNits:w.kH,dstMaxLuminanceRelative:1},i=(0,P.aH)(e,14);if(i){var a=A.f[20](i+4);A.f[8](a)>0&&(n.maxContentLightLevel=A.f[8](a))}this.generateFragmentSource(A.f[15](e+80),t,n),this.program=new I.A(this.fragmentSource),this.useProgram(),this.program.setMetaData(this.hdrMetadata),this.yTexture.setFormat(this.gl.RED),this.yTexture.setInternalformat(this.ext.R16_EXT),this.yTexture.setDataType(this.gl.UNSIGNED_SHORT),this.uTexture.setFormat(this.gl.RED),this.uTexture.setInternalformat(this.ext.R16_EXT),this.uTexture.setDataType(this.gl.UNSIGNED_SHORT),this.vTexture.setFormat(this.gl.RED),this.vTexture.setInternalformat(this.ext.R16_EXT),this.vTexture.setDataType(this.gl.UNSIGNED_SHORT),this.aTexture.setFormat(this.gl.RED),this.aTexture.setInternalformat(this.ext.R16_EXT),this.aTexture.setDataType(this.gl.UNSIGNED_SHORT),this.yTexture.setSize(A.f[15](e+32)>>>1,A.f[15](e+72)),this.uTexture.setSize(A.f[15](e+32+4)>>>1,A.f[15](e+72)>>>y.g[A.f[15](e+80)].log2ChromaH),t.comp[1].plane!==t.comp[2].plane&&this.vTexture.setSize(A.f[15](e+32+8)>>>1,A.f[15](e+72)>>>y.g[A.f[15](e+80)].log2ChromaH),4===t.nbComponents&&this.aTexture.setSize(A.f[15](e+32+12)>>>1,A.f[15](e+72)),this.program.setMax((1<<t.comp[0].depth)-1),this.videoWidth=A.f[15](e+68),this.videoHeight=A.f[15](e+72),this.textureWidth=A.f[15](e+32)>>>1,this.format=A.f[15](e+80),this.layout()}}}},{key:"render",value:function(e){if(!this.lost){this.checkFrame(e);var t=y.g[A.f[15](e+80)];t&&(this.yTexture.fill((0,k.bg)(A.f[20](e),this.yTexture.width*this.yTexture.height)),this.uTexture.fill((0,k.bg)(A.f[20](e+4),this.uTexture.width*this.uTexture.height)),t.comp[1].plane!==t.comp[2].plane&&this.vTexture.fill((0,k.bg)(A.f[20](e+8),this.vTexture.width*this.vTexture.height)),4===t.nbComponents&&this.aTexture.fill((0,k.bg)(A.f[20](e+12),this.aTexture.width*this.aTexture.height)),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4))}}},{key:"destroy",value:function(){this.hdrMetadata&&((0,g.A)(this.hdrMetadata),this.hdrMetadata=null),(0,f.A)((0,h.A)(t.prototype),"destroy",this).call(this)}}],[{key:"isSupport",value:function(e){if(B.ai(e)){var t=y.g[A.f[15](e+80)];if(t)return!(32&t.flags)&&16&t.flags&&t.comp[0].depth+7>>>3==2}return!1}}]),t}(b.A)},55196:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(25767),c=r(31060),f=r(63939),h=r(67672),d=r(14686),l=r(97317),p=r(22594),v=r(91848),m=r(25669),A=r(6110);function g(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,k()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function k(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}var y=function(e){function t(e,r){return(0,a.A)(this,t),g(this,t,[e,r])}return(0,c.A)(t,e),(0,s.A)(t,[{key:"generateFragmentSource",value:function(e,t){var r=(0,m.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:0,outputRGB:!0}),n="texture2D(u_Sampler, v_color.xy).x",i="texture2D(v_Sampler, v_color.xy).x",a="1.0";23===e&&(n="texture2D(u_Sampler, v_color.xy).x",i="texture2D(u_Sampler, v_color.xy).y"),128&t.flags&&4===t.nbComponents&&(a="texture2D(a_Sampler, v_color.xy).x"),this.fragmentSource="\n      precision highp float;\n      varying vec4 v_color;\n      uniform sampler2D y_Sampler;\n      uniform sampler2D u_Sampler;\n      uniform sampler2D v_Sampler;\n      uniform sampler2D a_Sampler;\n      void main () {\n        float y = texture2D(y_Sampler, v_color.xy).x;\n        float u = ".concat(n,";\n        float v = ").concat(i,";\n        float alpha = ").concat(a,";\n        vec4 color = vec4(y, u, v, alpha);\n        ").concat(r.reduce((function(e,t){return e+t}),""),"\n        gl_FragColor = color;\n      }\n    ")}},{key:"checkFrame",value:function(e){var t=l.g[f.f[15](e+80)];t&&(f.f[15](e+32)===this.textureWidth&&f.f[15](e+72)===this.videoHeight&&f.f[15](e+68)===this.videoWidth||(this.srcColorSpace=new A.A(f.f[15](e+220),f.f[15](e+212),f.f[15](e+216),f.f[15](e+208)),this.generateFragmentSource(f.f[15](e+80),t),this.program=new v.A(this.fragmentSource),this.useProgram(),this.yTexture.setSize(f.f[15](e+32),f.f[15](e+72)),this.uTexture.setSize(f.f[15](e+32+4),f.f[15](e+72)>>>l.g[f.f[15](e+80)].log2ChromaH),t.comp[1].plane!==t.comp[2].plane&&this.vTexture.setSize(f.f[15](e+32+8),f.f[15](e+72)>>>l.g[f.f[15](e+80)].log2ChromaH),4===t.nbComponents&&this.aTexture.setSize(f.f[15](e+32+12),f.f[15](e+72)),this.videoWidth=f.f[15](e+68),this.videoHeight=f.f[15](e+72),this.textureWidth=f.f[15](e+32),this.format=f.f[15](e+80),this.layout()))}},{key:"render",value:function(e){if(!this.lost){this.checkFrame(e);var t=l.g[f.f[15](e+80)];t&&(this.yTexture.fill((0,d.s3)(f.f[20](e),this.yTexture.width*this.yTexture.height)),this.uTexture.fill((0,d.s3)(f.f[20](e+4),this.uTexture.width*this.uTexture.height)),t.comp[1].plane!==t.comp[2].plane&&this.vTexture.fill((0,d.s3)(f.f[20](e+8),this.vTexture.width*this.vTexture.height)),4===t.nbComponents&&this.aTexture.fill((0,d.s3)(f.f[20](e+12),this.aTexture.width*this.aTexture.height)),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4))}}}],[{key:"isSupport",value:function(e){if(h.ai(e)){var t=l.g[f.f[15](e+80)];if(t)return!(32&t.flags)&&16&t.flags&&t.comp[0].depth+7>>>3==1}return!1}}]),t}(p.A)},22594:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(48280);function p(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,v()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var m=function(e){function t(e,r){var n;return(0,a.A)(this,t),n=p(this,t,[e,r]),(0,d.A)((0,u.A)(n),"yTexture",void 0),(0,d.A)((0,u.A)(n),"uTexture",void 0),(0,d.A)((0,u.A)(n),"vTexture",void 0),(0,d.A)((0,u.A)(n),"aTexture",void 0),n}return(0,h.A)(t,e),(0,s.A)(t,[{key:"useProgram",value:function(){(0,c.A)((0,f.A)(t.prototype),"useProgram",this).call(this),this.yTexture=new l.A(this.gl),this.yTexture.bind(0),this.yTexture.init(),this.program.bindYTexture(0),this.uTexture=new l.A(this.gl),this.uTexture.bind(1),this.uTexture.init(),this.program.bindUTexture(1),this.vTexture=new l.A(this.gl),this.vTexture.bind(2),this.vTexture.init(),this.program.bindVTexture(2),this.aTexture=new l.A(this.gl),this.aTexture.bind(3),this.aTexture.init(),this.program.bindATexture(3)}},{key:"destroy",value:function(){this.yTexture&&(this.yTexture.destroy(),this.yTexture=null),this.uTexture&&(this.uTexture.destroy(),this.uTexture=null),this.vTexture&&(this.vTexture.destroy(),this.vTexture=null),this.aTexture&&(this.aTexture.destroy(),this.aTexture=null),(0,c.A)((0,f.A)(t.prototype),"destroy",this).call(this)}}]),t}(r(94012).A)},54750:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(60394),c=r(25767),f=r(31060),h=r(54895),d=r(23195);function l(e,t,r){return t=(0,c.A)(t),(0,o.A)(e,p()?i()(t,r||[],(0,c.A)(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}var v=function(e){function t(e,r){var n;return(0,a.A)(this,t),(n=l(this,t,[e,r])).vertexSource=h.A,n.fragmentSource=d.A,n}return(0,f.A)(t,e),(0,s.A)(t,[{key:"checkFrame",value:function(e){e.codedWidth===this.textureWidth&&e.codedHeight===this.videoHeight&&e.codedWidth===this.videoWidth||(this.videoWidth=e.codedWidth,this.videoHeight=e.codedHeight,this.textureWidth=e.codedWidth,this.layout(),this.generatePipeline())}},{key:"generateBindGroup",value:function(){this.bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,externalTexture:{}},{binding:2,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}}]})}},{key:"render",value:function(e){if(!this.lost){this.checkFrame(e);var t=this.device.createBindGroup({layout:this.renderPipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.device.importExternalTexture({source:e})},{binding:2,resource:this.sampler}]}),r=this.device.createCommandEncoder(),n={colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]},i=r.beginRenderPass(n);i.setPipeline(this.renderPipeline),i.setBindGroup(0,t),i.setVertexBuffer(0,this.vbo),i.draw(4,4,0,0),i.end(),this.device.queue.submit([r.finish()])}}},{key:"destroy",value:function(){(0,u.A)((0,c.A)(t.prototype),"destroy",this).call(this)}}],[{key:"isSupport",value:function(e){return e instanceof VideoFrame}}]),t}(r(15045).A)},1052:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(25767),c=r(31060),f=r(63939),h=r(67672),d=r(97317),l=r(14686),p=r(6110),v=r(25669);function m(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,A()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var g=function(e){function t(e,r){return(0,a.A)(this,t),m(this,t,[e,r])}return(0,c.A)(t,e),(0,s.A)(t,[{key:"generateFragmentSource",value:function(e,t){var r=(0,v.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:1,outputRGB:!0}),n=["r","g","b","a"],i="textureSample(rgbTexture, in_texcoord.xy).".concat(n[t.comp[0].offset]),a="textureSample(rgbTexture, in_texcoord.xy).".concat(n[t.comp[1].offset]),s="textureSample(rgbTexture, in_texcoord.xy).".concat(n[t.comp[2].offset]),o="1.0";128&t.flags&&4===t.nbComponents&&(o="textureSample(rgbTexture, in_texcoord.xy).".concat(n[t.comp[3].offset])),this.fragmentSource="\n      @group(0) @binding(1) var s: sampler;\n      @group(0) @binding(2) var rgbTexture: texture_2d<f32>;\n      \n      @fragment\n      fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {\n        let r = ".concat(i,";\n        let g = ").concat(a,";\n        let b = ").concat(s,";\n        let alpha = ").concat(o,";\n        var color = vec4(r, g, b, alpha);\n        ").concat(r.reduce((function(e,t){return e+t}),""),"\n        return color;\n      }\n    ")}},{key:"checkFrame",value:function(e){var t=d.g[f.f[15](e+80)];t&&(f.f[15](e+32)===this.textureWidth&&f.f[15](e+72)===this.videoHeight&&f.f[15](e+68)===this.videoWidth||(this.rgbTexture&&this.rgbTexture.destroy(),this.rgbTexture=this.device.createTexture({size:[f.f[15](e+32),f.f[15](e+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"}),this.srcColorSpace=new p.A(f.f[15](e+220),f.f[15](e+212),f.f[15](e+216),f.f[15](e+208)),this.generateFragmentSource(f.f[15](e+80),t),this.videoWidth=f.f[15](e+68),this.videoHeight=f.f[15](e+72),this.textureWidth=f.f[15](e+32),this.format=f.f[15](e+80),this.layout(),this.generatePipeline(),this.generateRenderBundleEncoder()))}},{key:"render",value:function(e){if(!this.lost){this.checkFrame(e),this.device.queue.writeTexture({texture:this.rgbTexture},(0,l.s3)(f.f[20](e),this.rgbTexture.width*this.rgbTexture.height),{offset:0,bytesPerRow:this.rgbTexture.width,rowsPerImage:this.rgbTexture.height},{width:this.rgbTexture.width,height:this.rgbTexture.height,depthOrArrayLayers:1});var t=this.device.createCommandEncoder(),r=t.beginRenderPass({colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]});r.executeBundles([this.renderBundle]),r.end(),this.device.queue.submit([t.finish()])}}}],[{key:"isSupport",value:function(e){if(h.ai(e)){var t=d.g[f.f[15](e+80)];if(t)return 32&t.flags&&t.comp[0].depth+7>>>3==1}return!1}}]),t}(r(56066).A)},56066:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(54895);function p(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,v()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var m=function(e){function t(e,r){var n;return(0,a.A)(this,t),n=p(this,t,[e,r]),(0,d.A)((0,u.A)(n),"rgbTexture",void 0),n.vertexSource=l.A,n}return(0,h.A)(t,e),(0,s.A)(t,[{key:"generateBindGroup",value:function(){if(this.rgbTexture){var e=[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}];this.bindGroupLayout=this.device.createBindGroupLayout({entries:e});var t=[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.sampler},{binding:2,resource:this.rgbTexture.createView()}];this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:t})}}},{key:"destroy",value:function(){this.rgbTexture&&this.rgbTexture.destroy(),(0,c.A)((0,f.A)(t.prototype),"destroy",this).call(this)}}]),t}(r(15045).A)},15045:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var n=r(88435),i=r.n(n),a=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(43070),f=r(60394),h=r(25767),d=r(31060),l=r(134),p=r(36443),v=r.n(p),m=r(4624),A=r(43356),g=r(72739),k=r(38469);function y(e,t,r){return t=(0,h.A)(t),(0,u.A)(e,b()?i()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function b(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var x="src/avrender/image/WebGPURender.ts",w=function(e){function t(e,r){var n;return(0,s.A)(this,t),n=y(this,t,[e,r]),(0,l.A)((0,c.A)(n),"adapter",void 0),(0,l.A)((0,c.A)(n),"device",void 0),(0,l.A)((0,c.A)(n),"context",void 0),(0,l.A)((0,c.A)(n),"vsModule",void 0),(0,l.A)((0,c.A)(n),"fsModule",void 0),(0,l.A)((0,c.A)(n),"rotateMatrixBuffer",void 0),(0,l.A)((0,c.A)(n),"renderPipeline",void 0),(0,l.A)((0,c.A)(n),"rotateMatrix",void 0),(0,l.A)((0,c.A)(n),"vbo",void 0),(0,l.A)((0,c.A)(n),"sampler",void 0),(0,l.A)((0,c.A)(n),"vertex",void 0),(0,l.A)((0,c.A)(n),"fragmentSource",void 0),(0,l.A)((0,c.A)(n),"vertexSource",void 0),(0,l.A)((0,c.A)(n),"renderBundleEncoder",void 0),(0,l.A)((0,c.A)(n),"renderBundle",void 0),(0,l.A)((0,c.A)(n),"bindGroupLayout",void 0),(0,l.A)((0,c.A)(n),"bindGroup",void 0),(0,l.A)((0,c.A)(n),"pipelineLayout",void 0),n}var r;return(0,d.A)(t,e),(0,o.A)(t,[{key:"init",value:(r=(0,a.A)(v().mark((function e(t){var r,n,i=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.gpu.requestAdapter({powerPreference:null!==(r=this.options.powerPreference)&&void 0!==r?r:"high-performance"});case 2:return this.adapter=e.sent,n=[],g.__(t,(function(e){i.adapter.features.has(e)&&n.push(e)})),e.next=7,this.adapter.requestDevice({requiredFeatures:n.length?n:void 0});case 7:this.device=e.sent,this.device.lost.then((function(){var e;i.destroyed||(i.lost=!0,m.z3("gpu device lost",x,101),null!==(e=i.options)&&void 0!==e&&e.onRenderContextLost&&i.options.onRenderContextLost())})),this.context=this.canvas.getContext("webgpu"),this.context||m.h2("can not support webgpu, got GPUCanvasContext failed",x,110),this.context.configure({device:this.device,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),this.sampler=this.device.createSampler({magFilter:"linear",minFilter:"linear"}),this.vbo=this.device.createBuffer({size:28*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST}),this.rotateMatrixBuffer=this.device.createBuffer({size:16*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.setRotateMatrix(this.getRotateMatrix(0));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"generatePipeline",value:function(){this.generateBindGroup(),this.pipelineLayout=this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]}),this.vsModule=this.device.createShaderModule({code:this.vertexSource}),this.fsModule=this.device.createShaderModule({code:this.fragmentSource}),this.renderPipeline=this.device.createRenderPipeline({layout:this.pipelineLayout,vertex:{module:this.vsModule,entryPoint:"main",buffers:[{arrayStride:28,attributes:[{shaderLocation:0,offset:0,format:"float32x3"},{shaderLocation:1,offset:12,format:"float32x4"}]}]},fragment:{module:this.fsModule,entryPoint:"main",targets:[{format:navigator.gpu.getPreferredCanvasFormat()}]},primitive:{topology:"triangle-strip"}})}},{key:"generateRenderBundleEncoder",value:function(){this.renderPipeline&&(this.renderBundleEncoder=this.device.createRenderBundleEncoder({colorFormats:[navigator.gpu.getPreferredCanvasFormat()]}),this.renderBundleEncoder.setPipeline(this.renderPipeline),this.renderBundleEncoder.setBindGroup(0,this.bindGroup),this.renderBundleEncoder.setVertexBuffer(0,this.vbo),this.renderBundleEncoder.draw(4,4,0,0),this.renderBundle=this.renderBundleEncoder.finish())}},{key:"setRotateMatrix",value:function(e){this.rotateMatrix=e;var t=new Float32Array(this.rotateMatrix);this.device.queue.writeBuffer(this.rotateMatrixBuffer,0,t.buffer,t.byteOffset,t.byteLength)}},{key:"setVertices",value:function(){var e=new Float32Array(this.vertex);this.device.queue.writeBuffer(this.vbo,0,e.buffer,e.byteOffset,e.byteLength)}},{key:"clear",value:function(){this.context.getCurrentTexture().destroy()}},{key:"layout",value:function(){var e=this.videoWidth,t=this.videoHeight,r=this.canvasWidth,n=this.canvasHeight;90!==this.rotate&&270!==this.rotate||(r=this.canvasHeight,n=this.canvasWidth);var i,a=e/r,s=t/n;i=a>1?!(a<s):a>s,1===this.renderMode&&(i=!i);var o=0;if(this.textureWidth!==this.videoWidth&&(o=(this.textureWidth-this.videoWidth)/this.textureWidth),i){var u=(n-t*r/e)/n;this.vertex=[-1,1-u,0,0,0,0,0,-1,-1+u,0,0,1,0,0,1,1-u,0,1-o,0,0,0,1,-1+u,0,1-o,1,0,0]}else{var c=(r-e*n/t)/r;this.vertex=[-1+c,1,0,0,0,0,0,-1+c,-1,0,0,1,0,0,1-c,1,0,1-o,0,0,0,1-c,-1,0,1-o,1,0,0]}(0,k.A)(this.vertex,this.flipHorizontal,this.flipVertical),this.setVertices()}},{key:"viewport",value:function(e,r){(0,f.A)((0,h.A)(t.prototype),"viewport",this).call(this,e,r)}},{key:"setRotate",value:function(e){(e%=360)!==this.rotate&&(this.rotate=e,this.setRotateMatrix(this.getRotateMatrix(e)),this.layout(),this.clear())}},{key:"destroy",value:function(){this.sampler=null,this.vbo&&this.vbo.destroy(),this.rotateMatrixBuffer&&this.rotateMatrixBuffer.destroy(),this.bindGroupLayout=null,this.bindGroup=null,this.pipelineLayout=null,this.renderBundle=null,this.renderBundleEncoder=null,this.fsModule=null,this.vsModule=null,this.renderPipeline=null,this.rotateMatrix=null,this.vertex=null,this.context=null,this.options=null,this.destroyed=!0,this.device&&(this.device.destroy(),this.device=null),this.adapter&&(this.adapter=null),(0,f.A)((0,h.A)(t.prototype),"destroy",this).call(this)}}]),t}(A.A)},90058:(e,t,r)=>{"use strict";r.d(t,{A:()=>R});var n=r(88435),i=r.n(n),a=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(43070),f=r(60394),h=r(25767),d=r(31060),l=r(134),p=r(36443),v=r.n(p),m=r(61499),A=r(74503),g=r(63939),k=r(94300),y=r(67672),b=r(49393),x=r(97317),w=r(14686),_=r(6110),T=r(62496),P=r(57914),I=r(57517),B=r(25669),C=r(20088),S=r(56024);function M(e,t,r){return t=(0,h.A)(t),(0,u.A)(e,U()?i()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function U(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}var R=function(e){function t(e,r){var n;return(0,s.A)(this,t),n=M(this,t,[e,r]),(0,l.A)((0,c.A)(n),"metaYBuffer",void 0),(0,l.A)((0,c.A)(n),"metaUBuffer",void 0),(0,l.A)((0,c.A)(n),"metaVBuffer",void 0),(0,l.A)((0,c.A)(n),"metaABuffer",void 0),(0,l.A)((0,c.A)(n),"computeBindGroupLayout",void 0),(0,l.A)((0,c.A)(n),"computeBindGroupY",void 0),(0,l.A)((0,c.A)(n),"computeBindGroupU",void 0),(0,l.A)((0,c.A)(n),"computeBindGroupV",void 0),(0,l.A)((0,c.A)(n),"computeBindGroupA",void 0),(0,l.A)((0,c.A)(n),"computePipelineLayout",void 0),(0,l.A)((0,c.A)(n),"computePipeline",void 0),(0,l.A)((0,c.A)(n),"inputYTexture",void 0),(0,l.A)((0,c.A)(n),"inputUTexture",void 0),(0,l.A)((0,c.A)(n),"inputVTexture",void 0),(0,l.A)((0,c.A)(n),"inputATexture",void 0),(0,l.A)((0,c.A)(n),"computeModule",void 0),(0,l.A)((0,c.A)(n),"uint2Float",void 0),(0,l.A)((0,c.A)(n),"hdrMetadata",void 0),(0,l.A)((0,c.A)(n),"hdrMetadataBuffer",void 0),n.hdrMetadata=(0,A.A)(C.A),n.hdrMetadata.multiplier=1,n}var r;return(0,d.A)(t,e),(0,o.A)(t,[{key:"generateFragmentSource",value:function(e,t,r){r.outputRGB=!0;var n=(0,B.A)(this.srcColorSpace,this.dstColorSpace,r),i="textureSample(uTexture, s, in_texcoord.xy).x",a="textureSample(vTexture, s, in_texcoord.xy).x",s="1.0";23===e&&(i="textureSample(uTexture, s, in_texcoord.xy).x",a="textureSample(uTexture, s, in_texcoord.xy).y"),128&t.flags&&4===t.nbComponents&&(s="textureSample(aTexture, s, in_texcoord.xy).x"),this.fragmentSource="\n      struct HdrMetadata {\n        offset: f32,\n        multiplier: f32,\n        pqTonemapA: f32,\n        pqTonemapB: f32,\n        hlgOOTFGammaMinusOne: f32,\n        hlgDstMaxLuminanceRelative: f32,\n        nitsToSdrRelativeFactor: f32,\n        sdrRelativeToNitsFactor: f32\n      };\n\n      @group(0) @binding(1) var s: sampler;\n      @group(0) @binding(2) var<uniform> hdrMetadata: HdrMetadata;\n      @group(0) @binding(3) var yTexture: texture_2d<f32>;\n      @group(0) @binding(4) var uTexture: texture_2d<f32>;\n\n      ".concat(this.vTexture?"@group(0) @binding(5) var vTexture: texture_2d<f32>;":"","\n      ").concat(this.aTexture?"@group(0) @binding(6) var aTexture: texture_2d<f32>;":"","\n\n      @fragment\n      fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {\n\n        let offset = hdrMetadata.offset;\n        let multiplier = hdrMetadata.multiplier;\n        let pq_tonemap_a = hdrMetadata.pqTonemapA;\n        let pq_tonemap_b = hdrMetadata.pqTonemapB;\n        let hlg_ootf_gamma_minus_one = hdrMetadata.hlgOOTFGammaMinusOne;\n        let hlg_dst_max_luminance_relative = hdrMetadata.hlgDstMaxLuminanceRelative;\n        let nits_to_sdr_relative_factor = hdrMetadata.nitsToSdrRelativeFactor;\n        let sdr_relative_to_nits_factor = hdrMetadata.sdrRelativeToNitsFactor;\n\n        let y = textureSample(yTexture, s, in_texcoord.xy).x;\n        let u = ").concat(i,";\n        let v = ").concat(a,";\n        let alpha = ").concat(s,";\n        var color = vec4(y, u, v, alpha);\n\n        if (color.a > 0) {\n          color.r /= color.a;\n          color.g /= color.a;\n          color.b /= color.a;\n        }\n        color.r -= offset;\n        color.g -= offset;\n        color.b -= offset;\n\n        color.r *= multiplier;\n        color.g *= multiplier;\n        color.b *= multiplier;\n        \n        ").concat(n.reduce((function(e,t){return e+t}),""),"\n\n        color.r *= color.a;\n        color.g *= color.a;\n        color.b *= color.a;\n\n        return color;\n      }\n    ")}},{key:"init",value:(r=(0,a.A)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.A)((0,h.A)(t.prototype),"init",this).call(this,["float32-filterable"]);case 2:this.metaYBuffer=this.device.createBuffer({size:4*Uint32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.metaUBuffer=this.device.createBuffer({size:4*Uint32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.metaVBuffer=this.device.createBuffer({size:4*Uint32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.metaABuffer=this.device.createBuffer({size:4*Uint32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.hdrMetadataBuffer=this.device.createBuffer({size:32,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"generateComputeBindGroup",value:function(){this.computeBindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"uint"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float"}}]}),this.computeBindGroupY=this.device.createBindGroup({layout:this.computeBindGroupLayout,entries:[{binding:0,resource:{buffer:this.metaYBuffer,size:4*Uint32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.inputYTexture.createView()},{binding:2,resource:this.yTexture.createView()}]}),this.computeBindGroupU=this.device.createBindGroup({layout:this.computeBindGroupLayout,entries:[{binding:0,resource:{buffer:this.metaUBuffer,size:4*Uint32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.inputUTexture.createView()},{binding:2,resource:this.uTexture.createView()}]}),this.vTexture&&(this.computeBindGroupV=this.device.createBindGroup({layout:this.computeBindGroupLayout,entries:[{binding:0,resource:{buffer:this.metaVBuffer,size:4*Uint32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.inputVTexture.createView()},{binding:2,resource:this.vTexture.createView()}]})),this.aTexture&&(this.computeBindGroupA=this.device.createBindGroup({layout:this.computeBindGroupLayout,entries:[{binding:0,resource:{buffer:this.metaABuffer,size:4*Uint32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.inputATexture.createView()},{binding:2,resource:this.aTexture.createView()}]}))}},{key:"generateComputePipeline",value:function(){this.generateComputeBindGroup(),this.computePipelineLayout=this.device.createPipelineLayout({bindGroupLayouts:[this.computeBindGroupLayout]}),this.computeModule=this.device.createShaderModule({code:this.uint2Float}),this.computePipeline=this.device.createComputePipeline({layout:this.computePipelineLayout,compute:{module:this.computeModule,entryPoint:"main"}})}},{key:"generateBindGroup",value:function(){if(this.yTexture){var e=[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:3,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:4,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}];this.vTexture&&e.push({binding:5,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.aTexture&&e.push({binding:6,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.bindGroupLayout=this.device.createBindGroupLayout({entries:e});var t=[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.sampler},{binding:2,resource:{buffer:this.hdrMetadataBuffer,size:this.hdrMetadataBuffer.size}},{binding:3,resource:this.yTexture.createView()},{binding:4,resource:this.uTexture.createView()}];this.vTexture&&t.push({binding:5,resource:this.vTexture.createView()}),this.aTexture&&t.push({binding:6,resource:this.aTexture.createView()}),this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:t})}}},{key:"checkFrame",value:function(e){var t=x.g[g.f[15](e+80)];if(t&&(g.f[15](e+32)>>>1!==this.textureWidth||g.f[15](e+72)!==this.videoHeight||g.f[15](e+68)!==this.videoWidth||g.f[15](e+80)!==this.format)){this.yTexture&&this.yTexture.destroy(),this.uTexture&&this.uTexture.destroy(),this.vTexture&&this.vTexture.destroy(),this.aTexture&&this.aTexture.destroy(),this.inputYTexture&&this.inputYTexture.destroy(),this.inputUTexture&&this.inputUTexture.destroy(),this.inputVTexture&&this.inputVTexture.destroy(),this.inputATexture&&this.inputATexture.destroy(),this.yTexture=this.device.createTexture({size:[g.f[15](e+32)>>>1,g.f[15](e+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING,format:"r32float"}),this.uTexture=this.device.createTexture({size:[g.f[15](e+32+4)>>>1,g.f[15](e+72)>>>t.log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING,format:"r32float"}),t.comp[1].plane!==t.comp[2].plane&&(this.vTexture=this.device.createTexture({size:[g.f[15](e+32+8)>>>1,g.f[15](e+72)>>>t.log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING,format:"r32float"})),4===t.nbComponents&&(this.aTexture=this.device.createTexture({size:[g.f[15](e+32+12)>>>1,g.f[15](e+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING,format:"r32float"})),this.inputYTexture=this.device.createTexture({size:[this.yTexture.width,this.yTexture.height],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"r16uint"}),this.inputUTexture=this.device.createTexture({size:[this.uTexture.width,this.uTexture.height],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"r16uint"}),t.comp[1].plane!==t.comp[2].plane&&(this.inputVTexture=this.device.createTexture({size:[this.vTexture.width,this.vTexture.height],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"r16uint"})),4===t.nbComponents&&(this.inputATexture=this.device.createTexture({size:[this.aTexture.width,this.aTexture.height],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"r16uint"}));var r=new Uint32Array([(1<<t.comp[0].depth)-1,this.inputYTexture.width,this.inputYTexture.height]);this.device.queue.writeBuffer(this.metaYBuffer,0,r.buffer,r.byteOffset,r.byteLength);var n=new Uint32Array([(1<<t.comp[1].depth)-1,this.inputUTexture.width,this.inputUTexture.height]);if(this.device.queue.writeBuffer(this.metaUBuffer,0,n.buffer,n.byteOffset,n.byteLength),t.comp[1].plane!==t.comp[2].plane){var i=new Uint32Array([(1<<t.comp[2].depth)-1,this.inputVTexture.width,this.inputVTexture.height]);this.device.queue.writeBuffer(this.metaVBuffer,0,i.buffer,i.byteOffset,i.byteLength)}if(4===t.nbComponents){var a=new Uint32Array([(1<<t.comp[3].depth)-1,this.inputATexture.width,this.inputATexture.height]);this.device.queue.writeBuffer(this.metaABuffer,0,a.buffer,a.byteOffset,a.byteLength)}this.srcColorSpace=new _.A(g.f[15](e+220),g.f[15](e+212),g.f[15](e+216),g.f[15](e+208)),this.videoWidth=g.f[15](e+68),this.videoHeight=g.f[15](e+72),this.textureWidth=g.f[15](e+32)>>>1,this.format=g.f[15](e+80);var s={type:1,bitDepth:t.comp[0].depth,toneMapPQAndHlgToDst:!0,metadata:this.hdrMetadata,dstSdrMaxLuminanceNits:I.kH,dstMaxLuminanceRelative:1},o=(0,S.aH)(e,14);if(o){var u=g.f[20](o+4);g.f[8](u)>0&&(s.maxContentLightLevel=g.f[8](u))}this.generateFragmentSource(g.f[15](e+80),t,s),this.uint2Float=1&t.flags?P.A:T.A,this.layout(),this.generatePipeline(),this.generateRenderBundleEncoder(),this.generateComputePipeline();var c=(0,w.s3)(this.hdrMetadata[m.o9],32).slice();this.device.queue.writeBuffer(this.hdrMetadataBuffer,0,c.buffer,c.byteOffset,c.byteLength)}}},{key:"render",value:function(e){if(!this.lost){this.checkFrame(e);var t=this.device.createCommandEncoder(),r=t.beginComputePass({});r.setPipeline(this.computePipeline),r.setBindGroup(0,this.computeBindGroupY),this.device.queue.writeTexture({texture:this.inputYTexture},(0,w.s3)(g.f[20](e),this.inputYTexture.width*this.inputYTexture.height<<1),{offset:0,bytesPerRow:this.inputYTexture.width<<1,rowsPerImage:this.inputYTexture.height},{width:this.inputYTexture.width,height:this.inputYTexture.height,depthOrArrayLayers:1}),r.dispatchWorkgroups(this.inputYTexture.width+7>>>3,this.inputYTexture.height+7>>>3),r.setBindGroup(0,this.computeBindGroupU),this.device.queue.writeTexture({texture:this.inputUTexture},(0,w.s3)(g.f[20](e+4),this.inputUTexture.width*this.inputUTexture.height<<1),{offset:0,bytesPerRow:this.inputUTexture.width<<1,rowsPerImage:this.inputUTexture.height},{width:this.inputUTexture.width,height:this.inputUTexture.height,depthOrArrayLayers:1}),r.dispatchWorkgroups(this.inputUTexture.width+7>>>3,this.inputUTexture.height+7>>>3),this.inputVTexture&&(r.setBindGroup(0,this.computeBindGroupV),this.device.queue.writeTexture({texture:this.inputVTexture},(0,w.s3)(g.f[20](e+8),this.inputVTexture.width*this.inputVTexture.height<<1),{offset:0,bytesPerRow:this.inputVTexture.width<<1,rowsPerImage:this.inputVTexture.height},{width:this.inputVTexture.width,height:this.inputVTexture.height,depthOrArrayLayers:1}),r.dispatchWorkgroups(this.inputVTexture.width+7>>>3,this.inputVTexture.height+7>>>3)),this.inputATexture&&(r.setBindGroup(0,this.computeBindGroupA),this.device.queue.writeTexture({texture:this.inputATexture},(0,w.s3)(g.f[20](e+12),this.inputATexture.width*this.inputATexture.height<<1),{offset:0,bytesPerRow:this.inputATexture.width<<1,rowsPerImage:this.inputATexture.height},{width:this.inputATexture.width,height:this.inputATexture.height,depthOrArrayLayers:1}),r.dispatchWorkgroups(this.inputATexture.width+7>>>3,this.inputATexture.height+7>>>3)),r.end();var n=t.beginRenderPass({colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]});n.executeBundles([this.renderBundle]),n.end(),this.device.queue.submit([t.finish()])}}},{key:"destroy",value:function(){this.inputYTexture&&(this.inputYTexture.destroy(),this.inputYTexture=null),this.inputUTexture&&(this.inputUTexture.destroy(),this.inputUTexture=null),this.inputVTexture&&(this.inputVTexture.destroy(),this.inputVTexture=null),this.metaYBuffer&&(this.metaYBuffer.destroy(),this.metaYBuffer=null),this.metaUBuffer&&(this.metaUBuffer.destroy(),this.metaUBuffer=null),this.metaVBuffer&&(this.metaVBuffer.destroy(),this.metaVBuffer=null),this.hdrMetadata&&((0,k.A)(this.hdrMetadata),this.hdrMetadata=null),this.computeModule=null,this.computeBindGroupY=null,this.computeBindGroupU=null,this.computeBindGroupV=null,this.computeBindGroupLayout=null,this.computePipelineLayout=null,this.computePipeline=null,(0,f.A)((0,h.A)(t.prototype),"destroy",this).call(this)}}],[{key:"isSupport",value:function(e){if(y.ai(e)){var t=x.g[g.f[15](e+80)];if(t)return!(32&t.flags)&&16&t.flags&&t.comp[0].depth+7>>>3==2}return!1}}]),t}(b.A)},37977:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(25767),c=r(31060),f=r(63939),h=r(67672),d=r(49393),l=r(97317),p=r(14686),v=r(6110),m=r(25669);function A(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,g()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function g(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}var k=function(e){function t(e,r){return(0,a.A)(this,t),A(this,t,[e,r])}return(0,c.A)(t,e),(0,s.A)(t,[{key:"generateFragmentSource",value:function(e,t){var r=(0,m.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:1,outputRGB:!0}),n="textureSample(uTexture, s, in_texcoord.xy).x",i="textureSample(vTexture, s, in_texcoord.xy).x",a="1.0";23===e&&(n="textureSample(uTexture, s, in_texcoord.xy).x",i="textureSample(uTexture, s, in_texcoord.xy).y"),128&t.flags&&4===t.nbComponents&&(a="textureSample(aTexture, s, in_texcoord.xy).x"),this.fragmentSource="\n      @group(0) @binding(1) var s: sampler;\n      @group(0) @binding(2) var yTexture: texture_2d<f32>;\n      @group(0) @binding(3) var uTexture: texture_2d<f32>;\n      ".concat(this.vTexture?"@group(0) @binding(4) var vTexture: texture_2d<f32>;":"","\n      ").concat(this.aTexture?"@group(0) @binding(5) var aTexture: texture_2d<f32>;":"","\n      \n      @fragment\n      fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {\n        let y = textureSample(yTexture, s, in_texcoord.xy).x;\n        let u = ").concat(n,";\n        let v = ").concat(i,";\n        let alpha = ").concat(a,";\n        var color = vec4(y, u, v, alpha);\n        ").concat(r.reduce((function(e,t){return e+t}),""),"\n        return color;\n      }\n    ")}},{key:"checkFrame",value:function(e){var t=l.g[f.f[15](e+80)];t&&(f.f[15](e+32)===this.textureWidth&&f.f[15](e+72)===this.videoHeight&&f.f[15](e+68)===this.videoWidth||(this.yTexture&&this.yTexture.destroy(),this.uTexture&&this.uTexture.destroy(),this.vTexture&&this.vTexture.destroy(),this.aTexture&&this.aTexture.destroy(),this.yTexture=this.device.createTexture({size:[f.f[15](e+32),f.f[15](e+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"}),this.uTexture=this.device.createTexture({size:[f.f[15](e+32+4),f.f[15](e+72)>>>l.g[f.f[15](e+80)].log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"}),t.comp[1].plane!==t.comp[2].plane&&(this.vTexture=this.device.createTexture({size:[f.f[15](e+32+8),f.f[15](e+72)>>>l.g[f.f[15](e+80)].log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"})),4===t.nbComponents&&(this.aTexture=this.device.createTexture({size:[f.f[15](e+32+12),f.f[15](e+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"})),this.srcColorSpace=new v.A(f.f[15](e+220),f.f[15](e+212),f.f[15](e+216),f.f[15](e+208)),this.generateFragmentSource(f.f[15](e+80),t),this.videoWidth=f.f[15](e+68),this.videoHeight=f.f[15](e+72),this.textureWidth=f.f[15](e+32),this.format=f.f[15](e+80),this.layout(),this.generatePipeline(),this.generateRenderBundleEncoder()))}},{key:"render",value:function(e){if(!this.lost){this.checkFrame(e),this.device.queue.writeTexture({texture:this.yTexture},(0,p.s3)(f.f[20](e),this.yTexture.width*this.yTexture.height),{offset:0,bytesPerRow:this.yTexture.width,rowsPerImage:this.yTexture.height},{width:this.yTexture.width,height:this.yTexture.height,depthOrArrayLayers:1}),this.device.queue.writeTexture({texture:this.uTexture},(0,p.s3)(f.f[20](e+4),this.uTexture.width*this.uTexture.height),{offset:0,bytesPerRow:this.uTexture.width,rowsPerImage:this.uTexture.height},{width:this.uTexture.width,height:this.uTexture.height,depthOrArrayLayers:1}),this.vTexture&&this.device.queue.writeTexture({texture:this.vTexture},(0,p.s3)(f.f[20](e+8),this.vTexture.width*this.vTexture.height),{offset:0,bytesPerRow:this.vTexture.width,rowsPerImage:this.vTexture.height},{width:this.vTexture.width,height:this.vTexture.height,depthOrArrayLayers:1}),this.aTexture&&this.device.queue.writeTexture({texture:this.aTexture},(0,p.s3)(f.f[20](e+12),this.aTexture.width*this.aTexture.height),{offset:0,bytesPerRow:this.aTexture.width,rowsPerImage:this.aTexture.height},{width:this.aTexture.width,height:this.aTexture.height,depthOrArrayLayers:1});var t=this.device.createCommandEncoder(),r=t.beginRenderPass({colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]});r.executeBundles([this.renderBundle]),r.end(),this.device.queue.submit([t.finish()])}}}],[{key:"isSupport",value:function(e){if(h.ai(e)){var t=l.g[f.f[15](e+80)];if(t)return!(32&t.flags)&&16&t.flags&&t.comp[0].depth+7>>>3==1}return!1}}]),t}(d.A)},49393:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(54895);function p(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,v()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var m=function(e){function t(e,r){var n;return(0,a.A)(this,t),n=p(this,t,[e,r]),(0,d.A)((0,u.A)(n),"yTexture",void 0),(0,d.A)((0,u.A)(n),"uTexture",void 0),(0,d.A)((0,u.A)(n),"vTexture",void 0),(0,d.A)((0,u.A)(n),"aTexture",void 0),n.vertexSource=l.A,n}return(0,h.A)(t,e),(0,s.A)(t,[{key:"generateBindGroup",value:function(){if(this.yTexture){var e=[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:3,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}];this.vTexture&&e.push({binding:4,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.aTexture&&e.push({binding:5,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.bindGroupLayout=this.device.createBindGroupLayout({entries:e});var t=[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.sampler},{binding:2,resource:this.yTexture.createView()},{binding:3,resource:this.uTexture.createView()}];this.vTexture&&t.push({binding:4,resource:this.vTexture.createView()}),this.aTexture&&t.push({binding:5,resource:this.aTexture.createView()}),this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:t})}}},{key:"destroy",value:function(){this.yTexture&&this.yTexture.destroy(),this.uTexture&&this.uTexture.destroy(),this.vTexture&&this.vTexture.destroy(),this.aTexture&&this.aTexture.destroy(),(0,c.A)((0,f.A)(t.prototype),"destroy",this).call(this)}}]),t}(r(15045).A)},6110:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(78716),i=r(81570),a=r(134),s=r(12535),o=r(1064),u=r(86141),c=r(91131),f=function(){function e(t,r,i,s){(0,n.A)(this,e),(0,a.A)(this,"matrixId",void 0),(0,a.A)(this,"primaryId",void 0),(0,a.A)(this,"transferId",void 0),(0,a.A)(this,"rangeId",void 0),this.matrixId=t,this.primaryId=r,this.transferId=i,this.rangeId=s}return(0,i.A)(e,[{key:"getMatrixId",value:function(){return this.matrixId}},{key:"getPrimaryId",value:function(){return this.primaryId}},{key:"getTransferId",value:function(){return this.transferId}},{key:"getRangeId",value:function(){return this.rangeId}},{key:"isWide",value:function(){return 9===this.primaryId||11===this.primaryId||12===this.primaryId}},{key:"isHDR",value:function(){return 18===this.transferId||16===this.transferId}},{key:"isToneMappedByDefault",value:function(){return 18===this.transferId||16===this.transferId}},{key:"isAffectedBySDRWhiteLevel",value:function(){return 18===this.transferId||16===this.transferId}},{key:"fullRangeEncodedValues",value:function(){return 12===this.transferId||11===this.transferId}},{key:"getTransferMatrix",value:function(e){var t=(1<<e-1)/((1<<e)-1),r=0,n=0;switch(this.matrixId){case 0:return new s.A;case 1:case 2:r=.2126,n=.0722;break;case 4:r=.3,n=.11;break;case 5:case 6:r=.299,n=.114;break;case 7:r=.212,n=.087;break;case 8:return s.A.RowMajor([.25,.5,.25,0,-.25,.5,-.25,t,.5,0,-.5,t,0,0,0,1]);case 10:return r=.2627,n=.0593,s.A.RowMajor([1,0,0,0,r,1-r-n,n,0,0,0,1,0,0,0,0,1]);case 9:r=.2627,n=.0593;break;case 11:return s.A.RowMajor([0,1,0,0,0,-.5,.493283,.5,.5,-.495951,0,.5,0,0,0,1])}var i=1-r-n,a=.5/(1-n),o=.5/(1-r);return s.A.RowMajor([r,i,n,0,a*-r,a*-i,a*(1-n),.5,o*(1-r),o*-i,o*-n,.5,0,0,0,1])}},{key:"getRangeAdjustMatrix",value:function(e){if(2===this.rangeId)return new s.A;var t=e-8,r=(1<<e)-1,n=r/(219<<t);switch(this.matrixId){case 0:case 8:return(new s.A).setScale(new o.P([n,n,n])).postTranslate(new o.P([-16/219,-16/219,-16/219]));case 1:case 4:case 5:case 6:case 7:case 9:case 10:case 11:case 2:var i=224<<t,a=r/i,u=(i-r)/(2*i);return(new s.A).setScale(new o.P([n,a,a])).postTranslate(new o.P([-16/219,u,u]))}return new s.A}},{key:"getTransferFunction_",value:function(){switch(this.transferId){case 8:return u.Hi;case 4:return u.$_;case 5:return u.J7;case 7:return u.q;case 1:case 6:case 14:case 15:return u.aP;case 17:return u.Cr;case 18:case 12:case 9:case 10:case 16:case 2:return null}}},{key:"getTransferFunction",value:function(e){return this.transferId,this.getTransferFunction_()}},{key:"getInverseTransferFunction",value:function(e){var t=this.getTransferFunction(e);if(t){var r={a:0,b:0,c:0,d:0,e:0,f:0,g:0};if(t.a>0&&t.g>0){var n=Math.pow(t.a,t.g);r.a=1/n,r.b=-t.e/n,r.g=1/t.g}return r.d=t.c*t.d+t.f,r.e=-t.b/t.a,0!=t.c&&(r.c=1/t.c,r.f=-t.f/t.c),r}}},{key:"hasExtendedSkTransferFn",value:function(){return 0===this.matrixId}},{key:"isValid",value:function(){return 2!==this.matrixId&&2!==this.primaryId&&2!==this.transferId&&0!==this.rangeId}},{key:"getColorSpacePrimaries",value:function(){var e=c.WO;switch(this.primaryId){case 1:return c.P5;case 4:return c.Wc;case 5:return c.cA;case 7:return c.vi;case 8:return c.cp;case 9:return c.Je;case 10:return c.lf;case 11:return c.Rk;case 12:return c.tR}return e}},{key:"getPrimaryMatrix",value:function(){var e=this.getColorSpacePrimaries(),t=c._O(e);return s.A.RowMajor([t.rc(0,0),t.rc(0,1),t.rc(0,2),0,t.rc(1,0),t.rc(1,1),t.rc(1,2),0,t.rc(2,0),t.rc(2,1),t.rc(2,2),0,0,0,0,1])}}]),e}()},91131:(e,t,r)=>{"use strict";r.d(t,{Je:()=>d,P5:()=>o,Rk:()=>p,WO:()=>m,Wc:()=>u,_O:()=>A,cA:()=>c,cp:()=>h,lf:()=>l,tR:()=>v,vi:()=>f});var n=r(45726),i=r(1064),a=r(66551),s=r(60153),o=[.64,.33,.3,.6,.15,.06,.3127,.329],u=[.67,.33,.21,.71,.14,.08,.31,.316],c=[.64,.33,.29,.6,.15,.06,.3127,.329],f=[.63,.34,.31,.595,.155,.07,.3127,.329],h=[.681,.319,.243,.692,.145,.049,.31,.316],d=[.708,.292,.17,.797,.131,.046,.3127,.329],l=[1,0,0,1,0,0,.3333333333333333,.3333333333333333],p=[.68,.32,.265,.69,.15,.06,.314,.351],v=[.68,.32,.265,.69,.15,.06,.3127,.329],m=[0,0,0,0,0,0,0,0];function A(e){var t=n.A.RowMajor([e[0],e[2],e[4],e[1],e[3],e[5],1-e[0]-e[1],1-e[2]-e[3],1-e[4]-e[5]]),r=t.copy().invert(),o=new i.P([e[6]/e[7],1,(1-e[6]-e[7])/e[7]]),u=(0,s.Y3)(r,o),c=new n.A([u.x,0,0,0,u.y,0,0,0,u.z]);c=(0,a.B)(t,c);var f=function(e,t){var r=new i.P([e/t,1,(1-e-t)/t]),o=new i.P([.96422,1,.82521]),u=n.A.RowMajor([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),c=n.A.RowMajor([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),f=(0,s.Y3)(u,r),h=(0,s.Y3)(u,o),d=new n.A([h.x/f.x,0,0,0,h.y/f.y,0,0,0,h.z/f.z]);return d=(0,a.B)(d,u),(0,a.B)(c,d)}(e[6],e[7]);return(0,a.B)(f,c)}},86141:(e,t,r)=>{"use strict";r.d(t,{$_:()=>n,Cr:()=>u,Hi:()=>s,J7:()=>i,aP:()=>o,q:()=>a});var n={g:2.2,a:1,b:0,c:0,d:0,e:0,f:0},i={g:2.8,a:1,b:0,c:0,d:0,e:0,f:0},a={g:2.222222222222,a:.899626676224,b:.100373323776,c:.25,d:.091286342118,e:0,f:0},s={g:1,a:1,b:0,c:0,d:0,e:0,f:0},o={g:2.4,a:.9478672985781991,b:.05213270142180095,c:.07739938080495357,d:.04045,e:0,f:0},u={g:2.6,a:1.034080527699,b:0,c:0,d:0,e:0,f:0}},89401:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,U:()=>o});var n=r(57517),i=.2627,a=.678,s=.0593;function o(e){e.metadata.hlgDstMaxLuminanceRelative=e.dstMaxLuminanceRelative;var t=e.dstSdrMaxLuminanceNits*e.dstMaxLuminanceRelative;e.metadata.hlgOOTFGammaMinusOne=1.2+.42*Math.log10(t/n.hD)/Math.log10(10)-1}function u(e){return 0===e.type?"\n      {\n        vec4 luma_vec = vec4(".concat(i,", ").concat(a,", ").concat(s,", 0.0);\n        float L = dot(color, luma_vec);\n        if (L > 0.0) {\n          color.r *= pow(L, hlg_ootf_gamma_minus_one);\n          color.g *= pow(L, hlg_ootf_gamma_minus_one);\n          color.b *= pow(L, hlg_ootf_gamma_minus_one);\n          color.r *= hlg_dst_max_luminance_relative;\n          color.g *= hlg_dst_max_luminance_relative;\n          color.b *= hlg_dst_max_luminance_relative;\n        }\n      }\n    "):1===e.type?"\n      {\n        let luma_vec: vec4<f32> = vec4(".concat(i,", ").concat(a,", ").concat(s,", 0.0);\n        let L: f32 = dot(color, luma_vec);\n        if (L > 0.0) {\n          color.r *= pow(L, hlg_ootf_gamma_minus_one);\n          color.g *= pow(L, hlg_ootf_gamma_minus_one);\n          color.b *= pow(L, hlg_ootf_gamma_minus_one);\n          color.r *= hlg_dst_max_luminance_relative;\n          color.g *= hlg_dst_max_luminance_relative;\n          color.b *= hlg_dst_max_luminance_relative;\n        }\n      }\n    "):""}},7511:(e,t,r)=>{"use strict";function n(e,t){var r="",n="";if(0===t.type?(r="mat4",n="vec4"):1===t.type&&(r="mat4x4",n="vec4"),!r||!n)return"";var i="\n      color = ".concat(r,"(\n        ").concat(e.rc(0,0),", ").concat(e.rc(1,0),", ").concat(e.rc(2,0),", 0,\n        ").concat(e.rc(0,1),", ").concat(e.rc(1,1),", ").concat(e.rc(2,1),", 0,\n        ").concat(e.rc(0,2),", ").concat(e.rc(1,2),", ").concat(e.rc(2,2),", 0,\n        0, 0, 0, 1\n      ) * color;\n    ");return 0===e.rc(0,3)&&0===e.rc(1,3)&&0===e.rc(2,3)||(i+="\n        color += ".concat(n,"(").concat(e.rc(0,3),", ").concat(e.rc(1,3),", ").concat(e.rc(2,3),", 0);\n      ")),i}r.d(t,{A:()=>n})},79955:(e,t,r)=>{"use strict";function n(e,t){t.metadata.sdrRelativeToNitsFactor=t.dstSdrMaxLuminanceNits/e}function i(e){return"\n    color.r *= sdr_relative_to_nits_factor;\n    color.g *= sdr_relative_to_nits_factor;\n    color.b *= sdr_relative_to_nits_factor;\n "}r.d(t,{A:()=>i,j:()=>n})},64748:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,n:()=>i});var n=r(57517);function i(e,t,r){var i=r.dstSdrMaxLuminanceNits;t&&(i=n.kH,r.ndwl&&(i=r.ndwl)),r.metadata.nitsToSdrRelativeFactor=e/i}function a(e){return"\n    color.r *= nits_to_sdr_relative_factor;\n    color.g *= nits_to_sdr_relative_factor;\n    color.b *= nits_to_sdr_relative_factor;\n  "}},70194:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,J:()=>i});var n=r(57517);function i(e,t){var r=function(e,t){var r=n.hD;return 18!==e.getTransferId()&&t.maxContentLightLevel>0&&(r=t.maxContentLightLevel),r/t.dstSdrMaxLuminanceNits}(e,t);r>t.dstMaxLuminanceRelative?(t.metadata.pqTonemapA=t.dstMaxLuminanceRelative/(r*r),t.metadata.pqTonemapB=1/t.dstMaxLuminanceRelative):(t.metadata.pqTonemapA=0,t.metadata.pqTonemapB=0)}function a(e){return"\n    {\n      ".concat(1===e.type?"let maximum: f32":"float maximum"," = max(color.r, max(color.g, color.b));\n      if (maximum > 0.0) {\n        color.r *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);\n        color.g *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);\n        color.b *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);\n      }\n    }\n ")}},15380:(e,t,r)=>{"use strict";function n(e){return e===e>>>0?"".concat(e,".0"):e.toString()}r.d(t,{A:()=>n})},25669:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var n=r(6110),i=r(57517),a=r(7511),s=r(5361),o=r(63921),u=r(55168),c=r(16307),f=r(89401),h=r(64748),d=r(70194),l=r(79955),p=r(84272),v=r(51025),m=r(40326);function A(e,t,r){var A=[],g=8===e.getMatrixId(),k=(0,a.A)(e.getRangeAdjustMatrix(r.bitDepth),r);if(g||A.push(k),10===e.getMatrixId()||A.push((0,a.A)(e.getTransferMatrix(r.bitDepth).invert(),r)),g&&A.push(k),t.isValid()){if(e.isHDR()){switch(e.getTransferId()){case 18:A.push((0,s.A)(r));break;case 16:A.push((0,o.A)(r));break;default:var y=e.getTransferFunction();y?A.push((0,u.A)(y,e.hasExtendedSkTransferFn(),r)):A.push((0,c.A)(e.getTransferId(),r))}10===e.getMatrixId()&&A.push((0,a.A)(e.getTransferMatrix(r.bitDepth).invert(),r)),A.push((0,a.A)(e.getPrimaryMatrix(),r));var b=new n.A(0,9,8,2);switch(e.getTransferId()){case 18:r.toneMapPQAndHlgToDst?((0,f.U)(r),A.push((0,f.A)(r))):((0,h.n)(12/i.kH,!1,r),A.push((0,h.A)(r)));break;case 16:(0,h.n)(i.th,!0,r),A.push((0,h.A)(r)),r.toneMapPQAndHlgToDst&&(A.push((0,a.A)(b.getPrimaryMatrix().invert(),r)),(0,d.J)(e,r),A.push((0,d.A)(r)),A.push((0,a.A)(b.getPrimaryMatrix(),r)))}switch(A.push((0,a.A)(t.getPrimaryMatrix().invert(),r)),10===t.getMatrixId()&&A.push((0,a.A)(t.getTransferMatrix(r.bitDepth),r)),t.getTransferId()){case 18:(0,l.j)(i.kH,r),A.push((0,l.A)(r)),A.push((0,p.A)(r));break;case 16:(0,l.j)(i.th,r),A.push((0,l.A)(r)),A.push((0,v.A)(r));default:var x=t.getInverseTransferFunction();x?A.push((0,u.A)(x,e.hasExtendedSkTransferFn(),r)):A.push((0,m.A)(e.getTransferId(),r))}}if(!r.outputRGB){var w=8===t.getMatrixId(),_=(0,a.A)(t.getRangeAdjustMatrix(r.bitDepth).invert(),r);w&&A.push(_),10===t.getMatrixId()||A.push((0,a.A)(t.getTransferMatrix(r.bitDepth),r)),w||A.push(_)}}return A}},57517:(e,t,r)=>{"use strict";r.d(t,{hD:()=>i,kH:()=>n,th:()=>a});var n=203,i=1e3,a=1e4},71323:(e,t,r)=>{"use strict";function n(e,t,r){return t?"\n      {\n        ".concat(1===r.type?"var v: f32":"float v"," = abs(color.r);\n        ").concat(e(),"\n        color.r = sign(color.r) * v;\n      }\n      {\n        ").concat(1===r.type?"var v: f32":"float v"," = abs(color.g);\n        ").concat(e(),"\n        color.g = sign(color.g) * v;\n      }\n      {\n        ").concat(1===r.type?"var v: f32":"float v"," = abs(color.b);\n        ").concat(e(),"\n        color.b = sign(color.b) * v;\n      }\n    "):"\n      {\n        ".concat(1===r.type?"var v: f32":"float v"," = color.r;\n        ").concat(e(),"\n        color.r = v;\n      }\n      {\n        ").concat(1===r.type?"var v: f32":"float v"," = color.g;\n        ").concat(e(),"\n        color.g = v;\n      }\n      {\n        ").concat(1===r.type?"var v: f32":"float v"," = color.b;\n        ").concat(e(),"\n        color.b = v;\n      }\n    ")}r.d(t,{A:()=>n})},40326:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(71323);function i(e,t){return(0,n.A)((function(){switch(e){case 9:return"\n          if (v < 0.0) {\n            v = 0.0;\n          }\n          else {\n            v =  1.0 + log(v) / log(10.0) / 2.0;\n          }\n        ";case 10:return"\n          if (v < sqrt(10.0) / 1000.0)\n            v = 0.0;\n          }\n          else {\n            v = 1.0 + log(v) / log(10.0) / 2.5;\n          }\n        ";case 11:return"\n          ".concat(1===t.type?"let a: f32":"float a"," = 1.099296826809442;\n          ").concat(1===t.type?"let b: f32":"float b","= 0.018053968510807;\n          if (v < -b) {\n            v = -a * pow(-v, 0.45) + (a - 1.0);\n          }\n          else if (v <= b) {\n            v = 4.5 * v;\n          }\n          else {\n            v = a * pow(v, 0.45) - (a - 1.0);\n          }\n        ");case 12:return"\n          ".concat(1===t.type?"let a: f32":"float a"," = 1.099;\n          ").concat(1===t.type?"let b: f32":"float b"," = 0.018;\n          ").concat(1===t.type?"let l: f32":"float l"," = 0.0045;\n\n          if (v < -l) {\n            v = -(a * pow(-4.0 * v, 0.45) + (a - 1.0)) / 4.0;\n          }\n          else if (v <= b) {\n            v = 4.5 * v;\n          }\n          else {\n            v = a * pow(v, 0.45) - (a - 1.0);\n          }\n        ");default:return""}}),!1,t)}},5361:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(71323);function i(e){return(0,n.A)((function(){return"\n      v = max(0.0, v);\n      ".concat(1===e.type?"let a: f32":"float a"," = 0.17883277f;\n      ").concat(1===e.type?"let b: f32":"float b"," = 0.28466892f;\n      ").concat(1===e.type?"let c: f32":"float c"," = 0.55991073f;\n      if (v <= 0.5) {\n        v = v * v + 4.0;\n      }\n      else {\n        v = exp((v - c) / a) + b;\n      }\n      v = v / 12.0;\n    ")}),!1,e)}},84272:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(71323);function i(e){return(0,n.A)((function(){return"\n      v = max(0.0, v);\n      ".concat(1===e.type?"let a: f32":"float a"," = 0.17883277f;\n      ").concat(1===e.type?"let b: f32":"float b"," = 0.28466892f;\n      ").concat(1===e.type?"let c: f32":"float c"," = 0.55991073f;\n      if (v <= 1.0) {\n        v = 0.5 * sqrt(v);\n      }\n      else {\n        v = a * log(v - b) + c;\n      }\n    ")}),!1,e)}},63921:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(71323);function i(e){return(0,n.A)((function(){return"\n      v = max(0.0, v);\n      ".concat(1===e.type?"let m1: f32":"float m1"," = (2610.0 / 4096.0) / 4.0;\n      ").concat(1===e.type?"let m2: f32":"float m2"," = (2523.0 / 4096.0) * 128.0;\n      ").concat(1===e.type?"let c1: f32":"float c1"," = 3424.0 / 4096.0;\n      ").concat(1===e.type?"let c2: f32":"float c2"," = (2413.0 / 4096.0) * 32.0;\n      ").concat(1===e.type?"let c3: f32":"float c3"," = (2392.0 / 4096.0) * 32.0;\n      \n      ").concat(0===e.type?"\n        #ifdef GL_FRAGMENT_PRECISION_HIGH\n        highp float v2 = v;\n        #else\n        float v2 = v;\n        #endif\n      ":"var v2: f32 = v;","\n  \n      v2 = pow(max(pow(v2, 1.0 / m2) - c1, 0.0) / (c2 - c3 * pow(v2, 1.0 / m2)), 1.0 / m1);\n      v = v2;\n    ")}),!1,e)}},51025:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(71323);function i(e){return(0,n.A)((function(){return"\n      v = max(0.0, v);\n      ".concat(1===e.type?"let m1: f32":"float m1"," = (2610.0 / 4096.0) / 4.0;\n      ").concat(1===e.type?"let m2: f32":"float m2"," = (2523.0 / 4096.0) * 128.0;\n      ").concat(1===e.type?"let c1: f32":"float c1"," = 3424.0 / 4096.0;\n      ").concat(1===e.type?"let c2: f32":"float c2"," = (2413.0 / 4096.0) * 32.0;\n      ").concat(1===e.type?"let c3: f32":"float c3"," = (2392.0 / 4096.0) * 32.0;\n      v =  pow((c1 + c2 * pow(v, m1)) / (1.0 + c3 * pow(v, m1)), m2);\n    ")}),!1,e)}},16307:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(71323);function i(e,t){return(0,n.A)((function(){switch(e){case 9:return"\n          if (v < 0.0) {\n            v = 0.0;\n          }\n          else {\n            v = pow(10.0, (v - 1.0) * 2.0);\n          }\n        ";case 10:return"\n          if (v < 0.0) {\n            v = 0.0;\n          }\n          else {\n            v = pow(10.0, (v - 1.0) * 2.5);\n          }\n        ";case 11:return"\n          ".concat(1===t.type?"let a: f32":"float a"," = 1.099296826809442;\n          ").concat(1===t.type?"let from_linear_neg_a: f32":"float from_linear_neg_a"," = -1.047844;\n          ").concat(1===t.type?"let from_linear_b: f32":"float from_linear_b"," = 0.081243;\n          if (v < from_linear_neg_a) {\n            v = -pow((a - 1.0 - v) / a, 1.0 / 0.45);\n          }\n          else if (v <= from_linear_b) {\n            v = v / 4.5;\n          }\n          else {\n            v = pow((v + a - 1.0) / a, 1.0 / 0.45);\n          }\n        ");case 12:return"\n          ".concat(1===t.type?"let a: f32":"float a"," = 1.099;\n          ").concat(1===t.type?"let from_linear_neg_l: f32":"float from_linear_neg_l"," = -0.020250;\n          ").concat(1===t.type?"let from_linear_b: f32":"float from_linear_b"," = 0.081000;\n          if (v < from_linear_neg_l) {\n            v = -pow((1.0 - a - v * 4.0) / a, 1.0 / 0.45) / 4.0;\n          }\n          else if (v <= from_linear_b) {\n            v = v / 4.5;\n          }\n          else {\n            v = pow((v + a - 1.0) / a, 1.0 / 0.45);\n          }\n        ");default:return""}}),!1,t)}},55168:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(71323),i=r(15380);function a(e,t,r){return(0,n.A)((function(){var t=.0009765625,r="v";Math.abs(e.c-1)>t&&(r="".concat((0,i.A)(e.c)," * ").concat(r)),Math.abs(e.f)>t&&(r="".concat(r," + ").concat((0,i.A)(e.f)));var n="v";return Math.abs(e.a=1)>t&&(n="".concat((0,i.A)(e.a)," * ").concat(n)),Math.abs(e.b)>t&&(n="".concat(n," + ").concat((0,i.A)(e.b))),Math.abs(e.g-1)>t&&(n="pow(".concat(n,", ").concat((0,i.A)(e.g),")")),Math.abs(e.e)>t&&(n="".concat(n," + ").concat((0,i.A)(e.e))),"\n      if (v < ".concat((0,i.A)(e.d),") {\n        v = ").concat(r,";\n      }\n      else {\n        v = ").concat(n,";\n      }\n    ")}),!1,r)}},38469:(e,t,r)=>{"use strict";function n(e,t,r){if(t){var n=e[3],i=e[4];e[3]=e[17],e[4]=e[18],e[17]=n,e[18]=i,n=e[10],i=e[11],e[10]=e[24],e[11]=e[25],e[24]=n,e[25]=i}if(r){var a=e[3],s=e[4];e[3]=e[10],e[4]=e[11],e[10]=a,e[11]=s,a=e[17],s=e[18],e[17]=e[24],e[18]=e[25],e[24]=a,e[25]=s}}r.d(t,{A:()=>n})},20088:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n,i,a=r(81570),s=r(78716),o=r(134),u=r(80662),c=r.n(u),f=r(61499),h=r(12085),d=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"offset",void 0),(0,o.A)(this,"multiplier",void 0),(0,o.A)(this,"pqTonemapA",void 0),(0,o.A)(this,"pqTonemapB",void 0),(0,o.A)(this,"hlgOOTFGammaMinusOne",void 0),(0,o.A)(this,"hlgDstMaxLuminanceRelative",void 0),(0,o.A)(this,"nitsToSdrRelativeFactor",void 0),(0,o.A)(this,"sdrRelativeToNitsFactor",void 0)}));n=d.prototype,(i=new(c())).set("offset",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("multiplier",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("pqTonemapA",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("pqTonemapB",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("hlgOOTFGammaMinusOne",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("hlgDstMaxLuminanceRelative",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("nitsToSdrRelativeFactor",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("sdrRelativeToNitsFactor",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,4),(0,h.A)(n,f.g7,32),(0,h.A)(n,f.JY,i)},36719:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134);function l(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,p()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}var v=function(e){function t(e,r){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,a.A)(this,t),n=l(this,t,[e,r]),(0,d.A)((0,u.A)(n),"enableColor",void 0),(0,d.A)((0,u.A)(n),"aPoint",void 0),(0,d.A)((0,u.A)(n),"aColor",void 0),n.enableColor=i,n}return(0,h.A)(t,e),(0,s.A)(t,[{key:"link",value:function(e){(0,c.A)((0,f.A)(t.prototype),"link",this).call(this,e),this.aPoint=this.gl.getAttribLocation(this.program,"point"),this.aColor=this.gl.getAttribLocation(this.program,"color"),this.enableColor?(this.gl.enableVertexAttribArray(this.aPoint),this.gl.enableVertexAttribArray(this.aColor)):this.gl.enableVertexAttribArray(this.aPoint)}},{key:"bind",value:function(){(0,c.A)((0,f.A)(t.prototype),"bind",this).call(this),this.enableColor?(this.gl.vertexAttribPointer(this.aPoint,3,this.gl.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0),this.gl.vertexAttribPointer(this.aColor,4,this.gl.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT)):this.gl.vertexAttribPointer(this.aPoint,3,this.gl.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0)}}]),t}(r(9188).A)},9188:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(78716),i=r(81570),a=r(134),s=function(){function e(t,r){(0,n.A)(this,e),(0,a.A)(this,"gl",void 0),(0,a.A)(this,"_program",void 0),(0,a.A)(this,"vertexShader",void 0),(0,a.A)(this,"fragmentShader",void 0),this.vertexShader=t,this.fragmentShader=r}return(0,i.A)(e,[{key:"link",value:function(e){this.gl=e,this.vertexShader&&this.vertexShader.compile(this.gl),this.fragmentShader&&this.fragmentShader.compile(this.gl),this._program=this.gl.createProgram(),this.gl.attachShader(this._program,this.vertexShader.shader),this.gl.attachShader(this._program,this.fragmentShader.shader),this.gl.linkProgram(this._program)}},{key:"stop",value:function(){this.vertexShader.stop(this.gl),this.fragmentShader.stop(this.gl),this.gl.deleteProgram(this._program),this.vertexShader=null,this.fragmentShader=null,this._program=null}},{key:"bind",value:function(){this.gl.useProgram(this._program)}},{key:"program",get:function(){return this._program}}]),e}()},32903:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(88435),i=r.n(n),a=r(81570),s=r(78716),o=r(77193),u=r(25767),c=r(31060);function f(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,h()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}var d=function(e){function t(e){return(0,s.A)(this,t),f(this,t,[e])}return(0,c.A)(t,e),(0,a.A)(t)}(r(48091).A)},48091:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134);function l(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,p()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}var v=function(e){function t(e){var r;return(0,a.A)(this,t),r=l(this,t,[e]),(0,d.A)((0,u.A)(r),"rgbSamplerLocation",void 0),r}return(0,h.A)(t,e),(0,s.A)(t,[{key:"link",value:function(e){(0,c.A)((0,f.A)(t.prototype),"link",this).call(this,e),this.rgbSamplerLocation=this.gl.getUniformLocation(this.program,"rgb_Sampler")}},{key:"bindRGBTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.gl.uniform1i(this.rgbSamplerLocation,e)}}]),t}(r(24399).A)},24399:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(36719),p=r(37022),v=r(36200),m=r(14397);function A(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,g()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function g(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}var k=function(e){function t(e){var r;return(0,a.A)(this,t),r=A(this,t,[new p.A(m.A),new v.A(e)]),(0,d.A)((0,u.A)(r),"rotateMatrixLocation",void 0),r}return(0,h.A)(t,e),(0,s.A)(t,[{key:"link",value:function(e){(0,c.A)((0,f.A)(t.prototype),"link",this).call(this,e),this.rotateMatrixLocation=this.gl.getUniformLocation(this.program,"rotateMatrix")}},{key:"setRotateMatrix",value:function(e){this.gl.uniformMatrix4fv(this.rotateMatrixLocation,!1,new Float32Array(e))}}]),t}(l.A)},73039:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134);function l(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,p()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}var v=function(e){function t(e){var r;return(0,a.A)(this,t),r=l(this,t,[e]),(0,d.A)((0,u.A)(r),"maxUniformLocation",void 0),(0,d.A)((0,u.A)(r),"offsetLocation",void 0),(0,d.A)((0,u.A)(r),"multiplierLocation",void 0),(0,d.A)((0,u.A)(r),"pqTonemapALocation",void 0),(0,d.A)((0,u.A)(r),"pqTonemapBLocation",void 0),(0,d.A)((0,u.A)(r),"hlgOOTFGammaMinusOneLocation",void 0),(0,d.A)((0,u.A)(r),"hlgDstMaxLuminanceRelativeLocation",void 0),(0,d.A)((0,u.A)(r),"nitsToSdrRelativeFactorLocation",void 0),(0,d.A)((0,u.A)(r),"sdrRelativeToNitsFactorLocation",void 0),r}return(0,h.A)(t,e),(0,s.A)(t,[{key:"link",value:function(e){(0,c.A)((0,f.A)(t.prototype),"link",this).call(this,e),this.maxUniformLocation=this.gl.getUniformLocation(this.program,"v_max"),this.offsetLocation=this.gl.getUniformLocation(this.program,"offset"),this.multiplierLocation=this.gl.getUniformLocation(this.program,"multiplier"),this.pqTonemapALocation=this.gl.getUniformLocation(this.program,"pq_tonemap_a"),this.pqTonemapBLocation=this.gl.getUniformLocation(this.program,"pq_tonemap_b"),this.hlgOOTFGammaMinusOneLocation=this.gl.getUniformLocation(this.program,"hlg_ootf_gamma_minus_one"),this.hlgDstMaxLuminanceRelativeLocation=this.gl.getUniformLocation(this.program,"hlg_dst_max_luminance_relative"),this.nitsToSdrRelativeFactorLocation=this.gl.getUniformLocation(this.program,"nits_to_sdr_relative_factor"),this.sdrRelativeToNitsFactorLocation=this.gl.getUniformLocation(this.program,"sdr_relative_to_nits_factor")}},{key:"setMax",value:function(e){this.gl.uniform1f(this.maxUniformLocation,e)}},{key:"setMetaData",value:function(e){this.gl.uniform1f(this.offsetLocation,e.offset),this.gl.uniform1f(this.multiplierLocation,e.multiplier),this.gl.uniform1f(this.pqTonemapALocation,e.pqTonemapA),this.gl.uniform1f(this.pqTonemapBLocation,e.pqTonemapB),this.gl.uniform1f(this.hlgOOTFGammaMinusOneLocation,e.hlgOOTFGammaMinusOne),this.gl.uniform1f(this.hlgDstMaxLuminanceRelativeLocation,e.hlgDstMaxLuminanceRelative),this.gl.uniform1f(this.nitsToSdrRelativeFactorLocation,e.nitsToSdrRelativeFactor),this.gl.uniform1f(this.sdrRelativeToNitsFactorLocation,e.sdrRelativeToNitsFactor)}}]),t}(r(1706).A)},91848:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(88435),i=r.n(n),a=r(81570),s=r(78716),o=r(77193),u=r(25767),c=r(31060);function f(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,h()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}var d=function(e){function t(e){return(0,s.A)(this,t),f(this,t,[e])}return(0,c.A)(t,e),(0,a.A)(t)}(r(1706).A)},1706:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134);function l(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,p()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}var v=function(e){function t(e){var r;return(0,a.A)(this,t),r=l(this,t,[e]),(0,d.A)((0,u.A)(r),"ySamplerLocation",void 0),(0,d.A)((0,u.A)(r),"uSamplerLocation",void 0),(0,d.A)((0,u.A)(r),"vSamplerLocation",void 0),(0,d.A)((0,u.A)(r),"aSamplerLocation",void 0),r}return(0,h.A)(t,e),(0,s.A)(t,[{key:"link",value:function(e){(0,c.A)((0,f.A)(t.prototype),"link",this).call(this,e),this.ySamplerLocation=this.gl.getUniformLocation(this.program,"y_Sampler"),this.uSamplerLocation=this.gl.getUniformLocation(this.program,"u_Sampler"),this.vSamplerLocation=this.gl.getUniformLocation(this.program,"v_Sampler"),this.aSamplerLocation=this.gl.getUniformLocation(this.program,"a_Sampler")}},{key:"bindYTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.gl.uniform1i(this.ySamplerLocation,e)}},{key:"bindUTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.gl.uniform1i(this.uSamplerLocation,e)}},{key:"bindVTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.gl.uniform1i(this.vSamplerLocation,e)}},{key:"bindATexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.gl.uniform1i(this.aSamplerLocation,e)}}]),t}(r(24399).A)},36200:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(88435),i=r.n(n),a=r(81570),s=r(78716),o=r(77193),u=r(25767),c=r(31060);function f(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,h()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}var d=function(e){function t(e){return(0,s.A)(this,t),f(this,t,[1,e])}return(0,c.A)(t,e),(0,a.A)(t)}(r(27976).A)},27976:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(78716),i=r(81570),a=r(134),s=function(){function e(t,r){(0,n.A)(this,e),(0,a.A)(this,"type",void 0),(0,a.A)(this,"_shader",void 0),(0,a.A)(this,"_source",void 0),(0,a.A)(this,"compiled",void 0),this.type=t,this._shader=null,this._source=r,this.compiled=!1}return(0,i.A)(e,[{key:"compile",value:function(e){this.compiled||(this._shader=e.createShader(0===this.type?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(this._shader,this._source),e.compileShader(this._shader),this.compiled=!0)}},{key:"stop",value:function(e){e.deleteShader(this._shader),this._shader=null}},{key:"shader",get:function(){return this._shader}}]),e}()},37022:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(88435),i=r.n(n),a=r(81570),s=r(78716),o=r(77193),u=r(25767),c=r(31060);function f(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,h()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}var d=function(e){function t(e){return(0,s.A)(this,t),f(this,t,[0,e])}return(0,c.A)(t,e),(0,a.A)(t)}(r(27976).A)},17397:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(25767),c=r(43070),f=r(31060),h=r(134);function d(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,l()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function l(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}var p=function(e){function t(e,r,n){var i;return(0,a.A)(this,t),i=d(this,t,[e,r,n]),(0,h.A)((0,c.A)(i),"filter",void 0),(0,h.A)((0,c.A)(i),"format",void 0),(0,h.A)((0,c.A)(i),"internalformat",void 0),(0,h.A)((0,c.A)(i),"dataType",void 0),i.format=i.gl.RGB,i.filter=i.gl.LINEAR,i.internalformat=i.gl.RGB,i.dataType=i.gl.UNSIGNED_BYTE,i}return(0,f.A)(t,e),(0,s.A)(t,[{key:"init",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)}},{key:"setFormat",value:function(e){this.format=e}},{key:"setInternalformat",value:function(e){this.internalformat=e}},{key:"setDataType",value:function(e){this.dataType=e}},{key:"setFilter",value:function(e){this.filter=e}},{key:"fill",value:function(e){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.setUnpackAlignment(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,this.format,this.dataType,e)}}]),t}(r(22684).A)},22684:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(78716),i=r(81570),a=r(134),s=r(67672),o=function(){function e(t,r,i){(0,n.A)(this,e),(0,a.A)(this,"gl",void 0),(0,a.A)(this,"width",void 0),(0,a.A)(this,"height",void 0),(0,a.A)(this,"texture",void 0),this.gl=t,this.width=r,this.height=i,this.texture=this.gl.createTexture()}return(0,i.A)(e,[{key:"getTexture",value:function(){return this.texture}},{key:"bind",value:function(e){s.ai(e)&&this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture)}},{key:"setSize",value:function(e,t){this.width=e,this.height=t}},{key:"setUnpackAlignment",value:function(){this.width%8==0?this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,8):this.width%4==0?this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,4):this.width%2==0?this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,2):this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1)}},{key:"destroy",value:function(){this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null)}}]),e}()},48280:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(25767),c=r(43070),f=r(31060),h=r(134);function d(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,l()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function l(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}var p=function(e){function t(e,r,n){var i;return(0,a.A)(this,t),i=d(this,t,[e,r,n]),(0,h.A)((0,c.A)(i),"filter",void 0),(0,h.A)((0,c.A)(i),"format",void 0),(0,h.A)((0,c.A)(i),"internalformat",void 0),(0,h.A)((0,c.A)(i),"dataType",void 0),i.format=i.gl.LUMINANCE,i.filter=i.gl.LINEAR,i.internalformat=i.gl.LUMINANCE,i.dataType=i.gl.UNSIGNED_BYTE,i}return(0,f.A)(t,e),(0,s.A)(t,[{key:"init",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)}},{key:"setFormat",value:function(e){this.format=e}},{key:"setInternalformat",value:function(e){this.internalformat=e}},{key:"setDataType",value:function(e){this.dataType=e}},{key:"setFilter",value:function(e){this.filter=e}},{key:"fill",value:function(e){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.setUnpackAlignment(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,this.format,this.dataType,e)}}]),t}(r(22684).A)},48641:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(63939),f=r(50932),h=r(37837),d=r(11473),l=r(84149),p=r(4624),v=r(26429),m=r(44690),A=m.A.windows||m.A.mac||m.A.linux?10:20,g=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.A)(this,e),(0,s.A)(this,"context",void 0),(0,s.A)(this,"observer",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"pullIPC",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"channels",void 0),(0,s.A)(this,"ended",void 0),(0,s.A)(this,"float32",void 0),(0,s.A)(this,"buffered",void 0),(0,s.A)(this,"pause",void 0),(0,s.A)(this,"startTime",void 0),(0,s.A)(this,"dest",void 0),(0,s.A)(this,"queue",void 0),(0,s.A)(this,"firstRendered",void 0),this.context=t,this.observer=r,this.options=n}var t,r;return(0,a.A)(e,[{key:"request",value:(r=(0,n.A)(u().mark((function e(t,r,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="init"===e.t0?3:"start"===e.t0?4:"restart"===e.t0?22:"stop"===e.t0?38:"clear"===e.t0?43:"pause"===e.t0?46:"unpause"===e.t0?48:51;break;case 3:return e.abrupt("break",51);case 4:return i=r.port,a=r.channels,this.channels=a,this.pullIPC=new l.Ay(i),this.buffer=this.allocBuffer(),this.float32=new Float32Array((0,d.eq)().buffer),this.queue=[],this.startTime=0,this.ended=!1,this.pause=!1,this.firstRendered=!1,e.next=16,this.pullIPC.request("pull",{buffer:this.buffer});case 16:return this.buffering(),e.next=19,this.pullIPC.request("pull",{buffer:this.buffer});case 19:case 35:return this.buffered=!0,this.process(),e.abrupt("break",51);case 22:if(this.ended){e.next=24;break}return e.abrupt("return");case 24:return this.buffer=this.allocBuffer(),this.queue=[],this.startTime=0,this.ended=!1,this.pause=!1,this.firstRendered=!1,e.next=32,this.pullIPC.request("pull",{buffer:this.buffer});case 32:return this.buffering(),e.next=35,this.pullIPC.request("pull",{buffer:this.buffer});case 38:return this.freeBuffer(this.buffer),this.buffer=null,this.ended=!0,this.pullIPC.destroy(),e.abrupt("break",51);case 43:return this.queue.forEach((function(e){e.disconnect()})),this.queue.length=0,e.abrupt("break",51);case 46:return this.pause=!0,e.abrupt("break",51);case 48:return this.pause=!1,this.queue.length||this.process(),e.abrupt("break",51);case 51:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"allocBuffer",value:function(){var e=(0,h.Gy)(40);f.M[20](e,(0,h.Gy)(4*this.channels));for(var t=(0,h.Gy)(512*A*this.channels),r=0;r<this.channels;r++)f.M[20](c.f[20](e)+4*r,t+128*A*4*r);return f.M[15](e+12,128*A),e}},{key:"freeBuffer",value:function(e){e&&((0,h.aI)(c.f[20](e)),(0,h.aI)(e),(0,h.Eb)(e))}},{key:"pull",value:(t=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.buffered=!1,e.next=3,this.pullIPC.request("pull",{buffer:this.buffer});case 3:e.sent<0?this.ended=!0:(this.buffered=!0,this.queue.length||this.process());case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"buffering",value:function(){var e=this;this.float32.length||(this.float32=new Float32Array((0,d.eq)().buffer));for(var t=this.context.createBuffer(this.channels,128*A,this.context.sampleRate),r=0;r<this.channels;r++)if(c.f[20](c.f[20](this.buffer)+4*r)){var n=c.f[20](c.f[20](this.buffer)+4*r)>>>2;t.copyToChannel&&!v._7?t.copyToChannel(this.float32.subarray(n,n+128*A),r,0):t.getChannelData(r).set(this.float32.subarray(n,n+128*A),0)}var i=this.context.createBufferSource();i.buffer=t,i.onended=function(){if(e.queue.shift(),e.ended&&!e.queue.length)return e.freeBuffer(e.buffer),p.pq("audio source ended","src/avrender/pcm/AudioSourceBufferNode.ts",230),void e.observer.onEnded();e.process(),e.queue.length||e.observer.onStutter(),e.firstRendered||(e.firstRendered=!0,e.observer.onFirstRendered())},0===this.startTime&&(this.startTime=this.context.currentTime),i.start(this.startTime),this.dest&&i.connect(this.dest),this.startTime+=i.buffer.duration,this.queue.push(i)}},{key:"connect",value:function(e){this.dest=e}},{key:"disconnect",value:function(){for(var e=0;e<this.queue.length;e++)this.queue[e].disconnect();this.dest=null,this.queue.length=0}},{key:"process",value:function(){this.buffer&&!this.pause&&this.buffered&&(this.buffering(),this.pull())}}]),e}()},88397:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(88435),i=r.n(n),a=r(81570),s=r(78716),o=r(77193),u=r(25767),c=r(31060);function f(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,h()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}var d=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,s.A)(this,t),f(this,t,[e,r,"audio-source-processor",n])}return(0,c.A)(t,e),(0,a.A)(t)}(r(6534).A)},6534:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(84149),f=r(67672),h=function(){function e(t,r,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,i.A)(this,e),(0,s.A)(this,"audioWorkletNode",void 0),(0,s.A)(this,"ipcPort",void 0),(0,s.A)(this,"observer",void 0),this.observer=r,this.audioWorkletNode=new AudioWorkletNode(t,n,o),this.ipcPort=new c.Ay(this.audioWorkletNode.port),this.ipcPort.on(c.Wo,(function(e){switch(e.method){case"ended":a.observer.onEnded();break;case"firstRendered":a.observer.onFirstRendered();break;case"stutter":a.observer.onStutter()}}))}var t;return(0,a.A)(e,[{key:"request",value:(t=(0,n.A)(u().mark((function e(t,r,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ipcPort.request(t,r,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"connect",value:function(e){this.audioWorkletNode.connect(e)}},{key:"getNode",value:function(){return this.audioWorkletNode}},{key:"disconnect",value:function(){this.audioWorkletNode.disconnect()}},{key:"getParameters",value:function(e){var t=this.audioWorkletNode.parameters;if(f.Pc(t.get))return t.get(e);t.forEach((function(t,r){if(r===e)return t}))}}]),e}()},41324:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(25182),i=r(36443),a=r.n(i),s=r(61837);function o(e,t){return u.apply(this,arguments)}function u(){return(u=(0,n.A)(a().mark((function e(t,r){var n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.A)(r,{varName:"processor"}),i=new Blob([n],{type:"text/javascript"}),o=URL.createObjectURL(i),e.next=5,t.audioWorklet.addModule(o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},60120:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n,i=r(78716),a=r(81570),s=r(134),o=r(95335),u=r(4624);!function(e){e[e.ADD=0]="ADD",e[e.REMOVE=1]="REMOVE",e[e.UPDATE_TIMESTAMP_OFFSET=2]="UPDATE_TIMESTAMP_OFFSET"}(n||(n={}));var c={mediaBufferMax:10},f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.A)(this,e),(0,s.A)(this,"sourceBuffer",void 0),(0,s.A)(this,"operatorQueue",void 0),(0,s.A)(this,"updating",void 0),(0,s.A)(this,"lastRemoveTime",void 0),(0,s.A)(this,"paddingCallback",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"ending",void 0),(0,s.A)(this,"onQuotaExceededError",void 0),(0,s.A)(this,"onEnded",void 0),this.options=o.X$({},c,t),this.operatorQueue=[],this.updating=!1,this.lastRemoveTime=0,this.ending=!1}return(0,a.A)(e,[{key:"setSourceBuffer",value:function(e){var t=this;this.sourceBuffer=e,this.sourceBuffer.onupdateend=function(){t.paddingCallback&&(t.paddingCallback(),t.paddingCallback=null),t.operatorQueue&&t.operatorQueue.length?t.enqueue():(t.updating=!1,t.ending&&t.onEnded&&t.onEnded())},this.sourceBuffer.onerror=function(e){u.z3("track update buffer error: ".concat(e),"src/avrender/track/Track.ts",102)}}},{key:"changeMimeType",value:function(e){this.sourceBuffer&&this.sourceBuffer.changeType(e)}},{key:"enqueue",value:function(){if(this.operatorQueue.length){var e=this.operatorQueue.shift();if(e.operator===n.ADD)try{this.sourceBuffer.appendBuffer(e.buffer),this.updating=!0,e.callback&&(this.paddingCallback=e.callback)}catch(t){if(!(t instanceof DOMException&&"QuotaExceededError"===t.name))throw t;this.operatorQueue.unshift(e),this.onQuotaExceededError&&this.onQuotaExceededError(),this.updating=!1}else e.operator===n.REMOVE?(this.sourceBuffer.remove(e.start,e.end),this.updating=!0,e.callback&&(this.paddingCallback=e.callback)):e.operator===n.UPDATE_TIMESTAMP_OFFSET&&(this.sourceBuffer.timestampOffset=e.timestampOffset,e.callback&&e.callback(),this.enqueue())}}},{key:"addBuffer",value:function(e,t){e?(this.operatorQueue.push({operator:n.ADD,buffer:e,callback:t}),this.updating||this.enqueue()):t&&t()}},{key:"updateTimestampOffset",value:function(e,t){this.operatorQueue.push({operator:n.UPDATE_TIMESTAMP_OFFSET,timestampOffset:e,callback:t}),this.updating||this.enqueue()}},{key:"removeBuffer",value:function(e,t){this.ending||(e=Math.floor(e))-this.lastRemoveTime<this.options.mediaBufferMax<<1||(this.operatorQueue.push({operator:n.REMOVE,start:this.lastRemoveTime,end:e-this.options.mediaBufferMax,callback:t}),this.updating||this.enqueue(),this.lastRemoveTime=e-this.options.mediaBufferMax)}},{key:"removeAllBuffer",value:function(e){this.sourceBuffer.buffered.length?(this.operatorQueue.push({operator:n.REMOVE,start:this.sourceBuffer.buffered.start(0),end:this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1),callback:e}),this.updating||this.enqueue()):e&&e()}},{key:"end",value:function(){this.ending=!0,this.updating||this.operatorQueue.length||this.onEnded&&this.onEnded()}},{key:"stop",value:function(){if(this.sourceBuffer){try{this.sourceBuffer.abort(),this.updating=!1}catch(e){}try{this.sourceBuffer.buffered.length&&(this.updating?this.operatorQueue.push({operator:n.REMOVE,start:this.sourceBuffer.buffered.start(0),end:this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1)}):(this.sourceBuffer.remove(this.sourceBuffer.buffered.start(0),this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1)),this.updating=!0)),this.paddingCallback&&(this.paddingCallback(),this.paddingCallback=null)}catch(e){}}}},{key:"reset",value:function(){this.stop(),this.operatorQueue.length=0,this.ending=!1}},{key:"isPaused",value:function(){return!this.updating&&this.operatorQueue.length}},{key:"getQueueLength",value:function(){return this.operatorQueue.length}},{key:"getBufferedTime",value:function(){return this.sourceBuffer&&this.sourceBuffer.buffered.length?this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1)-this.sourceBuffer.buffered.start(0):0}},{key:"getBufferedStart",value:function(){return this.sourceBuffer&&this.sourceBuffer.buffered.length?this.sourceBuffer.buffered.start(0):0}},{key:"getBufferedEnd",value:function(){return this.sourceBuffer&&this.sourceBuffer.buffered.length?this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1):0}},{key:"getSourceBuffer",value:function(){return this.sourceBuffer}},{key:"setMediaBufferMax",value:function(e){this.options.mediaBufferMax=e}},{key:"getMediaBufferMax",value:function(){return this.options.mediaBufferMax}},{key:"destroy",value:function(){this.stop(),this.operatorQueue=null,this.sourceBuffer&&(this.sourceBuffer.onupdateend=this.sourceBuffer.onerror=null,this.sourceBuffer=null)}}]),e}()},85224:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(63939),i=r(1984),a=r(86834);function s(e){return 86017!==n.f[15](e+4)||a.A.firefox?'audio/mp4; codecs="'.concat((0,i.A)(e),'"'):"audio/mpeg"}},10333:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(94663);function i(e){return'video/mp4; codecs="'.concat((0,n.A)(e),'"')}},77231:(e,t,r)=>{"use strict";r.d(t,{Dh:()=>i,KR:()=>o,N_:()=>a,SF:()=>s,f7:()=>h,go:()=>c,i0:()=>u,zg:()=>f});var n=r(9599),i=-BigInt(1),a=-1,s=1e6,o=new n.P({den:s,num:1}),u=new n.P({den:1e3,num:1}),c=(new n.P({den:1,num:1}),2147483647),f=65535,h=4294967295},9705:(e,t,r)=>{"use strict";r.d(t,{E$:()=>n,LR:()=>i,LT:()=>u,UY:()=>a,gR:()=>s,lh:()=>o,r8:()=>c});var n=-1,i=-2,a=-3,s=-4,o=-5,u=-7,c=-8},36204:(e,t,r)=>{"use strict";r.d(t,{t:()=>u});var n=r(63939),i=r(50932),a=r(56024),s=r(66788),o=r(14686);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;0===t&&(t=(0,a.FP)()),i.M[15](t+152,e.sampleRate),i.M[15](t+76,e.numberOfFrames),i.M[15](t+292,e.numberOfChannels),i.M[15](t+80,function(e){switch(e){case"u8":return 0;case"s16":return 1;case"s32":return 2;case"f32":return 3;case"u8-planar":return 5;case"s16-planar":return 6;case"s32-planar":return 7;case"f32-planar":return 8;default:throw new Error("not support")}}(e.format)),i.M[17](t+104,BigInt(Math.floor(e.timestamp))),(0,a.rh)(t);for(var r=(0,s.K0)(n.f[15](t+80))?n.f[15](t+292):1,u=0;u<r;u++)e.copyTo((0,o.s3)(n.f[20](n.f[20](t+64)+4*u),n.f[15](t+32)),{planeIndex:u});return t}},22898:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(63939),i=r(14686);function a(e,t){var r=Number(null!=t?t:n.f[17](e+8)),a=1&n.f[15](e+36);return new EncodedAudioChunk({type:a?"key":"delta",timestamp:r,data:(0,i.s3)(n.f[20](e+24),n.f[15](e+28))})}},28917:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(63939),i=r(14686);function a(e,t){var r=Number(null!=t?t:n.f[17](e+8)),a=1&n.f[15](e+36);return new EncodedVideoChunk({type:a?"key":"delta",timestamp:r,data:(0,i.s3)(n.f[20](e+24),n.f[15](e+28))})}},86368:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(26429),i=r(42577);function a(){return n._7?new MessageChannel:new i.A}},16041:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(78716),i=r(81570),a=r(134),s=r(50932),o=r(40046),u=r(73783),c=r(37837),f=r(56024),h=function(){function e(t,r){(0,n.A)(this,e),(0,a.A)(this,"list",void 0),(0,a.A)(this,"mutex",void 0),this.list=t,this.mutex=r}return(0,i.A)(e,[{key:"alloc",value:function(){var e=this.list.find((function(e){return-1===o.p_(e+320,-1,1,16,2)}),20);return e||(e=(0,c.Gy)(328),(0,f._h)(e),s.M[16](e+320,1),u.s2(this.mutex),this.list.push(e,20),u.Tl(this.mutex)),e}},{key:"release",value:function(e){o.Hh(e+320,16,2)<=0||1===o.jb(e+320,1,16,2)&&((0,f.to)(e),o.M_(e+320,-1,16,2))}}]),e}()},47442:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(78716),i=r(81570),a=r(134),s=r(50932),o=r(40046),u=r(73783),c=r(37837),f=function(){function e(t,r){(0,n.A)(this,e),(0,a.A)(this,"list",void 0),(0,a.A)(this,"mutex",void 0),this.list=t,this.mutex=r}return(0,i.A)(e,[{key:"alloc",value:function(){var e=this.list.find((function(e){return-1===o.p_(e+40,-1,1,16,2)}),20);return e||(e=(0,c.Gy)(48),s.M[16](e+40,1),u.s2(this.mutex),this.list.push(e,20),u.Tl(this.mutex)),e}},{key:"release",value:function(e){o.Hh(e+40,16,2)<=0||1===o.jb(e+40,1,16,2)&&o.M_(e+40,-1,16,2)}}]),e}()},84290:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(78716),i=r(81570),a=r(134),s=r(50932),o=r(40046),u=r(73783),c=r(37837),f=r(71517),h=function(){function e(t,r){(0,n.A)(this,e),(0,a.A)(this,"list",void 0),(0,a.A)(this,"mutex",void 0),this.list=t,this.mutex=r}return(0,i.A)(e,[{key:"alloc",value:function(){var e=this.list.find((function(e){return-1===o.p_(e+88,-1,1,16,2)}),20);return e||(e=(0,c.Gy)(96),(0,f.Pd)(e),s.M[16](e+88,1),u.s2(this.mutex),this.list.push(e,20),u.Tl(this.mutex)),e}},{key:"release",value:function(e){o.Hh(e+88,16,2)<=0||1===o.jb(e+88,1,16,2)&&((0,f.Up)(e),o.M_(e+88,-1,16,2))}}]),e}()},97317:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var n,i=r(134),a=(n={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,0,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]}),12,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]}),4,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]}),13,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]}),5,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]}),14,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]}),23,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:2,offset:0,shift:0,depth:8},{plane:1,step:2,offset:1,shift:0,depth:8}]}),59,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]}),60,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]}),61,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]}),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,62,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]}),122,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]}),123,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]}),124,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]}),125,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]}),46,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]}),45,{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]}),69,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]}),70,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]}),63,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]}),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,64,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]}),126,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]}),127,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]}),128,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]}),129,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]}),48,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]}),47,{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]}),65,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]}),66,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]}),67,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]}),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,68,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]}),130,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]}),131,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]}),132,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]}),133,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]}),50,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]}),49,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]}),26,{nbComponents:4,log2ChromaW:0,log2ChromaH:0,flags:160,comp:[{plane:0,step:4,offset:0,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:2,shift:0,depth:8},{plane:0,step:4,offset:3,shift:0,depth:8}]}),119,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:32,comp:[{plane:0,step:4,offset:0,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:2,shift:0,depth:8}]}),28,{nbComponents:4,log2ChromaW:0,log2ChromaH:0,flags:160,comp:[{plane:0,step:4,offset:2,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:0,shift:0,depth:8},{plane:0,step:4,offset:3,shift:0,depth:8}]}),(0,i.A)((0,i.A)(n,121,{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:32,comp:[{plane:0,step:4,offset:2,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:0,shift:0,depth:8}]}),33,{nbComponents:4,log2ChromaW:1,log2ChromaH:1,flags:144,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8},{plane:3,step:1,offset:0,shift:0,depth:8}]}))},58055:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var n,i=r(134),a=(n={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,0,{bits:8,planar:!1}),1,{bits:16,planar:!1}),2,{bits:32,planar:!1}),10,{bits:64,planar:!1}),3,{bits:32,planar:!1}),4,{bits:64,planar:!1}),5,{bits:8,planar:!0}),6,{bits:16,planar:!0}),7,{bits:32,planar:!0}),11,{bits:64,planar:!0}),(0,i.A)((0,i.A)(n,8,{bits:32,planar:!0}),9,{bits:64,planar:!0}))},62751:(e,t,r)=>{"use strict";r.d(t,{$$:()=>i,HR:()=>n,Ki:()=>l,Mb:()=>d,Sz:()=>u,_R:()=>a,_m:()=>h,iW:()=>c,mX:()=>f,n1:()=>s,qO:()=>o});var n={flv:0,mp4:1,mov:1,ts:2,ivf:4,opus:3,ogg:3,m3u8:2,m3u:2,mpd:1,mp3:8,mkv:5,mka:5,webm:6,aac:9,flac:11,wav:10},i={m3u8:2,m3u:2,mpd:3},a={copy:0,h264:27,avc:27,hevc:173,h265:173,vvc:196,h266:196,av1:225,vp9:167,vp8:139,mpeg4:12},s={copy:0,aac:86018,ac3:86019,eac3:86056,dca:86020,mp3:86017,opus:86076,flac:86028,speex:86051,vorbis:86021,g711a:65543,g711u:65542},o={yuv420p:0,yuv422p:4,yuv444p:5,yuv420p10le:62,yuv422p10le:64,yuv444p10le:68,yuv420p10be:61,yuv422p10be:63,yuv444p10be:67},u={u8:0,u8p:5,s16:1,s16p:6,s32:2,s32p:7,s64:10,s64p:11,float:3,floatp:8,double:4,doublep:9},c={flv:0,mp4:1,mov:1,ts:2,mpegts:2,ivf:4,opus:3,ogg:3,m3u8:2,m3u:2,mpd:1,mp3:8,mkv:5,matroska:5,mka:5,webm:6,aac:9,flac:11,wav:10},f={tv:1,pc:2},h={bt709:1,fcc:4,bt470bg:5,smpte170m:6,smpte240m:7,ycgco:8,gbr:0,bt2020ncl:9},d={Audio:1,Video:0,Subtitle:3,Attachment:4,Data:2},l={default:1,dub:2,original:4,comment:8,lyrics:16,karaoke:32,forced:64,"hearing impaired":128,"visual impaired":256,"clean effects":512,"attached pic":1024,"timed thumbnails":2048,captions:65536,descriptions:131072,metadata:262144,dependent:524288,"still image":1048576}},36981:(e,t,r)=>{"use strict";r.d(t,{r:()=>l});var n,i,a=r(81570),s=r(78716),o=r(134),u=r(80662),c=r.n(u),f=r(61499),h=r(12085),d=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"id",void 0),(0,o.A)(this,"name",void 0),(0,o.A)(this,"opaque",void 0)}));n=d.prototype,(i=new(c())).set("id",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("name",{0:4,1:0,2:0,3:1,4:16,5:0,6:0,7:4,8:0}),i.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,4),(0,h.A)(n,f.g7,24),(0,h.A)(n,f.JY,i);var l=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"order",void 0),(0,o.A)(this,"nbChannels",void 0),(0,o.A)(this,"u",void 0),(0,o.A)(this,"opaque",void 0)}));!function(e){var t=new(c());t.set("order",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("nbChannels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("u",{0:function(e){var t=new(c());return t.set("mask",{0:10,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("map",{0:d,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),(0,h.A)(e,f.Og,!0),(0,h.A)(e,f.dc,8),(0,h.A)(e,f.g7,8),(0,h.A)(e,f.JY,t),e}({}),1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,h.A)(e,f.Og,!0),(0,h.A)(e,f.dc,8),(0,h.A)(e,f.g7,24),(0,h.A)(e,f.JY,t)}(l.prototype)},50288:(e,t,r)=>{"use strict";r.d(t,{BU:()=>v});var n,i,a,s=r(81570),o=r(78716),u=r(134),c=r(80662),f=r.n(c),h=r(61499),d=r(12085),l=r(73783),p=(0,s.A)((function e(){(0,o.A)(this,e),(0,u.A)(this,"data",0),(0,u.A)(this,"size",0),(0,u.A)(this,"refcount",0),(0,u.A)(this,"free",0),(0,u.A)(this,"opaque",0),(0,u.A)(this,"flags",0),(0,u.A)(this,"flagsInternal",0)}));i=p.prototype,(a=new(f())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),a.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),a.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),a.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),a.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),a.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),a.set("flagsInternal",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),(0,d.A)(i,h.Og,!0),(0,d.A)(i,h.dc,4),(0,d.A)(i,h.g7,28),(0,d.A)(i,h.JY,a);var v=(0,s.A)((function e(){(0,o.A)(this,e),(0,u.A)(this,"buffer",0),(0,u.A)(this,"data",0),(0,u.A)(this,"size",0)}));!function(e){var t=new(f());t.set("buffer",{0:p,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,d.A)(e,h.Og,!0),(0,d.A)(e,h.dc,4),(0,d.A)(e,h.g7,12),(0,d.A)(e,h.JY,t)}(v.prototype);var m=(0,s.A)((function e(){(0,o.A)(this,e),(0,u.A)(this,"mutex",void 0),(0,u.A)(this,"pool",0),(0,u.A)(this,"refcount",0),(0,u.A)(this,"size",0),(0,u.A)(this,"opaque",0),(0,u.A)(this,"alloc",0),(0,u.A)(this,"alloc2",0),(0,u.A)(this,"poolFree",0)}));!function(e){var t=new(f());t.set("mutex",{0:l.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("pool",{0:n,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),t.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),t.set("alloc",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),t.set("alloc2",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),t.set("poolFree",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:28,8:0}),(0,d.A)(e,h.Og,!0),(0,d.A)(e,h.dc,4),(0,d.A)(e,h.g7,32),(0,d.A)(e,h.JY,t)}(m.prototype);var A=(0,s.A)((function e(){(0,o.A)(this,e),(0,u.A)(this,"data",0),(0,u.A)(this,"opaque",0),(0,u.A)(this,"free",0),(0,u.A)(this,"pool",0),(0,u.A)(this,"next",0),(0,u.A)(this,"buffer",void 0)}));!function(e){var t=new(f());t.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),t.set("pool",{0:m,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),t.set("next",{0:A,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),t.set("buffer",{0:p,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),(0,d.A)(e,h.Og,!0),(0,d.A)(e,h.dc,4),(0,d.A)(e,h.g7,48),(0,d.A)(e,h.JY,t)}(A.prototype),n=A},77162:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var n,i,a=r(78716),s=r(81570),o=r(134),u=r(80662),c=r.n(u),f=r(61499),h=r(12085),d=r(47958),l=r(9599),p=r(36981),v=r(77231),m=r(71766),A=function(){function e(){(0,a.A)(this,e),(0,o.A)(this,"codecType",-1),(0,o.A)(this,"codecId",0),(0,o.A)(this,"codecTag",0),(0,o.A)(this,"extradata",0),(0,o.A)(this,"extradataSize",0),(0,o.A)(this,"codedSideData",0),(0,o.A)(this,"nbCodedSideData",0),(0,o.A)(this,"format",v.N_),(0,o.A)(this,"bitRate",BigInt(0)),(0,o.A)(this,"bitsPerCodedSample",0),(0,o.A)(this,"bitsPerRawSample",0),(0,o.A)(this,"profile",v.N_),(0,o.A)(this,"level",v.N_),(0,o.A)(this,"width",0),(0,o.A)(this,"height",0),(0,o.A)(this,"sampleAspectRatio",new l.P({den:1,num:1})),(0,o.A)(this,"framerate",new l.P({den:1,num:0})),(0,o.A)(this,"fieldOrder",0),(0,o.A)(this,"colorRange",0),(0,o.A)(this,"colorPrimaries",2),(0,o.A)(this,"colorTrc",2),(0,o.A)(this,"colorSpace",2),(0,o.A)(this,"chromaLocation",0),(0,o.A)(this,"videoDelay",0),(0,o.A)(this,"chLayout",void 0),(0,o.A)(this,"sampleRate",v.N_),(0,o.A)(this,"blockAlign",0),(0,o.A)(this,"frameSize",0),(0,o.A)(this,"initialPadding",0),(0,o.A)(this,"trailingPadding",0),(0,o.A)(this,"seekPreroll",0),(0,o.A)(this,"bitFormat",0)}return(0,s.A)(e,[{key:"destroy",value:function(){(0,m.dn)(this[f.o9]),this[f.o9]=0}}]),e}();n=A.prototype,(i=new(c())).set("codecType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("codecId",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("codecTag",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("extradata",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("extradataSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("codedSideData",{0:d.lg,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("nbCodedSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),i.set("bitRate",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),i.set("bitsPerCodedSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),i.set("bitsPerRawSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),i.set("profile",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),i.set("level",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),i.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),i.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:60,8:0}),i.set("sampleAspectRatio",{0:l.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),i.set("framerate",{0:l.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),i.set("fieldOrder",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),i.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),i.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),i.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),i.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),i.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:100,8:0}),i.set("videoDelay",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),i.set("chLayout",{0:p.r,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),i.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),i.set("blockAlign",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),i.set("frameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),i.set("initialPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),i.set("trailingPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),i.set("seekPreroll",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:156,8:0}),i.set("bitFormat",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,8),(0,h.A)(n,f.g7,168),(0,h.A)(n,f.JY,i)},56490:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n,i,a=r(81570),s=r(78716),o=r(134),u=r(80662),c=r.n(u),f=r(61499),h=r(12085),d=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"key",0),(0,o.A)(this,"value",0)}));n=d.prototype,(i=new(c())).set("key",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("value",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,4),(0,h.A)(n,f.g7,8),(0,h.A)(n,f.JY,i);var l=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"count",0),(0,o.A)(this,"elems",0)}));!function(e){var t=new(c());t.set("count",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("elems",{0:d,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(e,f.Og,!0),(0,h.A)(e,f.dc,4),(0,h.A)(e,f.g7,8),(0,h.A)(e,f.JY,t)}(l.prototype)},55833:(e,t,r)=>{"use strict";r.d(t,{pu:()=>I});var n=r(77193),i=r(25767),a=r(43070),s=r(31060),o=r(81570),u=r(78716),c=r(134),f=r(80662),h=r.n(f),d=r(88435),l=r.n(d),p=r(61499),v=r(12085),m=r(56490),A=r(50288),g=r(9599),k=r(94300),y=r(36981),b=r(77231),x=r(56024);function w(e,t,r){return t=(0,i.A)(t),(0,n.A)(e,_()?l()(t,r||[],(0,i.A)(e).constructor):t.apply(e,r))}function _(){try{var e=!Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}var T,P,I=8,B=(0,o.A)((function e(){(0,u.A)(this,e),(0,c.A)(this,"type",0),(0,c.A)(this,"data",0),(0,c.A)(this,"size",0),(0,c.A)(this,"metadata",0),(0,c.A)(this,"buf",0)}));T=B.prototype,(P=new(h())).set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),P.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),P.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),P.set("metadata",{0:m.A,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),P.set("buf",{0:A.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,v.A)(T,p.Og,!0),(0,v.A)(T,p.dc,4),(0,v.A)(T,p.g7,20),(0,v.A)(T,p.JY,P),function(e){var t=new(h());t.set("displayPrimaries",{0:g.P,1:0,2:0,3:1,4:6,5:0,6:0,7:0,8:0}),t.set("whitePoint",{0:g.P,1:0,2:0,3:1,4:2,5:0,6:0,7:48,8:0}),t.set("minLuminance",{0:g.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),t.set("maxLuminance",{0:g.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),t.set("hasPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),t.set("hasLuminance",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),(0,v.A)(e,p.Og,!0),(0,v.A)(e,p.dc,4),(0,v.A)(e,p.g7,88),(0,v.A)(e,p.JY,t)}((0,o.A)((function e(){(0,u.A)(this,e),(0,c.A)(this,"displayPrimaries",void 0),(0,c.A)(this,"whitePoint",void 0),(0,c.A)(this,"minLuminance",void 0),(0,c.A)(this,"maxLuminance",void 0),(0,c.A)(this,"hasPrimaries",void 0),(0,c.A)(this,"hasLuminance",void 0)})).prototype),function(e){var t=new(h());t.set("maxCLL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("maxFALL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,v.A)(e,p.Og,!0),(0,v.A)(e,p.dc,4),(0,v.A)(e,p.g7,8),(0,v.A)(e,p.JY,t)}((0,o.A)((function e(){(0,u.A)(this,e),(0,c.A)(this,"maxCLL",void 0),(0,c.A)(this,"maxFALL",void 0)})).prototype);var C=function(){function e(){(0,u.A)(this,e),(0,c.A)(this,"data",new Array(I).fill(0,0,I)),(0,c.A)(this,"linesize",new Array(I).fill(0,0,I)),(0,c.A)(this,"extendedData",0),(0,c.A)(this,"width",b.N_),(0,c.A)(this,"height",b.N_),(0,c.A)(this,"nbSamples",b.N_),(0,c.A)(this,"format",b.N_),(0,c.A)(this,"keyFrame",0),(0,c.A)(this,"pictType",0),(0,c.A)(this,"sampleAspectRatio",new g.P({den:1,num:0})),(0,c.A)(this,"pts",b.Dh),(0,c.A)(this,"pktDts",b.Dh),(0,c.A)(this,"timeBase",void 0),(0,c.A)(this,"quality",b.N_),(0,c.A)(this,"opaque",0),(0,c.A)(this,"repeatPict",b.N_),(0,c.A)(this,"interlacedFrame",b.N_),(0,c.A)(this,"topFieldFirst",b.N_),(0,c.A)(this,"paletteHasChanged",b.N_),(0,c.A)(this,"sampleRate",b.N_),(0,c.A)(this,"buf",new Array(I).fill(0,0,I)),(0,c.A)(this,"extendedBuf",0),(0,c.A)(this,"nbExtendedBuf",0),(0,c.A)(this,"sideData",0),(0,c.A)(this,"nbSideData",0),(0,c.A)(this,"flags",0),(0,c.A)(this,"colorRange",0),(0,c.A)(this,"colorPrimaries",2),(0,c.A)(this,"colorTrc",2),(0,c.A)(this,"colorSpace",2),(0,c.A)(this,"chromaLocation",0),(0,c.A)(this,"bestEffortTimestamp",b.Dh),(0,c.A)(this,"pktPos",b.Dh),(0,c.A)(this,"metadata",0),(0,c.A)(this,"decodeErrorFlags",0),(0,c.A)(this,"pktSize",b.N_),(0,c.A)(this,"hwFramesCtx",0),(0,c.A)(this,"opaqueRef",0),(0,c.A)(this,"cropTop",0),(0,c.A)(this,"cropBottom",0),(0,c.A)(this,"cropLeft",0),(0,c.A)(this,"cropRight",0),(0,c.A)(this,"privateRef",0),(0,c.A)(this,"chLayout",void 0),(0,c.A)(this,"duration",BigInt(0))}return(0,o.A)(e,[{key:"close",value:function(){(0,x.to)(this[p.o9]),(0,k.A)(this)}}]),e}();!function(e){var t=new(h());t.set("data",{0:2,1:1,2:1,3:1,4:8,5:0,6:0,7:0,8:0}),t.set("linesize",{0:15,1:0,2:0,3:1,4:8,5:0,6:0,7:32,8:0}),t.set("extendedData",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:64,8:0}),t.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:68,8:0}),t.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),t.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:76,8:0}),t.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),t.set("keyFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),t.set("pictType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),t.set("sampleAspectRatio",{0:g.P,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),t.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),t.set("pktDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),t.set("timeBase",{0:g.P,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),t.set("quality",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:132,8:0}),t.set("repeatPict",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),t.set("interlacedFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),t.set("topFieldFirst",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),t.set("paletteHasChanged",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),t.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),t.set("buf",{0:A.BU,1:1,2:1,3:1,4:8,5:0,6:0,7:156,8:0}),t.set("extendedBuf",{0:A.BU,1:1,2:2,3:0,4:0,5:0,6:0,7:188,8:0}),t.set("nbExtendedBuf",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),t.set("sideData",{0:B,1:1,2:2,3:0,4:0,5:0,6:0,7:196,8:0}),t.set("nbSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),t.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:204,8:0}),t.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),t.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:212,8:0}),t.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),t.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),t.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),t.set("bestEffortTimestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),t.set("pktPos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),t.set("metadata",{0:m.A,1:1,2:1,3:0,4:0,5:0,6:0,7:248,8:0}),t.set("decodeErrorFlags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:252,8:0}),t.set("pktSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),t.set("hwFramesCtx",{0:A.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:260,8:0}),t.set("opaqueRef",{0:A.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:264,8:0}),t.set("cropTop",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:268,8:0}),t.set("cropBottom",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:272,8:0}),t.set("cropLeft",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:276,8:0}),t.set("cropRight",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:280,8:0}),t.set("privateRef",{0:A.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:284,8:0}),t.set("chLayout",{0:y.r,1:0,2:0,3:0,4:0,5:0,6:0,7:288,8:0}),t.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:312,8:0}),(0,v.A)(e,p.Og,!0),(0,v.A)(e,p.dc,8),(0,v.A)(e,p.g7,320),(0,v.A)(e,p.JY,t)}(C.prototype),function(e){var t=new(h());t.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:320,8:0}),(0,v.A)(e,p.Og,!0),(0,v.A)(e,p.dc,8),(0,v.A)(e,p.g7,328),(0,v.A)(e,p.JY,t)}(function(e){function t(){var e;(0,u.A)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=w(this,t,[].concat(n)),(0,c.A)((0,a.A)(e),"refCount",void 0),e}return(0,s.A)(t,e),(0,o.A)(t)}(C).prototype)},47958:(e,t,r)=>{"use strict";r.d(t,{lg:()=>w});var n=r(77193),i=r(25767),a=r(43070),s=r(31060),o=r(81570),u=r(78716),c=r(134),f=r(80662),h=r.n(f),d=r(88435),l=r.n(d),p=r(61499),v=r(12085),m=r(50288),A=r(9599),g=r(77231);function k(e,t,r){return t=(0,i.A)(t),(0,n.A)(e,y()?l()(t,r||[],(0,i.A)(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var b,x,w=(0,o.A)((function e(){(0,u.A)(this,e),(0,c.A)(this,"data",0),(0,c.A)(this,"size",g.N_),(0,c.A)(this,"type",-1)}));b=w.prototype,(x=new(h())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),x.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),x.set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,v.A)(b,p.Og,!0),(0,v.A)(b,p.dc,4),(0,v.A)(b,p.g7,12),(0,v.A)(b,p.JY,x);var _=(0,o.A)((function e(){(0,u.A)(this,e),(0,c.A)(this,"buf",0),(0,c.A)(this,"pts",g.Dh),(0,c.A)(this,"dts",g.Dh),(0,c.A)(this,"data",0),(0,c.A)(this,"size",0),(0,c.A)(this,"streamIndex",g.N_),(0,c.A)(this,"flags",0),(0,c.A)(this,"sideData",0),(0,c.A)(this,"sideDataElems",0),(0,c.A)(this,"duration",g.Dh),(0,c.A)(this,"pos",g.Dh),(0,c.A)(this,"opaque",0),(0,c.A)(this,"opaqueRef",0),(0,c.A)(this,"timeBase",new A.P({den:g.SF,num:1})),(0,c.A)(this,"bitFormat",0)}));!function(e){var t=new(h());t.set("buf",{0:m.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),t.set("dts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),t.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),t.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),t.set("streamIndex",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),t.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:36,8:0}),t.set("sideData",{0:w,1:1,2:1,3:0,4:0,5:0,6:0,7:40,8:0}),t.set("sideDataElems",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),t.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),t.set("pos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:64,8:0}),t.set("opaqueRef",{0:m.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:68,8:0}),t.set("timeBase",{0:A.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),t.set("bitFormat",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),(0,v.A)(e,p.Og,!0),(0,v.A)(e,p.dc,8),(0,v.A)(e,p.g7,88),(0,v.A)(e,p.JY,t)}(_.prototype),function(e){var t=new(h());t.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),(0,v.A)(e,p.Og,!0),(0,v.A)(e,p.dc,8),(0,v.A)(e,p.g7,96),(0,v.A)(e,p.JY,t)}(function(e){function t(){var e;(0,u.A)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=k(this,t,[].concat(n)),(0,c.A)((0,a.A)(e),"refCount",void 0),e}return(0,s.A)(t,e),(0,o.A)(t)}(_).prototype)},10278:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n=r(77193),i=r(25767),a=r(43070),s=r(31060),o=r(81570),u=r(78716),c=r(134),f=r(80662),h=r.n(f),d=r(88435),l=r.n(d),p=r(61499),v=r(12085);function m(e,t,r){return t=(0,i.A)(t),(0,n.A)(e,A()?l()(t,r||[],(0,i.A)(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var g,k,y=(0,o.A)((function e(){(0,u.A)(this,e),(0,c.A)(this,"data",void 0),(0,c.A)(this,"linesize",void 0),(0,c.A)(this,"nbSamples",void 0),(0,c.A)(this,"maxnbSamples",void 0),(0,c.A)(this,"channels",void 0),(0,c.A)(this,"sampleRate",void 0),(0,c.A)(this,"timestamp",void 0),(0,c.A)(this,"duration",void 0)}));g=y.prototype,(k=new(h())).set("data",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:0,8:0}),k.set("linesize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),k.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),k.set("maxnbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),k.set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),k.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),k.set("timestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),k.set("duration",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),(0,v.A)(g,p.Og,!0),(0,v.A)(g,p.dc,8),(0,v.A)(g,p.g7,40),(0,v.A)(g,p.JY,k),function(e){var t=new(h());t.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),(0,v.A)(e,p.Og,!0),(0,v.A)(e,p.dc,8),(0,v.A)(e,p.g7,48),(0,v.A)(e,p.JY,t)}(function(e){function t(){var e;(0,u.A)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=m(this,t,[].concat(n)),(0,c.A)((0,a.A)(e),"refCount",void 0),e}return(0,s.A)(t,e),(0,o.A)(t)}(y).prototype)},9599:(e,t,r)=>{"use strict";r.d(t,{P:()=>d});var n,i,a=r(81570),s=r(78716),o=r(134),u=r(80662),c=r.n(u),f=r(61499),h=r(12085),d=(0,a.A)((function e(t){(0,s.A)(this,e),(0,o.A)(this,"num",1),(0,o.A)(this,"den",1),t&&(this.den=t.den,this.num=t.num)}));n=d.prototype,(i=new(c())).set("num",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("den",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,4),(0,h.A)(n,f.g7,8),(0,h.A)(n,f.JY,i)},37815:(e,t,r)=>{"use strict";r.d(t,{A6:()=>A,D$:()=>d,Q7:()=>v,VG:()=>l,aw:()=>h,us:()=>m});var n=r(14686),i=r(63939),a=r(50932),s=r(37837),o=r(40046),u=r(73783),c=r(52699),f=1;function h(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=(0,s.Gy)(28);if(!u)return 0;var c=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;a.M[20](e,t),a.M[15](e+4,r),a.M[20](e+12,n),a.M[20](e+16,i),o.M_(e+8,1,9,2),a.M[15](e+20,u);var c=(0,s.Gy)(12);return c?(a.M[20](c,e),a.M[20](c+4,t),a.M[15](c+8,r),c):0}(u,e,t,r,n,i);return c||((0,s.Eb)(u),0)}function d(e){return h((0,s.sY)(e),e)}function l(e){var t=(0,s.Gy)(12);return(0,n.Mr)(t,e,12),o.WQ(i.f[20](e)+8,1,9,2),t}function p(e,t){var r=i.f[20](i.f[20](e));if(t?((0,n.Mr)(i.f[20](e),i.f[20](t),12),(0,s.aI)(t)):(0,s.aI)(e),1===o.jb(r+8,1,9,2)){var a=!(2&i.f[15](r+24));i.f[20](r+16)?g(i.f[20](r+16),i.f[20](r)):(0,s.Eb)(i.f[20](r)),a&&(0,s.Eb)(r)}}function v(e){e&&i.f[20](e)&&p(e,0)}function m(e,t){var r=i.f[20](e);if(!t)return v(e),0;if(r&&i.f[20](r+4)===i.f[20](t+4))return a.M[20](r+4,i.f[20](t+4)),a.M[15](r+8,i.f[15](t+8)),0;var n=l(t);return v(e),a.M[20](e,n),0}function A(e,t){if(!i.f[20](e)){var r=h((0,s.cz)(0,t),t);return a.M[20](e,r),a.M[15](i.f[20](r)+24,i.f[15](i.f[20](r)+24)|f),0}var u=i.f[20](e),d=i.f[20](u);if(i.f[15](u+8)===t)return 0;if(!(i.f[15](d+24)&f&&function(e){return 1&i.f[15](i.f[20](e)+20)?0:1===o.Hh(i.f[20](e)+8,9,2)?1:0}(u)&&i.f[20](u+4)===i.f[20](d))){var l=c.z(4);a.M[20](l,0);var v=A(l,t);return v<0?(c.t(4),v):((0,n.Mr)(i.f[20](i.f[20](l)+4),i.f[20](d),Math.min(t,i.f[15](d+4))),p(e,l),c.t(4),0)}var m=(0,s.cz)(i.f[20](d),t);return a.M[20](u+4,m),a.M[20](d,m),a.M[15](u+8,t),a.M[15](d+4,t),0}function g(e,t){var r=e,n=i.f[20](r+12);u.s2(n),a.M[20](r+16,i.f[20](n+4)),a.M[20](n+4,r),u.Tl(n),1===o.jb(n+8,1,9,2)&&function(e){!function(e){for(;i.f[20](e+4);){var t=i.f[20](e+4);a.M[20](e+4,i.f[20](t+16)),i.f[20](t+4)?g(i.f[20](t+4),i.f[20](t)):(0,s.Eb)(i.f[20](t)),(0,s.Eb)(t)}}(e),u.zr(e),(0,s.Eb)(e)}(n)}},73749:(e,t,r)=>{"use strict";r.d(t,{I:()=>s});var n=r(63939),i=r(50932),a=r(37837);function s(e){var t=n.f[20](e);if(t){for(;i.M[15](t,n.f[15](t)-1),n.f[15](t)+1;)(0,a.aI)(n.f[20](t+4)+8*n.f[15](t)),(0,a.aI)(n.f[20](t+4)+8*n.f[15](t)+4);(0,a.aI)(t+4)}(0,a.aI)(e)}},56024:(e,t,r)=>{"use strict";r.d(t,{FP:()=>l,_h:()=>m,aH:()=>v,rh:()=>A,to:()=>g,xj:()=>p});var n=r(63939),i=r(50932),a=r(55833),s=r(37837),o=r(14686),u=r(77231),c=r(37815),f=r(73749),h=r(66788),d=r(9705);function l(){var e=(0,s.Gy)(320);return m(e),e}function p(e){g(e),(0,s.Eb)(e)}function v(e,t){for(var r=0;r<n.f[15](e+200);r++)if(n.f[15](n.f[20](n.f[20](e+196)+4*r))===t)return n.f[20](n.f[20](e+196)+4*r);return 0}function m(e){n.f[20](e+64)!==e&&(0,s.aI)(e+64),(0,o.sO)(e,0,320),i.M[17](e+104,u.Dh),i.M[17](e+112,u.Dh),i.M[17](e+232,u.Dh),i.M[17](e+240,u.Dh),i.M[15](e+256,-1),i.M[15](e+84,1),i.M[15](e+92,0),i.M[15](e+96,1),i.M[15](e+80,-1),i.M[20](e+64,e),i.M[15](e+212,2),i.M[15](e+216,2),i.M[15](e+220,2),i.M[15](e+208,0),i.M[15](e+224,0),i.M[15](e+204,0)}function A(e,t){var r=(0,h.K0)(n.f[15](e+80)),o=n.f[15](e+292),u=r?o:1,f=0;if(!n.f[15](e+32)){if((f=(0,h.f8)(n.f[15](e+80),o,n.f[15](e+76),t))<0)return f;i.M[15](e+32,f)}if(u>a.pu){if(i.M[20](e+64,(0,s.sY)(4*u)),i.M[20](e+188,(0,s.sY)(4*u)),!n.f[20](e+188)||!n.f[20](e+64))return(0,s.aI)(e+64),(0,s.aI)(e+188),d.gR;i.M[15](e+192,u-a.pu)}else i.M[20](e+64,e);for(var l=0;l<Math.min(u,a.pu);l++){if(i.M[20](e+156+4*l,(0,c.D$)(n.f[15](e+32))),!n.f[20](e+156+4*l))return g(e),d.gR;i.M[20](n.f[20](e+64)+4*l,n.f[20](n.f[20](e+156+4*l)+4)),i.M[20](e+4*l,n.f[20](n.f[20](e+156+4*l)+4))}for(var p=0;p<u-a.pu;p++){if(i.M[20](n.f[20](e+188)+4*p,(0,c.D$)(n.f[15](e+32))),!n.f[20](n.f[20](e+188)+4*p))return g(e),d.gR;i.M[20](n.f[20](e+64)+(p+a.pu),n.f[20](n.f[20](n.f[20](e+188)+4*p)+4))}}function g(e){!function(e){for(var t=0;t<n.f[15](e+200);t++)r=n.f[20](e+196)+4*t,void 0,a=n.f[20](r),(0,c.Q7)(a+16),(0,f.I)(a+12),(0,s.aI)(r);var r,a;i.M[15](e+200,0),(0,s.aI)(e+196)}(e);for(var t=0;t<8;t++)(0,c.Q7)(e+156+4*t);for(var r=0;r<n.f[15](e+192);r++)(0,c.Q7)(n.f[20](e+188)+4*r);(0,s.aI)(e+188),(0,f.I)(e+248),(0,c.Q7)(e+260),(0,c.Q7)(e+264),(0,c.Q7)(e+284),m(e)}},71517:(e,t,r)=>{"use strict";r.d(t,{E4:()=>p,Is:()=>m,NX:()=>P,NZ:()=>k,Ow:()=>v,Pd:()=>y,Qe:()=>g,Up:()=>_,Zx:()=>T,_5:()=>A,fQ:()=>d,iI:()=>f,rN:()=>w,rU:()=>h,zu:()=>b});var n=r(14686),i=r(63939),a=r(50932),s=r(37837),o=r(77231),u=r(37815),c=64;function f(e,t){return t?(0,n.JW)(i.f[20](e+24),i.f[15](e+28)):(0,n.s3)(i.f[20](e+24),i.f[15](e+28))}function h(e,t){for(var r=0;r<i.f[15](e+44);r++)if(i.f[15](i.f[20](e+40)+12*r+8)===t)return i.f[20](e+40)+12*r;return 0}function d(e,t){for(var r=0;r<i.f[15](e+44);r++)if(i.f[15](i.f[20](e+40)+12*r+8)===t)return!0;return!1}function l(e,t,r,o,u){for(var c=i.f[15](t),f=i.f[20](e),h=0;h<c;h++)if(i.f[15](f+12*h+8)===r)return(0,s.Eb)(i.f[20](f+12*h)),a.M[20](f+12*h,o),void a.M[15](f+12*h+4,u);var d=12*(c+1),l=(0,s.Gy)(d);if(c)for(var p=0;p<c;p++)(0,n.Mr)(l+12*p,f+12*p,12);var v=l+12*c;return a.M[20](v,o),a.M[15](v+8,r),a.M[15](v+4,u),f&&(0,s.Eb)(f),a.M[20](e,l),a.M[15](t,c+1),v}function p(e,t,r,i){var a=(0,s.sY)(i+c);return(0,n.sO)(a+i,0,c),l(e,t,r,a,i)}function v(e,t,r,n){l(e+40,e+44,t,r,n)}function m(e,t){for(var r=-1,o=0;o<i.f[15](e+44);o++)if(i.f[15](i.f[20](e+40)+12*o+8)===t){r=o;break}if(r>-1)if(1===i.f[15](e+44))(0,s.Eb)(i.f[20](i.f[20](e+40))),(0,s.Eb)(i.f[20](e+40)),a.M[20](e+40,0),a.M[15](e+44,0);else{for(var u=12*(i.f[15](e+44)-1),c=(0,s.Gy)(u),f=0;f<i.f[15](e+44);f++)f!==r?(0,n.Mr)(c+12*f,i.f[20](e+40)+12*f,12):(0,s.Eb)(i.f[20](i.f[20](e+40)+12*f));(0,s.Eb)(i.f[20](e+40)),a.M[20](e+40,c),a.M[15](e+44,i.f[15](e+44)-1)}}function A(){var e=(0,s.Gy)(88);return y(e),e}function g(e){_(e),(0,s.Eb)(e)}function k(e,t){var r=i.f[20](e),n=i.f[15](t);if(r){for(var o=0;o<n;o++)(0,s.Eb)(i.f[20](r+12*o));(0,s.aI)(e),a.M[15](t,0)}}function y(e){a.M[20](e+24,0),a.M[15](e+28,0),a.M[20](e+40,0),a.M[15](e+44,0),a.M[15](e+32,o.N_),a.M[17](e+56,o.Dh),a.M[17](e+48,o.Dh),a.M[15](e+36,0),a.M[17](e+16,o.Dh),a.M[17](e+8,o.Dh),a.M[15](e+76,o.SF),a.M[15](e+72,1),a.M[15](e+80,0),a.M[20](e,0)}function b(e,t){return a.M[15](e+32,i.f[15](t+32)),a.M[17](e+56,i.f[17](t+56)),a.M[17](e+48,i.f[17](t+48)),a.M[15](e+36,i.f[15](t+36)),a.M[17](e+16,i.f[17](t+16)),a.M[17](e+8,i.f[17](t+8)),a.M[20](e+64,i.f[20](t+64)),a.M[15](e+76,i.f[15](t+76)),a.M[15](e+72,i.f[15](t+72)),a.M[15](e+80,i.f[15](t+80)),a.M[20](e+68,0),(0,u.us)(e+68,i.f[20](t+68)),function(e,t){if(k(e+40,e+44),i.f[15](t+44)){a.M[20](e+40,(0,s.Gy)(12*i.f[15](t+44)));for(var r=0;r<i.f[15](t+44);r++)a.M[15](i.f[20](e+40)+12*r+4,i.f[15](i.f[20](t+40)+12*r+4)),a.M[15](i.f[20](e+40)+12*r+8,i.f[15](i.f[20](t+40)+12*r+8)),a.M[20](i.f[20](e+40)+12*r,(0,s.sY)(i.f[15](i.f[20](t+40)+12*r+4))),(0,n.Mr)(i.f[20](i.f[20](e+40)+12*r),i.f[20](i.f[20](t+40)+12*r),i.f[15](i.f[20](t+40)+12*r+4));a.M[15](e+44,i.f[15](t+44))}}(e,t),0}function x(e,t){return(0,u.A6)(e,t+c),(0,n.sO)(i.f[20](i.f[20](e)+4)+t,0,c),0}function w(e,t){return i.f[20](e)&&(0,u.Q7)(e),a.M[20](e,0),b(e,t),!i.f[20](t)&&i.f[15](t+28)?(x(e,i.f[15](t+28)),i.f[15](t+28)&&(0,n.Mr)(i.f[20](i.f[20](e)+4),i.f[20](t+24),i.f[15](t+28)),a.M[20](e+24,i.f[20](i.f[20](e)+4))):i.f[20](t)&&(a.M[20](e,(0,u.VG)(i.f[20](t))),a.M[20](e+24,i.f[20](t+24))),a.M[15](e+28,i.f[15](t+28)),0}function _(e){k(e+40,e+44),(0,u.Q7)(e+68),i.f[20](e)?(0,u.Q7)(e):i.f[20](e+24)&&(0,s.Eb)(i.f[20](e+24)),y(e)}function T(e,t){i.f[20](e)&&(0,u.Q7)(e),a.M[20](e,0),!i.f[20](t)&&i.f[15](t+28)?(x(e,i.f[15](t+28)),i.f[15](t+28)&&(0,n.Mr)(i.f[20](i.f[20](e)+4),i.f[20](t+24),i.f[15](t+28)),a.M[20](e+24,i.f[20](i.f[20](e)+4))):i.f[20](t)&&(a.M[20](e,(0,u.VG)(i.f[20](t))),a.M[20](e+24,i.f[20](t+24))),a.M[15](e+28,i.f[15](t+28))}function P(e,t,r){i.f[20](e)?(0,u.Q7)(e):i.f[20](e+24)&&(0,s.Eb)(i.f[20](e+24)),a.M[20](e,(0,u.aw)(t,r+c)),a.M[20](e+24,t),a.M[15](e+28,r)}},99991:(e,t,r)=>{"use strict";r.d(t,{ML:()=>f,bl:()=>c});var n=r(63939),i=r(50932),a=r(85103),s=r(37837),o=r(14686),u=r(9705);function c(e){2==n.f[15](e)&&(0,s.aI)(e+8),(0,o.sO)(e,0,24)}function f(e,t){return t?(i.M[15](e,1),i.M[15](e+4,(0,a.Xb)(BigInt(t>>>0))),i.M[10](e+8,BigInt(t>>>0)),0):u.UY}},71766:(e,t,r)=>{"use strict";r.d(t,{Yi:()=>f,dn:()=>h});var n=r(14686),i=r(63939),a=r(50932),s=r(37837),o=r(99991),u=r(71517),c=r(77231);function f(e,t){a.M[15](e,i.f[15](t)),a.M[15](e+4,i.f[15](t+4)),a.M[8](e+8,i.f[8](t+8)),a.M[15](e+28,i.f[15](t+28)),a.M[17](e+32,i.f[17](t+32)),a.M[15](e+40,i.f[15](t+40)),a.M[15](e+44,i.f[15](t+44)),a.M[15](e+48,i.f[15](t+48)),a.M[15](e+52,i.f[15](t+52)),a.M[15](e+56,i.f[15](t+56)),a.M[15](e+60,i.f[15](t+60)),a.M[15](e+68,i.f[15](t+68)),a.M[15](e+64,i.f[15](t+64)),a.M[15](e+80,i.f[15](t+80)),a.M[15](e+84,i.f[15](t+84)),a.M[15](e+88,i.f[15](t+88)),a.M[15](e+92,i.f[15](t+92)),a.M[15](e+96,i.f[15](t+96)),a.M[15](e+100,i.f[15](t+100)),a.M[15](e+104,i.f[15](t+104)),(0,n.Mr)(e+112,t+112,24),a.M[15](e+136,i.f[15](t+136)),a.M[15](e+140,i.f[15](t+140)),a.M[15](e+144,i.f[15](t+144)),a.M[15](e+148,i.f[15](t+148)),a.M[15](e+152,i.f[15](t+152)),a.M[15](e+156,i.f[15](t+156)),(0,n.Mr)(e+72,t+72,8),i.f[20](t+12)&&(i.f[20](e+12)&&(0,s.Eb)(i.f[20](e+12)),a.M[20](e+12,(0,s.sY)(i.f[15](t+16))),a.M[15](e+16,i.f[15](t+16)),(0,n.Mr)(i.f[20](e+12),i.f[20](t+12),i.f[15](t+16))),i.f[20](t+20)&&function(e,t,r,o){if(r){for(var u=(0,s.Gy)(12*o),c=0;c<o;c++)a.M[15](u+12*c+8,i.f[15](r+12*c+8)),a.M[15](u+12*c+4,i.f[15](r+12*c+4)),a.M[20](u+12*c,(0,s.sY)(i.f[15](r+12*c+4))),(0,n.Mr)(u+12*c,r+12*c,i.f[15](r+12*c+4));a.M[15](t,o),a.M[20](e,u)}}(e+20,e+24,i.f[20](t+20),i.f[15](t+24))}function h(e){e&&(function(e){i.f[20](e+12)&&(0,s.aI)(e+12),(0,o.bl)(e+112),(0,u.NZ)(e+20,e+24),(0,n.sO)(e,0,168),a.M[15](e,-1),a.M[15](e+4,0),a.M[15](e+28,-1),a.M[15](e+112,0),a.M[15](e+80,0),a.M[15](e+84,0),a.M[15](e+88,2),a.M[15](e+92,2),a.M[15](e+96,2),a.M[15](e+100,0),a.M[15](e+64,0),a.M[15](e+68,1),a.M[15](e+72,0),a.M[15](e+72,1),a.M[15](e+48,c.N_),a.M[15](e+52,c.N_)}(e),(0,s.Eb)(e))}},85103:(e,t,r)=>{"use strict";function n(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,(e+=e>>8)+(e>>16)&63}function i(e){return n(Number(0xffffffffn&e))+n(Number(e>>BigInt(32)&0xffffffffn))}function a(e){var t=e/BigInt(1e3),r=e-t*BigInt(1e3);return Number(t)+Number(r)/1e3}function s(e,t){return e+t-1&~(t-1)}r.d(t,{An:()=>s,Xb:()=>i,yw:()=>a})},23991:(e,t,r)=>{"use strict";function n(e){for(var t=0;t<32&&0===e.readU1();)t++;return e.readU(t)+((1<<t)-1)}function i(e){var t=n(e);return 1&t?(t+1)/2:-t/2}r.d(t,{$x:()=>i,xb:()=>n})},37837:(e,t,r)=>{"use strict";r.d(t,{Eb:()=>h,Gy:()=>f,aI:()=>d,cz:()=>l,sY:()=>c});var n=r(11473),i=r(63939),a=r(50932),s=r(14686),o=r(4624),u="src/avutil/util/mem.ts";function c(e){var t=n.s_.malloc(e);return t||o.h2("can not alloc buffer",u,32),t}function f(e){var t=n.s_.malloc(e);return t||o.h2("can not alloc buffer",u,40),(0,s.sO)(t,0,e),t}function h(e){n.s_.free(e)}function d(e){n.s_.free(i.f[20](e)),a.M[20](e,0)}function l(e,t){return n.s_.realloc(e,t)}},60264:(e,t,r)=>{"use strict";function n(e){return e.length>4&&0===e[0]&&0===e[1]&&(1===e[2]||0===e[2]&&1===e[3])}function i(e,t){for(var r=0,n=t;n<e.length;n++)switch(e[n]){case 0:r++;break;case 1:if(r>=2)return{offset:n-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function a(e){for(var t=[],r=i(e,0),n={offset:-1,startCode:0};(n=i(e,r.offset+r.startCode)).offset>-1;)t.push(e.subarray(r.offset+r.startCode,n.offset,!0)),r=n;return t.push(e.subarray(r.offset+r.startCode,void 0,!0)),t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;r||(r=e.length);for(var n=new Uint8Array(e.length),i=0,a=0,s=0;s<e.length;s++){if(s>=t&&s<r)if(0===e[s])i++;else if(3===e[s]&&2===i&&s+1<e.length&&e[s+1]<=3){if(++s===e.length)break;i=0===e[s]?1:0}else i=0;n[a++]=e[s]}return n.slice(0,a)}r.d(t,{BN:()=>s,Bs:()=>n,py:()=>a})},44328:(e,t,r)=>{"use strict";r.d(t,{Vt:()=>o,iU:()=>u,k:()=>a,lb:()=>s});var n=r(63939),i=r(31658);function a(e,t,r){return e*BigInt(t.num>>>0)*BigInt(r.den>>>0)/(BigInt(t.den>>>0)*BigInt(r.num>>>0))}function s(e){return e.num/e.den}function o(e){return n.f[15](e)/n.f[15](e+4)}function u(e){var t=(0,i.A)(e.num,e.den);t<=1||(e.den/=t,e.num/=t)}},66788:(e,t,r)=>{"use strict";r.d(t,{K0:()=>s,f8:()=>o});var n=r(77231),i=r(85103),a=r(58055);function s(e){return!(e<0||e>=12)&&a.J[e].planar}function o(e,t,r,o){var u=function(e){return e<0||e>=12?0:a.J[e].bits>>3}(e),c=s(e);return!u||r<=0||t<=0?-1:(o||(o=1,r=(0,i.An)(r,32)),t>n.go/o||t*r>(n.go-o*t)/u?-1:c?(0,i.An)(r*u,o):(0,i.An)(r*u*t,o))}},95007:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var n=r(78716),i=r(81570),a=r(134),s=r(95335),o=r(72739),u=r(73783),c=r(7417),f=r(4624),h="src/cheap/allocator/AllocatorJS.ts",d=2,l=T(16),p=32,v=1+2*p,m=1,A=0,g=2,k=1,y=m+v+2,b=function(){function e(t){var r,i,o,u,c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,n.A)(this,e),(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"byteOffset",void 0),(0,a.A)(this,"heapOffset",void 0),(0,a.A)(this,"heapLength",void 0),(0,a.A)(this,"int32Array",void 0),(0,a.A)(this,"updates",void 0),(0,a.A)(this,"options",void 0),(0,a.A)(this,"shared",void 0),(0,a.A)(this,"handles",void 0),this.options=s.X$({growSize:1048576,maxHeapSize:2097152e3},t),this.handles=[],this.buffer=t.buffer,this.shared=!1,this.options.memory||this.buffer instanceof ArrayBuffer||this.buffer instanceof SharedArrayBuffer?(this.byteOffset=null!==(r=t.byteOffset)&&void 0!==r?r:0,this.heapOffset=I(this.byteOffset+_(p),null!==(i=t.byteLength)&&void 0!==i?i:this.buffer.byteLength),this.heapLength=B((null!==(o=t.byteLength)&&void 0!==o?o:this.buffer.byteLength)-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,T(this.heapLength)),this.updates=new Int32Array(this.buffer,this.byteOffset,p),"function"==typeof SharedArrayBuffer&&this.buffer instanceof SharedArrayBuffer&&(this.shared=!0)):f.h2("Expected buffer to be an instance of Buffer or ArrayBuffer",h,109),c&&(this.updates.fill(m),function(e){return e[m-1]===v&&e[m+v]===v}(u=this.int32Array)||function(e){var t=m,r=v,n=y,i=e.length-(t+r+2+k);M(e,r,t),e[t+A]=1,e[t+g]=n;for(var a=1;a<p;a++)e[t+g+a]=m;M(e,i,n),e[n+A]=1,e[n+g]=t}(u),function(e){for(var t=y;t<e.length-k;){var r=S(e,t);r<2||r>=e.length-y?f.h2("Got invalid sized chunk at ".concat(_(t)," (").concat(_(r)," bytes)."),h,568):E(e,t)?x(e,t,r):w(e,t,r),t+=r+2}}(this.int32Array))}return(0,i.A)(e,[{key:"addUpdateHandle",value:function(e){o.zy(this.handles,e)||this.handles.push(e)}},{key:"removeUpdateHandle",value:function(e){o.TF(this.handles,e)}},{key:"malloc_",value:function(e){(e=P(e,7))<16&&(e=16);var t=T(e),r=this.findFreeBlock(this.int32Array,t);if(r<=m)return 0;var n=S(this.int32Array,r);return n-(t+2)>=l?function(e,t,r,n,i){var a=t+r+2,s=n-(a-t);R(e,t,n,i),e[t-1]=-r,e[t+r]=-r,e[a-1]=-s,e[a+s]=-s,F(e,a,s,i)}(this.int32Array,r,t,n,this.updates):R(this.int32Array,r,n,this.updates),_(r)+this.heapOffset}},{key:"malloc",value:function(e){this.shared&&((0,u.s2)(c.I,!0),this.checkBuffer());var t=this.malloc_(e);return this.shared&&(0,u.Tl)(c.I),t}},{key:"calloc_",value:function(e,t){var r=e*t;r=r<16?16:P(r,7);var n=this.malloc_(r);if(0===n)return 0;var i=T(n-this.heapOffset);return this.int32Array.subarray(i,i+T(r)).fill(0),n}},{key:"calloc",value:function(e,t){this.shared&&((0,u.s2)(c.I,!0),this.checkBuffer());var r=this.calloc_(e,t);return this.shared&&(0,u.Tl)(c.I),r}},{key:"realloc_",value:function(e,t){if(0===e)return this.malloc_(t);var r=e;if(0===t)return this.free_(r),0;var n=T(e-=this.heapOffset),i=n,a=0;D(this.int32Array,n)&&(a=n-(i=this.int32Array[n-1]));var s=S(this.int32Array,i)-a;if(s>=T(P(t,7)))return r;var o=this.malloc_(t);return 0===o?(this.free_(r),0):(this.int32Array.set(this.int32Array.subarray(n,n+s),T(o-this.heapOffset)),this.free_(r),o)}},{key:"realloc",value:function(e,t){return this.shared&&((0,u.s2)(c.I,!0),this.checkBuffer()),e=this.realloc_(e,t),this.shared&&(0,u.Tl)(c.I),e}},{key:"alignedAlloc_",value:function(e,t){if(e<=8)return this.malloc_(t);var r=this.malloc_(t+e-1+4);if(0===r)return 0;var n=r+e-1+4&~(e-1);return this.int32Array[T(n-this.heapOffset)-k]=T(r-this.heapOffset),n}},{key:"alignedAlloc",value:function(e,t){this.shared&&((0,u.s2)(c.I,!0),this.checkBuffer());var r=this.alignedAlloc_(e,t);return this.shared&&(0,u.Tl)(c.I),r}},{key:"free_",value:function(e){if(0!==e){var t=T(e-=this.heapOffset);if(D(this.int32Array,t)&&(t=this.int32Array[t-k]),!E(this.int32Array,t)){var r=S(this.int32Array,t),n=L(this.int32Array,t),i=function(e,t){var r=S(e,t);if(t+r+2>=e.length-2)return 0;var n=t+r+2;return e[n-k]<2?0:n}(this.int32Array,t);0!==n?0!==i?function(e,t,r,n,i,a){var s=S(e,t),o=S(e,i),u=i-t+o;R(e,t,s,a),R(e,i,o,a),e[t-k]=-u,e[i+o]=-u,F(e,t,u,a)}(this.int32Array,n,0,0,i,this.updates):O(this.int32Array,n,t,r,this.updates):0!==i?function(e,t,r,n,i){var a=S(e,t);R(e,t,a,i);var s=n+a+2;e[r-k]=-s,e[t+a]=-s,F(e,r,s,i)}(this.int32Array,i,t,r,this.updates):F(this.int32Array,t,r,this.updates)}}}},{key:"free",value:function(e){this.shared&&((0,u.s2)(c.I,!0),this.checkBuffer()),this.free_(e),this.shared&&(0,u.Tl)(c.I)}},{key:"sizeof",value:function(e){if(0===e)return 0;var t=T(e-=this.heapOffset);return D(this.int32Array,t)&&(t=this.int32Array[t-k]),_(S(this.int32Array,t))}},{key:"inspect",value:function(){return this.checkBuffer(),function(e,t){for(var r=[],n=C(e,m,t),i=y,a=0;i<e.length-k;){var s=S(e,i);(s<2||s>=e.length)&&f.h2("Got invalid sized chunk at ".concat(_(i)," (").concat(_(s),")"),h,624),E(e,i)?r.push(C(e,i,t)):(a+=_(s),r.push({type:"used",block:i,offset:_(i)+t,size:_(s)})),i+=s+2}return{header:n,blocks:r,total:_(e.length),used:a}}(this.int32Array,this.heapOffset)}},{key:"findFreeBlock",value:function(e,t){var r=this,n=function(e,t){for(var r=m,n=e[m+A];n>0;n--)for(var i=e[r+g+(n-1)];i!==m&&e[i-k]<t;)i=e[(r=i)+g+(n-1)];return r=e[r+g]}(e,t);if(n===m){if(this.options.growAllowed&&this.heapLength<this.options.maxHeapSize){var i,a,s=this.int32Array.length+1,u=0,c=0,f=0;if(this.options.onResize){var h,d,l,v=this.options.onResize(this.int32Array,this.int32Array.byteLength+P(Math.max(this.options.growSize,_(t)),7));f=I((u=null!==(h=v.byteOffset)&&void 0!==h?h:0)+_(p),null!==(d=v.byteLength)&&void 0!==d?d:v.buffer.byteLength),c=B((null!==(l=v.byteLength)&&void 0!==l?l:v.buffer.byteLength)-f),i=new Int32Array(v.buffer,f,T(c)),a=new Int32Array(v.buffer,u,p)}else{var y=new ArrayBuffer(this.int32Array.length+T(this.options.growSize));f=I(u+_(p),y.byteLength),c=B(y.byteLength-f),(i=new Int32Array(y,f,T(c))).set(this.int32Array,0),a=new Int32Array(y,u,p)}this.byteOffset=u,this.heapOffset=f,this.buffer=i.buffer,this.heapLength=c,this.int32Array=i,this.updates=a;var b=i.length-(s-1)-2;M(i,b,s);var x=L(i,s);return 0!==x?O(i,x,s,b,this.updates):F(i,s,b,this.updates),this.handles.length&&o.__(this.handles,(function(e){e(r.buffer)})),this.findFreeBlock(this.int32Array,t)}return n}return n}},{key:"getBuffer",value:function(){return this.buffer}},{key:"isAlloc",value:function(e){this.shared&&((0,u.s2)(c.I,!0),this.checkBuffer());for(var t=T(e-this.heapOffset),r=this.int32Array[m+g];r&&r!==m;){if(t>=r&&t<r+this.int32Array[r-k])return this.shared&&(0,u.Tl)(c.I),!1;r=this.int32Array[r+g]}return this.shared&&(0,u.Tl)(c.I),!0}},{key:"checkBuffer",value:function(){this.options.memory&&this.options.memory.buffer!==this.buffer&&(this.buffer=this.options.memory.buffer,this.heapLength=B(this.buffer.byteLength-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,T(this.heapLength)))}}]),e}();function x(e,t,r){e[t-1]!==e[t+r]&&f.h2("Block length header does not match footer (".concat(_(e[t-1])," vs ").concat(_(e[t+r]),")."),h,584);var n=e[t+A];(n<1||n>p)&&f.h2("Block ".concat(_(t)," height must be between 1 and ").concat(p,", got ").concat(n,"."),h,589);for(var i=0;i<n;i++){var a=e[t+g+i];a>=y&&!E(e,a)&&f.h2("Block ".concat(_(t)," has a pointer to a non-free block (").concat(_(a),")."),h,595)}return!0}function w(e,t,r){if(e[t-1]===e[t+r])return!0;f.h2("Block length header does not match footer (".concat(_(e[t-1])," vs ").concat(_(e[t+r]),")."),h,604)}function _(e){return e<<d>>>0}function T(e){return e>>>d}function P(e,t){return(e+t&~t)>>>0}function I(e,t){var r=t-e;return e+(P(r,7)===r?0:r-P(r,7)+8)}function B(e){return(m+v)%2||(e-=4),e}function C(e,t,r){for(var n=e[t+A],i=[],a=0;a<n;a++)i.push(e[t+g+a]);return{type:"free",block:t,offset:_(t)+r,height:n,pointers:i,size:_(e[t-1])}}function S(e,t){var r=e[t-1],n=r>>31;return r+n^n}function M(e,t,r){e[r-1]=t,e[r+t]=t}function U(e,t,r){for(var n=e[m+A],i=m,a=n;a>0;a--){for(var s=i+g+(a-1);e[s]>=y&&e[e[s]-1]<t;)s=(i=e[s])+g+(a-1);r[a-1]=i}}function R(e,t,r,n){U(e,r,n);for(var i=e[n[0]+g];i!==t&&i!==m&&e[i-1]<=r;){for(var a=e[i+A]-1;a>=0;a--)e[i+g+a]===t&&(n[a]=i);i=e[i+g]}for(var s=e[m+A],o=0;o<s&&e[n[o]+g+o]===t;o++)e[n[o]+g+o]=e[t+g+o];for(;s>0&&e[m+g+(s-1)]===m;)s--,e[m+A]=s;e[t-1]=-r,e[t+r]=-r}function E(e,t){return!(t<v||e[t-k]<0)}function D(e,t){return!(t<v||e[t-k]<0)}function L(e,t){if(t<=y)return 0;var r=e[t-2];return r<2?0:t-(2+r)}function F(e,t,r,n){U(e,r,n);for(var i=function(e,t,r,n){var i=e[m+A],a=function(){for(var e=1;Math.random()<.5&&e<p;)e+=1;return e}();if(r-1<a+1&&(a=r-2),a>i){var s=i+1;return e[m+A]=s,e[m+g+(s-1)]=m,n[s]=m,e[t+A]=s,s}return e[t+A]=a,a}(e,t,r,n),a=1;a<=i;a++){var s=n[a-1]+g+(a-1);e[t+g+(a-1)]=e[s],e[s]=t,n[a-1]=m}return e[t-1]=r,e[t+r]=r,r}function O(e,t,r,n,i){var a=r-t+n;return R(e,t,r-t-2,i),e[t-k]=-a,e[r+n]=-a,F(e,t,a,i),n}},94321:(e,t,r)=>{"use strict";r.d(t,{z:()=>s});var n=r(78716),i=r(81570),a=r(134),s=function(){function e(){(0,n.A)(this,e),(0,a.A)(this,"table",void 0),(0,a.A)(this,"pointer",void 0),(0,a.A)(this,"nodes",void 0),this.table=new WebAssembly.Table({initial:16,element:"anyfunc"}),this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}]}return(0,i.A)(e,[{key:"getPointer",value:function(){return this.pointer}},{key:"alloc",value:function(e){var t=this.findFree(e);if(t<0){var r=this.nodes[this.nodes.length-1],n=e-(r.free?r.length:0);this.table.grow(n),r.free?r.length=r.length+n:this.nodes.push({pointer:r.pointer+r.length,length:n,free:!0}),t=this.findFree(e)}var i=this.nodes[t];return i.length>e&&(this.nodes.splice(t+1,0,{pointer:i.pointer+e,length:i.length-e,free:!0}),i.length=e),i.free=!1,i.pointer}},{key:"free",value:function(e){var t=this.findNode(e),r=this.nodes[t];if(r&&!r.free){var n=this.nodes[t-1],i=this.nodes[t+1];n&&n.free?i&&i.free?(n.length+=r.length+i.length,this.nodes.splice(t,2)):(n.length+=r.length,this.nodes.splice(t,1)):i&&i.free?(r.length+=i.length,this.nodes.splice(t+1,1),r.free=!0):r.free=!0}if(1===this.nodes.length&&this.nodes[0].free){var a=new WebAssembly.Table({initial:16,element:"anyfunc"});this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}];for(var s=1;s<this.pointer;s++)a.set(s,this.table.get(s));this.table=a}}},{key:"get",value:function(e){return this.table.get(e)}},{key:"set",value:function(e,t){if(e<0||e>=this.pointer)throw new RangeError("index out of bound");this.table.set(e,t)}},{key:"inspect",value:function(){return this.nodes}},{key:"findFree",value:function(e){for(var t=-1,r=0;r<this.nodes.length;r++)if(this.nodes[r].length>=e&&this.nodes[r].free){t=r;break}return t}},{key:"findNode",value:function(e){for(var t=-1,r=0;r<this.nodes.length;r++)if(this.nodes[r].pointer===e){t=r;break}return t}}]),e}()},98564:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>m});var n,i=r(134),a=r(25182),s=r(36443),o=r.n(s),u=r(4919),c=r(4624),f=r(63939),h=r(50932),d=r(88096),l=r(73945),p=r.n(l),v="src/cheap/asm/memory.ts";function m(e){return A.apply(this,arguments)}function A(){return(A=(0,a.A)(o().mark((function e(t){var r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=(0,u.E_)(p()),d.DD(s,"function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer),e.next=5,WebAssembly.instantiate(s,{env:{memory:t}});case 5:n=e.sent.instance,(0,f.$)((r={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(r,4,n.exports.readU8),5,n.exports.readU8),2,n.exports.readU8),3,n.exports.readU8),6,n.exports.readU16),7,n.exports.readU16),8,(function(e){return n.exports.read32(e)>>>0})),9,(function(e){return n.exports.read32(e)>>>0})),10,(function(e){return BigInt.asUintN(64,n.exports.read64(e))})),22,(function(e){return BigInt.asUintN(64,n.exports.read64(e))})),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(r,11,n.exports.read8),12,n.exports.read8),13,n.exports.read16),14,n.exports.read16),15,n.exports.read32),16,n.exports.read32),17,n.exports.read64),21,n.exports.read64),18,n.exports.readf32),19,n.exports.readf64),(0,i.A)(r,20,(function(e){return n.exports.read32(e)>>>0})))),(0,h.$)((a={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(a,4,n.exports.write8),5,n.exports.write8),2,n.exports.write8),3,n.exports.write8),6,n.exports.write16),7,n.exports.write16),8,n.exports.write32),9,n.exports.write32),10,n.exports.write64),22,n.exports.write64),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(a,11,n.exports.write8),12,n.exports.write8),13,n.exports.write16),14,n.exports.write16),15,n.exports.write32),16,n.exports.write32),17,n.exports.write64),21,n.exports.write64),18,n.exports.writef32),19,n.exports.writef64),(0,i.A)(a,20,n.exports.write32))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c.R8("memory asm not support, cannot use asm memory function",v,96);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}},26429:(e,t,r)=>{"use strict";r.d(t,{Gx:()=>h,YN:()=>f,ZI:()=>o,_7:()=>s,dP:()=>c,pw:()=>u});var n,i=r(95797),a=r(10576),s=!!i.A.thread&&!0!==a.TK.CHEAP_DISABLE_THREAD,o=16,u=1048576,c=1024,f=null!==(n=a.TK.CHEAP_HEAP_INITIAL)&&void 0!==n?n:265,h=65536},73281:(e,t,r)=>{"use strict";r.d(t,{A:()=>M});var n,i=r(134),a=r(59135),s=r(63939),o=r(50932),u=(0,a.A)();function c(e,t){n().setUint8(e,t)}function f(e){return n().getUint8(e)}function h(e,t){n().setUint16(e,t,u)}function d(e){return n().getUint16(e,u)}function l(e,t){n().setUint32(e,t,u)}function p(e){return n().getUint32(e,u)}function v(e,t){n().setBigUint64(e,t,u)}function m(e){return n().getBigUint64(e,u)}function A(e,t){n().setInt8(e,t)}function g(e){return n().getInt8(e)}function k(e,t){n().setInt16(e,t,u)}function y(e){return n().getInt16(e,u)}function b(e,t){n().setInt32(e,t,u)}function x(e){return n().getInt32(e,u)}function w(e,t){n().setBigInt64(e,t,u)}function _(e){return n().getBigInt64(e,u)}function T(e,t){n().setFloat32(e,t,u)}function P(e){return n().getFloat32(e,u)}function I(e,t){n().setFloat64(e,t,u)}function B(e){return n().getFloat64(e,u)}function C(e){return n().getUint32(e,u)}function S(e,t){return n().setUint32(e,t,u)}function M(e,t){var r,a;n=t,(0,s.$)((r={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(r,4,f),5,f),2,f),3,f),6,d),7,d),8,p),9,p),10,m),11,g),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(r,12,g),13,y),14,y),15,x),16,x),17,_),18,P),19,B),20,C),23,(function(e){return!!g(e)})),(0,i.A)(r,24,(function(e){return!!g(e)})))),(0,o.$)((a={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(a,4,c),5,c),2,c),3,c),6,h),7,h),8,l),9,l),10,v),11,A),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(a,12,A),13,k),14,k),15,b),16,b),17,w),18,T),19,I),20,S),23,(function(e,t){A(e,t?1:0)})),(0,i.A)(a,24,(function(e,t){A(e,t?1:0)}))))}},63939:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,f:()=>s});var n,i=r(134),a=r(95335),s=(n={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,4,(function(e){throw new Error("unimplemented")})),5,(function(e){throw new Error("unimplemented")})),2,(function(e){throw new Error("unimplemented")})),3,(function(e){throw new Error("unimplemented")})),6,(function(e){throw new Error("unimplemented")})),7,(function(e){throw new Error("unimplemented")})),8,(function(e){throw new Error("unimplemented")})),9,(function(e){throw new Error("unimplemented")})),10,(function(e){throw new Error("unimplemented")})),11,(function(e){throw new Error("unimplemented")})),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,12,(function(e){throw new Error("unimplemented")})),13,(function(e){throw new Error("unimplemented")})),14,(function(e){throw new Error("unimplemented")})),15,(function(e){throw new Error("unimplemented")})),16,(function(e){throw new Error("unimplemented")})),17,(function(e){throw new Error("unimplemented")})),18,(function(e){throw new Error("unimplemented")})),19,(function(e){throw new Error("unimplemented")})),20,(function(e){throw new Error("unimplemented")})),0,(function(e){throw new Error("invalid operate")})),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,1,(function(e){throw new Error("invalid operate")})),22,(function(e){throw new Error("invalid operate")})),21,(function(e){throw new Error("invalid operate")})),23,(function(e){throw new Error("invalid operate")})),24,(function(e){throw new Error("invalid operate")})));function o(e){a.X$(s,e)}},50932:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,M:()=>s});var n,i=r(134),a=r(95335),s=(n={},(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,4,(function(e,t){throw new Error("unimplemented")})),5,(function(e,t){throw new Error("unimplemented")})),2,(function(e,t){throw new Error("unimplemented")})),3,(function(e,t){throw new Error("unimplemented")})),6,(function(e,t){throw new Error("unimplemented")})),7,(function(e,t){throw new Error("unimplemented")})),8,(function(e,t){throw new Error("unimplemented")})),9,(function(e,t){throw new Error("unimplemented")})),10,(function(e,t){throw new Error("unimplemented")})),11,(function(e,t){throw new Error("unimplemented")})),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,12,(function(e,t){throw new Error("unimplemented")})),13,(function(e,t){throw new Error("unimplemented")})),14,(function(e,t){throw new Error("unimplemented")})),15,(function(e,t){throw new Error("unimplemented")})),16,(function(e,t){throw new Error("unimplemented")})),17,(function(e,t){throw new Error("unimplemented")})),18,(function(e,t){throw new Error("unimplemented")})),19,(function(e,t){throw new Error("unimplemented")})),20,(function(e,t){throw new Error("unimplemented")})),0,(function(e,t){throw new Error("invalid operate")})),(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)(n,1,(function(e,t){throw new Error("invalid operate")})),22,(function(e,t){throw new Error("invalid operate")})),21,(function(e,t){throw new Error("invalid operate")})),23,(function(e,t){throw new Error("invalid operate")})),24,(function(e,t){throw new Error("invalid operate")})));function o(e){a.X$(s,e)}},25323:(e,t,r)=>{"use strict";r.d(t,{X:()=>M,l:()=>S});var n=r(66681),i=r.n(n),a=r(11919),s=r.n(a),o=r(75019),u=r.n(o),c=r(99921),f=r(63939),h=r(50932),d=r(61499),l=r(6704),p=r(67672),v=r(95335),m=r(62100),A=r(72739);function g(e,t,r,n){i()(e,t,{get:r,set:n,configurable:!0,enumerable:!0})}function k(e){return function(){return f.f[20](e())}}function y(e,t,r,n){return function(){return e["__$__".concat(t)]||(e["__$__".concat(t)]=S(r(),n))}}function b(e,t){return function(){return f.f[t](e())}}function x(e,t,r,n){var i=8*l.i[t]-n-r,a=Math.pow(2,r)-1;return function(){return f.f[t](e())>>>i&a}}function w(e){return function(t){h.M[8](e(),t)}}function _(e,t,r,n){var i="__$__".concat(t);return function(t){var a=e[i]||(e[i]=S(r(),n));v.__(t,(function(e,t){a[t]=e})),e[i]=a}}function T(e,t){return function(r){h.M[t](e(),r)}}function P(e,t,r,n){for(var i=0,a=8*l.i[t],s=0;s<r;s++)i|=1<<a-1-(s+n);var o=Math.pow(2,r)-1,u=a-n-r;return function(r){var n=e(),a=f.f[t](n);h.M[t](n,a&~i|(r&o)<<u)}}function I(e,t,r){return function(){var n=t["__$__".concat(r)];return n[d.o9]=e(),n}}function B(e,t,r,n,i){var a="__$__".concat(t);return function(t){var s=e[a]||function(e,t,r){for(var n={},i=(0,c.A)(r),a=function(t){var a=(0,m.A)(t);g(n,a,y(n,a,(function(){return e()+i*t}),r),_(n,a,(function(){return e()+i*t}),r))},s=0;s<t;s++)a(s);return n}(r,n,i);s[d.o9]=r(),A.__(t,(function(e,t){s[t]=e})),e[a]=s}}function C(e,t,r,n,i){var a="__$__".concat(t);return function(t){var s=e[a]||function(e,t,r){for(var n={},i=(0,c.A)(r),a=function(t){var a=(0,m.A)(t);g(n,a,b((function(){return e()+i*t}),r),T((function(){return e()+i*t}),r))},s=0;s<t;s++)a(s);return n}(r,n,i);s[d.o9]=r(),A.__(t,(function(e,t){s[t]=e})),e[a]=s}}function S(e,t){var r=p.Pc(t)?t.prototype:t,n={};for(n[d.o9]=e,s()(n,r);;){var i=r[d.JY];if(i&&i.forEach((function(e,t){e[3]?e[1]?g(n,t,I((function(){return n[d.o9]+e[7]}),n,t),C(n,t,(function(){return n[d.o9]+e[7]}),e[4],20)):p.Pc(e[0])||p.Ik(e[0])?g(n,t,I((function(){return n[d.o9]+e[7]}),n,t),B(n,t,(function(){return n[d.o9]+e[7]}),e[4],e[0])):g(n,t,I((function(){return n[d.o9]+e[7]}),n,t),C(n,t,(function(){return n[d.o9]+e[7]}),e[4],e[0])):e[1]?g(n,t,k((function(){return n[d.o9]+e[7]})),w((function(){return n[d.o9]+e[7]}))):p.Pc(e[0])||p.Ik(e[0])?g(n,t,y(n,t,(function(){return n[d.o9]+e[7]}),e[0]),_(n,t,(function(){return n[d.o9]+e[7]}),e[0])):e[5]?g(n,t,x((function(){return n[d.o9]+e[7]}),e[0],e[6],e[8]),P((function(){return n[d.o9]+e[7]}),e[0],e[6],e[8])):g(n,t,b((function(){return n[d.o9]+e[7]}),e[0]),T((function(){return n[d.o9]+e[7]}),e[0]))})),!(r=u()(r)))break}return n}function M(e){for(var t=u()(e);;){var r=t[d.JY];if(r&&r.forEach((function(t,r){delete e[r]})),!(t=u()(t)))break}}},12085:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(66681),i=r.n(n);function a(e,t,r){i()(e,t,{value:r,writable:!1,enumerable:!1,configurable:!1})}},11473:(e,t,r)=>{"use strict";r.d(t,{GE:()=>b,KZ:()=>z,Tg:()=>j,XI:()=>_,ce:()=>P,eq:()=>O,hZ:()=>N,pv:()=>G,s_:()=>T,wE:()=>x});var n=r(25182),i=r(134),a=r(36443),s=r.n(a),o=r(39638),u=r(95007),c=r(94321),f=r(10576),h=r(26429),d=r(7417),l=r(33856),p=r(98564),v=r(82854),m=r(73281),A=r(54568),g=r(86834),k=-1,y="",b=null,x=null,w=0,_=null,T=null,P=null,I=null,B=null,C=null,S=null,M=null,U=null,R=null,E=null,D=null,L=(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({},5,M),3,M),7,U),9,R),22,E),12,I),14,B),16,C),21,S);function F(){return!(!P||P.buffer===M.buffer)}function O(){return F()&&V(P.buffer),M}function N(){return F()&&V(P.buffer),U}function z(){return F()&&V(P.buffer),D}function W(e){return F()&&V(P.buffer),L[e]}function V(e){I=new Int8Array(e),B=new Int16Array(e),C=new Int32Array(e),S=new BigInt64Array(e),M=new Uint8Array(e),U=new Uint16Array(e),R=new Uint32Array(e),E=new BigUint64Array(e),new Float32Array(e),new Float64Array(e),D=new DataView(e),L=(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({},5,M),3,M),7,U),9,R),22,E),12,I),14,B),16,C),21,S)}function G(){return Atomics.add(R,d.h>>>2,1)}function j(e){return q.apply(this,arguments)}function q(){return(q=(0,n.A)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.A)((function(){return T}),z),(0,l.A)(W),P=t.memory,n=new u.A({buffer:P.buffer,memory:P,byteOffset:h.dP,maxHeapSize:64*h.Gx*1024,growAllowed:!0,onResize:function(e,t){return P.grow(t-e.byteLength>>>16),{buffer:P.buffer,byteOffset:h.dP}}},!1),T&&T.removeUpdateHandle(V),T=n,f.TK.CHeap&&(f.TK.CHeap.Allocator=T),T.addUpdateHandle(V),V(T.getBuffer()),t.stackPointer&&(w=t.stackSize,x=t.stackPointer,b=new WebAssembly.Global({value:"i32",mutable:!0},x+w),_=new c.z),k="number"==typeof t.id?t.id:Atomics.add(R,d.h>>>2,1),y=null!==(r=t.name)&&void 0!==r?r:"anonymous",f.TK.CHeap={initThread:j,Allocator:T,Table:_,ThreadId:k,ThreadName:y,Memory:P,StackSize:w,StackTop:x,StackPointer:b,isMainThread:!1},t.disableAsm){e.next=17;break}if("function"!=typeof BigInt||BigInt===Number||!(g.A.chrome&&g.A.checkVersion(g.A.majorVersion,"85",!0)||g.A.firefox&&g.A.checkVersion(g.A.majorVersion,"78",!0)||g.A.safari&&g.A.checkVersion(g.A.majorVersion,"15",!0)||g.A.newEdge)){e.next=14;break}return e.next=14,(0,p.Ay)(P);case 14:if(!h._7||!(g.A.chrome&&g.A.checkVersion(g.A.majorVersion,"85",!0)||g.A.firefox&&g.A.checkVersion(g.A.majorVersion,"78",!0)||g.A.safari&&g.A.checkVersion(g.A.majorVersion,"15",!0)||g.A.newEdge)){e.next=17;break}return e.next=17,(0,v.Ay)(P);case 17:case"end":return e.stop()}var n}),e)})))).apply(this,arguments)}(0,o.A)()||(0,A.A)()?f.TK.CHeap={initThread:j,isMainThread:!1}:function(){var e,t,r,n,i,a,s,o;if((0,m.A)((function(){return T}),z),(0,l.A)(W),P=null!==(e=f.TK.CHeap)&&void 0!==e&&e.Memory?f.TK.CHeap.Memory:new WebAssembly.Memory({initial:h.YN,maximum:h.Gx,shared:h._7}),(T=null!==(t=f.TK.CHeap)&&void 0!==t&&t.Allocator?f.TK.CHeap.Allocator:new u.A({buffer:P.buffer,memory:P,byteOffset:h.dP,maxHeapSize:64*h.Gx*1024,growAllowed:!0,onResize:function(e,t){return P.grow(t-e.byteLength>>>16),{buffer:P.buffer,byteOffset:h.dP}}})).addUpdateHandle(V),V(T.getBuffer()),w=null!==(r=f.TK.CHeap)&&void 0!==r&&r.StackSize?f.TK.CHeap.StackSize:h.pw,x=null!==(n=f.TK.CHeap)&&void 0!==n&&n.StackTop?f.TK.CHeap.StackTop:T.malloc(w),b=null!==(i=f.TK.CHeap)&&void 0!==i&&i.StackPointer?f.TK.CHeap.StackPointer:new WebAssembly.Global({value:"i32",mutable:!0},x+w),_=null!==(a=f.TK.CHeap)&&void 0!==a&&a.Table?f.TK.CHeap.Table:new c.z,k=null!==(s=f.TK.CHeap)&&void 0!==s&&s.ThreadId?f.TK.CHeap.ThreadId:0,y=null!==(o=f.TK.CHeap)&&void 0!==o&&o.ThreadName?f.TK.CHeap.ThreadName:"main",!f.TK.CHeap)if(h._7)Atomics.store(R,d.h>>>2,k+1),Atomics.store(C,d.I>>>2,0);else{R[d.h>>>2]=k+1;var A=d.I>>>2;C[A]=0}"function"==typeof BigInt&&BigInt!==Number&&(g.A.chrome&&g.A.checkVersion(g.A.majorVersion,"85",!0)||g.A.firefox&&g.A.checkVersion(g.A.majorVersion,"78",!0)||g.A.safari&&g.A.checkVersion(g.A.majorVersion,"15",!0)||g.A.newEdge)&&(0,p.Ay)(P),h._7&&(g.A.chrome&&g.A.checkVersion(g.A.majorVersion,"85",!0)||g.A.firefox&&g.A.checkVersion(g.A.majorVersion,"78",!0)||g.A.safari&&g.A.checkVersion(g.A.majorVersion,"15",!0)||g.A.newEdge)&&(0,v.Ay)(P),f.TK.CHeap||(f.TK.CHeap={Allocator:T,Table:_,ThreadId:k,ThreadName:y,Memory:P,StackSize:w,StackTop:x,StackPointer:b,isMainThread:!0,threadCounter:d.h,heapMutex:d.I})}()},80098:(e,t,r)=>{"use strict";r.d(t,{I_:()=>g,SQ:()=>k});var n=r(75019),i=r.n(n),a=r(11919),s=r.n(a),o=r(99921),u=r(63939),c=r(50932),f=r(61499),h=r(6704),d=r(67672),l=r(95335),p=r(72739),v=r(2148),m=i()({});function A(e,t){for(;;){var r=e[f.JY];if(r){var n=r.get(t);if(n)return n}if(!(e=i()(e))||e===m)return null}}function g(e,t){var r=d.Pc(t)?t.prototype:t,n={};n[f.o9]=e,s()(n,r);var i=Proxy.revocable(n,{get:function(e,t,n){if(d.Yj(t)){var i=A(r,t.replace(/^\$+/,""));if(i){var a=e[f.o9]+i[7];if(i[3]){var s=e[t];return s[f.o9]=a,s}if(i[1])return u.f[20](a);if(d.Pc(i[0])||d.Ik(i[0]))return e[t]||(e[t]=g(a,i[0]));var o=u.f[i[0]](a);return i[5]&&(o=o>>>8*h.i[i[0]]-i[8]-i[6]&Math.pow(2,i[6])-1),o}return e[t]}return e[t]},set:function(e,t,n,i){if(d.Yj(t)){var a=A(r,t.replace(/^\$+/,""));if(a){var s=e[f.o9]+a[7];if(a[3]){var m=e[t]||function(e,t,r,n){var i={};i[f.o9]=e;var a=(0,o.A)(n?20:r);return new Proxy(i,{get:function(e,t,i){if(t===f.o9)return e[f.o9];var s=(0,v.A)(t);return n?u.f[20](e[f.o9]+s*a):d.Pc(r)?e[t]:u.f[r](e[f.o9]+s*a)},set:function(e,t,i,s){if(t===f.o9)return e[f.o9]=i,!0;var o=(0,v.A)(t);if(n)c.M[20](e[f.o9]+o*a,i),e[t]=i;else if(d.Pc(r)){var u=e[t]||(e[t]=g(e[f.o9]+o*a,r));l.__(i,(function(e,t){u[t]=e})),e[t]=u}else c.M[r](e[f.o9]+o*a,i),e[t]=i;return!0}})}(s,a[4],a[0],a[1]);p.__(n,(function(e,t){m[t]=e})),e[t]=m}else if(a[1])c.M[20](s,n),e[t]=n;else if(d.Pc(a[0])||d.Ik(a[0])){var k=e[t]||(e[t]=g(s,a[0]));l.__(n,(function(e,t){k[t]=e})),e[t]=k}else{if(a[5]){for(var y=0,b=8*h.i[a[0]],x=0;x<a[6];x++)y|=1<<b-1-(x+a[8]);var w=u.f[a[0]](s);c.M[a[0]](s,w&~y|(n&Math.pow(2,a[6])-1)<<b-a[8]-a[6])}else c.M[a[0]](s,n);e[t]=n}}else e[t]=n}else e[t]=n;return!0}}),a=i.proxy,m=i.revoke;return n[f.kE]=m,a}function k(e){var t=e[f.kE];t&&t()}},52699:(e,t,r)=>{"use strict";r.d(t,{t:()=>a,z:()=>i});var n=r(11473);function i(e){return n.GE.value-=e,n.GE.value}function a(e){n.GE.value+=e}},7417:(e,t,r)=>{"use strict";r.d(t,{I:()=>c,h:()=>u});var n,i,a=r(10576),s=1;function o(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=s;r%t;)r+=1;return s=r+e,r}var u=null!==(n=a.TK.CHeap)&&void 0!==n&&n.threadCounter?a.TK.CHeap.threadCounter:o(4,4),c=null!==(i=a.TK.CHeap)&&void 0!==i&&i.heapMutex?a.TK.CHeap.heapMutex:o(4,4)},79630:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var n=r(88435),i=r.n(n),a=r(77193),s=r(25767),o=r(43070),u=r(31060),c=r(78716),f=r(81570),h=r(134),d=r(63939),l=r(50932),p=r(11473),v=r(61403);function m(e,t,r){return t=(0,s.A)(t),(0,a.A)(e,A()?i()(t,r||[],(0,s.A)(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var g=function(){function e(t,r){(0,c.A)(this,e),(0,h.A)(this,"pointer",void 0),(0,h.A)(this,"len",void 0),this.pointer=t,this.len=r}return(0,f.A)(e,[{key:"byteLength",get:function(){return this.len}},{key:"buffer",get:function(){return(0,p.eq)().buffer}},{key:"byteOffset",get:function(){return this.pointer}},{key:"getFloat32",value:function(e,t){return(0,p.KZ)().getFloat32(this.pointer+e,t)}},{key:"getFloat64",value:function(e,t){return(0,p.KZ)().getFloat64(this.pointer+e,t)}},{key:"getInt8",value:function(e){return(0,p.KZ)().getInt8(this.pointer+e)}},{key:"getInt16",value:function(e,t){return(0,p.KZ)().getInt16(this.pointer+e,t)}},{key:"getInt32",value:function(e,t){return(0,p.KZ)().getInt32(this.pointer+e,t)}},{key:"getUint8",value:function(e){return(0,p.KZ)().getUint8(this.pointer+e)}},{key:"getUint16",value:function(e,t){return(0,p.KZ)().getUint16(this.pointer+e,t)}},{key:"getUint32",value:function(e,t){return(0,p.KZ)().getUint32(this.pointer+e,t)}},{key:"setFloat32",value:function(e,t,r){(0,p.KZ)().setFloat32(this.pointer+e,t,r)}},{key:"setFloat64",value:function(e,t,r){(0,p.KZ)().setFloat64(this.pointer+e,t,r)}},{key:"setInt8",value:function(e,t){(0,p.KZ)().setInt8(this.pointer+e,t)}},{key:"setInt16",value:function(e,t,r){(0,p.KZ)().setInt16(this.pointer+e,t,r)}},{key:"setInt32",value:function(e,t,r){(0,p.KZ)().setInt32(this.pointer+e,t,r)}},{key:"setUint8",value:function(e,t){(0,p.KZ)().setUint8(this.pointer+e,t)}},{key:"setUint16",value:function(e,t,r){(0,p.KZ)().setUint16(this.pointer+e,t,r)}},{key:"setUint32",value:function(e,t,r){(0,p.KZ)().setUint32(this.pointer+e,t,r)}},{key:"getBigInt64",value:function(e,t){return(0,p.KZ)().getBigInt64(this.pointer+e,t)}},{key:"getBigUint64",value:function(e,t){return(0,p.KZ)().getBigUint64(this.pointer+e,t)}},{key:"setBigInt64",value:function(e,t,r){(0,p.KZ)().setBigInt64(this.pointer+e,t,r)}},{key:"setBigUint64",value:function(e,t,r){(0,p.KZ)().setBigUint64(this.pointer+e,t,r)}}]),e}(),k=function(e){function t(e,r){var n;return(0,c.A)(this,t),n=m(this,t),(0,h.A)((0,o.A)(n),"pointer",void 0),(0,h.A)((0,o.A)(n),"len",void 0),n.pointer=e,n.len=r,(0,a.A)(n,n.proxy)}return(0,u.A)(t,e),(0,f.A)(t,[{key:"getIndexValue",value:function(e){return d.f[2](this.pointer+e)}},{key:"setIndexValue",value:function(e,t){l.M[2](this.pointer+e,t)}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,p.eq)().set(e,this.pointer+t)}},{key:"subarray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return(arguments.length>2?arguments[2]:void 0)?new t(this.pointer+e,(r||this.len)-e):(0,p.eq)().subarray(this.pointer+e,this.pointer+(null!=r?r:this.len))}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return(0,p.eq)().slice(this.pointer+e,this.pointer+(null!=t?t:this.len))}},{key:"length",get:function(){return this.len}},{key:"byteLength",get:function(){return this.len}},{key:"buffer",get:function(){return(0,p.eq)().buffer}},{key:"byteOffset",get:function(){return this.pointer}},{key:"view",get:function(){return new g(this.pointer,this.len)}}]),t}(v.A)},12264:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n,i,a=r(81570),s=r(78716),o=r(134),u=r(80662),c=r.n(u),f=r(61499),h=r(12085),d=r(11473),l=r(63939),p=r(50932),v=r(99921),m=r(14686),A=r(67672),g=r(29170),k=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"prev",void 0),(0,o.A)(this,"next",void 0),(0,o.A)(this,"data",void 0)}));n=k.prototype,(i=new(c())).set("prev",{0:k,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("next",{0:k,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("data",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,4),(0,h.A)(n,f.g7,12),(0,h.A)(n,f.JY,i);var y=function(){function e(){(0,s.A)(this,e),(0,o.A)(this,"length",0),(0,o.A)(this,"head",0),(0,o.A)(this,"tail",0)}return(0,a.A)(e,[{key:"createNode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=d.s_.malloc(12);if(p.M[20](n+4,0),p.M[20](n,0),A.ai(t))if(20===t)p.M[20](n+8,e);else{var i=d.s_.malloc((0,v.A)(t));p.M[t](i,e),p.M[20](n+8,i)}else if(r)p.M[20](n+8,e);else{var a=d.s_.malloc((0,v.A)(t));(0,m.Mr)(a,e[f.o9],(0,v.A)(t)),p.M[20](n+8,a)}return n}},{key:"getItem",value:function(e,t){return A.ai(t)?20===t?e:l.f[t](e):(0,g.A)(e,t)}},{key:"push",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.createNode(e,t,r);this.tail?(p.M[20](this.tail+4,n),p.M[20](n,this.tail),this.tail=n):(this.head=n,this.tail=n),this.length++}},{key:"pop",value:function(e){var t=this.tail,r=this.getItem(l.f[20](t+8),e);return this.length>1?(p.M[20](l.f[20](t)+4,0),this.tail=l.f[20](t)):(this.head=0,this.tail=0),this.length--,d.s_.free(l.f[20](t+8)),d.s_.free(t),r}},{key:"shift",value:function(e){var t=this.head,r=this.getItem(l.f[20](t+8),e);return this.length>1?(p.M[20](l.f[20](t+4),0),this.head=l.f[20](t+4)):(this.head=0,this.tail=0),this.length--,d.s_.free(l.f[20](t+8)),d.s_.free(t),r}},{key:"unshift",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.createNode(e,t,r);this.head?(p.M[20](this.head,n),p.M[20](n+4,this.head),this.head=n):(this.head=n,this.tail=n),this.length++}},{key:"forEach",value:function(e,t){if(this.length)for(var r=this.head,n=0;0!==r&&!1!==e(this.getItem(l.f[20](r+8),t),n);)r=l.f[20](r+4),n++}},{key:"find",value:function(e,t){if(!this.length)return 0;for(var r=this.head,n=0;0!==r;){var i=this.getItem(l.f[20](r+8),t);if(!0===e(i,n))return i;r=l.f[20](r+4),n++}return 0}},{key:"indexOf",value:function(e,t){if(!this.length)return 0;for(var r=this.head,n=0;0!==r;){if(n===e)return this.getItem(l.f[20](r+8),t);r=l.f[20](r+4),n++}return 0}},{key:"clear",value:function(e,t){if(this.length)for(var r=this.head;0!==r;){e&&e(this.getItem(l.f[20](r+8),t)),d.s_.free(l.f[20](r+8));var n=l.f[20](r+4);d.s_.free(r),r=n}this.head=0,this.tail=0,this.length=0}}]),e}();!function(e){var t=new(c());t.set("length",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("head",{0:k,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("tail",{0:k,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,h.A)(e,f.Og,!0),(0,h.A)(e,f.dc,4),(0,h.A)(e,f.g7,12),(0,h.A)(e,f.JY,t)}(y.prototype)},74503:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(99921),i=r(11473),a=r(14686),s=r(95335),o=r(34677),u=r(29170);function c(e,t){var r=(0,n.A)(e),c=i.s_.malloc(r);if(!c)throw new TypeError("cannot alloc memory for struct");(0,a.sO)(c,0,r);var f=(0,u.A)(c,e),h=new e;return t&&s.X$(h,t),s.__(h,(function(e,t){(0,o.A)(e)&&(f[t]=e)})),f}},14686:(e,t,r)=>{"use strict";r.d(t,{JW:()=>h,Mr:()=>u,bg:()=>l,lH:()=>p,lW:()=>c,s3:()=>d,sO:()=>f});var n=r(11473),i=r(70812),a=r(50011),s=r(79630),o=r(26429);function u(e,t,r){(0,n.eq)().set((0,n.eq)().subarray(t,t+r),e)}function c(e,t,r){(0,n.eq)().set(r.subarray(0,t),e)}function f(e,t,r){(0,n.eq)().subarray(e,e+r).fill(t)}function h(e,t){return o._7?d(e,t):new s.A(e,t)}function d(e,t){return(0,n.eq)().subarray(e,e+t)}function l(e,t){return(0,n.hZ)().subarray(e>>>1,(e>>>1)+t)}function p(e,t){var r=(0,i.b2)(e),n=Math.min(r,null!=t?t:r);return a.D(d(e,n))}},99921:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(61499),i=r(67672),a=r(6704);function s(e){return i.ai(e)?a.i[e]||0:i.Pc(e)&&e.prototype[n.Og]?e.prototype[n.g7]:0}},70812:(e,t,r)=>{"use strict";r.d(t,{b2:()=>i});var n=r(63939);function i(e){for(var t=0;n.f[4]((e+=1)-1);)t++;return t}},29170:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(61499),i=r(80098),a=r(25323),s=r(95797),o=r(67672),u=r(10534);function c(e,t){return arguments[2]&&o.Yj(arguments[2])&&(t=t.prototype,u.__(arguments[2],(function(e){var r=t[n.JY];t=r.get(e)[0]}))),s.A.proxy?(0,i.I_)(e,t):(0,a.l)(e,t)}},94300:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(11473),i=r(61499),a=r(80098),s=r(25323),o=r(95797);function u(e){var t=e[i.o9];t&&(n.s_.free(t),e[i.o9]=0,o.A.proxy?(0,a.SQ)(e):(0,s.X)(e))}},61499:(e,t,r)=>{"use strict";r.d(t,{JY:()=>c,Og:()=>a,dc:()=>o,g7:()=>s,kE:()=>f,o9:()=>u});var n=r(75062),i=r.n(n),a=i()("Struct"),s=i()("StructLength"),o=i()("StructMaxBaseTypeByteLength"),u=i()("StructAddress"),c=(i()("StructKeysQueue"),i()("StructKeysMeta")),f=(i()("StructKeysInstance"),i()("StructProxyRevoke"))},82854:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>v,KJ:()=>n,Ko:()=>p});var n,i=r(25182),a=r(36443),s=r.n(a),o=r(4919),u=r(4624),c=r(88096),f=r(49583),h=r.n(f),d=r(40046),l="src/cheap/thread/asm/atomics.ts";function p(){return!!n}function v(e){return m.apply(this,arguments)}function m(){return(m=(0,i.A)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer)){e.next=9;break}return r=(0,o.E_)(h()),c.DD(r,!0),e.next=6,WebAssembly.instantiate(r,{env:{memory:t}});case 6:n=e.sent.instance,e.next=10;break;case 9:return e.abrupt("return");case 10:(0,d.$Z)({add:function(e,t,r){switch(r){case 5:case 3:return 255&n.exports.add8(e,t);case 12:return n.exports.add8(e,t);case 14:return n.exports.add16(e,t);case 7:return 65535&n.exports.add16(e,t);case 16:return n.exports.add32(e,t);case 9:return 4294967295&n.exports.add32(e,t);case 21:return n.exports.add64(e,t);case 22:return BigInt.asUintN(64,n.exports.add64(e,t))}},sub:function(e,t,r){switch(r){case 5:case 3:return 255&n.exports.sub8(e,t);case 12:return n.exports.sub8(e,t);case 14:return n.exports.sub16(e,t);case 7:return 65535&n.exports.sub16(e,t);case 16:return n.exports.sub32(e,t);case 9:return 4294967295&n.exports.sub32(e,t);case 21:return n.exports.sub64(e,t);case 22:return BigInt.asUintN(64,n.exports.sub64(e,t))}},and:function(e,t,r){switch(r){case 5:case 3:return 255&n.exports.and8(e,t);case 12:return n.exports.and8(e,t);case 14:return n.exports.and16(e,t);case 7:return 65535&n.exports.and16(e,t);case 16:return n.exports.and32(e,t);case 9:return 4294967295&n.exports.and32(e,t);case 21:return n.exports.and64(e,t);case 22:return BigInt.asUintN(64,n.exports.and64(e,t))}},or:function(e,t,r){switch(r){case 5:case 3:return 255&n.exports.or8(e,t);case 12:return n.exports.or8(e,t);case 14:return n.exports.or16(e,t);case 7:return 65535&n.exports.or16(e,t);case 16:case 9:return n.exports.or32(e,t);case 21:return n.exports.or64(e,t);case 22:return BigInt.asUintN(64,n.exports.or64(e,t))}},xor:function(e,t,r){switch(r){case 5:case 3:return 255&n.exports.xor8(e,t);case 12:return n.exports.xor8(e,t);case 14:return n.exports.xor16(e,t);case 7:return 65535&n.exports.xor16(e,t);case 16:case 9:return n.exports.xor32(e,t);case 21:return n.exports.xor64(e,t);case 22:return BigInt.asUintN(64,n.exports.xor64(e,t))}},store:function(e,t,r){switch(r){case 5:case 12:case 3:return n.exports.store8(e,t);case 14:case 7:return n.exports.store16(e,t);case 16:case 9:return n.exports.store32(e,t);case 21:case 22:return n.exports.store64(e,t)}},load:function(e,t){switch(t){case 5:case 3:return 255&n.exports.load8(e);case 12:return n.exports.load8(e);case 14:case 7:return n.exports.load16(e);case 16:return n.exports.load32(e);case 9:return 4294967295&n.exports.load32(e);case 21:return n.exports.load64(e);case 22:return BigInt.asUintN(64,n.exports.load64(e))}},compareExchange:function(e,t,r,i){switch(i){case 5:case 3:return 255&n.exports.compare_exchange8(e,t,r);case 12:return n.exports.compare_exchange8(e,t,r);case 14:return n.exports.compare_exchange16(e,t,r);case 7:return 65535&n.exports.compare_exchange16(e,t,r);case 16:return n.exports.compare_exchange32(e,t,r);case 9:return 4294967295&n.exports.compare_exchange32(e,t,r);case 21:return n.exports.compare_exchange64(e,t,r);case 22:return BigInt.asUintN(64,n.exports.compare_exchange64(e,t,r))}},exchange:function(e,t,r){switch(r){case 5:case 3:return 255&n.exports.exchange8(e,t);case 12:return n.exports.exchange8(e,t);case 14:return n.exports.exchange16(e,t);case 7:return 65535&n.exports.exchange16(e,t);case 16:return n.exports.exchange32(e,t);case 9:return 4294967295&n.exports.exchange32(e,t);case 21:return n.exports.exchange64(e,t);case 22:return BigInt.asUintN(64,n.exports.exchange64(e,t))}},notify:function(e,t){return n.exports.notify(e,t)},wait:function(e,t){return n.exports.wait(e,t)},waitTimeout:function(e,t,r){return n.exports.waitTimeout(e,t,BigInt(r>>>0))}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),u.R8("atomics asm not support, cannot use asm atomics function",l,284);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}},40046:(e,t,r)=>{"use strict";var n,i,a,s,o,u,c,f,h,d,l,p;function v(e){e.add&&(n=e.add),e.sub&&(i=e.sub),e.and&&(a=e.and),e.or&&(s=e.or),e.xor&&(o=e.xor),e.store&&(u=e.store),e.load&&(c=e.load),e.compareExchange&&(f=e.compareExchange),e.exchange&&(h=e.exchange),e.notify&&(d=e.notify),e.wait&&(l=e.wait),e.waitTimeout&&(p=e.waitTimeout),e.waitAsync&&e.waitAsync,e.waitTimeoutAsync&&e.waitTimeoutAsync}r.d(t,{$Z:()=>v,Hh:()=>c,I8:()=>o,M_:()=>u,Uo:()=>a,WQ:()=>n,cv:()=>h,j4:()=>p,jb:()=>i,me:()=>d,or:()=>s,p_:()=>f,uk:()=>l})},33856:(e,t,r)=>{"use strict";r.d(t,{A:()=>R});var n,i=r(25182),a=r(36443),s=r.n(a),o=r(54001),u=r.n(o),c=r(86932),f=r(7972),h=r(40046),d=r(26429),l=r(39638),p=r(86834),v=d._7||(0,l.A)()||!p.A.chrome||p.A.checkVersion(p.A.majorVersion,"94",!0);function m(e,t,r,i){if(v)return Atomics.add(n(r),e>>>i,t);var a=n(r),s=e>>>i,o=a[s];return a[s]+=t,o}function A(e,t,r,i){if(v)return Atomics.sub(n(r),e>>>i,t);var a=n(r),s=e>>>i,o=a[s];return a[s]-=t,o}function g(e,t,r,i){if(v)return Atomics.and(n(r),e>>>i,t);var a=n(r),s=e>>>i,o=a[s];return a[s]&=t,o}function k(e,t,r,i){if(v)return Atomics.or(n(r),e>>>i,t);var a=n(r),s=e>>>i,o=a[s];return a[s]|=t,o}function y(e,t,r,i){if(v)return Atomics.xor(n(r),e>>>i,t);var a=n(r),s=e>>>i,o=a[s];return a[s]^=t,o}function b(e,t,r,i){if(v)return Atomics.store(n(r),e>>>i,t);var a=n(r),s=e>>>i,o=a[s];return a[s]=t,o}function x(e,t,r){return v?Atomics.load(n(t),e>>>r):n(t)[e>>>r]}function w(e,t,r,i,a){if(v)return Atomics.compareExchange(n(i),e>>>a,t,r);var s=n(i),o=e>>>a,u=s[o];return u===t&&(s[o]=r),u}function _(e,t,r,i){if(v)return Atomics.exchange(n(r),e>>>i,t);var a=n(r),s=e>>>i,o=a[s];return a[s]=t,o}function T(e,t){return v?Atomics.notify(n(16),e>>>2,t):void 0}var P={ok:0,"not-equal":1,"timed-out":2};function I(e,t){return P[Atomics.wait(n(16),e>>>2,t)]}function B(e,t,r){return P[Atomics.wait(n(16),e>>>2,t,r)]}function C(e,t){return S.apply(this,arguments)}function S(){return(S=(0,i.A)(s().mark((function e(t,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Atomics.waitAsync){e.next=10;break}if(!(i=Atomics.waitAsync(n(16),t>>>2,r)).async){e.next=7;break}return e.next=5,i.value;case 5:return e.t0=e.sent,e.abrupt("return",P[e.t0]);case 7:return e.abrupt("return",P[i.value]);case 10:if(x(t)===r){e.next=14;break}return e.abrupt("return",1);case 14:if(x(t)!==r){e.next=19;break}return e.next=17,new(u())((function(e){(0,f.A)((function(){e()}))}));case 17:e.next=14;break;case 19:return e.abrupt("return",0);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,r){return U.apply(this,arguments)}function U(){return(U=(0,i.A)(s().mark((function e(t,r,i){var a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Atomics.waitAsync){e.next=10;break}if(!(a=Atomics.waitAsync(n(16),t>>>2,r,i)).async){e.next=7;break}return e.next=5,a.value;case 5:return e.t0=e.sent,e.abrupt("return",P[e.t0]);case 7:return e.abrupt("return",P[a.value]);case 10:if(x(t)===r){e.next=14;break}return e.abrupt("return",1);case 14:o=(0,c.A)();case 15:if(!(x(t)===r&&(0,c.A)()-o<i)){e.next=20;break}return e.next=18,new(u())((function(e){(0,f.A)((function(){e()}))}));case 18:e.next=15;break;case 20:return e.abrupt("return",x(t)!==r?0:2);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){n=e,(0,h.$Z)({add:m,sub:A,and:g,or:k,xor:y,store:b,load:x,compareExchange:w,exchange:_,notify:T,wait:I,waitTimeout:B,waitAsync:C,waitTimeoutAsync:M})}},42518:(e,t,r)=>{"use strict";r.d(t,{Ts:()=>p,XR:()=>k,mq:()=>A,uk:()=>g,vP:()=>m,zr:()=>v}),r(25182);var n,i,a=r(81570),s=r(78716),o=r(134),u=(r(36443),r(80662)),c=r.n(u),f=r(61499),h=r(12085),d=r(73783),l=r(40046);function p(e,t){return l.M_(e,0,16,2),0}function v(e){return l.M_(e,0,16,2),0}function m(e){return l.WQ(e,1,16,2),l.me(e,1),0}function A(e){return l.WQ(e,1,16,2),l.me(e,1073741824),0}function g(e,t){var r=l.Hh(e,16,2);return d.Tl(t),l.uk(e,r),d.s2(t),0}function k(e,t,r){var n=l.Hh(e,16,2);d.Tl(t);var i=l.j4(e,n,r);return d.s2(t),2===i?110:0}n=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"atomic",void 0)})).prototype,(i=new(c())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,4),(0,h.A)(n,f.g7,4),(0,h.A)(n,f.JY,i)},81574:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(6837),i=r(25182),a=r(36443),s=r.n(a),o=r(84149),u=r(10576),c=r(67672),f=u.TK;function h(e){var t,r;f.onmessage=function(a){var h,d=a.data,l=d.type,p=d.data;switch(l){case"init":if(u.TK.CHeap&&u.TK.CHeap.initThread)return void u.TK.CHeap.initThread(p).then((function(){f.postMessage({type:"ready"})}));f.postMessage({type:"ready"});break;case"run":f.postMessage({type:"running"}),r=e(p.params),h=p.port,(t=new o.Ay(h)).on(o.S3,function(){var e=(0,i.A)(s().mark((function e(i){var a,o,u,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.method,o=i.params,!c.Pc(r[a])){e.next=15;break}return e.prev=3,r[a].transfer||(r[a].transfer=[]),e.next=7,(u=r)[a].apply(u,(0,n.A)(o.params));case 7:f=e.sent,t.reply(i,f,null,r[a].transfer),r[a].transfer.length=0,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),t.reply(i,-2097152,{message:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}());break;case"stop":t&&t.destroy(),f.postMessage({type:"stopped"})}}}},26848:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(10576),i=n.TK;function a(e){var t;i.onmessage=function(r){var a=r.data,s=a.type,o=a.data;switch(s){case"init":if(n.TK.CHeap&&n.TK.CHeap.initThread)return void n.TK.CHeap.initThread(o).then((function(){i.postMessage({type:"ready"})}));i.postMessage({type:"ready"});break;case"run":t=e(o.params);break;case"stop":t&&t.then?t.then((function(e){i.postMessage({type:"stopped",data:e})})):i.postMessage({type:"stopped",data:t})}}}},67524:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(6837),i=r(25182),a=r(36443),s=r.n(a),o=r(84149),u=r(10576),c=r(67672),f=u.TK;function h(e){var t;f.onmessage=function(r){var a,h=r.data,d=h.type,l=h.data;switch(d){case"init":if(u.TK.CHeap&&u.TK.CHeap.initThread)return void u.TK.CHeap.initThread(l).then((function(){f.postMessage({type:"ready"})}));f.postMessage({type:"ready"});break;case"run":f.postMessage({type:"running"}),a=l.port,(t=new o.Ay(a)).on(o.S3,function(){var r=(0,i.A)(s().mark((function r(i){var a,o,u;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=i.method,o=i.params,!c.Pc(e[a])){r.next=15;break}return r.prev=3,e[a].transfer||(e[a].transfer=[]),r.next=7,e[a].apply(e,(0,n.A)(o.params));case 7:u=r.sent,t.reply(i,u,null,e[a].transfer),e[a].transfer.length=0,r.next=15;break;case 12:r.prev=12,r.t0=r.catch(3),t.reply(i,-2097152,{message:r.t0.message});case 15:case"end":return r.stop()}}),r,null,[[3,12]])})));return function(e){return r.apply(this,arguments)}}());break;case"stop":t&&t.destroy(),f.postMessage({type:"stopped"})}}}},73783:(e,t,r)=>{"use strict";r.d(t,{Tl:()=>g,Ts:()=>v,bh:()=>A,eu:()=>p,s2:()=>m,zr:()=>k}),r(25182);var n,i,a=r(81570),s=r(78716),o=r(134),u=(r(36443),r(80662)),c=r.n(u),f=r(61499),h=r(12085),d=r(40046),l=r(39638),p=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"atomic",void 0)}));function v(e){return d.M_(e,0,16,2),0}function m(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0!==(t=d.p_(e,0,1,16,2)))do{2!=t&&0===d.p_(e,1,2,16,2)||!r&&(0,l.A)()&&d.uk(e,2)}while(0!==(t=d.p_(e,0,2,16,2)));return 0}function A(e){return 0===d.p_(e,0,1,16,2)?0:16}function g(e){return 1!==d.jb(e,1,16,2)&&(d.M_(e,0,16,2),d.me(e,1)),0}function k(e){return d.M_(e,0,16,2),0}n=p.prototype,(i=new(c())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,4),(0,h.A)(n,f.g7,4),(0,h.A)(n,f.JY,i)},79490:(e,t,r)=>{"use strict";r.d(t,{Ts:()=>m,XR:()=>b,Zr:()=>y,bE:()=>g,uk:()=>k,zr:()=>A}),r(25182);var n,i,a=r(81570),s=r(78716),o=r(134),u=(r(36443),r(80662)),c=r.n(u),f=r(61499),h=r(12085),d=r(73783),l=r(63939),p=r(50932),v=r(40046);function m(e,t){return v.M_(e,0|t,16,2),d.Ts(e+4),0}function A(e){return d.zr(e+4),0}function g(e){return v.WQ(e,1,16,2),v.me(e,1),0}function k(e){for(;v.uk(e,0),v.jb(e,1,16,2)<=0;)v.WQ(e,1,16,2);return 0}function y(e){return d.s2(e+4),l.f[16](e)>0?(p.M[16](e,l.f[16](e)-1),d.Tl(e+4),0):(d.Tl(e+4),11)}function b(e,t){return 2!==v.j4(e,0,t)&&v.jb(e,1,16,2)<=0?(v.WQ(e,1,16,2),110):0}n=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"atomic",void 0),(0,o.A)(this,"mutex",void 0)})).prototype,(i=new(c())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("mutex",{0:d.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,4),(0,h.A)(n,f.g7,8),(0,h.A)(n,f.JY,i)},88506:(e,t,r)=>{"use strict";r.d(t,{nE:()=>B,pt:()=>I});var n=r(33423),i=r(6837),a=r(25182),s=r(36443),o=r.n(s),u=r(75062),c=r.n(u),f=r(80662),h=r.n(f),d=r(54001),l=r.n(d),p=r(11473),v=r(84149),m=r(61837),A=r(26429),g=r(67672),k=r(10576),y=r(62100),b=k.TK.Worker,x=k.TK.MessageChannel;r(81574),r(26848),r(67524);var w=(0,m.A)(81574,{varName:"init"}),_=((0,m.A)(26848,{varName:"init"}),(0,m.A)(67524,{varName:"init"}),c()("revoke")),T=new(h());function P(e,t){return"".concat(e,"_").concat(t)}function I(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,u=[];function c(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=(0,n.A)(e,r);return new(l())((function(t){var r={$worker:null,$ipc:null,$channel:null,$moduleId:(0,y.A)(s),$stackPointer:0,$instance:a,$type:"class"},n=Proxy.revocable(r,{get:function(t,n,i){if(t[n])return r[n];if(n in e.prototype&&"function"==typeof e.prototype[n]){var s=function(){return a[n].apply(a,arguments)};s.transfer=function(){return{invoke:function(){return a[n].apply(a,arguments)}}},t[n]=s}return t[n]}}),i=n.proxy,o=n.revoke;r[_]=o,t(i)}))}return t=function(){for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];var f;if(s instanceof b)f=s;else{var h,d=P(s,"class");if(T.has(d))h=T.get(d).url,T.get(d).refCount++;else{var g=(0,m.A)(s,{varName:"__module_".concat(e.name,"__"),exportName:"__".concat(e.name,"__"),pointName:e.name,exportIsClass:!0}),k="\n            ".concat(g,"\n            function run(params) {\n              params.unshift(null)\n              return new (Function.prototype.bind.apply(__module_").concat(e.name,"__.__").concat(e.name,"__, params))()\n            }\n            ").concat(w,"\n            init.default(run);\n          "),I=new Blob([k],{type:"text/javascript"});h=URL.createObjectURL(I),T.set(d,{url:h,refCount:1})}f=new b(h)}var B=new x;return new(l())((function(t,c){var h,d=p.s_.alignedAlloc(A.ZI,r.stackSize?r.stackSize+A.ZI&~A.ZI:A.pw),l=function(r){var c,h,l,p,m,A=r.data,g=A.type;switch(A.data,g){case"ready":f.postMessage({type:"run",data:{port:B.port2,params:n}},[B.port2].concat((0,i.A)(u)));break;case"running":c=new v.Ay(B.port1),h={$worker:f,$ipc:c,$channel:B,$moduleId:(0,y.A)(s),$stackPointer:d,$type:"class"},l=Proxy.revocable(h,{get:function(t,r,n){if(t[r])return h[r];if(r in e.prototype&&"function"==typeof e.prototype[r]){var i=function(){var e=(0,a.A)(o().mark((function e(){var t,n,i,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,n=new Array(t),i=0;i<t;i++)n[i]=a[i];return e.abrupt("return",c.request(r,{params:n}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i.transfer=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{invoke:(i=(0,a.A)(o().mark((function e(){var n,i,a,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=s.length,i=new Array(n),a=0;a<n;a++)i[a]=s[a];return e.abrupt("return",c.request(r,{params:i},t));case 2:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})};var i},t[r]=i}return t[r]}}),p=l.proxy,m=l.revoke,h[_]=m,t(p)}};f.onmessage=l,f.onmessage=l,f.postMessage({type:"init",data:{memory:p.ce,name:r.name||e.name,stackPointer:d,stackSize:null!==(h=r.stackSize)&&void 0!==h?h:A.pw}})}))},{run:A._7&&!r.disableWorker?t:c,transfer:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return u=n,{run:A._7&&!r.disableWorker?t:c}}}}function B(e){if(e.$worker&&(e.$worker.terminate(),e.$worker=null),e.$moduleId){if(g.Yj(e.$moduleId)){var t=P(e.$moduleId,e.$type);T.has(t)&&(T.get(t).refCount--,0===T.get(t).refCount&&(URL.revokeObjectURL(T.get(t).url),T.delete(t)))}e.$moduleId=null}if(e.$ipc&&(e.$ipc.destroy(),e.$ipc=null),e.$stackPointer&&(p.s_.free(e.$stackPointer),e.$stackPointer=0),e.$channel=null,e.$instance=null,e[_]){var r=e[_];e[_]=null,r()}}},6704:(e,t,r)=>{"use strict";r.d(t,{_:()=>o,i:()=>s});var n,i,a=r(134),s=(n={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(n,2,1),3,1),4,1),5,1),6,2),7,2),8,4),9,4),10,8),11,1),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(n,12,1),13,2),14,2),15,4),16,4),17,8),18,4),19,8),20,4),0,4),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(n,1,4),22,8),21,8),23,1),24,1)),o=(i={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(i,2,0),3,0),4,0),5,0),6,1),7,1),8,2),9,2),10,4),11,0),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(i,12,0),13,1),14,1),15,2),16,2),17,4),18,2),19,4),20,2),1,2),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(i,0,2),22,4),21,4),23,0),24,0))},19094:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(54001),f=r.n(c),h=r(11473),d=r(63939),l=r(50932),p=r(26429),v=r(14686),m=r(42518),A=r(73783),g=r(40046),k=function(){function e(t,r){(0,i.A)(this,e),(0,s.A)(this,"count",void 0),(0,s.A)(this,"url",void 0),(0,s.A)(this,"childThreads",void 0),this.count=t,this.url=r,this.childThreads=[]}var t,r;return(0,a.A)(e,[{key:"createTheadPoolEntry",value:(r=(0,n.A)(u().mark((function e(t){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(f())((function(e,n){var i=new Worker(r.url),a=h.s_.alignedAlloc(p.ZI,p.pw),s=h.s_.malloc(8);(0,v.sO)(s,0,8),l.M[15](s+4,0),l.M[15](s,2|d.f[15](s));var o=(0,h.pv)();i.onmessage=function(t){if("ready"===t.data.type){var r=a;(0,v.sO)(r,0,20),A.Ts(r+16),m.Ts(r+12),i.postMessage({type:"wait"}),e({id:o,thread:{thread:0,worker:i,stackPointer:a,threadDescriptor:s},threadWait:r})}},i.postMessage({type:"ready",data:{cheap:{memory:h.ce,stackPointer:a,stackSize:p.pw,id:o},runner:{resource:{tableSize:t.tableSize,module:t.module,initFuncs:t.initFuncs},options:{memoryBase:t.memoryBase,tableBase:t.tableBase,threadDescriptor:s,childImports:t.childImports},imports:t.childImports}}})})));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"ready",value:(t=(0,n.A)(u().mark((function e(t){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().all(new Array(this.count).fill(0).map((function(){return r.createTheadPoolEntry(t)})));case 2:this.childThreads=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"hasFree",value:function(){for(var e=0;e<this.childThreads.length;e++)if(0===d.f[15](this.childThreads[e].thread.threadDescriptor+4))return!0;return!1}},{key:"isPoolThread",value:function(e){for(var t=0;t<this.childThreads.length;t++)if(this.childThreads[t].thread.thread===e)return!0;return!1}},{key:"createThread",value:function(e,t,r,n){for(var i=0;i<this.childThreads.length;i++)if(0===d.f[15](this.childThreads[i].thread.threadDescriptor+4))return l.M[15](this.childThreads[i].thread.threadDescriptor+4,1),this.childThreads[i].thread.thread=e,l.M[15](e+8,2|d.f[15](e+8)),A.s2(this.childThreads[i].threadWait+16),l.M[20](this.childThreads[i].threadWait,e),l.M[20](this.childThreads[i].threadWait+4,r),l.M[20](this.childThreads[i].threadWait+8,n),A.Tl(this.childThreads[i].threadWait+16),void m.vP(this.childThreads[i].threadWait+12)}},{key:"joinThread",value:function(e,t){for(var r,n=0;n<this.childThreads.length;n++)if(this.childThreads[n].thread.thread===e){r=this.childThreads[n];break}return r?(1&d.f[15](e+8)||(g.uk(e+12,1),0!==t&&l.M[20](t,d.f[20](e+4)),l.M[15](r.thread.threadDescriptor+4,0)),0):-1}},{key:"detachThread",value:function(e){for(var t,r=0;r<this.childThreads.length;r++)if(this.childThreads[r].thread.thread===e){t=this.childThreads[r];break}return t?(l.M[15](t.thread.threadDescriptor,1|d.f[15](t.thread.threadDescriptor)),l.M[15](e+8,1|d.f[15](e+8)),0):-1}},{key:"destroy",value:function(){for(var e=0;e<this.childThreads.length;e++)h.s_.free(this.childThreads[e].thread.stackPointer),h.s_.free(this.childThreads[e].thread.threadDescriptor),this.childThreads[e].thread.worker.terminate();this.childThreads=[]}}]),e}()},16030:(e,t,r)=>{"use strict";r.d(t,{A:()=>z});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(80662),f=r.n(c),h=r(54001),d=r.n(h),l=r(63939),p=r(50932),v=r(11473),m=r(95335),A=r(72739),g=r(4624),k=r(67672),y=r(14686),b=r(14621),x=r(1708),w=r(20357),_=r(77775),T=r(61837),P=r(26429),I=r(40046),B=r(82854),C=r(80905),S=r(24565),M=r(39638),U=r(19094),R=r(42518),E=r(73783),D=r(95797),L="src/cheap/webassembly/WebAssemblyRunner.ts";r(81999);var F=(0,T.A)(81999,{varName:"init"});function O(){}var N=!1,z=function(){function e(t){var r,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.A)(this,e),(0,s.A)(this,"resource",void 0),(0,s.A)(this,"instance",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"builtinMalloc",void 0),(0,s.A)(this,"memoryBase",void 0),(0,s.A)(this,"tableBase",void 0),(0,s.A)(this,"childImports",void 0),(0,s.A)(this,"childUrl",void 0),(0,s.A)(this,"childBlob",void 0),(0,s.A)(this,"childThreads",void 0),(0,s.A)(this,"imports",void 0),(0,s.A)(this,"childReadyPromises",void 0),(0,s.A)(this,"threadPool",void 0),(0,s.A)(this,"initCalling",void 0),(0,s.A)(this,"promisingMap",void 0),this.resource=t,this.builtinMalloc=[],this.initCalling=!1,this.childThreads=new(f()),this.childReadyPromises=[],this.promisingMap=new(f()),k.Yj(a.childImports)?this.childImports=a.childImports:k.Ik(a.childImports)&&a.childImports instanceof Blob&&(this.childImports=URL.createObjectURL(a.childImports)),this.memoryBase=t.dataSize?v.s_.malloc(t.dataSize):0,a.thread&&a.tableBase&&v.XI.getPointer()!==a.tableBase&&v.XI.alloc(a.tableBase-v.XI.getPointer()),this.tableBase=t.tableSize?v.XI.alloc(t.tableSize):0,this.options=a,this.imports={env:{memory:v.ce,__stack_pointer:v.GE,__indirect_function_table:v.XI.table,clock_time_get:b.WU,clock_res_get:b.Lq,random_get:b.Pp,abort:b.h2,proc_exit:function(e){g.z3("wasm module exit, code: ".concat(e),L,156)},__syscall_renameat:O,__syscall_unlinkat:O,environ_get:b.B,environ_sizes_get:b.CK,fd_close:O,fd_fdstat_get:b.LS,fd_read:O,fd_seek:O,fd_write:b.nK,emscripten_builtin_malloc:function(e){var t=v.s_.malloc(e);return n.builtinMalloc.push(t),t},emscripten_builtin_free:function(e){v.s_.free(e)},emscripten_builtin_memalign:function(e,t,r){var i=v.s_.alignedAlloc(t,r);return 0!==i?(p.M[20](e,i),n.builtinMalloc.push(i),0):-1},emscripten_memcpy_big:function(e,t,r){(0,y.Mr)(e,t,r)},__libc_malloc:function(e){return v.s_.malloc(e)},__libc_free:function(e){v.s_.free(e)},malloc:function(e){if(!0===n.initCalling){var t=v.s_.malloc(e);return n.builtinMalloc.push(t),t}return v.s_.malloc(e)},calloc:function(e,t){return v.s_.calloc(e,t)},realloc:function(e,t){return v.s_.realloc(e,t)},aligned_alloc:function(e,t){return v.s_.alignedAlloc(e,t)},free:function(e){v.s_.free(e)},posix_memalign:function(e,t,r){var n=v.s_.alignedAlloc(t,r);return 0!==n?(p.M[20](e,n),0):-1},memalign:function(e,t){return v.s_.alignedAlloc(e,t)}},"GOT.func":{malloc:new WebAssembly.Global({mutable:!0,value:"i32"},2),calloc:new WebAssembly.Global({mutable:!0,value:"i32"},3),realloc:new WebAssembly.Global({mutable:!0,value:"i32"},4),aligned_alloc:new WebAssembly.Global({mutable:!0,value:"i32"},5),free:new WebAssembly.Global({mutable:!0,value:"i32"},1)}};var o=function(e,t,r,i){if(n.threadPool&&n.threadPool.hasFree())return n.threadPool.createThread(e,t,r,i),0;n.childUrl||n.createChildUrl();var a=new Worker(n.childUrl);p.M[15](e,(0,v.pv)()),p.M[16](e+12,1),p.M[15](e+8,0),p.M[20](e+4,0);var s,o=v.s_.alignedAlloc(P.ZI,P.pw),u=v.s_.malloc(8);(0,y.sO)(u,0,8),n.childThreads.set(l.f[15](e),{thread:e,worker:a,stackPointer:o,threadDescriptor:u});var c=new(d())((function(e){s=e}));return D.A.jspi||n.childReadyPromises.push(c),a.onmessage=function(e){var t=e.data,r=t.type;t.data,"run"===r&&s(0)},a.postMessage({type:"run",data:{cheap:{memory:v.ce,stackPointer:o,stackSize:P.pw,id:l.f[15](e)},runner:{resource:{tableSize:n.resource.tableSize,module:n.resource.threadModule.module,initFuncs:n.resource.threadModule.initFuncs},options:{memoryBase:n.options.memoryBase||n.memoryBase,tableBase:n.tableBase,thread:e,threadDescriptor:u,childImports:n.childImports},func:r,args:i,imports:n.childImports,thread:e}}}),D.A.jspi?c:0};if(m.X$(this.imports.env,{wasm_pthread_create:D.A.jspi?new WebAssembly.Suspending(o):o,wasm_pthread_join2:function(e,t){if(n.threadPool&&n.threadPool.isPoolThread(e))return n.threadPool.joinThread(e,t),0;if(1&l.f[15](e+8))return n.childThreads.delete(l.f[15](e)),0;I.uk(e+12,1),0!==t&&p.M[20](t,l.f[20](e+4));var r=n.childThreads.get(l.f[15](e));return v.s_.free(r.stackPointer),v.s_.free(r.threadDescriptor),r.worker.terminate(),n.childThreads.delete(l.f[15](e)),0},wasm_pthread_detach2:function(e){if(n.threadPool&&n.threadPool.isPoolThread(e))return n.threadPool.detachThread(e),0;var t=n.childThreads.get(l.f[15](e));p.M[15](t.threadDescriptor,1|l.f[15](t.threadDescriptor)),p.M[15](e+8,1|l.f[15](e+8))}}),m.X$(this.imports.env,x),m.X$(this.imports.env,w),m.X$(this.imports.env,_),this.memoryBase?m.X$(this.imports.env,{__memory_base:this.memoryBase}):a.memoryBase&&m.X$(this.imports.env,{__memory_base:a.memoryBase}),this.tableBase&&m.X$(this.imports.env,{__table_base:this.tableBase}),null!==(r=a.imports)&&void 0!==r&&r.env&&(m.X$(this.imports.env,a.imports.env),a.envKey&&a.importMap)){var u={};m.__(this.imports.env,(function(e,t){a.importMap[t]&&(u[a.importMap[t]]=e)})),this.imports[a.envKey]=u}this.imports.wasi_snapshot_preview1=this.imports.env}var t,r,o,c;return(0,a.A)(e,[{key:"createChildUrl",value:function(){var t=(0,T.A)(16030,{varName:"__WebAssemblyRunner__",exportName:"__WebAssemblyRunner__",pointName:e.name,exportIsClass:!0}),r="\n      ".concat(t,"\n      ").concat(F,"\n      var preRun;\n      ").concat(this.childImports?"\n      preRun = import('".concat(this.childImports,"')\n      "):"","\n      init.default(preRun);\n    ");this.childBlob=new Blob([r],{type:"text/javascript"}),this.childUrl=URL.createObjectURL(this.childBlob)}},{key:"overrideAtomic",value:function(){x.override({atomic_add_i8:B.KJ.exports.add8,atomic_sub_i8:B.KJ.exports.sub8,atomic_and_i8:B.KJ.exports.and8,atomic_or_i8:B.KJ.exports.or8,atomic_xor_i8:B.KJ.exports.xor8,atomic_store_i8:B.KJ.exports.store8,atomic_load_i8:B.KJ.exports.load8,atomic_compare_exchange_i8:B.KJ.exports.compare_exchange8,atomic_exchange_i8:B.KJ.exports.exchange8,atomic_add_i16:B.KJ.exports.add16,atomic_sub_i16:B.KJ.exports.sub16,atomic_and_i16:B.KJ.exports.and16,atomic_or_i16:B.KJ.exports.or16,atomic_xor_i16:B.KJ.exports.xor16,atomic_store_i16:B.KJ.exports.store16,atomic_load_i16:B.KJ.exports.load16,atomic_compare_exchange_i16:B.KJ.exports.compare_exchange16,atomic_exchange_i16:B.KJ.exports.exchange16,atomic_add_i32:B.KJ.exports.add32,atomic_sub_i32:B.KJ.exports.sub32,atomic_and_i32:B.KJ.exports.and32,atomic_or_i32:B.KJ.exports.or32,atomic_xor_i32:B.KJ.exports.xor32,atomic_store_i32:B.KJ.exports.store32,atomic_load_i32:B.KJ.exports.load32,atomic_compare_exchange_i32:B.KJ.exports.compare_exchange32,atomic_exchange_i32:B.KJ.exports.exchange32,atomic_add_i64:B.KJ.exports.add64,atomic_sub_i64:B.KJ.exports.sub64,atomic_and_i64:B.KJ.exports.and64,atomic_or_i64:B.KJ.exports.or64,atomic_xor_i64:B.KJ.exports.xor64,atomic_store_i64:B.KJ.exports.store64,atomic_load_i64:B.KJ.exports.load64,atomic_compare_exchange_i64:B.KJ.exports.compare_exchange64,atomic_exchange_i64:B.KJ.exports.exchange64,atomics_notify:B.KJ.exports.notify,atomics_wait:B.KJ.exports.wait}),m.X$(this.imports.env,x)}},{key:"run",value:(c=(0,n.A)(u().mark((function e(t,r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.Ik(t)&&m.X$(this.options.imports,t),!(0,M.A)()||S.LK||!S.Ko()||!this.resource.threadModule){e.next=5;break}return e.next=4,S.Ts(v.ce,w.override);case 4:m.X$(this.imports.env,w);case 5:if(C.LK||!C.Ko()){e.next=8;break}return e.next=8,C.Ts(v.ce);case 8:return!N&&B.Ko()&&(N=!0,this.overrideAtomic()),e.next=11,WebAssembly.instantiate(this.resource.module,this.imports);case 11:if(this.instance=e.sent,this.initRunTime(),!(this.resource.threadModule&&this.resource.enableThreadPool&&r>0)||D.A.jspi){e.next=20;break}return this.childUrl||this.createChildUrl(),n=r,this.resource.enableThreadCountRate&&(n*=this.resource.enableThreadCountRate),this.threadPool=new U.A(n,this.childUrl),e.next=20,this.threadPool.ready({tableSize:this.resource.tableSize,module:this.resource.threadModule.module,initFuncs:this.resource.threadModule.initFuncs,memoryBase:this.options.memoryBase||this.memoryBase,tableBase:this.tableBase,childImports:this.childImports});case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"runAsChild",value:(o=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.Ik(t)&&m.X$(this.options.imports,t),S.LK||!S.Ko()){e.next=5;break}return e.next=4,S.Ts(v.ce,w.override);case 4:m.X$(this.imports.env,w);case 5:!N&&B.Ko()&&(N=!0,this.overrideAtomic()),this.instance=new WebAssembly.Instance(this.resource.module,this.imports),this.initRunTime();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"childrenThreadReady",value:(r=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.childReadyPromises.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.childReadyPromises,this.childReadyPromises=[],e.next=6,d().all(t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"initRunTime",value:function(){var e=this;this.builtinMalloc=[],this.initCalling=!0,k.YO(this.resource.initFuncs)&&A.__(this.resource.initFuncs,(function(t){var r;if(e.asm[t]&&(r=e.asm[t]),r)return r()})),this.initCalling=!1}},{key:"call",value:function(e){if(!this.asm)return-1;var t;if(this.asm[e]?t=this.asm[e]:this.options.exportMap&&this.options.exportMap[e]&&this.asm[this.options.exportMap[e]]&&(t=this.asm[this.options.exportMap[e]]),t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return t.apply(null,n)}g.z3("the wasm module has not function ".concat(e," to call"),L,596)}},{key:"callAsync",value:(t=(0,n.A)(u().mark((function e(t){var r,n,i,a,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.asm&&D.A.jspi){e.next=2;break}return e.abrupt("return",-1);case 2:if(this.promisingMap.has(t)?r=this.promisingMap.get(t):(this.asm[t]?r=this.asm[t]:this.options.exportMap&&this.options.exportMap[t]&&this.asm[this.options.exportMap[t]]&&(r=this.asm[this.options.exportMap[t]]),r=WebAssembly.promising(r),this.promisingMap.set(t,r)),!r){e.next=8;break}for(n=s.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=s[a];return e.abrupt("return",r.apply(null,i));case 8:g.z3("the wasm module has not function ".concat(t," to call"),L,635);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"asm",get:function(){return this.instance&&this.instance.exports}},{key:"getInstance",value:function(){return this.instance}},{key:"destroy",value:function(){var e,t=this;null!==(e=this.builtinMalloc)&&void 0!==e&&e.length&&(A.__(this.builtinMalloc,(function(e){v.s_.free(e)})),this.builtinMalloc.length=0),this.memoryBase&&(v.s_.free(this.memoryBase),this.memoryBase=null),this.tableBase&&(v.XI.free(this.tableBase),this.tableBase=null),this.childImports&&(URL.revokeObjectURL(this.childImports),this.childImports=null),this.childUrl&&(URL.revokeObjectURL(this.childUrl),this.childUrl=null),this.childBlob=null,this.childReadyPromises.length=0,this.childThreads.size&&this.childThreads.forEach((function(e,r){1&l.f[15](e.threadDescriptor)||(g.R8("has child thread running, maybe resource leakage",L,680),e.worker.terminate(),p.M[16](e.thread+12,0),e.stackPointer&&v.s_.free(e.stackPointer),v.s_.free(e.threadDescriptor),t.childThreads.delete(r))})),this.builtinMalloc=null,this.instance=null,this.options.thread&&(this.options.threadDescriptor&&p.M[15](this.options.threadDescriptor+4,0),this.options.threadDescriptor&&1&l.f[15](this.options.threadDescriptor)?2&l.f[15](this.options.threadDescriptor)||(v.wE&&v.s_.free(v.wE),v.s_.free(this.options.threadDescriptor),self.close()):(p.M[16](this.options.thread+12,0),I.me(this.options.thread+12,1))),this.threadPool&&this.threadPool.destroy(),this.threadPool=null,this.promisingMap&&(this.promisingMap.clear(),this.promisingMap=null)}}],[{key:"getTable",value:function(){return v.XI}},{key:"mutexLock",value:function(e){E.s2(e)}},{key:"mutexUnlock",value:function(e){E.Tl(e)}},{key:"condWait",value:function(e,t){R.uk(e,t)}},{key:"readPointer",value:function(e){return l.f[20](e)}},{key:"writePointer",value:function(e,t){p.M[20](e,t)}}]),e}()},76045:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var n=r(25182),i=r(54001),a=r.n(i),s=r(36443),o=r.n(s),u=r(67672),c=r(24175),f=r(34531),h=r(88096),d=r(92647),l=r(95335),p=r(26429);function v(e){return m.apply(this,arguments)}function m(){return(m=(0,n.A)(o().mark((function e(t){var r,n,i,a,s,u,c,f,d,l,v,m,A,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=t.ioWriter,e.next=4,t.ioReader.readUint32();case 4:return e.t1=e.sent,e.next=7,e.t0.writeUint32.call(e.t0,e.t1);case 7:return e.t2=t.ioWriter,e.next=10,t.ioReader.readUint32();case 10:return e.t3=e.sent,e.next=13,e.t2.writeUint32.call(e.t2,e.t3);case 13:if(!t.compileStopped){e.next=17;break}return t.abortController&&t.abortController.abort(),e.abrupt("break",204);case 17:return e.next=19,t.ioReader.readUint8();case 19:if(r=e.sent,!t.options.child){e.next=46;break}if(11!==r){e.next=46;break}return e.next=24,t.ioWriter.writeUint8(r);case 24:return e.next=26,(0,h.$z)(t.ioWriter,7);case 26:return e.next=28,(0,h.$z)(t.ioWriter,1);case 28:return e.next=30,(0,h.$z)(t.ioWriter,0);case 30:return e.next=32,t.ioWriter.writeUint8(65);case 32:return e.next=34,t.ioWriter.writeUint8(0);case 34:return e.next=36,t.ioWriter.writeUint8(11);case 36:return e.next=38,(0,h.$z)(t.ioWriter,1);case 38:return e.next=40,t.ioWriter.writeUint8(0);case 40:return e.next=42,(0,h.GG)(t.ioReader);case 42:return n=e.sent,e.next=45,t.ioReader.skip(n);case 45:return e.abrupt("continue",13);case 46:return e.next=48,t.ioWriter.writeUint8(r);case 48:return e.next=50,(0,h.GG)(t.ioReader);case 50:return i=e.sent,e.next=53,(0,h.$z)(t.ioWriter,i);case 53:if(a=t.ioReader.getPos(),11!==r){e.next=85;break}return e.next=57,(0,h.GG)(t.ioReader);case 57:return s=e.sent,e.next=60,(0,h.$z)(t.ioWriter,s);case 60:if(!s){e.next=83;break}return e.t4=h.$z,e.t5=t.ioWriter,e.next=65,(0,h.GG)(t.ioReader);case 65:return e.t6=e.sent,e.next=68,(0,e.t4)(e.t5,e.t6);case 68:return e.next=71,t.ioReader.readUint8();case 71:return u=e.sent,e.next=74,t.ioWriter.writeUint8(u);case 74:if(11!==u){e.next=76;break}return e.abrupt("break",78);case 76:e.next=68;break;case 78:return e.next=80,(0,h.GG)(t.ioReader);case 80:return t.data.dataSize=e.sent,e.next=83,(0,h.$z)(t.ioWriter,t.data.dataSize);case 83:e.next=198;break;case 85:if(2!==r){e.next=198;break}return e.next=88,(0,h.GG)(t.ioReader);case 88:return c=e.sent,e.next=91,(0,h.$z)(t.ioWriter,c);case 91:f=0;case 92:if(!c--){e.next=198;break}return e.next=95,(0,h.GG)(t.ioReader);case 95:return d=e.sent,e.next=98,(0,h.$z)(t.ioWriter,d);case 98:return e.t7=t.ioWriter,e.next=101,t.ioReader.readBuffer(d);case 101:return e.t8=e.sent,e.next=104,e.t7.writeBuffer.call(e.t7,e.t8);case 104:return e.next=106,(0,h.GG)(t.ioReader);case 106:return l=e.sent,e.next=109,(0,h.$z)(t.ioWriter,l);case 109:return e.t9=t.ioWriter,e.next=112,t.ioReader.readBuffer(l);case 112:return e.t10=e.sent,e.next=115,e.t9.writeBuffer.call(e.t9,e.t10);case 115:return e.next=117,t.ioReader.readUint8();case 117:return v=e.sent,e.next=120,t.ioWriter.writeUint8(v);case 120:e.t11=v,e.next=0===e.t11?123:3===e.t11?131:2===e.t11?146:1===e.t11?166:194;break;case 123:return e.t12=h.$z,e.t13=t.ioWriter,e.next=127,(0,h.GG)(t.ioReader);case 127:return e.t14=e.sent,e.next=130,(0,e.t12)(e.t13,e.t14);case 130:return e.abrupt("break",194);case 131:return e.t15=h.p7,e.t16=t.ioWriter,e.next=135,(0,h.Ee)(t.ioReader);case 135:return e.t17=e.sent,e.next=138,(0,e.t15)(e.t16,e.t17);case 138:return e.t18=h.$z,e.t19=t.ioWriter,e.next=142,(0,h.GG)(t.ioReader);case 142:return e.t20=e.sent,e.next=145,(0,e.t18)(e.t19,e.t20);case 145:return e.abrupt("break",194);case 146:return e.next=148,(0,h.GG)(t.ioReader);case 148:return m=e.sent,t.options.enableThread?m|=2:m&=-3,e.next=152,(0,h.$z)(t.ioWriter,m);case 152:return e.t21=h.$z,e.t22=t.ioWriter,e.next=156,(0,h.GG)(t.ioReader);case 156:return e.t23=e.sent,e.next=159,(0,e.t21)(e.t22,e.t23);case 159:if(!(1&m)){e.next=164;break}return e.next=162,(0,h.GG)(t.ioReader);case 162:return e.next=164,(0,h.$z)(t.ioWriter,p.Gx);case 164:return f++,e.abrupt("break",194);case 166:return e.t24=h.p7,e.t25=t.ioWriter,e.next=170,(0,h.Ee)(t.ioReader);case 170:return e.t26=e.sent,e.next=173,(0,e.t24)(e.t25,e.t26);case 173:return e.next=175,(0,h.GG)(t.ioReader);case 175:return A=e.sent,e.next=178,(0,h.$z)(t.ioWriter,A);case 178:return e.next=180,(0,h.GG)(t.ioReader);case 180:return g=e.sent,e.next=183,(0,h.$z)(t.ioWriter,g);case 183:if(t.data.tableSize=g,!(1&A)){e.next=192;break}return e.t27=h.$z,e.t28=t.ioWriter,e.next=189,(0,h.GG)(t.ioReader);case 189:return e.t29=e.sent,e.next=192,(0,e.t27)(e.t28,e.t29);case 192:return f++,e.abrupt("break",194);case 194:if(2!==f){e.next=196;break}return e.abrupt("break",198);case 196:e.next=92;break;case 198:if(!(i-Number(t.ioReader.getPos()-a))){e.next=202;break}return e.next=202,t.ioReader.pipe(t.ioWriter,i-Number(t.ioReader.getPos()-a));case 202:e.next=13;break;case 204:e.next=218;break;case 206:if(e.prev=206,e.t30=e.catch(0),-1048576===t.ioReader.error?t.bufferEnded=!0:t.error=e.t30,!t.ioReader.remainingLength()){e.next=216;break}return e.t31=t.ioWriter,e.next=213,t.ioReader.readBuffer(t.ioReader.remainingLength());case 213:return e.t32=e.sent,e.next=216,e.t31.writeBuffer.call(e.t31,e.t32);case 216:return e.next=218,t.ioWriter.flush();case 218:case"end":return e.stop()}}),e,null,[[0,206]])})))).apply(this,arguments)}function A(e){return g.apply(this,arguments)}function g(){return g=(0,n.A)(o().mark((function e(t){var r,i,s,h,m,A,g,k,y,b=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.length>1&&void 0!==b[1]?b[1]:{},r=l.X$({enableThread:p._7,initFuncs:r.child?[]:["__wasm_apply_data_relocs"]},r),!u.ai(t.dataSize)||!u.ai(t.tableSize)){e.next=30;break}if(s=t.dataSize,h=t.dataSize,!u.Yj(t.source)){e.next=24;break}if(A={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},!u.Pc(WebAssembly.compileStreaming)){e.next=13;break}return e.next=10,WebAssembly.compileStreaming(fetch(t.source,A));case 10:i=e.sent,e.next=22;break;case 13:return e.next=15,fetch(t.source,A);case 15:return g=e.sent,e.next=18,g.arrayBuffer();case 18:return m=e.sent,e.next=21,WebAssembly.compile(m);case 21:i=e.sent;case 22:e.next=28;break;case 24:return e.next=26,WebAssembly.compile(t.source);case 26:i=e.sent,m=u.sv(t.source)?t.source:t.source.buffer;case 28:e.next=48;break;case 30:if(k={ioReader:new c.A(1048576),ioWriter:new f.A(1048576),bufferEnded:!1,compileStopped:!1,error:"",abortController:null,pullResolve:null,bufferResolve:null,buffers:[],data:{},options:r},y=new Response(new ReadableStream({start:function(e){return(0,n.A)(o().mark((function r(){var i,s,c,f,h,d,l,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!u.Yj(t.source)){r.next=11;break}return AbortController&&(k.abortController=new AbortController),s={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade",signal:null===(i=k.abortController)||void 0===i?void 0:i.signal},r.next=5,fetch(t.source,s);case 5:(c=r.sent).ok&&c.status>=200&&c.status<=299?f=c.body.getReader():e.error("Http code invalid, ".concat(c.status," ").concat(c.statusText)),h=[],k.ioReader.onFlush=function(){var e=(0,n.A)(o().mark((function e(t){var r,n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=0;h.length&&r<t.length;)(n=h.shift()).length>t.length-r?(t.set(n.subarray(0,t.length-r),r),h.unshift(n.subarray(t.length-r)),r=t.length):(t.set(n,r),r+=n.length);if(!(r>=t.length)){e.next=4;break}return e.abrupt("return",t.length);case 4:return e.next=6,f.read();case 6:if(i=e.sent,a=i.value,!i.done){e.next=13;break}return e.abrupt("return",r>0?r:-1048576);case 13:if(k.buffers.push(a),!(a.length>t.length-r)){e.next=20;break}return t.set(a.subarray(0,t.length-r),r),h.push(a.subarray(t.length-r)),e.abrupt("return",t.length);case 20:return t.set(a,r),r+=a.length,e.abrupt("return",r);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.next=15;break;case 11:d=0,l=t.source.byteLength,p=u.sv(t.source)?new Uint8Array(t.source):t.source,k.ioReader.onFlush=function(){var e=(0,n.A)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d>=l)){e.next=2;break}return e.abrupt("return",-1048576);case 2:return r=Math.min(t.length,l-d),t.set(p.subarray(d,d+r),0),d+=r,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 15:k.ioWriter.onFlush=function(){var e=(0,n.A)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.pullResolve){e.next=4;break}return k.pullResolve(t.slice()),k.pullResolve=null,e.abrupt("return",0);case 4:return e.next=6,new(a())((function(e,t){k.bufferResolve=e}));case 6:return e.sent.enqueue(t.slice()),e.abrupt("return",0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v(k);case 17:case"end":return r.stop()}}),r)})))()},pull:function(e){return(0,n.A)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k.error){t.next=3;break}return e.close(),t.abrupt("return");case 3:if(!k.bufferResolve){t.next=7;break}return k.bufferResolve(e),k.bufferResolve=null,t.abrupt("return");case 7:return t.t0=e,t.next=10,new(a())((function(e,t){k.pullResolve=e}));case 10:t.t1=t.sent,t.t0.enqueue.call(t.t0,t.t1),k.bufferEnded?e.close():k.error&&e.error(k.error);case 13:case"end":return t.stop()}}),t)})))()},cancel:function(e){k.compileStopped=!0}}),{headers:{"Content-Type":"application/wasm"}}),!u.Pc(WebAssembly.compileStreaming)){e.next=38;break}return e.next=35,WebAssembly.compileStreaming(y);case 35:i=e.sent,e.next=45;break;case 38:return e.t0=WebAssembly,e.next=41,y.arrayBuffer();case 41:return e.t1=e.sent,e.next=44,e.t0.compile.call(e.t0,e.t1);case 44:i=e.sent;case 45:m=u.Yj(t.source)?(0,d.A)(Uint8Array,k.buffers).buffer:u.sv(t.source)?t.source:t.source.buffer,s=k.data.tableSize,h=k.data.dataSize;case 48:if(!r.child){e.next=50;break}return e.abrupt("return",{module:i,initFuncs:r.initFuncs||[]});case 50:return e.abrupt("return",{module:i,tableSize:s,dataSize:h,initFuncs:r.initFuncs||[],buffer:m});case 51:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}},81999:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(25182),i=r(36443),a=r.n(i),s=r(10576);s.TK.imports={env:{}};var o,u,c=s.TK,f=0;function h(e){c.onmessage=function(t){var r=t.data,i=r.type,h=r.data;switch(i){case"run":c.postMessage({type:"run"}),s.TK.CHeap&&s.TK.CHeap.initThread&&s.TK.CHeap.initThread(h.cheap).then((function(){function t(){s.TK.__SELF_THREAD__=h.runner.thread,h.runner.options.imports=s.TK.imports,(o=new __WebAssemblyRunner__.__WebAssemblyRunner__(h.runner.resource,h.runner.options)).runAsChild().then((function(){__WebAssemblyRunner__.__WebAssemblyRunner__.getTable().get(h.runner.func)(h.runner.args),o.destroy()}))}e?e.then((function(){t()})):t()}));break;case"ready":u=h.runner,f=h.cheap.stackPointer,s.TK.CHeap&&s.TK.CHeap.initThread&&s.TK.CHeap.initThread(h.cheap).then((function(){e?e.then((function(){c.postMessage({type:"ready"})})):c.postMessage({type:"ready"})}));break;case"wait":var d=function(){var e=(0,n.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(__WebAssemblyRunner__.__WebAssemblyRunner__.mutexLock(f+16);0===__WebAssemblyRunner__.__WebAssemblyRunner__.readPointer(f);)__WebAssemblyRunner__.__WebAssemblyRunner__.condWait(f+12,f+16);return s.TK.__SELF_THREAD__=__WebAssemblyRunner__.__WebAssemblyRunner__.readPointer(f),u.options.thread=__WebAssemblyRunner__.__WebAssemblyRunner__.readPointer(f),u.thread=__WebAssemblyRunner__.__WebAssemblyRunner__.readPointer(f),u.func=__WebAssemblyRunner__.__WebAssemblyRunner__.readPointer(f+4),u.args=__WebAssemblyRunner__.__WebAssemblyRunner__.readPointer(f+8),o=new __WebAssemblyRunner__.__WebAssemblyRunner__(u.resource,u.options),e.next=9,o.runAsChild();case 9:__WebAssemblyRunner__.__WebAssemblyRunner__.getTable().get(u.func)(u.args),o.destroy(),__WebAssemblyRunner__.__WebAssemblyRunner__.writePointer(f,0),__WebAssemblyRunner__.__WebAssemblyRunner__.mutexUnlock(f+16),e.next=0;break;case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();u.options.imports=s.TK.imports,d()}}}},80905:(e,t,r)=>{"use strict";r.d(t,{Ko:()=>v,LK:()=>n,Ts:()=>m});var n,i=r(25182),a=r(36443),s=r.n(a),o=r(11473),u=r(4919),c=r(4624),f=r(97134),h=r.n(f),d=r(88096),l="src/cheap/webassembly/runtime/asm/libc.ts",p=!0;function v(){return p}function m(e){return A.apply(this,arguments)}function A(){return(A=(0,i.A)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer)){e.next=14;break}return r=(0,u.E_)(h()),d.DD(r,!0),e.next=6,WebAssembly.instantiate(r,{env:{memory:t,malloc:function(e){return o.s_.malloc(e)},calloc:function(e,t){return o.s_.calloc(e,t)},realloc:function(e,t){return o.s_.realloc(e,t)},aligned_alloc:function(e,t){return o.s_.alignedAlloc(e,t)},free:function(e){o.s_.free(e)}}});case 6:n=e.sent.instance,o.XI.set(2,n.exports.malloc),o.XI.set(1,n.exports.free),o.XI.set(3,n.exports.calloc),o.XI.set(4,n.exports.realloc),o.XI.set(5,n.exports.alignedAlloc),e.next=16;break;case 14:return p=!1,e.abrupt("return");case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),p=!1,c.R8("thread asm not support, cannot use asm thread function",l,64);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}},24565:(e,t,r)=>{"use strict";r.d(t,{Ko:()=>p,LK:()=>n,Ts:()=>v});var n,i=r(25182),a=r(36443),s=r.n(a),o=r(4919),u=r(4624),c=r(5454),f=r.n(c),h=r(88096),d="src/cheap/webassembly/runtime/asm/thread.ts",l=!0;function p(){return l}function v(e,t){return m.apply(this,arguments)}function m(){return(m=(0,i.A)(s().mark((function e(t,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer)){e.next=9;break}return i=(0,o.E_)(f()),h.DD(i,!0),e.next=6,WebAssembly.instantiate(i,{env:{memory:t}});case 6:n=e.sent.instance,e.next=11;break;case 9:return l=!1,e.abrupt("return");case 11:r({wasm_pthread_mutex_lock:n.exports.lock,wasm_pthread_mutex_trylock:n.exports.trylock,wasm_pthread_mutex_unlock:n.exports.unlock,wasm_pthread_cond_wait:n.exports.wait,wasm_pthread_cond_timedwait:n.exports.timedwait,wasm_pthread_cond_signal:n.exports.signal,wasm_pthread_cond_broadcast:n.exports.broadcast}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l=!1,u.R8("thread asm not support, cannot use asm thread function",d,67);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}},1708:(e,t,r)=>{"use strict";r.r(t),r.d(t,{atomic_add_i16:()=>p,atomic_add_i32:()=>w,atomic_add_i64:()=>U,atomic_add_i8:()=>a,atomic_and_i16:()=>m,atomic_and_i32:()=>T,atomic_and_i64:()=>E,atomic_and_i8:()=>o,atomic_compare_exchange_i16:()=>b,atomic_compare_exchange_i32:()=>S,atomic_compare_exchange_i64:()=>N,atomic_compare_exchange_i8:()=>d,atomic_exchange_i16:()=>x,atomic_exchange_i32:()=>M,atomic_exchange_i64:()=>z,atomic_exchange_i8:()=>l,atomic_load_i16:()=>y,atomic_load_i32:()=>C,atomic_load_i64:()=>O,atomic_load_i8:()=>h,atomic_or_i16:()=>A,atomic_or_i32:()=>P,atomic_or_i64:()=>D,atomic_or_i8:()=>u,atomic_store_i16:()=>k,atomic_store_i32:()=>B,atomic_store_i64:()=>F,atomic_store_i8:()=>f,atomic_sub_i16:()=>v,atomic_sub_i32:()=>_,atomic_sub_i64:()=>R,atomic_sub_i8:()=>s,atomic_xor_i16:()=>g,atomic_xor_i32:()=>I,atomic_xor_i64:()=>L,atomic_xor_i8:()=>c,atomics_notify:()=>W,atomics_wait:()=>V,atomics_wait_timeout:()=>G,override:()=>j});var n=r(40046),i=r(6704),a=function(e,t){return n.WQ(e,t,12,i._[12])},s=function(e,t){return n.jb(e,t,12,i._[12])},o=function(e,t){return n.Uo(e,t,12,i._[12])},u=function(e,t){return n.or(e,t,12,i._[12])},c=function(e,t){return n.I8(e,t,12,i._[12])},f=function(e,t){return n.M_(e,t,12,i._[12])},h=function(e){return n.Hh(e,12,i._[12])},d=function(e,t,r){return n.p_(e,t,r,12,i._[12])},l=function(e,t){return n.cv(e,t,12,i._[12])},p=function(e,t){return n.WQ(e,t,14,i._[14])},v=function(e,t){return n.jb(e,t,14,i._[14])},m=function(e,t){return n.Uo(e,t,14,i._[14])},A=function(e,t){return n.or(e,t,14,i._[14])},g=function(e,t){return n.I8(e,t,14,i._[14])},k=function(e,t){return n.M_(e,t,14,i._[14])},y=function(e){return n.Hh(e,14,i._[14])},b=function(e,t,r){return n.p_(e,t,r,14,i._[14])},x=function(e,t){return n.cv(e,t,14,i._[14])},w=function(e,t){return n.WQ(e,t,16,i._[16])},_=function(e,t){return n.jb(e,t,16,i._[16])},T=function(e,t){return n.Uo(e,t,16,i._[16])},P=function(e,t){return n.or(e,t,16,i._[16])},I=function(e,t){return n.I8(e,t,16,i._[16])},B=function(e,t){return n.M_(e,t,16,i._[16])},C=function(e){return n.Hh(e,16,i._[16])},S=function(e,t,r){return n.p_(e,t,r,16,i._[16])},M=function(e,t){return n.cv(e,t,16,i._[16])},U=function(e,t){return n.WQ(e,t,21,i._[21])},R=function(e,t){return n.jb(e,t,21,i._[21])},E=function(e,t){return n.Uo(e,t,21,i._[21])},D=function(e,t){return n.or(e,t,21,i._[21])},L=function(e,t){return n.I8(e,t,21,i._[21])},F=function(e,t){return n.M_(e,t,21,i._[21])},O=function(e){return n.Hh(e,21,i._[21])},N=function(e,t,r){return n.p_(e,t,r,21,i._[21])},z=function(e,t){return n.cv(e,t,21,i._[21])},W=function(e,t){return n.me(e,t)},V=function(e,t){return n.uk(e,t)},G=function(e,t,r){return n.j4(e,t,0|Number(0xffffffffn&r))};function j(e){e.atomic_add_i8&&(a=e.atomic_add_i8),e.atomic_sub_i8&&(s=e.atomic_sub_i8),e.atomic_and_i8&&(o=e.atomic_and_i8),e.atomic_or_i8&&(u=e.atomic_or_i8),e.atomic_xor_i8&&(c=e.atomic_xor_i8),e.atomic_store_i8&&(f=e.atomic_store_i8),e.atomic_load_i8&&(h=e.atomic_load_i8),e.atomic_compare_exchange_i8&&(d=e.atomic_compare_exchange_i8),e.atomic_exchange_i8&&(l=e.atomic_exchange_i8),e.atomic_add_i16&&(p=e.atomic_add_i16),e.atomic_sub_i16&&(v=e.atomic_sub_i16),e.atomic_and_i16&&(m=e.atomic_and_i16),e.atomic_or_i16&&(A=e.atomic_or_i16),e.atomic_xor_i16&&(g=e.atomic_xor_i16),e.atomic_store_i16&&(k=e.atomic_store_i16),e.atomic_load_i16&&(y=e.atomic_load_i16),e.atomic_compare_exchange_i16&&(b=e.atomic_compare_exchange_i16),e.atomic_exchange_i16&&(x=e.atomic_exchange_i16),e.atomic_add_i32&&(w=e.atomic_add_i32),e.atomic_sub_i32&&(_=e.atomic_sub_i32),e.atomic_and_i32&&(T=e.atomic_and_i32),e.atomic_or_i32&&(P=e.atomic_or_i32),e.atomic_xor_i32&&(I=e.atomic_xor_i32),e.atomic_store_i32&&(B=e.atomic_store_i32),e.atomic_load_i32&&(C=e.atomic_load_i32),e.atomic_compare_exchange_i32&&(S=e.atomic_compare_exchange_i32),e.atomic_exchange_i32&&(M=e.atomic_exchange_i32),e.atomic_add_i64&&(U=e.atomic_add_i64),e.atomic_sub_i64&&(R=e.atomic_sub_i64),e.atomic_and_i64&&(E=e.atomic_and_i64),e.atomic_or_i64&&(D=e.atomic_or_i64),e.atomic_xor_i64&&(L=e.atomic_xor_i64),e.atomic_store_i64&&(F=e.atomic_store_i64),e.atomic_load_i64&&(O=e.atomic_load_i64),e.atomic_compare_exchange_i64&&(N=e.atomic_compare_exchange_i64),e.atomic_exchange_i64&&(z=e.atomic_exchange_i64),e.atomics_notify&&(W=e.atomics_notify),e.atomics_wait&&(V=e.atomics_wait),e.atomics_wait_timeout&&(G=e.atomics_wait_timeout)}},14621:(e,t,r)=>{"use strict";r.d(t,{B:()=>v,CK:()=>m,LS:()=>A,Lq:()=>b,Pp:()=>x,WU:()=>y,h2:()=>k,nK:()=>g});var n,i=r(23509),a=r(50932),s=r(63939),o=r(14686),u=r(50011),c=[null,[],[]],f=0,h=28,d={},l="./this.program";function p(){if(!n){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===("undefined"==typeof navigator?"undefined":(0,i.A)(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var t in d)e[t]=d[t];var r=[];for(var a in e)r.push(a+"="+e[a]);n=r}return n}function v(e,t){var r=0;return p().forEach((function(n,i){var s=t+r;a.M[8](e+4*i,s),function(e,t,r){for(var n=0;n<e.length;++n)a.M[4](t,128&e.charCodeAt(n)?-(256-(255&e.charCodeAt(n))):255&e.charCodeAt(n)),t+=1;a.M[4](t,0)}(n,s),r+=n.length+1})),0}function m(e,t){var r=p();a.M[8](e,(0|r.length)>>>0);var n=0;return r.forEach((function(e){n+=e.length+1})),a.M[8](t,(0|n)>>>0),0}function A(e,t){var r=0;return 0==e?r=2:1!=e&&2!=e||(r=64),a.M[11](t,2),a.M[13](t+2,1),a.M[15](t+8,0|r),a.M[15](t+12,0),a.M[17](t+16,BigInt(0)),f}function g(e,t,r,n){for(var i,o,h,d=0,l=0;l<r;l++){var p=s.f[8](t),v=s.f[8](t+4);t+=8;for(var m=0;m<v;m++)i=e,o=s.f[4](p+m),h=void 0,h=c[i],0===o||10===o?(console.log.bind(console)(u.D(h)),h.length=0):h.push(o);d+=v}return a.M[8](n,(0|d)>>>0),f}function k(e){throw e="abort(".concat(e+="","). Build with -s ASSERTIONS=1 for more info."),new WebAssembly.RuntimeError(e)}function y(e,t,r){if(0!==e)return h;var n=(new Date).getTime();return a.M[10](r,BigInt(n)*BigInt(1e6)),f}function b(e,t){return 0!==e?h:(a.M[10](t,BigInt(1e6)),f)}function x(e,t){var r=(0,o.s3)(e,t);return crypto.getRandomValues(r),f}},20357:(e,t,r)=>{"use strict";r.r(t),r.d(t,{override:()=>C,wasm_cpu_core_count:()=>I,wasm_pthread_cond_broadcast:()=>l,wasm_pthread_cond_destroy:()=>c,wasm_pthread_cond_init:()=>u,wasm_pthread_cond_signal:()=>d,wasm_pthread_cond_timedwait:()=>h,wasm_pthread_cond_wait:()=>f,wasm_pthread_equal2:()=>T,wasm_pthread_exit:()=>_,wasm_pthread_mutex_destroy:()=>i,wasm_pthread_mutex_init:()=>n,wasm_pthread_mutex_lock:()=>a,wasm_pthread_mutex_trylock:()=>s,wasm_pthread_mutex_unlock:()=>o,wasm_pthread_once:()=>p,wasm_pthread_support:()=>P,wasm_threw_error:()=>B});var n,i,a,s,o,u,c,f,h,d,l,p,v=r(63939),m=r(50932),A=r(73783),g=r(42518),k=r(26429),y=r(11473),b=r(40046),x=r(10576),w=r(14686);function _(e){var t=x.TK.__SELF_THREAD__;m.M[20](t+4,e)}function T(e,t){return v.f[15](e)===v.f[15](t)?1:0}function P(){return k._7?1:0}function I(){return navigator.hardwareConcurrency}function B(e,t){throw new Error((0,w.lH)(t))}function C(e){e.wasm_pthread_mutex_lock&&(a=e.wasm_pthread_mutex_lock),e.wasm_pthread_mutex_trylock&&(s=e.wasm_pthread_mutex_trylock),e.wasm_pthread_mutex_unlock&&(o=e.wasm_pthread_mutex_unlock),e.wasm_pthread_cond_wait&&(f=e.wasm_pthread_cond_wait),e.wasm_pthread_cond_timedwait&&(h=e.wasm_pthread_cond_timedwait),e.wasm_pthread_cond_signal&&(d=e.wasm_pthread_cond_signal),e.wasm_pthread_cond_broadcast&&(l=e.wasm_pthread_cond_broadcast)}n=function(e,t){return A.Ts(e)},i=function(e){return A.zr(e)},a=function(e){return A.s2(e)},s=function(e){return A.bh(e)},o=function(e){return A.Tl(e)},u=function(e,t){return g.Ts(e,t)},c=function(e){return g.zr(e)},f=function(e,t){return g.uk(e,t)},h=function(e,t,r){var n=1e3*Number(v.f[17](r))+v.f[15](r+8)/1e6;return g.XR(e,t,n)},d=function(e){return g.vP(e)},l=function(e){return g.mq(e)},p=function(e,t){return 0===b.WQ(e,1,16,2)&&y.XI.get(t)(),0}},77775:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Timespec:()=>p,wasm_sem_destroy:()=>m,wasm_sem_init:()=>v,wasm_sem_post:()=>y,wasm_sem_timedwait:()=>k,wasm_sem_trywait:()=>g,wasm_sem_wait:()=>A});var n,i,a=r(81570),s=r(78716),o=r(134),u=r(80662),c=r.n(u),f=r(61499),h=r(12085),d=r(63939),l=r(79490),p=(0,a.A)((function e(){(0,s.A)(this,e),(0,o.A)(this,"tvSec",void 0),(0,o.A)(this,"tvNSec",void 0)}));function v(e,t,r){return l.Ts(e,r)}function m(e){return l.zr(e)}function A(e){return l.uk(e)}function g(e){return l.Zr(e)}function k(e,t){var r=1e3*Number(d.f[17](t))+d.f[15](t+8)/1e6;return l.XR(e,r)}function y(e){return l.bE(e)}n=p.prototype,(i=new(c())).set("tvSec",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("tvNSec",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,h.A)(n,f.Og,!0),(0,h.A)(n,f.dc,8),(0,h.A)(n,f.g7,16),(0,h.A)(n,f.JY,i)},6331:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(78716),i=r(81570),a=r(134),s=r(10576),o=function(){function e(t,r){(0,n.A)(this,e),(0,a.A)(this,"type",void 0),(0,a.A)(this,"phase",void 0),(0,a.A)(this,"ns",void 0),(0,a.A)(this,"target",void 0),(0,a.A)(this,"originalEvent",void 0),(0,a.A)(this,"isPrevented",void 0),(0,a.A)(this,"isStopped",void 0),(0,a.A)(this,"listener",void 0),this.type=t,this.phase=e.PHASE_CURRENT,r&&(this.originalEvent=r)}return(0,i.A)(e,[{key:"preventDefault",value:function(){var e=this;if(!e.isPrevented){var t=e.originalEvent;t&&t.preventDefault(),e.isPrevented=s.rT}return e}},{key:"stopPropagation",value:function(){var e=this;if(!e.isStopped){var t=e.originalEvent;t&&t.stopPropagation(),e.isStopped=s.rT}return e}},{key:"prevent",value:function(){return this.preventDefault()}},{key:"stop",value:function(){return this.stopPropagation()}}]),e}();(0,a.A)(o,"PHASE_CURRENT",0),(0,a.A)(o,"PHASE_UPWARD",1),(0,a.A)(o,"PHASE_DOWNWARD",s.Cy)},96172:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(78716),i=r(81570),a=r(134),s=r(67672),o=r(72739),u=r(6331),c=r(95335),f=r(20525),h=r(56401),d=r(10576),l=function(){function e(t){(0,n.A)(this,e),(0,a.A)(this,"ns",void 0),(0,a.A)(this,"listeners",void 0),(0,a.A)(this,"nativeListeners",void 0),this.ns=t||d.W8,this.listeners={}}return(0,i.A)(e,[{key:"fire",value:function(e,t,r){var n=this,i=s.Yj(e)?n.parse(e):e,a=n.listeners[i.type],f=d.rT;if(a){a=c.C(a);var l=t&&t[0]instanceof u.A?t[0]:d.ZH;o.__(a,(function(e){if(m(i.ns,e,d.rT)&&o.zy(a,e)&&(!r||r(i,t,e))){l&&(l.listener=e.fn);var s=(0,h.A)(e.fn,e.ctx,t);return l&&(l.listener=d.ZH),e.num=e.num?e.num+1:1,e.num===e.max&&n.off(i,e.fn),l&&(s===d.W8?l.prevent().stop():l.isStopped&&(s=d.W8)),s===d.W8?f=d.W8:void 0}}))}return f}},{key:"on",value:function(e,t){var r=this.listeners,n=s.Pc(t)?{fn:t}:t;if(s.Ik(n)&&s.Pc(n.fn)){var i=s.Yj(e)?this.parse(e):e;n.ns=i.ns,o.VC(r[i.type]||(r[i.type]=[]),n)}return this}},{key:"one",value:function(e,t){return s.Pc(t)?t={fn:t,max:1}:t.max=1,this.on(e,t)}},{key:"off",value:function(e,t){var r=this,n=r.listeners;if(e){var i=s.Yj(e)?r.parse(e):e,a=i.type,u=i.ns,f=v(t);a?n[a]&&function(e,t){o.__(e,(function(t,r){f(t)&&e.splice(r,1)}),d.rT),e.length||delete n[t]}(n[a],a):u&&c.__(n,(function(e,t){o.__(e,(function(t,r){m(u,t)&&e.splice(r,1)}),d.rT),e.length||delete n[t]}))}else r.listeners={}}},{key:"has",value:function(e,t){var r,n=this.listeners,i=s.Yj(e)?this.parse(e):e,a=i.type,u=i.ns,f=d.rT,h=v(t);return a?n[a]&&(r=n[a],o.__(r,(function(e){if(h(e))return f=d.W8}))):u&&c.__(n,(function(e){return o.__(e,(function(e){if(m(u,e))return f=d.W8})),f})),!f}},{key:"parse",value:function(e){var t={type:e,ns:d.u1};if(this.ns){var r=f.qh(e,d.ZG);r>=0&&(t.type=f.di(e,0,r),t.ns=f.di(e,r+1))}return t}}]),e}();function p(){return d.rT}function v(e){return s.Pc(e)?function(t){return e===t.fn}:p}function m(e,t,r){var n=t.ns;return n&&e?n===e:r?d.rT:d.W8}},84504:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2148);function i(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.split("."),a=e.split("."),s=0;s<a.length;s++){if(r&&s==a.length-1&&(0,n.A)(a[s])>=(0,n.A)(i[s]))return a.length>=i.length;if((0,n.A)(a[s])>(0,n.A)(i[s]))return!0;if((0,n.A)(a[s])<(0,n.A)(i[s]))return!1;if(s===i.length-1&&s===a.length-1)return r;if(s===i.length-1)return!0;if(s===a.length-1)return!1}return!0}},92647:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(42096),i=r.n(n),a=r(75062),s=r.n(a),o=r(16091),u=r.n(o),c=r(68632),f=r.n(c);function h(e,t){var r=void 0!==s()&&e[u()]||e["@@iterator"];if(!r){if(f()(e)||(r=function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?i()(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,h=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){h=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(h)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!t.length)return null;if(1===t.length)return t[0];var r,n,i=0,a=h(t);try{for(a.s();!(n=a.n()).done;)i+=(r=n.value).length}catch(e){a.e(e)}finally{a.f()}var s,o=new e(i),u=0,c=h(t);try{for(c.s();!(s=c.n()).done;)r=s.value,o.set(r,u),u+=r.length}catch(e){c.e(e)}finally{c.f()}return o}},78995:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(56401),i=r(72739),a=r(10576);function s(e,t,r){var s;return function(){var o=this;if(!s){var u=i.$r(arguments);r&&(0,n.A)(e,o,u),s=setTimeout((function(){s=a.ZH,r||(0,n.A)(e,o,u)}),t)}}}},56401:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(67672),i=r(10576);function a(e,t,r){if(n.Pc(e))return n.YO(r)?e.apply(t,r):t!==i.ZH?e.call(t,r):r!==i.ZH?e(r):e()}},8284:(e,t,r)=>{"use strict";function n(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}r.d(t,{A:()=>n})},86932:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(45249),i=r.n(n);function a(){return i()()}},54568:(e,t,r)=>{"use strict";function n(){return"function"==typeof registerProcessor&&"number"==typeof sampleRate&&"number"==typeof currentFrame&&"number"==typeof currentTime}r.d(t,{A:()=>n})},34677:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(10576);function i(e){return e!==n.ZH}},59135:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n,i=r(34677);function a(){if((0,i.A)(n))return n;var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),n=256===new Int16Array(e)[0]}},20491:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(67672),i=r(62100),a=r(20525);function s(e){return n.Pc(e)&&a.zy((0,i.A)(e),"[native code]")}},39638:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(23509),i=r(34677),a=r(54568);function s(){return!("object"===("undefined"==typeof window?"undefined":(0,n.A)(window))&&(0,i.A)(window.document)||(0,a.A)())}},7972:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(23509),i=r(64236),a=r.n(i),s=r(20491),o=r(10576);(void 0===a()?"undefined":(0,n.A)(a()))===o.s0&&(0,s.A)(a())&&a();const u=("undefined"==typeof MessageChannel?"undefined":(0,n.A)(MessageChannel))===o.s0&&(0,s.A)(MessageChannel)?function(e){var t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(1)}:"function"==typeof setTimeout?setTimeout:function(e){setTimeout(e)}},36:(e,t,r)=>{"use strict";function n(e,t,r){return e<t?e=t:e>r&&(e=r),e}r.d(t,{A:()=>n})},61837:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(69736),i=r.n(n),a=r(73146),s=r.n(a),o='\nfunction webpackBootstrapFunc (modules) {\n  var installedModules = {};\n  function __webpack_require__(moduleId) {\n    if(installedModules[moduleId])\n    return installedModules[moduleId].exports;\n    var module = installedModules[moduleId] = {\n      i: moduleId,\n      l: false,\n      exports: {}\n    };\n    if (!modules[moduleId]) {\n      console.log(\'can not found module:\', moduleId)\n    }\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    module.l = true;\n    return module.exports;\n  }\n  __webpack_require__.m = modules;\n  __webpack_require__.c = installedModules;\n  __webpack_require__.i = function(value) { return value; };\n  __webpack_require__.d = function(exports, definition, getter) {\n    if (typeof definition === \'string\') {\n      if(!__webpack_require__.o(exports, definition)) {\n        Object.defineProperty(exports, definition, {\n          enumerable: true,\n          get: getter\n        });\n      }\n    }\n    else {\n      for(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n          Object.defineProperty(exports, key, {\n            enumerable: true,\n            get: definition[key]\n          });\n        }\n      }\n    }\n  };\n  __webpack_require__.r = function(exports) {\n    if(typeof Symbol !== \'undefined\' && Symbol.toStringTag) {\n    \tObject.defineProperty(exports, Symbol.toStringTag, { value: \'Module\' });\n    }\n    Object.defineProperty(exports, \'__esModule\', { value: true });\n  };\n  __webpack_require__.f = {};\n  __webpack_require__.e = function(chunkId) {\n    return Promise.all(Object.keys(__webpack_require__.f).reduce(function (promises, key) {\n      __webpack_require__.f[key](chunkId, promises);\n        return promises;\n    \t}, []));\n\t};\n  __webpack_require__.u = function(chunkId) {\n    return chunkId + "LIB_NAME";\n  };\n  __webpack_require__.n = function(module) {\n    var getter = module && module.__esModule ?\n      function getDefault() { return module[\'default\']; } :\n      function getModuleExports() { return module; };\n    __webpack_require__.d(getter, \'a\', getter);\n    return getter;\n  };\n  (function() {\n    var installedChunks = {\n      "main": 0\n    };\n    __webpack_require__.f.j = function(chunkId, promises) {\n      var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n      if (installedChunkData !== 0) {\n        if(installedChunkData) {\n          promises.push(installedChunkData[2]);\n        } else {\n          if (true) {\n            var promise = new Promise(function(resolve, reject){installedChunkData = installedChunks[chunkId] = [resolve, reject]});\n            promises.push(installedChunkData[2] = promise);\n            var url = __webpack_require__.p + __webpack_require__.u(chunkId);\n            var error = new Error();\n            var loadingEnded = function(event) {\n              if(__webpack_require__.o(installedChunks, chunkId)) {\n                installedChunkData = installedChunks[chunkId];\n                if(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n                if(installedChunkData) {\n                  var errorType = event && (event.type === \'load\' ? \'missing\' : event.type);\n                  var realSrc = url;\n                  error.message = "Loading chunk " + chunkId + " failed.\\n(" + errorType + ": " + realSrc + ")";\n                  error.name = "ChunkLoadError";\n                  error.type = errorType;\n                  error.request = realSrc;\n                  installedChunkData[1](error);\n                }\n              }\n            };\n            __webpack_require__.l(url, loadingEnded);\n          }\n        }\n      }\n    };\n    var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n    var [chunkIds, moreModules, runtime] = data;\n    var moduleId, chunkId, i = 0;\n    if (chunkIds.some(function(id){return installedChunks[id] !== 0})) {\n      for(moduleId in moreModules) {\n        if(__webpack_require__.o(moreModules, moduleId)) {\n          __webpack_require__.m[moduleId] = moreModules[moduleId];\n        }\n      }\n      if(runtime) runtime(__webpack_require__);\n    }\n    if (parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n      for (;i < chunkIds.length; i++) {\n        chunkId = chunkIds[i];\n        if (__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n          installedChunks[chunkId][0]();\n        }\n        installedChunks[chunkId] = 0;\n      }\n    }\n    var self = typeof globalThis !== undefined ? globalThis : self\n    var exportName = \'LIBRARY_EXPORT_NAME\'\n    var chunkLoadingGlobal = self["webpackChunk" + exportName] = self["webpackChunk" + exportName] || [];\n    chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\n    chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n  })();\n  (function() {\n    var inProgress = {};\n    __webpack_require__.l = function(url, done) {\n      if (inProgress[url]) { inProgress[url].push(done); return; }\n        inProgress[url] = [done];\n        var onComplete = function(event) {\n          clearTimeout(timeout);\n          var doneFns = inProgress[url];\n          delete inProgress[url];\n          doneFns && doneFns.forEach(function(fn){fn(event)});\n        }\n        var timeout = setTimeout(onComplete.bind(null, undefined, { type: "timeout" }), 120000);\n      import(url).then(function() {\n        onComplete({\n          type: "load"\n        })\n      }, function (error) {\n        onComplete({\n          type: "missing"\n        })\n      });\n    };\n  })();\n  __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n  __webpack_require__.p = "ROOT_URL";\n  __webpack_require__.oe = function(err) { console.error(err); throw err; };\n  var f = __webpack_require__(__webpack_require__.s = ENTRY_MODULE);\n  return f;\n}\n',u="[\\.|\\-|\\+|\\w|/|@|!]+",c="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+u+").*?\\)";function f(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(e,t,n,a){var s={};s[n]=[];var o=t.toString(),h=o.match(/^(function)?\s?\w*\(\w+,\s*(\w+),\s*(\w+)\)/);if(!h)return s;var d=h[3];a.__webpack_exports_process__||(a.__webpack_require__=d,a.__webpack_exports__=h[2],a.__webpack_exports_process__=!0);for(var l,p=new RegExp("(\\\\n|\\W)"+f(d)+c,"g");l=p.exec(o);)"dll-reference"!==l[3]&&s[n].push(l[3]);for(p=new RegExp("\\("+f(d)+'\\("(dll-reference\\s('+u+'))"\\)\\)'+c,"g");l=p.exec(o);)e[l[2]]||(s[n].push(l[1]),e[l[2]]=r(l[1]).m),s[l[2]]=s[l[2]]||[],s[l[2]].push(l[4]);for(var v,m=i()(s),A=0;A<m.length;A++)for(var g=0;g<s[m[A]].length;g++)v=+s[m[A]][g],isNaN(v)||(s[m[A]][g]=+s[m[A]][g]);return s}function d(e){return i()(e).reduce((function(t,r){return t||e[r].length>0}),!1)}function l(e,t){var n={main:r.m},a=function(e,t){for(var r={main:[t]},n={main:[],__webpack_exports__:"__webpack_exports__",__webpack_require__:"__webpack_require__",__webpack_exports_process__:!1},a={main:{}};d(r);)for(var s=i()(r),o=0;o<s.length;o++){var u=s[o],c=r[u].pop();if(a[u]=a[u]||{},!a[u][c]&&e[u][c]){a[u][c]=!0,n[u]=n[u]||[],n[u].push(c);for(var f=h(e,e[u][c],u,n),l=i()(f),p=0;p<l.length;p++)r[l[p]]=r[l[p]]||[],r[l[p]]=r[l[p]].concat(f[l[p]])}}return n}(n,e),u=s()(e);return"var "+t.varName+"=("+o.replace("ENTRY_MODULE",u).replace("ROOT_URL",r.p||"").replace("LIBRARY_EXPORT_NAME","AVPlayer").replace("LIB_NAME",r.u&&r.u("")||"")+")({"+a.main.map((function(e){var r=s()(e),i=r+": "+n.main[e].toString();if(r===u&&t.exportName&&t.pointName){var o=";".concat(a.__webpack_require__,".d(\n          ").concat(a.__webpack_exports__,',\n          "').concat(t.exportName,'",\n          function() {\n            if (').concat(t.exportIsClass,") {\n              for (var key in ").concat(a.__webpack_exports__,") {\n                if (key === '").concat(t.exportName,"') {\n                  continue;\n                }\n                var v = ").concat(a.__webpack_exports__,"[key];\n                if (typeof v === 'function' && v.name === '").concat(t.pointName,"') {\n                  return v;\n                }\n              }\n            }\n            return ").concat(t.pointName,";\n          }\n        );");i=i.slice(0,i.length-1)+o+"}"}return i})).join(",")+"});"}},2148:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(67672),i=r(10576);function a(e,t){return n.sH(e)?+e:t!==i.ZH?t:0}},62100:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(10576);function i(e,t){return e!=n.Cq&&e.toString?e.toString():t!==n.ZH?t:n.u1}},61403:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(81570),i=r(78716),a=r(134),s=r(67672),o=(0,n.A)((function e(){(0,i.A)(this,e),(0,a.A)(this,"proxy",void 0),this.proxy=new Proxy(this,{get:function(e,t,r){return s.sH(t)?e.getIndexValue(+t):e[t]},set:function(e,t,r,n){return s.sH(t)?e.setIndexValue(+t,r):e[t]=r,!0}})}))},37246:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(78716),i=r(81570),a=r(134),s=r(4624),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,n.A)(this,e),(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"pointer",void 0),(0,a.A)(this,"bitsLeft",void 0),(0,a.A)(this,"size",void 0),(0,a.A)(this,"endPointer",void 0),(0,a.A)(this,"error",void 0),(0,a.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,i.A)(e,[{key:"peekU1",value:function(){(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();var e=this.pointer,t=this.bitsLeft;return 0===t&&(e++,t=8),this.buffer[e]>>t-1&1}},{key:"readU1",value:function(){var e;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8),e}},{key:"readU",value:function(e){for(var t=0,r=0;r<e;r++)t|=this.readU1()<<e-r-1;return t}},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"getPos",value:function(){return this.pointer}},{key:"skip",value:function(e){var t=(e-e%8)/8;this.pointer+=t;var r=e%8;this.bitsLeft<=r?(this.pointer++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&this.pointer++,!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);var e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{var t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{var t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,s.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",190)}}},{key:"clear",value:function(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0}},{key:"skipPadding",value:function(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++)}}]),e}()},83314:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(78716),i=r(81570),a=r(134),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,n.A)(this,e),(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"pointer",void 0),(0,a.A)(this,"bitPointer",void 0),(0,a.A)(this,"size",void 0),(0,a.A)(this,"error",void 0),(0,a.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=t,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,i.A)(e,[{key:"writeU1",value:function(e){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&e?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.bitPointer=0)}},{key:"writeU",value:function(e,t){for(var r=0;r<e;r++)this.writeU1(t>>e-r-1&1)}},{key:"remainingLength",value:function(){return this.size-this.pointer}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>1){var e=this.onFlush(this.buffer.subarray(0,this.pointer-1));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){var t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("BSWriter error, flush failed")}this.pointer=0}},{key:"padding",value:function(){for(;0!==this.bitPointer;)this.writeU1(0)}},{key:"clear",value:function(){this.pointer=0,this.bitPointer=0,this.error=0}},{key:"getBuffer",value:function(){return this.buffer}},{key:"getPointer",value:function(){return this.pointer}}]),e}()},31865:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(78716),i=r(81570),a=r(134),s=r(92647),o=r(50011),u=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,n.A)(this,e),(0,a.A)(this,"data",void 0),(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"byteStart",void 0),(0,a.A)(this,"pos",void 0),(0,a.A)(this,"size",void 0),(0,a.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!r}return(0,i.A)(e,[{key:"readUint8",value:function(){return this.data.getUint8(this.pos+++this.byteStart)}},{key:"readUint16",value:function(){var e=this.data.getUint16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,e}},{key:"readUint24",value:function(){return this.readUint16()<<8|this.readUint8()}},{key:"readUint32",value:function(){var e=this.data.getUint32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,e}},{key:"readUint64",value:function(){var e=BigInt(this.readUint32()),t=BigInt(this.readUint32());return this.littleEndian?t<<BigInt(32)|e:e<<BigInt(32)|t}},{key:"readInt8",value:function(){return this.data.getInt8(this.pos+++this.byteStart)}},{key:"readInt16",value:function(){var e=this.data.getInt16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,e}},{key:"readInt32",value:function(){var e=this.data.getInt32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,e}},{key:"readInt64",value:function(){var e=BigInt(this.readInt32()),t=BigInt(this.readInt32());return this.littleEndian?t<<BigInt(32)|e:e<<BigInt(32)|t}},{key:"readFloat",value:function(){var e=this.data.getFloat32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,e}},{key:"readDouble",value:function(){var e=this.data.getFloat64(this.pos+this.byteStart,this.littleEndian);return this.pos+=8,e}},{key:"readHex",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="",r=0;r<e;r++){var n=this.readUint8().toString(16);t+=1===n.length?"0"+n:n}return t}},{key:"readString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="";if(e){for(var r=this.pos,n=0;n<e&&0===this.buffer[this.pos+n];n++)r++;t=o.D(this.buffer.subarray(r,r+e))}return this.pos+=e,t}},{key:"readLine",value:function(){for(var e="",t=this.pos;t<this.size;t++)if(10===this.buffer[t]||13===this.buffer[t]){e+=this.readString(t-this.pos);break}for(var r=this.pos;r<this.size&&(10===this.buffer[r]||13===this.buffer[r]);r++)this.readUint8();return e}},{key:"getPos",value:function(){return BigInt(this.pos)}},{key:"seek",value:function(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}},{key:"skip",value:function(e){this.seek(this.pos+e)}},{key:"back",value:function(e){this.seek(this.pos-e)}},{key:"remainingSize",value:function(){return this.size-this.pos}},{key:"readBuffer",value:function(e){e=Math.min(e,this.remainingSize());var t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=e,t}},{key:"appendBuffer",value:function(e){this.buffer=(0,s.A)(Uint8Array,[this.buffer.slice(),e.slice()]),this.data=new DataView(this.buffer.buffer),this.size+=e.byteLength,this.byteStart=0}},{key:"resetBuffer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}]),e}()},729:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(78716),i=r(81570),a=r(134),s=r(4624),o=r(50011),u=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,n.A)(this,e),(0,a.A)(this,"data",void 0),(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"byteStart",void 0),(0,a.A)(this,"pos",void 0),(0,a.A)(this,"size",void 0),(0,a.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!r}return(0,i.A)(e,[{key:"writeUint8",value:function(e){this.data.setUint8(this.pos+++this.byteStart,e)}},{key:"writeUint16",value:function(e){this.data.setUint16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeUint24",value:function(e){var t=3840&e,r=240&e,n=15&e;this.littleEndian?(this.writeUint8(n),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(n))}},{key:"writeUint32",value:function(e){this.data.setUint32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeUint64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeUint32(Number(t)),this.writeUint32(Number(r))):(this.writeUint32(Number(r)),this.writeUint32(Number(t)))}},{key:"writeInt8",value:function(e){this.data.setInt8(this.pos+++this.byteStart,e)}},{key:"writeInt16",value:function(e){this.data.setInt16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeInt32",value:function(e){this.data.setInt32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeInt64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeInt32(Number(t)),this.writeInt32(Number(r))):(this.writeInt32(Number(r)),this.writeInt32(Number(t)))}},{key:"writeFloat",value:function(e){this.data.setFloat32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeDouble",value:function(e){this.data.setFloat64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}},{key:"getPos",value:function(){return this.pos}},{key:"seek",value:function(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}},{key:"skip",value:function(e){this.seek(this.pos+e)}},{key:"back",value:function(e){this.seek(this.pos-e)}},{key:"remainingSize",value:function(){return this.size-this.pos}},{key:"writeBuffer",value:function(e){var t=e.length;this.remainingSize()<t&&(t=this.remainingSize(),s.R8("the remaining buffer size is smaller then the wrote buffer, hope set ".concat(e.length,", but set ").concat(t),"src/common/io/BufferWriter.ts",211)),this.buffer.set(e,this.pos),this.pos+=e.length}},{key:"writeString",value:function(e){var t=o.l(e);return this.writeBuffer(t),t.length}},{key:"getWroteBuffer",value:function(){return this.buffer.subarray(0,this.pos)}},{key:"resetBuffer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}]),e}()},24175:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(4624),f=r(50011),h=r(13724),d="src/common/io/IOReader.ts",l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;if((0,i.A)(this,e),(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"endPointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"fileSize_",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),(0,s.A)(this,"onSize",void 0),(0,s.A)(this,"flags",void 0),this.pos=BigInt(0),this.pointer=0,this.error=0,this.endPointer=0,this.littleEndian=!r,this.flags=0,n&&n.view)this.size=n.length,this.buffer=n,this.data=n.view;else if(n&&!n.byteOffset)this.size=n.length,this.buffer=n,this.data=new DataView(this.buffer.buffer);else{if(n)throw new Error("not support subarray of ArrayBuffer");this.size=Math.max(t,102400),this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}var t,r,o,l,p,v,m,A,g,k,y,b,x,w,_,T,P,I,B,C,S,M,U,R,E,D,L,F,O,N,z,W,V,G,j,q,H;return(0,a.A)(e,[{key:"readUint8",value:(H=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<1)){e.next=3;break}return e.next=3,this.flush(1);case 3:return t=this.data.getUint8(this.pointer),this.pointer++,this.pos++,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return H.apply(this,arguments)})},{key:"peekUint8",value:(q=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<1)){e.next=3;break}return e.next=3,this.flush(1);case 3:return e.abrupt("return",this.data.getUint8(this.pointer));case 4:case"end":return e.stop()}}),e,this)}))),function(){return q.apply(this,arguments)})},{key:"readUint16",value:(j=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<2)){e.next=3;break}return e.next=3,this.flush(2);case 3:return t=this.data.getUint16(this.pointer,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"peekUint16",value:(G=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<2)){e.next=3;break}return e.next=3,this.flush(2);case 3:return e.abrupt("return",this.data.getUint16(this.pointer,this.littleEndian));case 4:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)})},{key:"readUint24",value:(V=(0,n.A)(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<3)){e.next=3;break}return e.next=3,this.flush(3);case 3:return e.next=5,this.readUint16();case 5:return t=e.sent,e.next=8,this.readUint8();case 8:return r=e.sent,e.abrupt("return",t<<8|r);case 10:case"end":return e.stop()}}),e,this)}))),function(){return V.apply(this,arguments)})},{key:"peekUint24",value:(W=(0,n.A)(u().mark((function e(){var t,r,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<3)){e.next=3;break}return e.next=3,this.flush(3);case 3:return t=this.pointer,r=this.pos,e.next=7,this.readUint16();case 7:return n=e.sent,e.next=10,this.readUint8();case 10:return i=e.sent,a=n<<8|i,this.pointer=t,this.pos=r,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)}))),function(){return W.apply(this,arguments)})},{key:"readUint32",value:(z=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<4)){e.next=3;break}return e.next=3,this.flush(4);case 3:return t=this.data.getUint32(this.pointer,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return z.apply(this,arguments)})},{key:"peekUint32",value:(N=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<4)){e.next=3;break}return e.next=3,this.flush(4);case 3:return e.abrupt("return",this.data.getUint32(this.pointer,this.littleEndian));case 4:case"end":return e.stop()}}),e,this)}))),function(){return N.apply(this,arguments)})},{key:"readUint64",value:(O=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<8)){e.next=3;break}return e.next=3,this.flush(8);case 3:return t=this.data.getBigUint64(this.pointer,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"peekUint64",value:(F=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<8)){e.next=3;break}return e.next=3,this.flush(8);case 3:return e.abrupt("return",this.data.getBigUint64(this.pointer,this.littleEndian));case 4:case"end":return e.stop()}}),e,this)}))),function(){return F.apply(this,arguments)})},{key:"readInt8",value:(L=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<1)){e.next=3;break}return e.next=3,this.flush(1);case 3:return t=this.data.getInt8(this.pointer),this.pointer++,this.pos++,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"peekInt8",value:(D=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<1)){e.next=3;break}return e.next=3,this.flush(1);case 3:return e.abrupt("return",this.data.getInt8(this.pointer));case 4:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"readInt16",value:(E=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<2)){e.next=3;break}return e.next=3,this.flush(2);case 3:return t=this.data.getInt16(this.pointer,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"peekInt16",value:(R=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<2)){e.next=3;break}return e.next=3,this.flush(2);case 3:return e.abrupt("return",this.data.getInt16(this.pointer,this.littleEndian));case 4:case"end":return e.stop()}}),e,this)}))),function(){return R.apply(this,arguments)})},{key:"readInt32",value:(U=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<4)){e.next=3;break}return e.next=3,this.flush(4);case 3:return t=this.data.getInt32(this.pointer,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return U.apply(this,arguments)})},{key:"peekInt32",value:(M=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<4)){e.next=3;break}return e.next=3,this.flush(4);case 3:return e.abrupt("return",this.data.getInt32(this.pointer,this.littleEndian));case 4:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"readInt64",value:(S=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<8)){e.next=3;break}return e.next=3,this.flush(8);case 3:return t=this.data.getBigInt64(this.pointer,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"peekInt64",value:(C=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<8)){e.next=3;break}return e.next=3,this.flush(8);case 3:return e.abrupt("return",this.data.getBigInt64(this.pointer,this.littleEndian));case 4:case"end":return e.stop()}}),e,this)}))),function(){return C.apply(this,arguments)})},{key:"readFloat",value:(B=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<4)){e.next=3;break}return e.next=3,this.flush(4);case 3:return t=this.data.getFloat32(this.pointer,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return B.apply(this,arguments)})},{key:"peekFloat",value:(I=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<4)){e.next=3;break}return e.next=3,this.flush(4);case 3:return e.abrupt("return",this.data.getFloat32(this.pointer,this.littleEndian));case 4:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)})},{key:"readDouble",value:(P=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<8)){e.next=3;break}return e.next=3,this.flush(8);case 3:return t=this.data.getFloat64(this.pointer,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)})},{key:"peekDouble",value:(T=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<8)){e.next=3;break}return e.next=3,this.flush(8);case 3:return e.abrupt("return",this.data.getFloat64(this.pointer,this.littleEndian));case 4:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"readHex",value:(_=(0,n.A)(u().mark((function e(){var t,r,n,i,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:1,r="",n=0;case 3:if(!(n<t)){e.next=11;break}return e.next=6,this.readUint8();case 6:i=e.sent.toString(16),r+=1===i.length?"0"+i:i;case 8:n++,e.next=3;break;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"peekHex",value:(w=(0,n.A)(u().mark((function e(){var t,r,n,i,a,s,o=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=o.length>0&&void 0!==o[0]?o[0]:1)>this.size&&(this.error=-1048574,c.h2("peekHex, length too large",d,334)),!(this.remainingLength()<t)){e.next=5;break}return e.next=5,this.flush(t);case 5:r=this.pointer,n=this.pos,i="",a=0;case 9:if(!(a<t)){e.next=17;break}return e.next=12,this.readUint8();case 12:s=e.sent.toString(16),i+=1===s.length?"0"+s:s;case 14:a++,e.next=9;break;case 17:return this.pointer=r,this.pos=n,e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"readBuffer",value:(x=(0,n.A)(u().mark((function e(t,r){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r||(r=new Uint8Array(t)),!(this.remainingLength()<t)){e.next=17;break}n=0,this.remainingLength()>0&&(i=this.remainingLength(),r.set(this.buffer.subarray(this.pointer,this.pointer+i),n),n+=i,this.pointer+=i,this.pos+=BigInt(i),t-=i);case 4:if(!(t>0)){e.next=15;break}return e.next=7,this.flush();case 7:a=Math.min(this.endPointer-this.pointer,t),r.set(this.buffer.subarray(this.pointer,this.pointer+a),n),n+=a,this.pointer+=a,this.pos+=BigInt(a),t-=a,e.next=4;break;case 15:e.next=20;break;case 17:r.set(this.buffer.subarray(this.pointer,this.pointer+t),0),this.pointer+=t,this.pos+=BigInt(t);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this)}))),function(e,t){return x.apply(this,arguments)})},{key:"readToBuffer",value:(b=(0,n.A)(u().mark((function e(t,r){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<t)){e.next=27;break}n=0,this.remainingLength()>0&&(i=this.remainingLength(),r.set(this.buffer.subarray(this.pointer,this.pointer+i),n),n+=i,this.pointer+=i,this.pos+=BigInt(i),t-=i);case 3:if(!(t>0)){e.next=24;break}return e.prev=4,e.next=7,this.flush();case 7:e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(4),-1048576!==this.error||!n){e.next=15;break}return e.abrupt("return",n);case 15:throw e.t0;case 16:a=Math.min(this.endPointer-this.pointer,t),r.set(this.buffer.subarray(this.pointer,this.pointer+a),n),n+=a,this.pointer+=a,this.pos+=BigInt(a),t-=a,e.next=3;break;case 24:return e.abrupt("return",n);case 27:return r.set(this.buffer.subarray(this.pointer,this.pointer+t),0),this.pointer+=t,this.pos+=BigInt(t),e.abrupt("return",t);case 31:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e,t){return b.apply(this,arguments)})},{key:"peekBuffer",value:(y=(0,n.A)(u().mark((function e(t,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t>this.size&&(this.error=-1048574,c.h2("peekBuffer, length too large",d,455)),!(this.remainingLength()<t)){e.next=4;break}return e.next=4,this.flush(t);case 4:return r||(r=new Uint8Array(t)),r.set(this.buffer.subarray(this.pointer,this.pointer+t),0),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"readString",value:(k=(0,n.A)(u().mark((function e(){var t,r,n=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,e.next=3,this.readBuffer(t);case 3:return r=e.sent,e.abrupt("return",f.D(r));case 5:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"peekString",value:(g=(0,n.A)(u().mark((function e(){var t,r,n=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,e.next=3,this.peekBuffer(t);case 3:return r=e.sent,e.abrupt("return",f.D(r));case 5:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"readLine",value:(A=(0,n.A)(u().mark((function e(){var t,r,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="";case 1:r=!1,n=this.pointer;case 4:if(!(n<this.endPointer)){e.next=16;break}if(10!==this.buffer[n]&&13!==this.buffer[n]){e.next=13;break}if(n===this.pointer){e.next=11;break}return e.t0=t,e.next=10,this.readString(n-this.pointer);case 10:t=e.t0+=e.sent;case 11:return r=!0,e.abrupt("break",16);case 13:n++,e.next=4;break;case 16:if(r){e.next=25;break}return e.t1=t,e.next=20,this.readString(this.remainingLength());case 20:return t=e.t1+=e.sent,e.next=23,this.flush();case 23:e.next=26;break;case 25:return e.abrupt("break",28);case 26:e.next=1;break;case 28:return e.next=31,this.peekUint8();case 31:if(10!==(i=e.sent)&&13!==i){e.next=37;break}return e.next=35,this.readUint8();case 35:e.next=38;break;case 37:return e.abrupt("break",40);case 38:e.next=28;break;case 40:return e.abrupt("return",t);case 41:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"peekLine",value:(m=(0,n.A)(u().mark((function e(){var t,r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<this.size)){e.next=3;break}return e.next=3,this.flush();case 3:t="",r=!1,n=this.pointer;case 6:if(!(n<this.endPointer)){e.next=17;break}if(10!==this.buffer[n]&&13!==this.buffer[n]){e.next=14;break}return e.t0=t,e.next=11,this.peekString(n-this.pointer);case 11:return t=e.t0+=e.sent,r=!0,e.abrupt("break",17);case 14:n++,e.next=6;break;case 17:return r||(this.error=-1048574,c.h2("peekLine, out of buffer",d,543)),e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"getPointer",value:function(){return this.pointer}},{key:"getPos",value:function(){return this.pos}},{key:"skip",value:(v=(0,n.A)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t;case 1:if(!(this.remainingLength()<t)){e.next=8;break}return t-=this.remainingLength(),this.pointer=this.endPointer,e.next=6,this.flush();case 6:e.next=1;break;case 8:this.remainingLength()>=t&&(this.pointer+=t),this.pos+=BigInt(r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"flush_",value:(p=(0,n.A)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.onFlush(t);case 3:if(-1048575===(r=e.sent)){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,new h.A(0);case 8:e.next=0;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"flush",value:(l=(0,n.A)(u().mark((function e(){var t,r,n,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:0,this.onFlush||(this.error=-1048574,c.h2("IOReader error, flush failed because of no flush callback",d,611)),!(this.size-this.remainingLength()<=0)){e.next=4;break}return e.abrupt("return");case 4:if(t=Math.min(t,this.size),this.pointer<this.endPointer?(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer):this.endPointer=0,this.pointer=0,!t){e.next=20;break}case 8:if(!(this.remainingLength()<t)){e.next=18;break}return e.next=11,this.flush_(this.buffer.subarray(this.endPointer));case 11:if(!((r=e.sent)<0)){e.next=15;break}throw this.error=r,new Error("IOReader error, flush ".concat(-1048576===r?"ended":"failed",", ret: ").concat(r));case 15:this.endPointer+=r,e.next=8;break;case 18:e.next=27;break;case 20:return e.next=22,this.flush_(this.buffer.subarray(this.endPointer));case 22:if(!((n=e.sent)<0)){e.next=26;break}throw this.error=n,new Error("IOReader error, flush ".concat(-1048576===n?"ended":"failed",", ret: ").concat(n));case 26:this.endPointer+=n;case 27:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"seek",value:(o=(0,n.A)(u().mark((function e(t){var r,n,i,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(a.length>2&&void 0!==a[2])||a[2],a.length>1&&void 0!==a[1]&&a[1]){e.next=18;break}if(!((n=Number(t-this.pos))<0&&Math.abs(n)<this.pointer)){e.next=10;break}return this.pointer+=n,this.pos=t,e.abrupt("return");case 10:if(!(n>0&&this.pointer+n<this.endPointer)){e.next=16;break}return this.pointer+=n,this.pos=t,e.abrupt("return");case 16:if(0!==n){e.next=18;break}return e.abrupt("return");case 18:return this.onSeek||(this.error=-1048574,c.h2("IOReader error, seek failed because of no seek callback",d,672)),this.pointer=this.endPointer=0,this.pos=t,e.next=23,this.onSeek(t);case 23:if(0!==(i=e.sent)&&(this.error=i,c.h2("IOReader error, seek failed",d,681)),!r){e.next=28;break}return e.next=28,this.flush();case 28:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{var t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,c.R8("IOReader, call appendBuffer but the buffer's size is lagger then the remaining size",d,711)}}},{key:"reset",value:function(){this.pointer=this.endPointer=0,this.pos=BigInt(0),this.error=0}},{key:"setEndian",value:function(e){this.littleEndian=!e}},{key:"fileSize",value:(r=(0,n.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.fileSize_){e.next=2;break}return e.abrupt("return",this.fileSize_);case 2:return this.onSize||(this.error=-1048574,c.h2("IOReader error, fileSize failed because of no onSize callback",d,732)),e.next=5,this.onSize();case 5:return this.fileSize_=e.sent,e.abrupt("return",this.fileSize_);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getBufferSize",value:function(){return this.size}},{key:"pipe",value:(t=(0,n.A)(u().mark((function e(t,r){var n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=28;break}if(!(this.remainingLength()<r)){e.next=22;break}if(!(this.remainingLength()>0)){e.next=9;break}return n=this.remainingLength(),e.next=6,t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+n));case 6:this.pointer+=n,this.pos+=BigInt(n),r-=n;case 9:if(!(r>0)){e.next=20;break}return e.next=12,this.flush();case 12:return i=Math.min(this.remainingLength(),r),e.next=15,t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+i));case 15:this.pointer+=i,this.pos+=BigInt(i),r-=i,e.next=9;break;case 20:e.next=26;break;case 22:return e.next=24,t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+r));case 24:this.pointer+=r,this.pos+=BigInt(r);case 26:e.next=45;break;case 28:if(!(this.remainingLength()>0)){e.next=34;break}return a=this.remainingLength(),e.next=32,t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+a));case 32:this.pointer+=a,this.pos+=BigInt(a);case 34:return e.next=36,this.flush_(this.buffer.subarray(0));case 36:if(e.t0=e.sent,!(e.t0>0)){e.next=45;break}return s=this.remainingLength(),e.next=41,t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+s));case 41:this.pointer+=s,this.pos+=BigInt(s),e.next=34;break;case 45:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}()},34531:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(50011),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;if((0,i.A)(this,e),(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=t,this.littleEndian=!r,this.error=0,n&&n.view)this.size=n.length,this.buffer=n,this.data=n.view;else if(n&&!n.byteOffset)this.size=n.length,this.buffer=n,this.data=new DataView(this.buffer.buffer);else{if(n)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}var t,r,o,f,h,d,l,p,v,m,A,g,k,y,b,x;return(0,a.A)(e,[{key:"writeUint8",value:(x=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<1)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setUint8(this.pointer,t),this.pointer++,this.pos++;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"writeUint16",value:(b=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<2)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setUint16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"writeUint24",value:(y=(0,n.A)(u().mark((function e(t){var r,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<3)){e.next=3;break}return e.next=3,this.flush();case 3:if(r=(16711680&t)>>16,n=(65280&t)>>8,i=255&t,!this.littleEndian){e.next=15;break}return e.next=9,this.writeUint8(i);case 9:return e.next=11,this.writeUint8(n);case 11:return e.next=13,this.writeUint8(r);case 13:e.next=21;break;case 15:return e.next=17,this.writeUint8(r);case 17:return e.next=19,this.writeUint8(n);case 19:return e.next=21,this.writeUint8(i);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"writeUint32",value:(k=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<4)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setUint32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"writeUint64",value:(g=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<8)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setBigUint64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"writeInt8",value:(A=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<1)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setInt8(this.pointer,t),this.pointer++,this.pos++;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"writeInt16",value:(m=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<2)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setInt16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"writeInt32",value:(v=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<4)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setInt32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"writeInt64",value:(p=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<8)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setBigInt64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"writeFloat",value:(l=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<4)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setFloat32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"writeDouble",value:(d=(0,n.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.remainingLength()<8)){e.next=3;break}return e.next=3,this.flush();case 3:this.data.setFloat64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getPointer",value:function(){return this.pointer}},{key:"getPos",value:function(){return this.pos}},{key:"remainingLength",value:function(){return this.size-this.pointer}},{key:"writeBuffer",value:(h=(0,n.A)(u().mark((function e(t){var r,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:if(r=t.length,!(this.remainingLength()<r)){e.next=18;break}n=0;case 5:if(!(r>0)){e.next=16;break}return e.next=8,this.flush();case 8:i=Math.min(this.size,r),this.buffer.set(t.subarray(n,n+i),this.pointer),this.pointer+=i,this.pos+=BigInt(i),n+=i,r-=i,e.next=5;break;case 16:e.next=21;break;case 18:this.buffer.set(t,this.pointer),this.pointer+=r,this.pos+=BigInt(r);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"writeString",value:(f=(0,n.A)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.l(t),e.next=3,this.writeBuffer(r);case 3:return e.abrupt("return",r.length);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"encodeString",value:function(e){return c.l(e)}},{key:"flush",value:(o=(0,n.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.onFlush){e.next=3;break}throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");case 3:if(!this.pointer){e.next=10;break}return e.next=6,this.onFlush(this.buffer.subarray(0,this.pointer));case 6:if(0===(t=e.sent)){e.next=10;break}throw this.error=t,Error("IOWriter error, flush failed");case 10:this.pointer=0;case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"flushToPos",value:(r=(0,n.A)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.onFlush){e.next=3;break}throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");case 3:if(!this.pointer){e.next=10;break}return e.next=6,this.onFlush(this.buffer.subarray(0,this.pointer),t);case 6:if(0===(r=e.sent)){e.next=10;break}throw this.error=r,Error("IOWriter error, flush failed");case 10:this.pointer=0;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"seek",value:(t=(0,n.A)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.onSeek){e.next=3;break}throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");case 3:return e.next=5,this.flush();case 5:return e.next=7,this.onSeek(t);case 7:if(0===(r=e.sent)){e.next=11;break}throw this.error=r,Error("IOWriter error, seek failed");case 11:this.pos=t;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"seekInline",value:function(e){var t=this.pointer;this.pointer=Math.max(0,Math.min(this.size,e)),this.pos+=BigInt(this.pointer-t)}},{key:"skip",value:function(e){var t=this.pointer;this.pointer=Math.min(this.size,this.pointer+e),this.pos+=BigInt(this.pointer-t)}},{key:"back",value:function(e){var t=this.pointer;this.pointer=Math.max(0,this.pointer-e),this.pos+=BigInt(this.pointer-t)}},{key:"getBuffer",value:function(){return this.buffer.subarray(0,this.pointer)}},{key:"setEndian",value:function(e){this.littleEndian=!e}},{key:"reset",value:function(){this.pointer=0,this.pos=BigInt(0),this.error=0}},{key:"getBufferSize",value:function(){return this.size}}]),e}()},35336:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(78716),i=r(81570),a=r(134),s=r(50011),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;if((0,n.A)(this,e),(0,a.A)(this,"data",void 0),(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"pointer",void 0),(0,a.A)(this,"pos",void 0),(0,a.A)(this,"size",void 0),(0,a.A)(this,"littleEndian",void 0),(0,a.A)(this,"error",void 0),(0,a.A)(this,"onFlush",void 0),(0,a.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=t,this.littleEndian=!r,this.error=0,i&&i.view)this.size=i.length,this.buffer=i,this.data=i.view;else if(i&&!i.byteOffset)this.size=i.length,this.buffer=i,this.data=new DataView(this.buffer.buffer);else{if(i)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}return(0,i.A)(e,[{key:"writeUint8",value:function(e){this.remainingLength()<1&&this.flush(),this.data.setUint8(this.pointer,e),this.pointer++,this.pos++}},{key:"writeUint16",value:function(e){this.remainingLength()<2&&this.flush(),this.data.setUint16(this.pointer,e,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}},{key:"writeUint24",value:function(e){this.remainingLength()<3&&this.flush();var t=(16711680&e)>>16,r=(65280&e)>>8,n=255&e;this.littleEndian?(this.writeUint8(n),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(n))}},{key:"writeUint32",value:function(e){this.remainingLength()<4&&this.flush(),this.data.setUint32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}},{key:"writeUint64",value:function(e){this.remainingLength()<8&&this.flush(),this.data.setBigUint64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}},{key:"writeInt8",value:function(e){this.remainingLength()<1&&this.flush(),this.data.setInt8(this.pointer,e),this.pointer++,this.pos++}},{key:"writeInt16",value:function(e){this.remainingLength()<2&&this.flush(),this.data.setInt16(this.pointer,e,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}},{key:"writeInt32",value:function(e){this.remainingLength()<4&&this.flush(),this.data.setInt32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}},{key:"writeInt64",value:function(e){this.remainingLength()<8&&this.flush(),this.data.setBigInt64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}},{key:"writeFloat",value:function(e){this.remainingLength()<4&&this.flush(),this.data.setFloat32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}},{key:"writeDouble",value:function(e){this.remainingLength()<8&&this.flush(),this.data.setFloat64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}},{key:"getPointer",value:function(){return this.pointer}},{key:"getPos",value:function(){return this.pos}},{key:"remainingLength",value:function(){return this.size-this.pointer}},{key:"writeBuffer",value:function(e){if(e.length){var t=e.length;if(this.remainingLength()<t)for(var r=0;t>0;){this.flush();var n=Math.min(this.size,t);this.buffer.set(e.subarray(r,r+n),this.pointer),this.pointer+=n,this.pos+=BigInt(n),r+=n,t-=n}else this.buffer.set(e,this.pointer),this.pointer+=t,this.pos+=BigInt(t)}}},{key:"writeString",value:function(e){var t=s.l(e);return this.writeBuffer(t),t.length}},{key:"encodeString",value:function(e){return s.l(e)}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){var e=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==e)throw this.error=e,Error("IOWriter error, flush failed")}this.pointer=0}},{key:"flushToPos",value:function(e){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){var t=this.onFlush(this.buffer.subarray(0,this.pointer),e);if(0!==t)throw this.error=t,Error("IOWriter error, flush failed")}this.pointer=0}},{key:"seek",value:function(e){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");this.flush();var t=this.onSeek(e);if(0!==t)throw this.error=t,Error("IOWriter error, seek failed");this.pos=e}},{key:"seekInline",value:function(e){var t=this.pointer;this.pointer=Math.max(0,Math.min(this.size,e)),this.pos+=BigInt(this.pointer-t)}},{key:"skip",value:function(e){var t=this.pointer;this.pointer=Math.min(this.size,this.pointer+e),this.pos+=BigInt(this.pointer-t)}},{key:"back",value:function(e){var t=this.pointer;this.pointer=Math.max(0,this.pointer-e),this.pos+=BigInt(this.pointer-t)}},{key:"getBuffer",value:function(){return this.buffer.subarray(0,this.pointer)}},{key:"setEndian",value:function(e){this.littleEndian=!e}},{key:"reset",value:function(){this.pointer=0,this.pos=BigInt(0),this.error=0}},{key:"getBufferSize",value:function(){return this.size}}]),e}()},50400:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(78716),i=r(81570),a=r(134),s=r(92647),o=function(){function e(){(0,n.A)(this,e),(0,a.A)(this,"queue",void 0),(0,a.A)(this,"pos",void 0),(0,a.A)(this,"startPos",void 0),(0,a.A)(this,"endPos",void 0),(0,a.A)(this,"index",void 0),(0,a.A)(this,"offset",void 0),this.queue=[],this.startPos=BigInt(0),this.endPos=BigInt(0),this.pos=BigInt(0)}return(0,i.A)(e,[{key:"push",value:function(e){if(this.pos===this.endPos)this.queue.push(e),this.endPos+=BigInt(e.length),this.pos+=BigInt(e.length);else if(e.length<this.queue[this.index].length-this.offset)this.queue[this.index].set(e,this.offset),this.offset+=e.length,this.pos+=BigInt(e.length),this.offset===this.queue[this.index].length&&(this.index++,this.offset=0),this.index===this.queue.length&&(this.index=-1,this.offset=-1,this.pos=this.endPos);else for(var t=0;t<e.length;){var r=Math.min(this.queue[this.index].length-this.offset,e.length-t);if(this.queue[this.index].set(e.subarray(t,t+r),this.offset),t+=r,this.offset+=r,this.pos+=BigInt(r),this.offset===this.queue[this.index].length){if(this.index+1===this.queue.length){if(t<e.length){var n=e.subarray(e.length-t);this.queue.push(n),this.endPos+=BigInt(n.length)}this.pos=this.endPos,this.index=-1,this.offset=-1;break}this.index++,this.offset=0}}}},{key:"seek",value:function(e){if(e<this.startPos||e>this.endPos)return!1;this.pos=e,this.index=-1,this.offset=-1;for(var t=this.startPos,r=0;r<this.queue.length;r++){if(e<=t+BigInt(this.queue[r].length)){this.index=r,this.offset=Number(e-t);break}t+=BigInt(this.queue[r].length)}return this.index<0&&(this.pos=this.endPos),!0}},{key:"flush",value:function(){this.startPos=this.endPos,this.pos=this.endPos,this.index=-1,this.offset=-1;var e=(0,s.A)(Uint8Array,this.queue);return this.queue.length=0,e}},{key:"size",get:function(){return this.queue.length}}]),e}()},45726:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(78716),i=r(81570),a=r(134),s=r(72739),o=r(4624),u="src/common/math/Matrix3.ts",c=function(){function e(t){(0,n.A)(this,e),(0,a.A)(this,"element",void 0),t?(this.element=new Float32Array(9),this.set(t)):this.element=new Float32Array([1,0,0,0,1,0,0,0,1])}return(0,i.A)(e,[{key:"rc",value:function(e,t){return this.getValue(3*t+e)}},{key:"setRC",value:function(e,t,r){this.setValue(3*t+e,r)}},{key:"getValue",value:function(e){if(e>=0&&e<9)return this.element[e];o.z3("index out of Matrix4's rang [0 - 9]",u,47)}},{key:"setValue",value:function(e,t){e>=0&&e<9?this.element[e]=t:o.z3("index out of Matrix4's rang [0 - 9]",u,56)}},{key:"setIdentity",value:function(){return this.element=new Float32Array([1,0,0,0,1,0,0,0,1]),this}},{key:"set",value:function(e){var t=this;return s.__(e,(function(e,r){t.element[r]=e})),this}},{key:"invert",value:function(){var e=this.element,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],s=e[5],o=e[6],u=e[7],c=e[8],f=c*a-s*u,h=s*o-c*i,d=u*i-a*o,l=t*f+r*h+n*d;if(0===l)return this.set([0,0,0,0,0,0,0,0,0]);var p=1/l;return e[0]=f*p,e[1]=(n*u-c*r)*p,e[2]=(s*r-n*a)*p,e[3]=h*p,e[4]=(c*t-n*o)*p,e[5]=(n*i-s*t)*p,e[6]=d*p,e[7]=(r*o-u*t)*p,e[8]=(a*t-r*i)*p,this}},{key:"toArray",value:function(){for(var e=[],t=0;t<9;t++)e[t]=this.element[t];return e}},{key:"copy",value:function(){return(new e).set(this.toArray())}}],[{key:"RowMajor",value:function(t){return new e([t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]])}},{key:"ColMajor",value:function(t){return new e(t)}}]),e}()},12535:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n,i=r(78716),a=r(81570),s=r(134),o=r(72739),u=r(4624),c=r(1064),f="src/common/math/Matrix4.ts",h=function(){function e(t){(0,i.A)(this,e),(0,s.A)(this,"element",void 0),t?(this.element=new Float32Array(16),this.set(t)):this.element=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return(0,a.A)(e,[{key:"rc",value:function(e,t){return this.getValue(4*t+e)}},{key:"setRC",value:function(e,t,r){this.setValue(4*t+e,r)}},{key:"getValue",value:function(e){if(e>=0&&e<=15)return this.element[e];u.z3("index out of Matrix4's rang [0 - 15]",f,58)}},{key:"setValue",value:function(e,t){e>=0&&e<=15?this.element[e]=t:u.z3("index out of Matrix4's rang [0 - 15]",f,67)}},{key:"setIdentity",value:function(){return this.element=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(e){var t=this;return o.__(e,(function(e,r){t.element[r]=e})),this}},{key:"multiply",value:function(e){var t,r,n,i,a,s,o,u;if((i=r=this.element)===(n=e.element))for(n=new Float32Array(16),t=0;t<16;t++)n[t]=i[t];for(t=0;t<4;t++)a=r[t],s=r[t+4],o=r[t+8],u=r[t+12],i[t]=a*n[0]+s*n[1]+o*n[2]+u*n[3],i[t+4]=a*n[4]+s*n[5]+o*n[6]+u*n[7],i[t+8]=a*n[8]+s*n[9]+o*n[10]+u*n[11],i[t+12]=a*n[12]+s*n[13]+o*n[14]+u*n[15];return this}},{key:"multiplyVector3",value:function(e){var t=this.element,r=e.element;return new c.P([r[0]*t[0]+r[1]*t[4]+r[2]*t[8]+t[12],r[0]*t[1]+r[1]*t[5]+r[2]*t[9]+t[13],r[0]*t[2]+r[1]*t[6]+r[2]*t[10]+t[14]])}},{key:"multiplyVector4",value:function(e){var t=this.element,r=e.element;return new c.I([r[0]*t[0]+r[1]*t[4]+r[2]*t[8]+r[3]*t[12],r[0]*t[1]+r[1]*t[5]+r[2]*t[9]+r[3]*t[13],r[0]*t[2]+r[1]*t[6]+r[2]*t[10]+r[3]*t[14],r[0]*t[3]+r[1]*t[7]+r[2]*t[11]+r[3]*t[15]])}},{key:"transpose",value:function(){var e,t;return t=(e=this.element)[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setInverseOf",value:function(e){var t,r,n,i,a;if(r=e.element,n=this.element,(i=new Float32Array(16))[0]=r[5]*r[10]*r[15]-r[5]*r[11]*r[14]-r[9]*r[6]*r[15]+r[9]*r[7]*r[14]+r[13]*r[6]*r[11]-r[13]*r[7]*r[10],i[1]=-r[1]*r[10]*r[15]+r[1]*r[11]*r[14]+r[9]*r[2]*r[15]-r[9]*r[3]*r[14]-r[13]*r[2]*r[11]+r[13]*r[3]*r[10],i[2]=r[1]*r[6]*r[15]-r[1]*r[7]*r[14]-r[5]*r[2]*r[15]+r[5]*r[3]*r[14]+r[13]*r[2]*r[7]-r[13]*r[3]*r[6],i[3]=-r[1]*r[6]*r[11]+r[1]*r[7]*r[10]+r[5]*r[2]*r[11]-r[5]*r[3]*r[10]-r[9]*r[2]*r[7]+r[9]*r[3]*r[6],i[4]=-r[4]*r[10]*r[15]+r[4]*r[11]*r[14]+r[8]*r[6]*r[15]-r[8]*r[7]*r[14]-r[12]*r[6]*r[11]+r[12]*r[7]*r[10],i[5]=r[0]*r[10]*r[15]-r[0]*r[11]*r[14]-r[8]*r[2]*r[15]+r[8]*r[3]*r[14]+r[12]*r[2]*r[11]-r[12]*r[3]*r[10],i[6]=-r[0]*r[6]*r[15]+r[0]*r[7]*r[14]+r[4]*r[2]*r[15]-r[4]*r[3]*r[14]-r[12]*r[2]*r[7]+r[12]*r[3]*r[6],i[7]=r[0]*r[6]*r[11]-r[0]*r[7]*r[10]-r[4]*r[2]*r[11]+r[4]*r[3]*r[10]+r[8]*r[2]*r[7]-r[8]*r[3]*r[6],i[8]=r[4]*r[9]*r[15]-r[4]*r[11]*r[13]-r[8]*r[5]*r[15]+r[8]*r[7]*r[13]+r[12]*r[5]*r[11]-r[12]*r[7]*r[9],i[9]=-r[0]*r[9]*r[15]+r[0]*r[11]*r[13]+r[8]*r[1]*r[15]-r[8]*r[3]*r[13]-r[12]*r[1]*r[11]+r[12]*r[3]*r[9],i[10]=r[0]*r[5]*r[15]-r[0]*r[7]*r[13]-r[4]*r[1]*r[15]+r[4]*r[3]*r[13]+r[12]*r[1]*r[7]-r[12]*r[3]*r[5],i[11]=-r[0]*r[5]*r[11]+r[0]*r[7]*r[9]+r[4]*r[1]*r[11]-r[4]*r[3]*r[9]-r[8]*r[1]*r[7]+r[8]*r[3]*r[5],i[12]=-r[4]*r[9]*r[14]+r[4]*r[10]*r[13]+r[8]*r[5]*r[14]-r[8]*r[6]*r[13]-r[12]*r[5]*r[10]+r[12]*r[6]*r[9],i[13]=r[0]*r[9]*r[14]-r[0]*r[10]*r[13]-r[8]*r[1]*r[14]+r[8]*r[2]*r[13]+r[12]*r[1]*r[10]-r[12]*r[2]*r[9],i[14]=-r[0]*r[5]*r[14]+r[0]*r[6]*r[13]+r[4]*r[1]*r[14]-r[4]*r[2]*r[13]-r[12]*r[1]*r[6]+r[12]*r[2]*r[5],i[15]=r[0]*r[5]*r[10]-r[0]*r[6]*r[9]-r[4]*r[1]*r[10]+r[4]*r[2]*r[9]+r[8]*r[1]*r[6]-r[8]*r[2]*r[5],0==(a=r[0]*i[0]+r[1]*i[4]+r[2]*i[8]+r[3]*i[12]))return this;for(a=1/a,t=0;t<16;t++)n[t]=i[t]*a;return this}},{key:"invert",value:function(){return this.setInverseOf(this),this}},{key:"setOrtho",value:function(e,t,r,n,i,a){var s,o,c;return e!==t&&r!==n&&i!==a||u.h2("null frustum",f,240),s=1/(t-e),o=1/(n-r),c=1/(a-i),this.set([2*s,0,0,0,0,2*o,0,0,0,0,-2*c,0,-(t+e)*s,-(n+r)*o,-(a+i)*c,1]),this}},{key:"ortho",value:function(t,r,n,i,a,s){return this.multiply((new e).setOrtho(t,r,n,i,a,s))}},{key:"setFrustum",value:function(e,t,r,n,i,a){var s,o,c;return e!==t&&r!==n&&i!==a||u.z3("null frustum",f,281),i<=0&&u.h2("near <= 0",f,284),a<=0&&u.h2("far <= 0",f,287),s=1/(t-e),o=1/(n-r),c=1/(a-i),this.set([2*i*s,0,0,0,0,2*i*o,0,0,(t+e)*s,(n+r)*o,-(a+i)*c,-1,0,0,-2*i*a*c,0]),this}},{key:"frustum",value:function(t,r,n,i,a,s){return this.multiply((new e).setOrtho(t,r,n,i,a,s))}},{key:"setPerspective",value:function(e,t,r,n){var i,a,s;return r!==n&&0!==t||u.h2("null frustum",f,328),r<=0&&u.h2("near <= 0",f,331),n<=0&&u.h2("far <= 0",f,334),e=Math.PI*e/180/2,0===(a=Math.sin(e))&&u.h2("null frustum",f,342),i=1/(n-r),s=Math.cos(e)/a,this.set([s/t,0,0,0,0,s,0,0,0,0,-(n+r)*i,-1,0,0,-2*r*n*i,0]),this}},{key:"perspective",value:function(t,r,n,i){return this.multiply((new e).setPerspective(t,r,n,i))}},{key:"setScale",value:function(e){return this.set([e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1]),this}},{key:"scale",value:function(e){var t=this.element;return t[0]*=e.x,t[1]*=e.x,t[2]*=e.x,t[3]*=e.x,t[4]*=e.y,t[5]*=e.y,t[6]*=e.y,t[7]*=e.y,t[8]*=e.z,t[9]*=e.z,t[10]*=e.z,t[11]*=e.z,this}},{key:"setTranslate",value:function(e){return this.set([1,0,0,0,0,1,0,0,0,0,1,0,e.x,e.y,e.z,1]),this}},{key:"preTranslate",value:function(e){var t=this.element;return t[12]+=t[0]*e.x+t[4]*e.y+t[8]*e.z,t[13]+=t[1]*e.x+t[5]*e.y+t[9]*e.z,t[14]+=t[2]*e.x+t[6]*e.y+t[10]*e.z,t[15]+=t[3]*e.x+t[7]*e.y+t[11]*e.z,this}},{key:"postTranslate",value:function(e){var t=this.element;return t[0]+=e.x*t[3],t[1]+=e.y*t[3],t[2]+=e.z*t[3],t[4]+=e.x*t[7],t[5]+=e.y*t[7],t[6]+=e.z*t[7],t[8]+=e.x*t[11],t[9]+=e.y*t[11],t[10]+=e.z*t[11],t[12]+=e.x*t[15],t[13]+=e.y*t[15],t[14]+=e.z*t[15],this}},{key:"setRotate",value:function(e,t){var r,n,i,a,s,o,u,c,f,h,d,l,p,v;return e=Math.PI*e/180,r=t.x,n=t.y,i=t.z,a=Math.sin(e),s=Math.cos(e),0!==t.x&&0===t.y&&0===t.z?(t.x<0&&(a=-a),this.set([1,0,0,0,0,s,-a,0,0,a,s,0,0,0,0,1])):0===t.x&&0!==t.y&&0===t.z?(t.y<0&&(a=-a),this.set([s,0,a,0,0,1,0,0,-a,0,s,0,0,0,0,1])):0===t.x&&0===t.y&&0!==t.z?(t.z<0&&(a=-a),this.set([s,-a,0,0,a,s,0,0,0,0,1,0,0,0,0,1])):(1!==(o=t.magnitude)&&(r*=u=1/o,n*=u,i*=u),c=1-s,f=r*n,h=n*i,d=i*r,l=r*a,p=n*a,v=i*a,this.set([r*r*c+s,f*c+v,d*c-p,0,f*c-v,n*n*c+s,h*c+l,0,d*c+p,h*c-l,i*i*c+s,0,0,0,0,1])),this}},{key:"rotate",value:function(t,r){return this.multiply((new e).setRotate(t,r)),this}},{key:"setLookAt",value:function(e,t,r){var n,i,a,s,o,u,f,h,d,l,p;return n=t.x-e.x,i=t.y-e.y,a=t.z-e.z,n*=s=1/Math.sqrt(n*n+i*i+a*a),a*=s,o=(i*=s)*r.z-a*r.y,u=a*r.x-n*r.z,f=n*r.y-i*r.x,d=(u*=h=1/Math.sqrt(o*o+u*u+f*f))*a-(f*=h)*i,l=f*n-(o*=h)*a,p=o*i-u*n,this.set([o,d,-n,0,u,l,-i,0,f,p,-a,0,0,0,0,1]),this.preTranslate(new c.P([-e.x,-e.y,-e.z]))}},{key:"lookAt",value:function(t,r,n){return this.multiply((new e).setLookAt(t,r,n))}},{key:"toArray",value:function(){for(var e=[],t=0;t<16;t++)e[t]=this.element[t];return e}},{key:"copy",value:function(){return(new e).set(this.toArray())}}],[{key:"shared",value:function(){return n||(n=new e)}},{key:"RowMajor",value:function(t){return new e([t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]])}},{key:"ColMajor",value:function(t){return new e(t)}}]),e}()},1064:(e,t,r)=>{"use strict";r.d(t,{I:()=>o,P:()=>s});var n=r(78716),i=r(81570),a=r(134),s=function(){function e(t){(0,n.A)(this,e),(0,a.A)(this,"element",void 0),this.element=new Float32Array(3),t&&(this.element[0]=t[0],this.element[1]=t[1],this.element[2]=t[2])}return(0,i.A)(e,[{key:"normalize",value:function(){var e=this.x,t=this.y,r=this.z,n=this.magnitude;return n?(1===n||(n=1/n,this.x=e*n,this.y=t*n,this.z=r*n),this):(this.x=this.y=this.z=0,this)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"sqrMagnitude",get:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"x",get:function(){return this.element[0]},set:function(e){this.element[0]=e}},{key:"y",get:function(){return this.element[1]},set:function(e){this.element[1]=e}},{key:"z",get:function(){return this.element[2]},set:function(e){this.element[2]=e}}]),e}(),o=(0,i.A)((function e(t){(0,n.A)(this,e),(0,a.A)(this,"element",void 0),this.element=new Float32Array(4),t&&(this.element[0]=t[0],this.element[1]=t[1],this.element[2]=t[2],this.element[4]=t[3])}))},31658:(e,t,r)=>{"use strict";function n(e,t){for(;0!==t;){var r=[t,e%t];e=r[0],t=r[1]}return e}r.d(t,{A:()=>n})},66551:(e,t,r)=>{"use strict";r.d(t,{B:()=>i});var n=r(45726);function i(e,t){for(var r=new n.A([0,0,0,0,0,0,0,0,0]),i=0;i<3;i++)for(var a=0;a<3;a++){var s=e.rc(i,0)*t.rc(0,a)+e.rc(i,1)*t.rc(1,a)+e.rc(i,2)*t.rc(2,a);r.setRC(i,a,s)}return r}},60153:(e,t,r)=>{"use strict";r.d(t,{Y3:()=>i});var n=r(1064);function i(e,t){for(var r=new n.P([0,0,0]),i=0;i<3;i++)r.element[i]=e.rc(i,0)*t.x+e.rc(i,1)*t.y+e.rc(i,2)*t.z;return r}},42577:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(88435),i=r.n(n),a=r(78716),s=r(81570),o=r(77193),u=r(25767),c=r(43070),f=r(31060),h=r(26492),d=r(134);function l(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,p()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}var v=function(e){function t(){var e;(0,a.A)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=l(this,t,[].concat(n)),(0,d.A)((0,c.A)(e),"peer",void 0),(0,d.A)((0,c.A)(e),"onmessage",void 0),(0,d.A)((0,c.A)(e),"onmessageerror",void 0),e}return(0,f.A)(t,e),(0,s.A)(t,[{key:"postMessage",value:function(e,t){var r;null!==(r=this.peer)&&void 0!==r&&r.onmessage&&this.peer.onmessage({data:e})}},{key:"close",value:function(){this.peer=null}},{key:"start",value:function(){}}]),t}((0,h.A)(EventTarget)),m=(0,s.A)((function e(){(0,a.A)(this,e),(0,d.A)(this,"port1",void 0),(0,d.A)(this,"port2",void 0),this.port1=new v,this.port2=new v,this.port1.peer=this.port2,this.port2.peer=this.port1}))},84149:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>T,S3:()=>_,Wo:()=>w});var n=r(88435),i=r.n(n),a=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(25767),f=r(43070),h=r(31060),d=r(134),l=r(36443),p=r.n(l),v=r(80662),m=r.n(v),A=r(54001),g=r.n(A),k=r(96172),y=r(34677);function b(e,t,r){return t=(0,c.A)(t),(0,u.A)(e,x()?i()(t,r||[],(0,c.A)(e).constructor):t.apply(e,r))}function x(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}var w="notify",_="request",T=function(e){function t(e){var r;return(0,s.A)(this,t),r=b(this,t,[!0]),(0,d.A)((0,f.A)(r),"port",void 0),(0,d.A)((0,f.A)(r),"requestMap",void 0),(0,d.A)((0,f.A)(r),"seq",void 0),(0,d.A)((0,f.A)(r),"closed",void 0),r.port=e,r.port.onmessage=r.handle.bind((0,f.A)(r)),r.seq=0,r.requestMap=new(m()),r.port.start(),r.closed=!1,r}var r;return(0,h.A)(t,e),(0,o.A)(t,[{key:"handle",value:function(e){var t=e.data,r=t.type,n=t.data;if("notify"===r)this.fire(w,n);else if("reply"===r){var i=this.requestMap.get(n.seq);i&&((0,y.A)(n.result)?i.resolve(n.result):n.error?i.reject(n.error):i.resolve(void 0),this.requestMap.delete(n.seq))}else"request"===r&&this.fire(_,n)}},{key:"notify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.port.postMessage({type:"notify",data:{method:e,params:t}},r)}},{key:"request",value:(r=(0,a.A)(p().mark((function e(t){var r,n,i=this,a=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n=a.length>2&&void 0!==a[2]?a[2]:[],e.abrupt("return",new(g())((function(e,a){var s=i.seq++;i.requestMap.set(s,{resolve:e,reject:a}),i.port.postMessage({type:"request",data:{seq:s,method:t,params:r}},n)})));case 3:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"reply",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i={seq:e.seq};(0,y.A)(t)?i.result=t:r&&(i.error=r),null!=n&&n.length?this.port.postMessage({type:"reply",data:i},n):this.port.postMessage({type:"reply",data:i})}},{key:"getPort",value:function(){return this.port}},{key:"destroy",value:function(){this.requestMap.size&&(this.requestMap.forEach((function(e){e.reject("ipc port close")})),this.requestMap.clear()),this.port&&(this.port.close(),this.port=null),this.closed=!0}}]),t}(k.A)},6253:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var n,i=r(78716),a=r(81570),s=r(134),o=r(39638),u=r(86932),c=r(47222),f=r(78995),h=0;function d(){return n?(h++,n):(n=new c.A,h=1,n)}function l(){0!==h&&0==--h&&(n.destroy(),n=null)}var p=function(){function e(t){var r=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,i.A)(this,e),(0,s.A)(this,"messageChannel",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"started",void 0),(0,s.A)(this,"timer",void 0),(0,s.A)(this,"workerTimer",void 0),(0,s.A)(this,"workerSetTimeout",void 0),(0,s.A)(this,"onClock",void 0),(0,s.A)(this,"nextTick",void 0),(0,s.A)(this,"a",void 0),(0,s.A)(this,"b",void 0),(0,s.A)(this,"beta",void 0),(0,s.A)(this,"alpha",void 0),(0,s.A)(this,"count",void 0),(0,s.A)(this,"equivalent",void 0),(0,s.A)(this,"timestamp",void 0),(0,s.A)(this,"onVisibilityChange",void 0),(0,s.A)(this,"timeoutNext",void 0),(0,s.A)(this,"running",void 0),(0,s.A)(this,"highPerformance",void 0),this.started=!1,this.interval=t,this.highPerformance=n,this.a=.2,this.b=4,this.equivalent=50,this.timestamp=0,this.nextTick=function(){if(r.started&&!r.running)if(r.running=!0,r.interval>=4||!r.highPerformance)r.timeoutTick();else if(r.interval<=0)r.messageChannel.port1.postMessage(null);else{var e=(0,u.A)();e-r.timestamp>r.equivalent&&(r.count=0,r.timestamp=e),r.count<r.beta?r.messageChannel.port1.postMessage(null):r.timeoutTick()}},this.compute(),this.messageChannel=new MessageChannel,this.handleEvent(),this.timeoutNext=function(e){e?r.workerTimer=null:r.timer=null,r.running=!1,r.count++,r.onClock?r.onClock(r.nextTick):r.nextTick()},(0,o.A)()||"hidden"!==document.visibilityState||(this.workerSetTimeout=d()),this.running=!1}return(0,a.A)(e,[{key:"compute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.interval>0&&(this.beta=Math.ceil(this.equivalent*(1-this.b/this.interval)/(this.a-this.b)),this.alpha=Math.floor(this.equivalent/this.interval-this.beta),e&&(this.count=0))}},{key:"timeoutTick",value:function(){this.workerSetTimeout&&"hidden"===document.visibilityState&&this.interval<1e3?this.workerTimer=this.workerSetTimeout.setTimeout(this.timeoutNext,this.interval):this.timer=setTimeout(this.timeoutNext,this.interval)}},{key:"start",value:function(){this.started||(this.started=!0,this.timestamp=(0,u.A)(),this.nextTick())}},{key:"stop",value:function(){this.started=!1,this.timer&&(clearTimeout(this.timer),this.timer=null),this.workerTimer&&this.workerSetTimeout&&this.workerSetTimeout.clearTimeout(this.workerTimer),this.running=!1}},{key:"isStarted",value:function(){return this.started}},{key:"setInterval",value:function(e){this.interval=Math.max(e,0),this.compute()}},{key:"getInterval",value:function(){return this.interval}},{key:"isZeroTimeout",value:function(){return this.interval<4}},{key:"destroy",value:function(){this.stop(),this.workerSetTimeout&&(l(),this.workerSetTimeout=null),this.onVisibilityChange&&(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.onVisibilityChange=null)}},{key:"handleEvent",value:function(){var e=this;this.messageChannel.port2.onmessage=function(){e.started&&(e.running=!1,e.count++,e.onClock?e.onClock(e.nextTick):e.nextTick())},(0,o.A)()||(this.onVisibilityChange=(0,f.A)((function(t){"hidden"===document.visibilityState?(e.workerSetTimeout=d(),e.timer&&(clearTimeout(e.timer),e.timer=null,e.running=!1),e.nextTick()):(e.workerTimer&&(e.workerSetTimeout.clearTimeout(e.workerTimer),e.workerTimer=null,e.running=!1),e.timer&&(clearTimeout(e.timer),e.timer=null,e.running=!1),l(),e.workerSetTimeout=null,e.nextTick())}),20),document.addEventListener("visibilitychange",this.onVisibilityChange))}}]),e}()},39148:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(25182),i=r(78716),a=r(81570),s=r(134),o=r(36443),u=r.n(o),c=r(54001),f=r.n(c),h=r(6253),d=r(86932),l=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(0,i.A)(this,e),(0,s.A)(this,"task",void 0),(0,s.A)(this,"count",void 0),(0,s.A)(this,"emptyCount",void 0),(0,s.A)(this,"started",void 0),(0,s.A)(this,"clock",void 0),(0,s.A)(this,"timestamp",void 0),(0,s.A)(this,"timeout",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"startTimer",void 0),(0,s.A)(this,"autoInterval",void 0),(0,s.A)(this,"sync",void 0),(0,s.A)(this,"tickAfter",void 0),(0,s.A)(this,"processing",void 0),this.task=t,this.timeout=n,this.interval=a,this.autoInterval=o,this.sync=u,this.count=0,this.emptyCount=0,this.timestamp=0,this.started=!1,this.processing=!1,this.clock=new h.A(this.interval),this.clock.onClock=function(e){if(r.started)if(r.count++,r.sync)r.tickAfter&&(r.tickAfter(),r.tickAfter=null),!1===r.task()?r.stop():r.next(e);else{if(r.processing)return;r.processing=!0,r.task().then((function(t){r.processing=!1,r.tickAfter&&(r.tickAfter(),r.tickAfter=null),!1===t?r.stop():r.next(e)}))}}}var t;return(0,a.A)(e,[{key:"next",value:function(e){if(this.started){var t=(0,d.A)();if(this.autoInterval&&t-this.timestamp>50){var r=this.emptyCount/this.count;0===this.emptyCount?this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)):r<.1?this.clock.setInterval(this.clock.getInterval()-1):r>.2?this.clock.setInterval(Math.min(this.clock.getInterval()+1,20)):r>.5&&this.clock.setInterval(this.clock.getInterval()<<1),this.count=0,this.emptyCount=0,this.timestamp=t}e()}}},{key:"start",value:function(){var e=this;this.started=!0,this.timeout?this.startTimer=setTimeout((function(){e.count=0,e.emptyCount=0,e.timestamp=(0,d.A)(),e.clock.start(),e.startTimer=null}),this.timeout):(this.count=0,this.emptyCount=0,this.timestamp=(0,d.A)(),this.clock.start())}},{key:"stop",value:function(){this.started=!1,this.processing=!1,this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.stop()}},{key:"stopBeforeNextTick",value:(t=(0,n.A)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.isStarted()){e.next=3;break}return e.abrupt("return");case 3:if(!this.sync){e.next=9;break}this.started=!1,this.processing=!1,this.clock.stop(),e.next=10;break;case 9:return e.abrupt("return",new(f())((function(e){t.tickAfter=function(){t.started=!1,t.processing=!1,t.clock.stop(),e()}})));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isStarted",value:function(){return this.started}},{key:"emptyTask",value:function(){this.emptyCount++}},{key:"isZeroTimeout",value:function(){var e;return null===(e=this.clock)||void 0===e?void 0:e.isZeroTimeout()}},{key:"restart",value:function(){this.clock&&(this.stop(),this.clock.setInterval(this.interval),this.start())}},{key:"resetInterval",value:function(){this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)),this.emptyCount=0,this.count=0,this.timestamp=(0,d.A)()}},{key:"destroy",value:function(){this.stop(),this.task=null,this.timeout=null,this.interval=null}}]),e}()},13724:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(78716),i=r(81570),a=r(134),s=r(45249),o=r.n(s),u=function(){function e(t){(0,n.A)(this,e),(0,a.A)(this,"timeout",void 0),(0,a.A)(this,"timer",void 0),(0,a.A)(this,"resolve",void 0),(0,a.A)(this,"reject",void 0),(0,a.A)(this,"startTime",void 0),this.timeout=t}return(0,i.A)(e,[{key:"then",value:function(e,t){var r=this;this.resolve=e,this.reject=t,this.startTime=o()(),this.timer=setTimeout((function(){r.resolve(o()()-r.startTime),r.timer=null}),1e3*this.timeout)}},{key:"stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.timer&&(clearTimeout(this.timer),this.timer=null,this.resolve&&e?this.resolve(o()()-this.startTime):this.reject&&!e&&this.reject(o()()-this.startTime))}},{key:"reset",value:function(e){var t=this;e&&(this.timeout=e),this.timer&&(clearTimeout(this.timer),this.timer=setTimeout((function(){t.resolve(o()()-t.startTime),t.timer=null}),1e3*this.timeout))}}]),e}()},54058:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(78716),i=r(81570),a=r(134),s=function(){function e(t,r,i){(0,n.A)(this,e),(0,a.A)(this,"task",void 0),(0,a.A)(this,"timeout",void 0),(0,a.A)(this,"interval",void 0),(0,a.A)(this,"timer",void 0),this.task=t,this.timeout=r,this.interval=i}return(0,i.A)(e,[{key:"start",value:function(){var e=this;e.stop();var t=e.timeout,r=e.interval;null==t&&(t=r),e.timer=setTimeout((function t(){!1!==e.task()&&e.timer?e.timer=setTimeout(t,e.interval):e.stop()}),t)}},{key:"stop",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"updateInterval",value:function(e){this.interval=e}},{key:"isStarted",value:function(){return!!this.timer}},{key:"destroy",value:function(){this.stop(),this.task=this.timeout=this.interval=null}}]),e}()},47222:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(78716),i=r(81570),a=r(134),s=r(80662),o=r.n(s),u=r(61837);r(7903);var c=function(){function e(){var t=this;(0,n.A)(this,e),(0,a.A)(this,"worker",void 0),(0,a.A)(this,"workerUrl",void 0),(0,a.A)(this,"taskMap",void 0),(0,a.A)(this,"id",void 0),this.id=0,this.taskMap=new(o());var r="\n      ".concat((0,u.A)(7903,{varName:"workerSetTimeoutTask"}),"\n      workerSetTimeoutTask.default(self)\n    "),i=new Blob([r],{type:"text/javascript"});this.workerUrl=URL.createObjectURL(i),this.worker=new Worker(this.workerUrl),this.worker.addEventListener("message",(function(e){var r=e.data,n=r.type,i=r.id;if("pong"===n){var a=t.taskMap.get(i);a&&a(!0)}}))}return(0,i.A)(e,[{key:"setTimeout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.id++;return this.taskMap.set(r,e),this.worker.postMessage({type:"ping",data:{timeout:t,id:r}}),r}},{key:"clearTimeout",value:function(e){this.taskMap.delete(e)}},{key:"destroy",value:function(){this.worker&&(this.worker.terminate(),this.worker=null),this.workerUrl&&(URL.revokeObjectURL(this.workerUrl),this.workerUrl=null),this.taskMap&&(this.taskMap.clear(),this.taskMap=null)}}]),e}()},38724:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(78716),i=r(81570),a=r(134),s=r(6253),o=function(){function e(t,r,i){var o=this;(0,n.A)(this,e),(0,a.A)(this,"task",void 0),(0,a.A)(this,"timeout",void 0),(0,a.A)(this,"interval",void 0),(0,a.A)(this,"clock",void 0),(0,a.A)(this,"started",void 0),(0,a.A)(this,"timer",void 0),this.task=t,this.timeout=r,this.interval=i,this.started=!1,this.clock=new s.A(this.interval,!1),this.clock.onClock=function(e){o.started&&!1===o.task()?o.stop():e()}}return(0,i.A)(e,[{key:"start",value:function(){var e=this;this.started=!0,this.timeout>0?this.timer=setTimeout((function(){e.timer=null,e.clock.start()}),this.timeout):this.clock.start()}},{key:"stop",value:function(){this.started=!1,this.clock.stop(),this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"isStarted",value:function(){return this.started}},{key:"updateInterval",value:function(e){this.interval=e,this.clock.setInterval(e)}},{key:"destroy",value:function(){this.clock&&(this.stop(),this.clock.destroy(),this.clock=null),this.started=!1,this.task=this.timeout=this.interval=null}}]),e}()},7903:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(78716),i=r(81570),a=r(134),s=r(4624),o="src/common/timer/workerSetTimeoutTask.ts",u=function(){function e(t){(0,n.A)(this,e),(0,a.A)(this,"worker",void 0),this.worker=t,this.handleEvents()}return(0,i.A)(e,[{key:"handleEvents",value:function(){var e=this;this.worker.addEventListener("message",(function(t){var r,n=t.data.data;setTimeout((function(){e.worker.postMessage({type:"pong",id:n.id})}),Math.max(null!==(r=n.timeout)&&void 0!==r?r:0,4))}))}}]),e}();function c(e){try{new u(e)}catch(e){s.z3("new WorkerSetTimeout failed",o,32)}}},72739:(e,t,r)=>{"use strict";r.d(t,{$r:()=>h,El:()=>d,TF:()=>c,VC:()=>u,__:()=>s,zy:()=>f});var n=r(67672),i=r(10576),a=r(56401);function s(e,t,r){if(e){var n=e.length;if(n)if(r)for(var a=n-1;a>=0&&t(e[a],a)!==i.W8;a--);else for(var s=0;s<n&&t(e[s],s)!==i.W8;s++);}}function o(e,t){e[e.length]=t}function u(e,t){!function(e,t,r){n.YO(t)?s(t,(function(t){r(e,t)})):r(e,t)}(e,t,o)}function c(e,t,r){var n=0;return s(e,(function(a,s){(r===i.W8?a==t:a===t)&&(e.splice(s,1),n++)}),i.rT),n}function f(e,t,r){return function(e,t,r){var n=i.Cy;return s(e,(function(e,a){if(r===i.W8?e==t:e===t)return n=a,i.W8})),n}(e,t,r)>=0}function h(e){return n.YO(e)?e:(0,a.A)(i.Ml.slice,e)}function d(e,t){for(var r=0,n=e.length-1,i=-1;r<=n;){var a=(r+n)/2>>>0,s=t(e[a]);if(0===s){i=a;break}1===s?r=a+1:(n=a-1,i=a)}return i}},90932:(e,t,r)=>{"use strict";r.d(t,{l:()=>i});var n="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";function i(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.length,i=0,a=0,s="",o=0;o<r;o++)for(a=a<<8|e[o],i+=8;i>=5;)s+=n[a>>>i-5&31],i-=5;if(i>0&&(s+=n[a<<5-i&31]),t)for(;s.length%8!=0;)s+="=";return s}},4919:(e,t,r)=>{"use strict";r.d(t,{E_:()=>a});var n=r(72739),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a(e){for(var t="function"==typeof atob?atob(e):function(e){function t(e){var t=i.indexOf(e);return-1===t?0:t}for(var r="",n=0;n<e.length;){var a=t(e[n++]),s=t(e[n++]),o=t(e[n++]),u=t(e[n++]),c=a<<2|s>>4,f=(15&s)<<4|o>>2,h=(3&o)<<6|u;r+=String.fromCharCode(c),64!==o&&(r+=String.fromCharCode(f)),64!==u&&(r+=String.fromCharCode(h))}return r}(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}var s={};n.__(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],(function(e,t){s[e]=t}))},43607:(e,t,r)=>{"use strict";function n(e){return e>0?e:-e}function i(e,t){return e>t?e:t}function a(e,t){return e>t?t:e}r.d(t,{T9:()=>i,jk:()=>a,tn:()=>n})},86834:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(23509),i=r(29967),a=r.n(i),s=r(72739),o=r(67672),u=r(84504);var c,f,h,d=(c=("object"===("undefined"==typeof navigator?"undefined":(0,n.A)(navigator))&&navigator.userAgent||"").toLowerCase(),(0,s.__)([["alipay",/alipay/],["wechat",/micromessenger/],["dingtalk",/dingtalk[ \/]([\d_.]+)/],["baiduApp",/baiduboxapp/],["baidu",/baidubrowser/],["baidu",/bdbrowser/],["uc",/ucbrowser/],["uc",/ucweb/],["qq",/qqbrowser/],["qqApp",/qq/],["ie",/iemobile[ \/]([\d_.]+)/],["ie",/msie[ \/]([\d_.]+)/],["ie",/trident[ \/]([\d_.]+)/,4],["edge",/edge[ \/]([\d_.]+)/],["newEdge",/edg[ \/]([\d_.]+)/],["chrome",/chrome[ \/]([\d_.]+)/],["firefox",/firefox[ \/]([\d_.]+)/],["opera",/opera(?:.*version)?[ \/]([\d_.]+)/],["safari",/version[ \/]([\d_.]+) safari/],["safari",/version[ \/]([\d_.]+) \S* safari/],["safari",/safari/]],(function(e){var t=e[1].exec(c);if(t)return f=e[0],(h=t[1])&&(h=h.replace(/_/g,"."),e[2]&&(h=a()(h,10)+e[2]+".0")),!1})),{name:f||"",version:h||"",majorVersion:({}[f]||function(e){return o.Yj(e)&&e.split(".").shift()||""})(h),checkVersion:{}[f]||u.A});d.name&&(d[d.name]=!0);const l=d},10576:(e,t,r)=>{"use strict";r.d(t,{Cq:()=>u,Cy:()=>f,M_:()=>v,Ml:()=>g,TK:()=>m,W8:()=>o,ZG:()=>l,ZH:()=>c,aV:()=>h,jf:()=>p,rT:()=>s,s0:()=>d,u1:()=>k,x7:()=>A});var n=r(23509),i=r(7403),a=r.n(i),s=!0,o=!1,u=null,c=void 0,f=-1,h="undefined",d="function",l=".",p=("undefined"==typeof window?"undefined":(0,n.A)(window))!==h?window:c,v=(("undefined"==typeof document?"undefined":(0,n.A)(document))!==h&&document,("undefined"==typeof globalThis?"undefined":(0,n.A)(globalThis))!==h?globalThis:(void 0===r.g?"undefined":(0,n.A)(r.g))!==h?r.g:p),m=("undefined"==typeof self?"undefined":(0,n.A)(self))!==h?self:v,A=function(){},g=(a()({}),a()([])),k=""},67672:(e,t,r)=>{"use strict";r.d(t,{Ik:()=>h,Pc:()=>c,YO:()=>f,Yj:()=>d,ai:()=>l,o:()=>p,sH:()=>m,sv:()=>A,zM:()=>v});var n=r(23509),i=r(68632),a=r.n(i),s=r(88032),o=r.n(s),u=r(10576);function c(e){return(0,n.A)(e)===u.s0}function f(e){return a()(e)}function h(e){return e!==u.Cq&&"object"===(0,n.A)(e)}function d(e){return"string"==typeof e}function l(e){return"number"==typeof e&&!isNaN(e)}function p(e){return"bigint"==typeof e}function v(e){return"boolean"==typeof e}function m(e){return l(e)||d(e)&&!isNaN(o()(e))&&isFinite(+e)}function A(e){return e instanceof ArrayBuffer}},10534:(e,t,r)=>{"use strict";r.d(t,{__:()=>a});var n=r(10576),i={};function a(e,t){for(var r=i.hasOwnProperty(e)?i[e]:i[e]=e.split(n.ZG),a=0,s=r.length-1;a<=s&&t(r[a],a===s)!==n.W8;a++);}},4624:(e,t,r)=>{"use strict";r.d(t,{R8:()=>b,V$:()=>A,Yz:()=>k,h2:()=>w,pq:()=>y,rD:()=>u,z3:()=>x});var n=r(23509),i=r(10576),a=r(62100),s=0,o=1,u=2,c=3,f=4,h=5,d=("undefined"==typeof console?"undefined":(0,n.A)(console))!==i.aV?console:i.Cq,l=/common/.test((0,a.A)(i.x7))?u:c,p=(i.jf&&/edge|msie|trident/i.test(i.jf.navigator.userAgent),i.u1),v=d?p?function(e,t,r){d.log(p+e,r,t)}:function(e,t){d.log(e,t)}:i.x7;function m(){if(i.M_){var e=i.TK.COMMON_LOG_LEVEL;if(e>=s&&e<=h)return e}return l}function A(e){i.TK.COMMON_LOG_LEVEL=e}function g(e){return"background-color:".concat(e,";border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;")}function k(e,t,r){m()<=o&&v("[".concat(arguments[1],"][line ").concat(arguments[2],"] [debug]"),e,g("#999"))}function y(e,t,r){m()<=u&&v("[".concat(arguments[1],"][line ").concat(arguments[2],"] [info]"),e,g("#2db7f5"))}function b(e,t,r){m()<=c&&v("[".concat(arguments[1],"][line ").concat(arguments[2],"] [warn]"),e,g("#f90"))}function x(e,t,r){m()<=f&&v("[".concat(arguments[1],"][line ").concat(arguments[2],"] [error]"),e,g("#ed4014"))}function w(e,t,r){if(m()<=h)throw x(e,t,r),new Error("[".concat(arguments[1],"][line ").concat(arguments[2],"] [fatal]: ").concat(e))}},95335:(e,t,r)=>{"use strict";r.d(t,{C:()=>c,X$:()=>u,__:()=>s}),r(69736);var n=r(67672),i=r(72739),a=r(10576);function s(e,t){for(var r in e)if(t(e[r],r)===a.W8)break}function o(e,t){return n.Ik(e)?n.Ik(t)?(s(t,(function(t,r){e[r]=t})),e):e:t}function u(e,t,r){return o(o(e,t),r)}function c(e,t){var r=e;return n.YO(e)?t?(r=[],i.__(e,(function(e,n){r[n]=c(e,t)}))):r=e.slice():n.Ik(e)&&(r={},s(e,(function(e,n){r[n]=t?c(e,t):e}))),r}},44690:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n,i,a,s=r(23509),o=r(72739),u=(n=("object"===("undefined"==typeof navigator?"undefined":(0,s.A)(navigator))&&navigator.userAgent||"").toLowerCase(),(0,o.__)([["iphone",/iphone os ([\d_.]+)/],["ipad",/ipad; cpu os ([\d_.]+)/],["itouch",/itouch; cpu os ([\d_.]+)/],["android",/android ([\d_.]+)/],["wp",/windows phone ([\d_.]+)/],["windows",/windows nt ([\d_.]+)/],["linux",/linux/],["mac",/mac os x ([\d_.]+)/]],(function(e){var t=e[1].exec(n);if(t)return i=e[0],(a=t[1])&&(a=a.replace(/_/g,".")),!1})),{name:i||"",version:a||""});u.name&&(u[u.name]=!0,{iphone:1,ipad:1,itouch:1}[u.name]&&(u.ios=!0));const c=u},20525:(e,t,r)=>{"use strict";r.d(t,{GP:()=>h,di:()=>u,qh:()=>c,zy:()=>f});var n=r(29967),i=r.n(n),a=r(67672),s=r(10576),o=r(62100);function u(e,t,r){return a.ai(r)?t===r?s.u1:e.slice(t,r):e.slice(t)}function c(e,t,r){return e.indexOf(t,r!==s.ZH?r:0)}function f(e,t){return c(e,t)>=0}function h(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=0,s=r.length;return e.replace(/(%[sdvx%])|(%0(\d)+[dx])/g,(function(e){if(a>=s)return e;var t=r[a++];if(/%0(\d)+[dx]/g.test(e)){var n=i()(e.substring(1)),u="d"===e[e.length-1]?(0,o.A)(Number(t)):Number(t).toString(16);return n>u.length&&(u=new Array(n-u.length).fill("0").join("")+u),u}switch(e){case"%%":return"%";case"%s":return String(t);case"%d":return(0,o.A)(Number(t));case"%v":return"";case"%x":return Number(t).toString(16)}return e}))}},95797:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(23509),i=r(86834);const a=function(){var e="function"==typeof Blob,t="object"===("undefined"==typeof WebAssembly?"undefined":(0,n.A)(WebAssembly))&&"function"==typeof WebAssembly.instantiate,r="function"==typeof fetch,a="object"===("undefined"==typeof document?"undefined":(0,n.A)(document))&&document.createElement("canvas"),s=a&&!!a.getContext("webgl"),o="function"==typeof OffscreenCanvas,u="function"==typeof Worker,c="function"==typeof ArrayBuffer,f="object"===("undefined"==typeof Atomics?"undefined":(0,n.A)(Atomics)),h="function"==typeof AudioContext||"function"==typeof webkitAudioContext,d="function"==typeof AudioWorklet,l="function"==typeof VideoDecoder,p="function"==typeof VideoEncoder,v="function"==typeof AudioDecoder,m="function"==typeof AudioEncoder,A="function"==typeof SharedArrayBuffer,g="function"==typeof MediaSource||"function"==typeof ManagedMediaSource,k="function"==typeof Proxy,y=u&&A&&f&&k,b="function"==typeof WebAssembly.Suspending&&"function"==typeof WebAssembly.promising;i.A.safari&&!i.A.checkVersion(i.A.majorVersion,"11",!0)&&(t=!1),i.A.chrome&&!i.A.checkVersion(i.A.majorVersion,"94",!0)&&(l=!1,v=!1),i.A.safari&&!i.A.checkVersion(i.A.majorVersion,"17",!0)&&(l=!1);var x="object"===("undefined"==typeof navigator?"undefined":(0,n.A)(navigator))&&"object"===(0,n.A)(navigator.gpu),w="function"==typeof MediaSourceHandle,_=t&&"function"==typeof WebAssembly.Global;return{browser:i.A,blob:e,wasm:t,fetch:r,webgl:s,worker:u,mse:g,arrayBuffer:c,audioContext:h,audioWorklet:d,videoDecoder:l,videoEncoder:p,audioDecoder:v,audioEncoder:m,atomics:f,shareArrayBuffer:A,thread:y,webgpu:x,offscreenCanvas:o,workerMSE:w,webAssemblyGlobal:_,jspi:b,proxy:k,simd:(i.A.chrome||i.A.newEdge)&&i.A.checkVersion(i.A.majorVersion,"91",!0)||i.A.firefox&&i.A.checkVersion(i.A.majorVersion,"89",!0)||i.A.safari&&i.A.checkVersion(i.A.version,"16.4",!0),wasmBaseSupported:r&&t&&s&&h&&c&&_}}()},50011:(e,t,r)=>{"use strict";r.d(t,{D:()=>s,l:()=>a});var n="function"==typeof TextEncoder?new TextEncoder:null,i="function"==typeof TextDecoder?new TextDecoder:null;function a(e){if(n)return n.encode(e);for(var t=[],r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++r)),i<=127?t.push(i):i<=2047?(t.push(192|i>>6),t.push(128|63&i)):i<=65535?(t.push(224|i>>12),t.push(128|i>>6&63),t.push(128|63&i)):(t.push(240|i>>18),t.push(128|i>>12&63),t.push(128|i>>6&63),t.push(128|63&i))}return new Uint8Array(t)}function s(e){if(e instanceof Uint8Array&&i&&!("function"==typeof SharedArrayBuffer&&e.buffer instanceof SharedArrayBuffer))return i.decode(e);for(var t="",r=0;r<e.length;){var n=e[r++>>>0];if(128&n){var a=63&e[r++>>>0];if(192!=(224&n)){var s=63&e[r++>>>0];if((n=224==(240&n)?(15&n)<<12|a<<6|s:(7&n)<<18|a<<12|s<<6|63&e[r++>>>0])<65536)t+=String.fromCharCode(n);else{var o=n-65536;t+=String.fromCharCode(55296|o>>10,56320|1023&o)}}else t+=String.fromCharCode((31&n)<<6|a)}else t+=String.fromCharCode(n)}return t}},8507:(e,t,r)=>{"use strict";function n(e){for(var t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],r={},n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),i=14;i--;){var a;r[t[i]]=null!==(a=n[i])&&void 0!==a?a:""}return{protocol:r.protocol,file:r.file,host:r.host,port:r.port,user:r.user,password:r.password,origin:"".concat(r.protocol,"://").concat(r.authority),pathname:r.path,search:"?".concat(r.query),hash:r.anchor?"#".concat(r.anchor):""}}r.d(t,{ll:()=>h,qg:()=>n}),r(73146);var i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s=/^(?=([^\/?#]*))\1([^]*)$/,o=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;function u(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}function c(e){var t=o.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null}function f(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")}function h(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=c(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=f(n.path),u(n)}var i=c(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=f(i.path),u(i)):t;var a=c(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=s.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var h={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(h.netLoc=a.netLoc,"/"!==i.path[0]))if(i.path){var d=a.path,l=d.substring(0,d.lastIndexOf("/")+1)+i.path;h.path=f(l)}else h.path=a.path,i.params||(h.params=a.params,i.query||(h.query=a.query));return null===h.path&&(h.path=r.alwaysNormalize?f(i.path):i.path),u(h)}},88096:(e,t,r)=>{"use strict";r.d(t,{$z:()=>v,DD:()=>A,Ee:()=>h,GG:()=>u,p7:()=>l});var n=r(25182),i=r(36443),a=r.n(i),s=r(31865);function o(e){for(var t=0,r=0;;){var n=e.readUint8();if(t|=(127&n)<<r,r+=7,!(128&n))break}return t}function u(e){return c.apply(this,arguments)}function c(){return(c=(0,n.A)(a().mark((function e(t){var r,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,n=0;case 2:return e.next=5,t.readUint8();case 5:if(i=e.sent,r|=(127&i)<<n,n+=7,128&i){e.next=10;break}return e.abrupt("break",12);case 10:e.next=2;break;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){for(var t,r=0,n=0;r|=(127&(t=e.readUint8()))<<n,n+=7,128&t;);return 64&t&&(r|=-1<<n),r}function h(e){return d.apply(this,arguments)}function d(){return(d=(0,n.A)(a().mark((function e(t){var r,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,n=0;case 2:return e.next=5,t.readUint8();case 5:if(i=e.sent,r|=(127&i)<<n,n+=7,128&i){e.next=10;break}return e.abrupt("break",12);case 10:e.next=2;break;case 12:return 64&i&&(r|=-1<<n),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t){return p.apply(this,arguments)}function p(){return(p=(0,n.A)(a().mark((function e(t,r){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0;case 1:if(!n){e.next=9;break}return i=127&r,0==(r>>=7)&&!(64&i)||-1===r&&64&i?n=!1:i|=128,e.next=7,t.writeUint8(i);case 7:e.next=1;break;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return m.apply(this,arguments)}function m(){return(m=(0,n.A)(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=127&r,0!=(r>>=7)&&(n|=128),e.next=5,t.writeUint8(n);case 5:if(0!==r){e.next=0;break}case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){var r=new s.A(e,!0);for(r.skip(8);r.remainingSize();){var n=r.readUint8(),i=o(r);if(2===n){for(var a=o(r);a--;){var u=o(r);r.skip(u);var c=o(r);switch(r.skip(c),r.readUint8()){case 0:o(r);break;case 3:f(r),o(r);break;case 2:var h=Number(r.getPos());return void(e[h]=t?2|e[h]:-3&e[h]);case 1:f(r);var d=o(r);o(r),1&d&&o(r)}}return}r.skip(i)}}},34268:(e,t,r)=>{"use strict";var n=r(25182),i=r(134),a=r(36443),s=r.n(a),o=r(54001),u=r.n(o),c=r(84149),f=r(87503),h=r(67672),d=r(4624),l=r(44690),p=l.A.windows||l.A.mac||l.A.linux?10:20;class v extends f.A{constructor(){var e;super(),e=this,(0,i.A)(this,"pullIPC",void 0),(0,i.A)(this,"frontBuffer",void 0),(0,i.A)(this,"backBuffer",void 0),(0,i.A)(this,"channels",void 0),(0,i.A)(this,"backBufferOffset",void 0),(0,i.A)(this,"ended",void 0),(0,i.A)(this,"frontBuffered",void 0),(0,i.A)(this,"pause",void 0),(0,i.A)(this,"firstRendered",void 0),(0,i.A)(this,"stopped",void 0),(0,i.A)(this,"afterPullResolve",void 0),this.ipcPort.on(c.S3,function(){var t=(0,n.A)(s().mark((function t(r){var n,i,a,o,f,h,d;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r.method,t.next="init"===t.t0?3:"start"===t.t0?5:"restart"===t.t0?24:"clear"===t.t0?43:"stop"===t.t0?46:"pause"===t.t0?53:"unpause"===t.t0?56:59;break;case 3:return e.ipcPort.reply(r),t.abrupt("break",59);case 5:return n=r.params,i=n.port,a=n.channels,e.channels=a,e.pullIPC=new c.Ay(i),o=[],f=[],t.next=12,e.pull(o);case 12:return t.next=14,e.pull(f);case 14:return e.frontBuffer=f,e.backBuffer=o,e.backBufferOffset=0,e.ended=!1,e.frontBuffered=!0,e.pause=!1,e.firstRendered=!1,e.stopped=!1,e.ipcPort.reply(r),t.abrupt("break",59);case 24:if(e.ended){t.next=27;break}return e.ipcPort.reply(r),t.abrupt("return");case 27:return h=[],d=[],t.next=31,e.pull(h);case 31:return t.next=33,e.pull(d);case 33:return e.frontBuffer=d,e.backBuffer=h,e.backBufferOffset=0,e.ended=!1,e.frontBuffered=!0,e.pause=!1,e.firstRendered=!1,e.stopped=!1,e.ipcPort.reply(r),t.abrupt("break",59);case 43:return e.backBufferOffset=p,e.ipcPort.reply(r),t.abrupt("break",59);case 46:if(e.ended){t.next=49;break}return t.next=49,new(u())((t=>{e.afterPullResolve=t}));case 49:return e.stopped=!0,e.pullIPC.destroy(),e.ipcPort.reply(r),t.abrupt("break",59);case 53:return e.pause=!0,e.ipcPort.reply(r),t.abrupt("break",59);case 56:return e.pause=!1,e.ipcPort.reply(r),t.abrupt("break",59);case 59:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}pull(e){var t=this;return(0,n.A)(s().mark((function r(){var n,i,a;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.pullIPC.request("pullBuffer",{nbSamples:128*p});case 2:if(n=r.sent,h.ai(n))t.ended=!0;else for(i=new Float32Array(n),a=0;a<t.channels;a++)e[a]=i.subarray(a*p*128,(a+1)*p*128);t.afterPullResolve&&t.afterPullResolve();case 5:case"end":return r.stop()}}),r)})))()}swapBuffer(){return!!this.frontBuffered&&(this.backBuffer=this.frontBuffer,this.backBufferOffset=0,this.frontBuffer=[],this.frontBuffered=!1,this.pull(this.frontBuffer).then((()=>{this.frontBuffered=!0})),!0)}process(e,t,r){if(this.stopped)return!1;if(this.backBuffer&&!this.pause){if(this.backBufferOffset===p){if(this.ended)return this.backBuffer=null,this.frontBuffer=null,d.pq("audio source ended","src/avrender/pcm/AudioSourceWorkletProcessor.ts",197),this.ipcPort.notify("ended"),!0;if(!this.swapBuffer())return this.ipcPort.notify("stutter"),!0}for(var n=t[0],i=0;i<this.channels;i++)n[i].set(this.backBuffer[i].subarray(128*this.backBufferOffset,128*(this.backBufferOffset+1)),0);this.backBufferOffset++,this.firstRendered||(this.firstRendered=!0,this.ipcPort.notify("firstRendered"))}return!0}}registerProcessor("audio-source-processor",v)},5676:(e,t,r)=>{"use strict";var n=r(25182),i=r(134),a=r(36443),s=r.n(a),o=r(54001),u=r.n(o),c=r(63939),f=r(50932),h=r(84149),d=r(87503),l=r(11473),p=r(37837),v=r(4624),m=r(44690),A=m.A.windows||m.A.mac||m.A.linux?10:20;class g extends d.A{constructor(){var e;super(),e=this,(0,i.A)(this,"pullIPC",void 0),(0,i.A)(this,"frontBuffer",void 0),(0,i.A)(this,"backBuffer",void 0),(0,i.A)(this,"channels",void 0),(0,i.A)(this,"backBufferOffset",void 0),(0,i.A)(this,"ended",void 0),(0,i.A)(this,"frontBuffered",void 0),(0,i.A)(this,"firstRendered",void 0),(0,i.A)(this,"float32",void 0),(0,i.A)(this,"pause",void 0),(0,i.A)(this,"stopped",void 0),(0,i.A)(this,"afterPullResolve",void 0),this.ipcPort.on(h.S3,function(){var t=(0,n.A)(s().mark((function t(r){var n,i,a,o,c,f,d,p;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r.method,t.next="init"===t.t0?3:"start"===t.t0?8:"restart"===t.t0?28:"stop"===t.t0?48:"clear"===t.t0?59:"pause"===t.t0?62:"unpause"===t.t0?65:68;break;case 3:return n=r.params.memory,t.next=6,(0,l.Tg)({memory:n,disableAsm:!0});case 6:return e.ipcPort.reply(r),t.abrupt("break",68);case 8:return i=r.params,a=i.port,o=i.channels,e.channels=o,e.pullIPC=new h.Ay(a),c=e.allocBuffer(),f=e.allocBuffer(),t.next=15,e.pullIPC.request("pull",{buffer:f});case 15:return t.next=17,e.pullIPC.request("pull",{buffer:c});case 17:return e.frontBuffer=c,e.backBuffer=f,e.backBufferOffset=0,e.ended=!1,e.pause=!1,e.frontBuffered=!0,e.firstRendered=!1,e.stopped=!1,e.float32=new Float32Array((0,l.eq)().buffer),e.ipcPort.reply(r),t.abrupt("break",68);case 28:if(e.ended){t.next=31;break}return e.ipcPort.reply(r),t.abrupt("return");case 31:return d=e.allocBuffer(),p=e.allocBuffer(),t.next=35,e.pullIPC.request("pull",{buffer:p});case 35:return t.next=37,e.pullIPC.request("pull",{buffer:d});case 37:return e.frontBuffer=d,e.backBuffer=p,e.backBufferOffset=0,e.ended=!1,e.pause=!1,e.frontBuffered=!0,e.firstRendered=!1,e.stopped=!1,e.float32=new Float32Array((0,l.eq)().buffer),e.ipcPort.reply(r),t.abrupt("break",68);case 48:if(e.ended){t.next=51;break}return t.next=51,new(u())((t=>{e.afterPullResolve=t}));case 51:return e.freeBuffer(e.backBuffer),e.freeBuffer(e.frontBuffer),e.backBuffer=0,e.frontBuffer=0,e.stopped=!0,e.pullIPC.destroy(),e.ipcPort.reply(r),t.abrupt("break",68);case 59:return e.backBufferOffset=A,e.ipcPort.reply(r),t.abrupt("break",68);case 62:return e.pause=!0,e.ipcPort.reply(r),t.abrupt("break",68);case 65:return e.pause=!1,e.ipcPort.reply(r),t.abrupt("break",68);case 68:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}allocBuffer(){var e=(0,p.Gy)(40);f.M[20](e,(0,p.Gy)(4*this.channels));for(var t=(0,p.Gy)(512*A*this.channels),r=0;r<this.channels;r++)f.M[20](c.f[20](e)+4*r,t+128*A*4*r);return f.M[15](e+12,128*A),e}freeBuffer(e){e&&((0,p.aI)(c.f[20](e)),(0,p.aI)(e),(0,p.Eb)(e))}pull(){var e=this;return(0,n.A)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pullIPC.request("pull",{buffer:e.frontBuffer});case 2:t.sent<0&&(e.ended=!0),e.afterPullResolve&&e.afterPullResolve();case 5:case"end":return t.stop()}}),t)})))()}swapBuffer(){if(!this.frontBuffered)return!1;var e=this.backBuffer;return this.backBuffer=this.frontBuffer,this.frontBuffer=e,this.backBufferOffset=0,this.frontBuffered=!1,this.pull().then((()=>{this.frontBuffered=!0})),!0}process(e,t,r){if(this.stopped)return!1;if(this.backBuffer&&!this.pause){if(this.backBufferOffset===A){if(this.ended)return this.freeBuffer(this.backBuffer),this.freeBuffer(this.frontBuffer),this.backBuffer=0,this.frontBuffer=0,v.pq("audio source ended","src/avrender/pcm/AudioSourceWorkletProcessor2.ts",237),this.ipcPort.notify("ended"),!0;if(!this.swapBuffer())return this.ipcPort.notify("stutter"),!0}for(var n=t[0],i=0;i<this.channels;i++)n[i].set(this.float32.subarray((c.f[20](c.f[20](this.backBuffer)+4*i)>>>2)+128*this.backBufferOffset,(c.f[20](c.f[20](this.backBuffer)+4*i)>>>2)+128*(this.backBufferOffset+1)),0);this.backBufferOffset++,this.firstRendered||(this.firstRendered=!0,this.ipcPort.notify("firstRendered"))}return!0}}registerProcessor("audio-source-processor",g)},87503:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),i=r(134),a=r(36443),s=r.n(a),o=r(84149);class u extends AudioWorkletProcessor{constructor(){super(),(0,i.A)(this,"ipcPort",void 0),this.ipcPort=new o.Ay(this.port)}request(e,t,r){var i=this;return(0,n.A)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",i.ipcPort.request(e,t,r));case 1:case"end":return n.stop()}}),n)})))()}notify(e,t,r){this.ipcPort.notify(e,t,r)}}},74385:(e,t,r)=>{r(97863),r(25263),e.exports=r(46438).Array.from},37149:(e,t,r)=>{r(18355),e.exports=r(46438).Array.isArray},87172:(e,t,r)=>{r(23204),e.exports=r(46438).Date.now},85079:(e,t,r)=>{var n=r(46438),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},92861:(e,t,r)=>{r(78978),r(97863),r(7914),r(96050),r(28337),r(74674),r(62223),e.exports=r(46438).Map},28271:(e,t,r)=>{r(31951);var n=r(46438).Object;e.exports=function(e,t){return n.create(e,t)}},83760:(e,t,r)=>{r(59792);var n=r(46438).Object;e.exports=function(e,t){return n.defineProperties(e,t)}},92696:(e,t,r)=>{r(74712);var n=r(46438).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},22948:(e,t,r)=>{r(51780),e.exports=r(46438).Object.freeze},3706:(e,t,r)=>{r(47386);var n=r(46438).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},34281:(e,t,r)=>{r(59454),e.exports=r(46438).Object.getOwnPropertyDescriptors},77654:(e,t,r)=>{r(19626),e.exports=r(46438).Object.getOwnPropertySymbols},62160:(e,t,r)=>{r(18128),e.exports=r(46438).Object.getPrototypeOf},47567:(e,t,r)=>{r(96847),e.exports=r(46438).Object.keys},21724:(e,t,r)=>{r(4284),e.exports=r(46438).Object.setPrototypeOf},27279:(e,t,r)=>{r(95828),e.exports=r(46438).parseFloat},25216:(e,t,r)=>{r(65331),e.exports=r(46438).parseInt},34750:(e,t,r)=>{r(78978),r(97863),r(7914),r(91229),r(2639),r(46121),e.exports=r(46438).Promise},27440:(e,t,r)=>{r(24562),e.exports=r(46438).Reflect.construct},80345:(e,t,r)=>{r(28351),e.exports=r(46438).Reflect.get},31707:(e,t,r)=>{r(66801),e.exports=r(46438).setImmediate},16560:(e,t,r)=>{r(19626),r(78978),r(42860),r(60716),e.exports=r(46438).Symbol},54220:(e,t,r)=>{r(97863),r(7914),e.exports=r(84336).f("iterator")},39967:(e,t,r)=>{e.exports=r(84336).f("toPrimitive")},25219:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},12560:e=>{e.exports=function(){}},2832:e=>{e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},80812:(e,t,r)=>{var n=r(24401);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},77076:(e,t,r)=>{var n=r(95838);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},84448:(e,t,r)=>{var n=r(65133),i=r(70181),a=r(72917);e.exports=function(e){return function(t,r,s){var o,u=n(t),c=i(u.length),f=a(s,c);if(e&&r!=r){for(;c>f;)if((o=u[f++])!=o)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===r)return e||f||0;return!e&&-1}}},48219:(e,t,r)=>{var n=r(58852),i=r(7001),a=r(66310),s=r(70181),o=r(99244);e.exports=function(e,t){var r=1==e,u=2==e,c=3==e,f=4==e,h=6==e,d=5==e||h,l=t||o;return function(t,o,p){for(var v,m,A=a(t),g=i(A),k=n(o,p,3),y=s(g.length),b=0,x=r?l(t,y):u?l(t,0):void 0;y>b;b++)if((d||b in g)&&(m=k(v=g[b],b,A),e))if(r)x[b]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return b;case 2:x.push(v)}else if(f)return!1;return h?-1:c||f?f:x}}},49742:(e,t,r)=>{var n=r(24401),i=r(15461),a=r(30254)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},99244:(e,t,r)=>{var n=r(49742);e.exports=function(e,t){return new(n(e))(t)}},15786:(e,t,r)=>{"use strict";var n=r(25219),i=r(24401),a=r(20709),s=[].slice,o={};e.exports=Function.bind||function(e){var t=n(this),r=s.call(arguments,1),u=function(){var n=r.concat(s.call(arguments));return this instanceof u?function(e,t,r){if(!(t in o)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";o[t]=Function("F,a","return new F("+n.join(",")+")")}return o[t](e,r)}(t,n.length,n):a(t,n,e)};return i(t.prototype)&&(u.prototype=t.prototype),u}},44968:(e,t,r)=>{var n=r(93417),i=r(30254)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},93417:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},95933:(e,t,r)=>{"use strict";var n=r(78423).f,i=r(22087),a=r(30953),s=r(58852),o=r(2832),u=r(95838),c=r(88839),f=r(20322),h=r(45274),d=r(58219),l=r(75172).fastKey,p=r(6096),v=d?"_s":"size",m=function(e,t){var r,n=l(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var f=e((function(e,n){o(e,f,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,null!=n&&u(n,r,e[c],e)}));return a(f.prototype,{clear:function(){for(var e=p(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=p(this,t),n=m(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[v]--}return!!n},forEach:function(e){p(this,t);for(var r,n=s(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!m(p(this,t),e)}}),d&&n(f.prototype,"size",{get:function(){return p(this,t)[v]}}),f},def:function(e,t,r){var n,i,a=m(e,t);return a?a.v=r:(e._l=a={i:i=l(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[v]++,"F"!==i&&(e._i[i]=a)),e},getEntry:m,setStrong:function(e,t,r){c(e,t,(function(e,r){this._t=p(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?f(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,f(1))}),r?"entries":"values",!r,!0),h(t)}}},5874:(e,t,r)=>{var n=r(44968),i=r(77076);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},99373:(e,t,r)=>{"use strict";var n=r(66670),i=r(88535),a=r(75172),s=r(81984),o=r(2677),u=r(30953),c=r(95838),f=r(2832),h=r(24401),d=r(1356),l=r(78423).f,p=r(48219)(0),v=r(58219);e.exports=function(e,t,r,m,A,g){var k=n[e],y=k,b=A?"set":"add",x=y&&y.prototype,w={};return v&&"function"==typeof y&&(g||x.forEach&&!s((function(){(new y).entries().next()})))?(y=t((function(t,r){f(t,y,e,"_c"),t._c=new k,null!=r&&c(r,A,t[b],t)})),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in x)||g&&"clear"==e||o(y.prototype,e,(function(r,n){if(f(this,y,e),!t&&g&&!h(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i}))})),g||l(y.prototype,"size",{get:function(){return this._c.size}})):(y=m.getConstructor(t,e,A,b),u(y.prototype,r),a.NEED=!0),d(y,e),w[e]=y,i(i.G+i.W+i.F,w),g||m.setStrong(y,e,A),y}},46438:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},31891:(e,t,r)=>{"use strict";var n=r(78423),i=r(86260);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},58852:(e,t,r)=>{var n=r(25219);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},87608:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},58219:(e,t,r)=>{e.exports=!r(81984)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},3802:(e,t,r)=>{var n=r(24401),i=r(66670).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},77956:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},36473:(e,t,r)=>{var n=r(54311),i=r(59820),a=r(36569);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var s,o=r(e),u=a.f,c=0;o.length>c;)u.call(e,s=o[c++])&&t.push(s);return t}},88535:(e,t,r)=>{var n=r(66670),i=r(46438),a=r(58852),s=r(2677),o=r(75509),u="prototype",c=function(e,t,r){var f,h,d,l=e&c.F,p=e&c.G,v=e&c.S,m=e&c.P,A=e&c.B,g=e&c.W,k=p?i:i[t]||(i[t]={}),y=k[u],b=p?n:v?n[t]:(n[t]||{})[u];for(f in p&&(r=t),r)(h=!l&&b&&void 0!==b[f])&&o(k,f)||(d=h?b[f]:r[f],k[f]=p&&"function"!=typeof b[f]?r[f]:A&&h?a(d,n):g&&b[f]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[u]=e[u],t}(d):m&&"function"==typeof d?a(Function.call,d):d,m&&((k.virtual||(k.virtual={}))[f]=d,e&c.R&&y&&!y[f]&&s(y,f,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},81984:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},95838:(e,t,r)=>{var n=r(58852),i=r(27904),a=r(12828),s=r(80812),o=r(70181),u=r(55298),c={},f={},h=e.exports=function(e,t,r,h,d){var l,p,v,m,A=d?function(){return e}:u(e),g=n(r,h,t?2:1),k=0;if("function"!=typeof A)throw TypeError(e+" is not iterable!");if(a(A)){for(l=o(e.length);l>k;k++)if((m=t?g(s(p=e[k])[0],p[1]):g(e[k]))===c||m===f)return m}else for(v=A.call(e);!(p=v.next()).done;)if((m=i(v,g,p.value,t))===c||m===f)return m};h.BREAK=c,h.RETURN=f},66670:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},75509:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},2677:(e,t,r)=>{var n=r(78423),i=r(86260);e.exports=r(58219)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},76260:(e,t,r)=>{var n=r(66670).document;e.exports=n&&n.documentElement},32484:(e,t,r)=>{e.exports=!r(58219)&&!r(81984)((function(){return 7!=Object.defineProperty(r(3802)("div"),"a",{get:function(){return 7}}).a}))},20709:e=>{e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},7001:(e,t,r)=>{var n=r(93417);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},12828:(e,t,r)=>{var n=r(20210),i=r(30254)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},15461:(e,t,r)=>{var n=r(93417);e.exports=Array.isArray||function(e){return"Array"==n(e)}},24401:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},27904:(e,t,r)=>{var n=r(80812);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},48248:(e,t,r)=>{"use strict";var n=r(22087),i=r(86260),a=r(1356),s={};r(2677)(s,r(30254)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(s,{next:i(1,r)}),a(e,t+" Iterator")}},88839:(e,t,r)=>{"use strict";var n=r(74742),i=r(88535),a=r(61331),s=r(2677),o=r(20210),u=r(48248),c=r(1356),f=r(66123),h=r(30254)("iterator"),d=!([].keys&&"next"in[].keys()),l="keys",p="values",v=function(){return this};e.exports=function(e,t,r,m,A,g,k){u(r,t,m);var y,b,x,w=function(e){if(!d&&e in I)return I[e];switch(e){case l:case p:return function(){return new r(this,e)}}return function(){return new r(this,e)}},_=t+" Iterator",T=A==p,P=!1,I=e.prototype,B=I[h]||I["@@iterator"]||A&&I[A],C=B||w(A),S=A?T?w("entries"):C:void 0,M="Array"==t&&I.entries||B;if(M&&(x=f(M.call(new e)))!==Object.prototype&&x.next&&(c(x,_,!0),n||"function"==typeof x[h]||s(x,h,v)),T&&B&&B.name!==p&&(P=!0,C=function(){return B.call(this)}),n&&!k||!d&&!P&&I[h]||s(I,h,C),o[t]=C,o[_]=v,A)if(y={values:T?C:w(p),keys:g?C:w(l),entries:S},k)for(b in y)b in I||a(I,b,y[b]);else i(i.P+i.F*(d||P),t,y);return y}},27899:(e,t,r)=>{var n=r(30254)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],s=a[n]();s.next=function(){return{done:r=!0}},a[n]=function(){return s},e(a)}catch(e){}return r}},20322:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},20210:e=>{e.exports={}},74742:e=>{e.exports=!0},75172:(e,t,r)=>{var n=r(19191)("meta"),i=r(24401),a=r(75509),s=r(78423).f,o=0,u=Object.isExtensible||function(){return!0},c=!r(81984)((function(){return u(Object.preventExtensions({}))})),f=function(e){s(e,n,{value:{i:"O"+ ++o,w:{}}})},h=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[n].i},getWeak:function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[n].w},onFreeze:function(e){return c&&h.NEED&&u(e)&&!a(e,n)&&f(e),e}}},53792:(e,t,r)=>{var n=r(66670),i=r(8036).set,a=n.MutationObserver||n.WebKitMutationObserver,s=n.process,o=n.Promise,u="process"==r(93417)(s);e.exports=function(){var e,t,r,c=function(){var n,i;for(u&&(n=s.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){s.nextTick(c)};else if(!a||n.navigator&&n.navigator.standalone)if(o&&o.resolve){var f=o.resolve(void 0);r=function(){f.then(c)}}else r=function(){i.call(n,c)};else{var h=!0,d=document.createTextNode("");new a(c).observe(d,{characterData:!0}),r=function(){d.data=h=!h}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},11642:(e,t,r)=>{"use strict";var n=r(25219);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new i(e)}},22087:(e,t,r)=>{var n=r(80812),i=r(90082),a=r(77956),s=r(4566)("IE_PROTO"),o=function(){},u="prototype",c=function(){var e,t=r(3802)("iframe"),n=a.length;for(t.style.display="none",r(76260).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c[u][a[n]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(o[u]=n(e),r=new o,o[u]=null,r[s]=e):r=c(),void 0===t?r:i(r,t)}},78423:(e,t,r)=>{var n=r(80812),i=r(32484),a=r(10752),s=Object.defineProperty;t.f=r(58219)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},90082:(e,t,r)=>{var n=r(78423),i=r(80812),a=r(54311);e.exports=r(58219)?Object.defineProperties:function(e,t){i(e);for(var r,s=a(t),o=s.length,u=0;o>u;)n.f(e,r=s[u++],t[r]);return e}},81033:(e,t,r)=>{var n=r(36569),i=r(86260),a=r(65133),s=r(10752),o=r(75509),u=r(32484),c=Object.getOwnPropertyDescriptor;t.f=r(58219)?c:function(e,t){if(e=a(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(o(e,t))return i(!n.f.call(e,t),e[t])}},36309:(e,t,r)=>{var n=r(65133),i=r(1743).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(n(e))}},1743:(e,t,r)=>{var n=r(85081),i=r(77956).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},59820:(e,t)=>{t.f=Object.getOwnPropertySymbols},66123:(e,t,r)=>{var n=r(75509),i=r(66310),a=r(4566)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},85081:(e,t,r)=>{var n=r(75509),i=r(65133),a=r(84448)(!1),s=r(4566)("IE_PROTO");e.exports=function(e,t){var r,o=i(e),u=0,c=[];for(r in o)r!=s&&n(o,r)&&c.push(r);for(;t.length>u;)n(o,r=t[u++])&&(~a(c,r)||c.push(r));return c}},54311:(e,t,r)=>{var n=r(85081),i=r(77956);e.exports=Object.keys||function(e){return n(e,i)}},36569:(e,t)=>{t.f={}.propertyIsEnumerable},47331:(e,t,r)=>{var n=r(88535),i=r(46438),a=r(81984);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*a((function(){r(1)})),"Object",s)}},41510:(e,t,r)=>{var n=r(1743),i=r(59820),a=r(80812),s=r(66670).Reflect;e.exports=s&&s.ownKeys||function(e){var t=n.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},49709:(e,t,r)=>{var n=r(66670).parseFloat,i=r(24269).trim;e.exports=1/n(r(80459)+"-0")!=-1/0?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},15722:(e,t,r)=>{var n=r(66670).parseInt,i=r(24269).trim,a=r(80459),s=/^[-+]?0[xX]/;e.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(s.test(r)?16:10))}:n},41704:e=>{e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},61037:(e,t,r)=>{var n=r(80812),i=r(24401),a=r(11642);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},86260:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},30953:(e,t,r)=>{var n=r(2677);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},61331:(e,t,r)=>{e.exports=r(2677)},643:(e,t,r)=>{"use strict";var n=r(88535),i=r(25219),a=r(58852),s=r(95838);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,o,u=arguments[1];return i(this),(t=void 0!==u)&&i(u),null==e?new this:(r=[],t?(n=0,o=a(u,arguments[2],2),s(e,!1,(function(e){r.push(o(e,n++))}))):s(e,!1,r.push,r),new this(r))}})}},44398:(e,t,r)=>{"use strict";var n=r(88535);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},32074:(e,t,r)=>{var n=r(24401),i=r(80812),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(58852)(Function.call,r(81033).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},45274:(e,t,r)=>{"use strict";var n=r(66670),i=r(46438),a=r(78423),s=r(58219),o=r(30254)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];s&&t&&!t[o]&&a.f(t,o,{configurable:!0,get:function(){return this}})}},1356:(e,t,r)=>{var n=r(78423).f,i=r(75509),a=r(30254)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},4566:(e,t,r)=>{var n=r(96308)("keys"),i=r(19191);e.exports=function(e){return n[e]||(n[e]=i(e))}},96308:(e,t,r)=>{var n=r(46438),i=r(66670),a="__core-js_shared__",s=i[a]||(i[a]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(74742)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},85614:(e,t,r)=>{var n=r(80812),i=r(25219),a=r(30254)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||null==(r=n(s)[a])?t:i(r)}},43172:(e,t,r)=>{var n=r(49383),i=r(87608);e.exports=function(e){return function(t,r){var a,s,o=String(i(t)),u=n(r),c=o.length;return u<0||u>=c?e?"":void 0:(a=o.charCodeAt(u))<55296||a>56319||u+1===c||(s=o.charCodeAt(u+1))<56320||s>57343?e?o.charAt(u):a:e?o.slice(u,u+2):s-56320+(a-55296<<10)+65536}}},24269:(e,t,r)=>{var n=r(88535),i=r(87608),a=r(81984),s=r(80459),o="["+s+"]",u=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),f=function(e,t,r){var i={},o=a((function(){return!!s[e]()||""!=""[e]()})),u=i[e]=o?t(h):s[e];r&&(i[r]=u),n(n.P+n.F*o,"String",i)},h=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=f},80459:e=>{e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},8036:(e,t,r)=>{var n,i,a,s=r(58852),o=r(20709),u=r(76260),c=r(3802),f=r(66670),h=f.process,d=f.setImmediate,l=f.clearImmediate,p=f.MessageChannel,v=f.Dispatch,m=0,A={},g="onreadystatechange",k=function(){var e=+this;if(A.hasOwnProperty(e)){var t=A[e];delete A[e],t()}},y=function(e){k.call(e.data)};d&&l||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return A[++m]=function(){o("function"==typeof e?e:Function(e),t)},n(m),m},l=function(e){delete A[e]},"process"==r(93417)(h)?n=function(e){h.nextTick(s(k,e,1))}:v&&v.now?n=function(e){v.now(s(k,e,1))}:p?(a=(i=new p).port2,i.port1.onmessage=y,n=s(a.postMessage,a,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(e){f.postMessage(e+"","*")},f.addEventListener("message",y,!1)):n=g in c("script")?function(e){u.appendChild(c("script"))[g]=function(){u.removeChild(this),k.call(e)}}:function(e){setTimeout(s(k,e,1),0)}),e.exports={set:d,clear:l}},72917:(e,t,r)=>{var n=r(49383),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}},49383:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},65133:(e,t,r)=>{var n=r(7001),i=r(87608);e.exports=function(e){return n(i(e))}},70181:(e,t,r)=>{var n=r(49383),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},66310:(e,t,r)=>{var n=r(87608);e.exports=function(e){return Object(n(e))}},10752:(e,t,r)=>{var n=r(24401);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},19191:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},80218:(e,t,r)=>{var n=r(66670).navigator;e.exports=n&&n.userAgent||""},6096:(e,t,r)=>{var n=r(24401);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},67816:(e,t,r)=>{var n=r(66670),i=r(46438),a=r(74742),s=r(84336),o=r(78423).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},84336:(e,t,r)=>{t.f=r(30254)},30254:(e,t,r)=>{var n=r(96308)("wks"),i=r(19191),a=r(66670).Symbol,s="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=s&&a[e]||(s?a:i)("Symbol."+e))}).store=n},55298:(e,t,r)=>{var n=r(44968),i=r(30254)("iterator"),a=r(20210);e.exports=r(46438).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[n(e)]}},25263:(e,t,r)=>{"use strict";var n=r(58852),i=r(88535),a=r(66310),s=r(27904),o=r(12828),u=r(70181),c=r(31891),f=r(55298);i(i.S+i.F*!r(27899)((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,i,h,d=a(e),l="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,A=0,g=f(d);if(m&&(v=n(v,p>2?arguments[2]:void 0,2)),null==g||l==Array&&o(g))for(r=new l(t=u(d.length));t>A;A++)c(r,A,m?v(d[A],A):d[A]);else for(h=g.call(d),r=new l;!(i=h.next()).done;A++)c(r,A,m?s(h,v,[i.value,A],!0):i.value);return r.length=A,r}})},18355:(e,t,r)=>{var n=r(88535);n(n.S,"Array",{isArray:r(15461)})},52293:(e,t,r)=>{"use strict";var n=r(12560),i=r(20322),a=r(20210),s=r(65133);e.exports=r(88839)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},23204:(e,t,r)=>{var n=r(88535);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},96050:(e,t,r)=>{"use strict";var n=r(95933),i=r(6096),a="Map";e.exports=r(99373)(a,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(i(this,a),e);return t&&t.v},set:function(e,t){return n.def(i(this,a),0===e?0:e,t)}},n,!0)},31951:(e,t,r)=>{var n=r(88535);n(n.S,"Object",{create:r(22087)})},59792:(e,t,r)=>{var n=r(88535);n(n.S+n.F*!r(58219),"Object",{defineProperties:r(90082)})},74712:(e,t,r)=>{var n=r(88535);n(n.S+n.F*!r(58219),"Object",{defineProperty:r(78423).f})},51780:(e,t,r)=>{var n=r(24401),i=r(75172).onFreeze;r(47331)("freeze",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},47386:(e,t,r)=>{var n=r(65133),i=r(81033).f;r(47331)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(n(e),t)}}))},18128:(e,t,r)=>{var n=r(66310),i=r(66123);r(47331)("getPrototypeOf",(function(){return function(e){return i(n(e))}}))},96847:(e,t,r)=>{var n=r(66310),i=r(54311);r(47331)("keys",(function(){return function(e){return i(n(e))}}))},4284:(e,t,r)=>{var n=r(88535);n(n.S,"Object",{setPrototypeOf:r(32074).set})},78978:()=>{},95828:(e,t,r)=>{var n=r(88535),i=r(49709);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},65331:(e,t,r)=>{var n=r(88535),i=r(15722);n(n.G+n.F*(parseInt!=i),{parseInt:i})},91229:(e,t,r)=>{"use strict";var n,i,a,s,o=r(74742),u=r(66670),c=r(58852),f=r(44968),h=r(88535),d=r(24401),l=r(25219),p=r(2832),v=r(95838),m=r(85614),A=r(8036).set,g=r(53792)(),k=r(11642),y=r(41704),b=r(80218),x=r(61037),w="Promise",_=u.TypeError,T=u.process,P=T&&T.versions,I=P&&P.v8||"",B=u[w],C="process"==f(T),S=function(){},M=i=k.f,U=!!function(){try{var e=B.resolve(1),t=(e.constructor={})[r(30254)("species")]=function(e){e(S,S)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(S)instanceof t&&0!==I.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(e){}}(),R=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},E=function(e,t){if(!e._n){e._n=!0;var r=e._c;g((function(){for(var n=e._v,i=1==e._s,a=0,s=function(t){var r,a,s,o=i?t.ok:t.fail,u=t.resolve,c=t.reject,f=t.domain;try{o?(i||(2==e._h&&F(e),e._h=1),!0===o?r=n:(f&&f.enter(),r=o(n),f&&(f.exit(),s=!0)),r===t.promise?c(_("Promise-chain cycle")):(a=R(r))?a.call(r,u,c):u(r)):c(n)}catch(e){f&&!s&&f.exit(),c(e)}};r.length>a;)s(r[a++]);e._c=[],e._n=!1,t&&!e._h&&D(e)}))}},D=function(e){A.call(u,(function(){var t,r,n,i=e._v,a=L(e);if(a&&(t=y((function(){C?T.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=C||L(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){A.call(u,(function(){var t;C?T.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},O=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},N=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw _("Promise can't be resolved itself");(t=R(e))?g((function(){var n={_w:r,_d:!1};try{t.call(e,c(N,n,1),c(O,n,1))}catch(e){O.call(n,e)}})):(r._v=e,r._s=1,E(r,!1))}catch(e){O.call({_w:r,_d:!1},e)}}};U||(B=function(e){p(this,B,w,"_h"),l(e),n.call(this);try{e(c(N,this,1),c(O,this,1))}catch(e){O.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(30953)(B.prototype,{then:function(e,t){var r=M(m(this,B));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=C?T.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&E(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=c(N,e,1),this.reject=c(O,e,1)},k.f=M=function(e){return e===B||e===s?new a(e):i(e)}),h(h.G+h.W+h.F*!U,{Promise:B}),r(1356)(B,w),r(45274)(w),s=r(46438)[w],h(h.S+h.F*!U,w,{reject:function(e){var t=M(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(o||!U),w,{resolve:function(e){return x(o&&this===s?B:this,e)}}),h(h.S+h.F*!(U&&r(27899)((function(e){B.all(e).catch(S)}))),w,{all:function(e){var t=this,r=M(t),n=r.resolve,i=r.reject,a=y((function(){var r=[],a=0,s=1;v(e,!1,(function(e){var o=a++,u=!1;r.push(void 0),s++,t.resolve(e).then((function(e){u||(u=!0,r[o]=e,--s||n(r))}),i)})),--s||n(r)}));return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=M(t),n=r.reject,i=y((function(){v(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},24562:(e,t,r)=>{var n=r(88535),i=r(22087),a=r(25219),s=r(80812),o=r(24401),u=r(81984),c=r(15786),f=(r(66670).Reflect||{}).construct,h=u((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),d=!u((function(){f((function(){}))}));n(n.S+n.F*(h||d),"Reflect",{construct:function(e,t){a(e),s(t);var r=arguments.length<3?e:a(arguments[2]);if(d&&!h)return f(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(c.apply(e,n))}var u=r.prototype,l=i(o(u)?u:Object.prototype),p=Function.apply.call(e,l,t);return o(p)?p:l}})},28351:(e,t,r)=>{var n=r(81033),i=r(66123),a=r(75509),s=r(88535),o=r(24401),u=r(80812);s(s.S,"Reflect",{get:function e(t,r){var s,c,f=arguments.length<3?t:arguments[2];return u(t)===f?t[r]:(s=n.f(t,r))?a(s,"value")?s.value:void 0!==s.get?s.get.call(f):void 0:o(c=i(t))?e(c,r,f):void 0}})},97863:(e,t,r)=>{"use strict";var n=r(43172)(!0);r(88839)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},19626:(e,t,r)=>{"use strict";var n=r(66670),i=r(75509),a=r(58219),s=r(88535),o=r(61331),u=r(75172).KEY,c=r(81984),f=r(96308),h=r(1356),d=r(19191),l=r(30254),p=r(84336),v=r(67816),m=r(36473),A=r(15461),g=r(80812),k=r(24401),y=r(66310),b=r(65133),x=r(10752),w=r(86260),_=r(22087),T=r(36309),P=r(81033),I=r(59820),B=r(78423),C=r(54311),S=P.f,M=B.f,U=T.f,R=n.Symbol,E=n.JSON,D=E&&E.stringify,L="prototype",F=l("_hidden"),O=l("toPrimitive"),N={}.propertyIsEnumerable,z=f("symbol-registry"),W=f("symbols"),V=f("op-symbols"),G=Object[L],j="function"==typeof R&&!!I.f,q=n.QObject,H=!q||!q[L]||!q[L].findChild,Y=a&&c((function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=S(G,t);n&&delete G[t],M(e,t,r),n&&e!==G&&M(G,t,n)}:M,Q=function(e){var t=W[e]=_(R[L]);return t._k=e,t},K=j&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},X=function(e,t,r){return e===G&&X(V,t,r),g(e),t=x(t,!0),g(r),i(W,t)?(r.enumerable?(i(e,F)&&e[F][t]&&(e[F][t]=!1),r=_(r,{enumerable:w(0,!1)})):(i(e,F)||M(e,F,w(1,{})),e[F][t]=!0),Y(e,t,r)):M(e,t,r)},J=function(e,t){g(e);for(var r,n=m(t=b(t)),i=0,a=n.length;a>i;)X(e,r=n[i++],t[r]);return e},$=function(e){var t=N.call(this,e=x(e,!0));return!(this===G&&i(W,e)&&!i(V,e))&&(!(t||!i(this,e)||!i(W,e)||i(this,F)&&this[F][e])||t)},Z=function(e,t){if(e=b(e),t=x(t,!0),e!==G||!i(W,t)||i(V,t)){var r=S(e,t);return!r||!i(W,t)||i(e,F)&&e[F][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=U(b(e)),n=[],a=0;r.length>a;)i(W,t=r[a++])||t==F||t==u||n.push(t);return n},te=function(e){for(var t,r=e===G,n=U(r?V:b(e)),a=[],s=0;n.length>s;)!i(W,t=n[s++])||r&&!i(G,t)||a.push(W[t]);return a};j||(o((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===G&&t.call(V,r),i(this,F)&&i(this[F],e)&&(this[F][e]=!1),Y(this,e,w(1,r))};return a&&H&&Y(G,e,{configurable:!0,set:t}),Q(e)})[L],"toString",(function(){return this._k})),P.f=Z,B.f=X,r(1743).f=T.f=ee,r(36569).f=$,I.f=te,a&&!r(74742)&&o(G,"propertyIsEnumerable",$,!0),p.f=function(e){return Q(l(e))}),s(s.G+s.W+s.F*!j,{Symbol:R});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;re.length>ne;)l(re[ne++]);for(var ie=C(l.store),ae=0;ie.length>ae;)v(ie[ae++]);s(s.S+s.F*!j,"Symbol",{for:function(e){return i(z,e+="")?z[e]:z[e]=R(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!j,"Object",{create:function(e,t){return void 0===t?_(e):J(_(e),t)},defineProperty:X,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var se=c((function(){I.f(1)}));s(s.S+s.F*se,"Object",{getOwnPropertySymbols:function(e){return I.f(y(e))}}),E&&s(s.S+s.F*(!j||c((function(){var e=R();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(k(t)||void 0!==e)&&!K(e))return A(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!K(t))return t}),n[1]=t,D.apply(E,n)}}),R[L][O]||r(2677)(R[L],O,R[L].valueOf),h(R,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},62223:(e,t,r)=>{r(643)("Map")},74674:(e,t,r)=>{r(44398)("Map")},28337:(e,t,r)=>{var n=r(88535);n(n.P+n.R,"Map",{toJSON:r(5874)("Map")})},59454:(e,t,r)=>{var n=r(88535),i=r(41510),a=r(65133),s=r(81033),o=r(31891);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),u=s.f,c=i(n),f={},h=0;c.length>h;)void 0!==(r=u(n,t=c[h++]))&&o(f,t,r);return f}})},2639:(e,t,r)=>{"use strict";var n=r(88535),i=r(46438),a=r(66670),s=r(85614),o=r(61037);n(n.P+n.R,"Promise",{finally:function(e){var t=s(this,i.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return o(t,e()).then((function(){return r}))}:e,r?function(r){return o(t,e()).then((function(){throw r}))}:e)}})},46121:(e,t,r)=>{"use strict";var n=r(88535),i=r(11642),a=r(41704);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=a(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},42860:(e,t,r)=>{r(67816)("asyncIterator")},60716:(e,t,r)=>{r(67816)("observable")},7914:(e,t,r)=>{r(52293);for(var n=r(66670),i=r(2677),a=r(20210),s=r(30254)("toStringTag"),o="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<o.length;u++){var c=o[u],f=n[c],h=f&&f.prototype;h&&!h[s]&&i(h,s,c),a[c]=a.Array}},66801:(e,t,r)=>{var n=r(88535),i=r(8036);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},14397:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 point;\nattribute vec4 color;\nvarying vec4 v_color;\n\nuniform mat4 rotateMatrix;\n\nvoid main(void){\n  gl_Position = rotateMatrix * vec4(point, 1.0);\n  v_color = color;\n}\n"},57914:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n="\nstruct Meta {\n  max: u32,\n  width: u32,\n  height: u32\n};\n\n@group(0) @binding(0) var<uniform> metaData: Meta;\n@group(0) @binding(1) var input: texture_2d<u32>;\n@group(0) @binding(2) var output: texture_storage_2d<r32float, write>;\n\n@compute @workgroup_size(8, 8) fn main(\n  @builtin(workgroup_id) workgroup_id: vec3<u32>,\n  @builtin(local_invocation_id) local_invocation_id: vec3<u32>\n) {\n  var x = workgroup_id.x * 8 + local_invocation_id.x;\n  var y = workgroup_id.y * 8 + local_invocation_id.y;\n  if (x < metaData.width && y < metaData.height) {\n    var value: u32 = textureLoad(input, vec2(x, y), 0).x;\n    var low = value & 0xff;\n    var high = (value >> 8) & 0xff;\n    value = (low << 8) | high;\n    var value_no: f32 = f32(value) / f32(metaData.max);\n    textureStore(output, vec2(x, y), vec4(value_no, 0, 0, 0));\n  }\n}"},62496:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n="\nstruct Meta {\n  max: u32,\n  width: u32,\n  height: u32\n};\n\n@group(0) @binding(0) var<uniform> metaData: Meta;\n@group(0) @binding(1) var input: texture_2d<u32>;\n@group(0) @binding(2) var output: texture_storage_2d<r32float, write>;\n\n@compute @workgroup_size(8, 8) fn main(\n  @builtin(workgroup_id) workgroup_id: vec3<u32>,\n  @builtin(local_invocation_id) local_invocation_id: vec3<u32>\n) {\n  var x = workgroup_id.x * 8 + local_invocation_id.x;\n  var y = workgroup_id.y * 8 + local_invocation_id.y;\n  if (x < metaData.width && y < metaData.height) {\n    var value: u32 = textureLoad(input, vec2(x, y), 0).x;\n    var value_no: f32 = f32(value) / f32(metaData.max);\n    textureStore(output, vec2(x, y), vec4(value_no, 0, 0, 0));\n  }\n}"},23195:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n="\n@group(0) @binding(1) var eTexture: texture_external;\n@group(0) @binding(2) var s: sampler;\n\n@fragment\nfn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {\n  return textureSampleBaseClampToEdge(eTexture, s, in_texcoord.xy);\n}"},54895:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n="struct PositionColorInput {\n    @location(0) in_position_3d: vec3<f32>,\n    @location(1) in_color_rgba: vec4<f32>\n};\n\nstruct PositionColorOutput {\n    @builtin(position) coords_output: vec4<f32>,\n    @location(0) color_output: vec4<f32>\n};\n\nstruct RotateMatrix {\n    matrix: mat4x4<f32>\n};\n\n@group(0) @binding(0) var<uniform> rotateMatrix: RotateMatrix;\n\n@vertex\nfn main(input: PositionColorInput) -> PositionColorOutput {\n    var output: PositionColorOutput;\n    output.color_output = input.in_color_rgba;\n    output.coords_output = rotateMatrix.matrix * vec4<f32>(input.in_position_3d, 1.0);\n    return output;\n}"},73945:e=>{e.exports="AGFzbQEAAAABKQhgAn9/AGACf34AYAJ/fQBgAn98AGABfwF/YAF/AX5gAX8BfWABfwF8AhIBA2VudgZtZW1vcnkCAwGAgAQDDw4AAAABAgMEBAQEBAUGBweIAQ4Gd3JpdGU4AAAHd3JpdGUxNgABB3dyaXRlMzIAAgd3cml0ZTY0AAMId3JpdGVmMzIABAh3cml0ZWY2NAAFBXJlYWQ4AAYGcmVhZFU4AAcGcmVhZDE2AAgHcmVhZFUxNgAJBnJlYWQzMgAKBnJlYWQ2NAALB3JlYWRmMzIADAdyZWFkZjY0AA0KfQ4JACAAIAE6AAALCQAgACABOwEACwkAIAAgATYCAAsJACAAIAE3AwALCQAgACABOAIACwkAIAAgATkDAAsHACAALAAACwcAIAAtAAALBwAgAC4BAAsHACAALwEACwcAIAAoAgALBwAgACkDAAsHACAAKgIACwcAIAArAwAL"},49583:e=>{e.exports="AGFzbQEAAAABLAdgAX8Bf2ABfwF+YAJ/fwF/YAJ/fgF+YAN/f38Bf2ADf35+AX5gA39/fgF/AhIBA2VudgZtZW1vcnkCAwGAgAQDKCcAAAABAgICAwICAgMCAgIDAgICAwICAgMCAgIDAgICAwQEBAUCAgYHhgMnBWxvYWQ4AAAGbG9hZDE2AAEGbG9hZDMyAAIGbG9hZDY0AAMGc3RvcmU4AAQHc3RvcmUxNgAFB3N0b3JlMzIABgdzdG9yZTY0AAcEYWRkOAAIBWFkZDE2AAkFYWRkMzIACgVhZGQ2NAALBHN1YjgADAVzdWIxNgANBXN1YjMyAA4Fc3ViNjQADwRhbmQ4ABAFYW5kMTYAEQVhbmQzMgASBWFuZDY0ABMDb3I4ABQEb3IxNgAVBG9yMzIAFgRvcjY0ABcEeG9yOAAYBXhvcjE2ABkFeG9yMzIAGgV4b3I2NAAbCWV4Y2hhbmdlOAAcCmV4Y2hhbmdlMTYAHQpleGNoYW5nZTMyAB4KZXhjaGFuZ2U2NAAfEWNvbXBhcmVfZXhjaGFuZ2U4ACASY29tcGFyZV9leGNoYW5nZTE2ACESY29tcGFyZV9leGNoYW5nZTMyACISY29tcGFyZV9leGNoYW5nZTY0ACMGbm90aWZ5ACQEd2FpdAAlC3dhaXRUaW1lb3V0ACYKugMnCAAgAP4SAAALCAAgAP4TAQALCAAgAP4QAgALCAAgAP4RAwALDAAgACAB/hkAACABCwwAIAAgAf4aAQAgAQsMACAAIAH+FwIAIAELDAAgACAB/hgDACABCwoAIAAgAf4gAAALCgAgACAB/iEBAAsKACAAIAH+HgIACwoAIAAgAf4fAwALCgAgACAB/icAAAsKACAAIAH+KAEACwoAIAAgAf4lAgALCgAgACAB/iYDAAsKACAAIAH+LgAACwoAIAAgAf4vAQALCgAgACAB/iwCAAsKACAAIAH+LQMACwoAIAAgAf41AAALCgAgACAB/jYBAAsKACAAIAH+MwIACwoAIAAgAf40AwALCgAgACAB/jwAAAsKACAAIAH+PQEACwoAIAAgAf46AgALCgAgACAB/jsDAAsKACAAIAH+QwAACwoAIAAgAf5EAQALCgAgACAB/kECAAsKACAAIAH+QgMACwwAIAAgASAC/koAAAsMACAAIAEgAv5LAQALDAAgACABIAL+SAIACwwAIAAgASAC/kkDAAsKACAAIAH+AAIACwwAIAAgAUJ//gECAAsMACAAIAEgAv4BAgAL"},97134:e=>{e.exports="AGFzbQEAAAABEANgAX8Bf2ABfwBgAn9/AX8CWQYDZW52Bm1lbW9yeQIDAYCABANlbnYGbWFsbG9jAAADZW52BGZyZWUAAQNlbnYGY2FsbG9jAAIDZW52B3JlYWxsb2MAAgNlbnYNYWxpZ25lZF9hbGxvYwACAwYFAAECAgIHMwUGbWFsbG9jAAUEZnJlZQAGBmNhbGxvYwAHB3JlYWxsb2MACAxhbGlnbmVkQWxsb2MACQoqBQYAIAAQAAsGACAAEAELCAAgACABEAILCAAgACABEAMLCAAgACABEAML"},5454:e=>{e.exports="AGFzbQEAAAABEwNgAX8Bf2ACf38Bf2ADf39/AX8CEgEDZW52Bm1lbW9yeQIDAYCABAMIBwAAAAECAAAHQwcEbG9jawAAB3RyeWxvY2sAAQZ1bmxvY2sAAgR3YWl0AAMJdGltZWR3YWl0AAQGc2lnbmFsAAUJYnJvYWRjYXN0AAYKjgIHVgEBfyAAQQBBAf5IAgAhASABQQBHBEADQCABQQJGBH9BAQUgAEEBQQL+SAIAQQBHCwRAIABBAkJ//gECABoLIABBAEEC/kgCACEBIAFBAEcNAAsLQQALFwAgAEEAQQH+SAIAQQBGBH9BAAVBEAsLIwAgAEEB/iUCAEEBRwRAIABBAP4XAgAgAEEB/gACABoLQQALHQAgACAA/hACACABEAIaQn/+AQIAGiABEAAaQQALKQAgACAA/hACACABEAIaIAIpAwD+AQIAIAEQABpBAkYEf0HwAAVBAAsLFgAgAEEB/h4CABogAEEB/gACABpBAAsaACAAQQH+HgIAGiAAQYCAgIAE/gACABpBAAs="},42096:(e,t,r)=>{e.exports=r(74385)},68632:(e,t,r)=>{e.exports=r(37149)},45249:(e,t,r)=>{e.exports=r(87172)},73146:(e,t,r)=>{e.exports=r(85079)},80662:(e,t,r)=>{e.exports=r(92861)},969:(e,t,r)=>{e.exports=r(83760)},66681:(e,t,r)=>{e.exports=r(92696)},7403:(e,t,r)=>{e.exports=r(22948)},82731:(e,t,r)=>{e.exports=r(3706)},59614:(e,t,r)=>{e.exports=r(34281)},44301:(e,t,r)=>{e.exports=r(77654)},75019:(e,t,r)=>{e.exports=r(62160)},69736:(e,t,r)=>{e.exports=r(47567)},11919:(e,t,r)=>{e.exports=r(21724)},88032:(e,t,r)=>{e.exports=r(27279)},29967:(e,t,r)=>{e.exports=r(25216)},54001:(e,t,r)=>{e.exports=r(34750)},88435:(e,t,r)=>{e.exports=r(27440)},64236:(e,t,r)=>{e.exports=r(31707)},75062:(e,t,r)=>{e.exports=r(16560)},16091:(e,t,r)=>{e.exports=r(54220)},43660:(e,t,r)=>{var n=r(803).default,i=r(92696),a=r(16560),s=r(28271),o=r(62160),u=r(21724),c=r(34750);function f(){"use strict";e.exports=f=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},h=Object.prototype,d=h.hasOwnProperty,l=i||function(e,t,r){e[t]=r.value},p="function"==typeof a?a:{},v=p.iterator||"@@iterator",m=p.asyncIterator||"@@asyncIterator",A=p.toStringTag||"@@toStringTag";function g(e,t,r){return i(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{g({},"")}catch(t){g=function(e,t,r){return e[t]=r}}function k(e,t,r,n){var i=t&&t.prototype instanceof P?t:P,a=s(i.prototype),o=new O(n||[]);return l(a,"_invoke",{value:E(e,r,o)}),a}function y(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=k;var b="suspendedStart",x="suspendedYield",w="executing",_="completed",T={};function P(){}function I(){}function B(){}var C={};g(C,v,(function(){return this}));var S=o&&o(o(N([])));S&&S!==h&&d.call(S,v)&&(C=S);var M=B.prototype=P.prototype=s(C);function U(e){["next","throw","return"].forEach((function(t){g(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function r(i,a,s,o){var u=y(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&d.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,o)}))}o(u.arg)}var i;l(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}})}function E(e,r,n){var i=b;return function(a,s){if(i===w)throw new Error("Generator is already running");if(i===_){if("throw"===a)throw s;return{value:t,done:!0}}for(n.method=a,n.arg=s;;){var o=n.delegate;if(o){var u=D(o,n);if(u){if(u===T)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===b)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=w;var c=y(e,r,n);if("normal"===c.type){if(i=n.done?_:x,c.arg===T)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=_,n.method="throw",n.arg=c.arg)}}}function D(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,D(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),T;var a=y(i,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,T;var s=a.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,T):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,T)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[v];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(d.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return I.prototype=B,l(M,"constructor",{value:B,configurable:!0}),l(B,"constructor",{value:I,configurable:!0}),I.displayName=g(B,A,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===I||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return u?u(e,B):(e.__proto__=B,g(e,A,"GeneratorFunction")),e.prototype=s(M),e},r.awrap=function(e){return{__await:e}},U(R.prototype),g(R.prototype,m,(function(){return this})),r.AsyncIterator=R,r.async=function(e,t,n,i,a){void 0===a&&(a=c);var s=new R(k(e,t,n,i),a);return r.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},U(M),g(M,A,"Generator"),g(M,v,(function(){return this})),g(M,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var r in this)"t"===r.charAt(0)&&d.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var o=d.call(a,"catchLoc"),u=d.call(a,"finallyLoc");if(o&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&d.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,T):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),T},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),F(r),T}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;F(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),T}},r}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},803:(e,t,r)=>{var n=r(16560),i=r(54220);function a(t){return e.exports=a="function"==typeof n&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof n&&e.constructor===n&&e!==n.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,a(t)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},36443:(e,t,r)=>{var n=r(43660)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},27880:(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{A:()=>n})},79256:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(37149),i=r(27880);function a(e){if(n(e))return(0,i.A)(e)}},43070:(e,t,r)=>{"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{A:()=>n})},25182:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(34750);function i(e,t,r,i,a,s,o){try{var u=e[s](o),c=u.value}catch(e){return void r(e)}u.done?t(c):n.resolve(c).then(i,a)}function a(e){return function(){var t=this,r=arguments;return new n((function(n,a){var s=e.apply(t,r);function o(e){i(s,n,a,o,u,"next",e)}function u(e){i(s,n,a,o,u,"throw",e)}o(void 0)}))}}},78716:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{A:()=>n})},33423:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(27440),i=r(34963),a=r(30685);function s(e,t,r){if((0,a.A)())return n.apply(null,arguments);var s=[null];s.push.apply(s,t);var o=new(e.bind.apply(e,s));return r&&(0,i.A)(o,r.prototype),o}},81570:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(92696),i=r(87361);function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),n(e,(0,i.A)(a.key),a)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),n(e,"prototype",{writable:!1}),e}},134:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(92696),i=r(87361);function a(e,t,r){return(t=(0,i.A)(t))in e?n(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},60394:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(80345),i=r(3706),a=r(41473);function s(){return s="undefined"!=typeof Reflect&&n?n.bind():function(e,t,r){var n=(0,a.A)(e,t);if(n){var s=i(n,t);return s.get?s.get.call(arguments.length<3?e:r):s.value}},s.apply(this,arguments)}},25767:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(21724),i=r(62160);function a(e){return a=n?i.bind():function(e){return e.__proto__||i(e)},a(e)}},31060:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(28271),i=r(92696),a=r(34963);function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=n(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),i(e,"prototype",{writable:!1}),t&&(0,a.A)(e,t)}},73423:(e,t,r)=>{"use strict";function n(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}r.d(t,{A:()=>n})},30685:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(27440);function i(){try{var e=!Boolean.prototype.valueOf.call(n(Boolean,[],(function(){})))}catch(e){}return(i=function(){return!!e})()}},58114:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(16560),i=r(54220),a=r(74385);function s(e){if(void 0!==n&&null!=e[i]||null!=e["@@iterator"])return a(e)}},48396:(e,t,r)=>{"use strict";function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,{A:()=>n})},77193:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(23509),i=r(43070);function a(e,t){if(t&&("object"===(0,n.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.A)(e)}},34963:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(21724);function i(e,t){return i=n?n.bind():function(e,t){return e.__proto__=t,e},i(e,t)}},41473:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(25767);function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,n.A)(e)););return e}},6837:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(79256),i=r(58114),a=r(60773),s=r(48396);function o(e){return(0,n.A)(e)||(0,i.A)(e)||(0,a.A)(e)||(0,s.A)()}},91908:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(23509),i=r(39967);function a(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[i];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=(0,n.A)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},87361:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(23509),i=r(91908);function a(e){var t=(0,i.A)(e,"string");return"symbol"==(0,n.A)(t)?t:String(t)}},23509:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(16560),i=r(54220);function a(e){return a="function"==typeof n&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof n&&e.constructor===n&&e!==n.prototype?"symbol":typeof e},a(e)}},60773:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(74385),i=r(27880);function a(e,t){if(e){if("string"==typeof e)return(0,i.A)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?n(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,i.A)(e,t):void 0}}},26492:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(92861),i=r(28271),a=r(25767),s=r(34963),o=r(73423),u=r(33423);function c(e){var t="function"==typeof n?new n:void 0;return c=function(e){if(null===e||!(0,o.A)(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return(0,u.A)(e,arguments,(0,a.A)(this).constructor)}return r.prototype=i(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,s.A)(r,e)},c(e)}}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return r[e](a,a.exports,i),a.exports}i.m=r,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+".avplayer.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="AVPlayer:",i.l=(r,n,a,s)=>{if(e[r])e[r].push(n);else{var o,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),f=0;f<c.length;f++){var h=c[f];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){o=h;break}}o||(u=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[n];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(l);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},l=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),u&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={792:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=a);var s=i.p+i.u(t),o=new Error;i.l(s,(r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,n[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,a,[s,o,u]=r,c=0;if(s.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);u&&u(i)}for(t&&t(r);c<s.length;c++)a=s[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=i(61634);return a.default})()));