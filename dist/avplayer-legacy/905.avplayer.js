(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[905],{64436:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(78716),i=r(81570),n=r(134),s=r(63939),o=r(37837),u=r(71766),c=function(){function e(){(0,a.A)(this,e),(0,n.A)(this,"inCodecpar",void 0),(0,n.A)(this,"inTimeBase",void 0),(0,n.A)(this,"outCodecpar",void 0)}return(0,i.A)(e,[{key:"init",value:function(e,t){return this.inCodecpar=(0,o.Gy)(168),(0,u.Yi)(this.inCodecpar,e),this.inTimeBase={den:s.f[15](t+4),num:s.f[15](t)},0}},{key:"destroy",value:function(){this.inCodecpar&&((0,u.dn)(this.inCodecpar),this.inCodecpar=0)}}]),e}()},50848:(e,t,r)=>{"use strict";r.d(t,{A:()=>S});var a=r(88435),i=r.n(a),n=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(63939),p=r(50932),g=r(77162),v=r(29170),b=r(64436),m=r(14686),A=r(4624),U=r(9705),x=r(77231),y=r(58469),k=r(44328),w=r(37837),P=r(71517),I=r(67672);function _(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,M()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function M(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}var S=function(e){function t(){var e;(0,n.A)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=_(this,t,[].concat(a)),(0,d.A)((0,u.A)(e),"streamMuxConfig",void 0),(0,d.A)((0,u.A)(e),"caches",void 0),e}return(0,h.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,c.A)((0,f.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],this.streamMuxConfig={profile:x.N_,sampleRate:x.N_,channels:x.N_},0}},{key:"sendAVPacket",value:function(e){for(var t=0,r=l.f[17](e+16)||l.f[17](e+8),a=(0,m.s3)(l.f[20](e+24),l.f[15](e+28)).slice();t<a.length;){var i=y.Bq(a.subarray(t));if(I.ai(i))return A.z3("AACADTSParser parse failed","src/avformat/bsf/aac/ADTS2RawFilter.ts",81),U.LR;var n={dts:r,buffer:null,extradata:null,duration:x.N_};n.buffer=a.subarray(t+i.headerLength,t+i.headerLength+i.framePayloadLength),this.streamMuxConfig.profile=i.profile,this.streamMuxConfig.sampleRate=i.sampleRate,this.streamMuxConfig.channels=i.channels;var s=l.f[15](this.inCodecpar+48)!==this.streamMuxConfig.profile||l.f[15](this.inCodecpar+136)!==this.streamMuxConfig.sampleRate||l.f[15](this.inCodecpar+116)!==this.streamMuxConfig.channels,o=(0,k.k)(BigInt(Math.floor(1024*(i.numberOfRawDataBlocksInFrame+1)/this.streamMuxConfig.sampleRate*x.SF)),x.KR,this.inTimeBase);if(n.duration=Number(o),s){p.M[15](this.inCodecpar+48,this.streamMuxConfig.profile),p.M[15](this.inCodecpar+136,this.streamMuxConfig.sampleRate),p.M[15](this.inCodecpar+116,this.streamMuxConfig.channels);var u=(0,y.Ij)((0,v.A)(this.inCodecpar,g.A));l.f[20](this.inCodecpar+12)&&(0,w.Eb)(l.f[20](this.inCodecpar+12)),p.M[20](this.inCodecpar+12,(0,w.sY)(u.length)),(0,m.lW)(l.f[20](this.inCodecpar+12),u.length,u),p.M[15](this.inCodecpar+16,u.length),n.extradata=u}this.caches.push(n),t+=i.aacFrameLength,r+=o}return 0}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,P.Up)(e);var t=this.caches.shift(),r=(0,w.sY)(t.buffer.length);if((0,m.lW)(r,t.buffer.length,t.buffer),(0,P.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[17](e+48,BigInt(Math.floor(t.duration))),p.M[15](e+36,1|l.f[15](e+36)),t.extradata){var a=(0,w.sY)(t.extradata.length);(0,m.lW)(a,t.extradata.length,t.extradata),(0,P.Ow)(e,1,a,t.extradata.length)}return 0}return U.LT}},{key:"reset",value:function(){return 0}}]),t}(b.A)},36488:(e,t,r)=>{"use strict";r.d(t,{A:()=>B});var a=r(88435),i=r.n(a),n=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(63939),p=r(50932),g=r(77162),v=r(29170),b=r(64436),m=r(14686),A=r(4624),U=r(9705),x=r(77231),y=r(58469),k=r(44328),w=r(37837),P=r(71517),I=r(37246),_=r(67672);function M(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,S()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function S(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}var B=function(e){function t(){var e;(0,n.A)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=M(this,t,[].concat(a)),(0,d.A)((0,u.A)(e),"bitReader",void 0),(0,d.A)((0,u.A)(e),"streamMuxConfig",void 0),(0,d.A)((0,u.A)(e),"caches",void 0),(0,d.A)((0,u.A)(e),"refSampleDuration",void 0),e}return(0,h.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,c.A)((0,f.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],this.refSampleDuration=BigInt(0),this.bitReader=new I.A,this.streamMuxConfig={profile:x.N_,sampleRate:x.N_,channels:x.N_},0}},{key:"sendAVPacket",value:function(e){var t=(0,m.s3)(l.f[20](e+24),l.f[15](e+28));this.bitReader.appendBuffer(t);for(var r=l.f[17](e+16)||l.f[17](e+8);this.bitReader.remainingLength()>=20;){var a=this.bitReader.getPointer(),i=y.f7(null,this.bitReader);if(_.ai(i))return A.z3("AACLATMParser parse failed","src/avformat/bsf/aac/LATM2RawFilter.ts",94),this.bitReader.reset(),U.LR;if(i.framePayloadLength>=this.bitReader.remainingLength()){this.bitReader.skipPadding(),this.bitReader.setPointer(a);break}i.useSameStreamMux||(this.streamMuxConfig.profile=i.profile,this.streamMuxConfig.sampleRate=i.sampleRate,this.streamMuxConfig.channels=i.channels);for(var n=i.framePayloadLength,s=new Uint8Array(n),o=0;o<n;o++)s[o]=this.bitReader.readU(8);var u={dts:r,buffer:s,extradata:null};if(l.f[15](this.inCodecpar+48)!==this.streamMuxConfig.profile||l.f[15](this.inCodecpar+136)!==this.streamMuxConfig.sampleRate||l.f[15](this.inCodecpar+116)!==this.streamMuxConfig.channels){this.refSampleDuration=(0,k.k)(BigInt(Math.floor(1024/this.streamMuxConfig.sampleRate*x.SF)),x.KR,this.inTimeBase),p.M[15](this.inCodecpar+48,this.streamMuxConfig.profile),p.M[15](this.inCodecpar+136,this.streamMuxConfig.sampleRate),p.M[15](this.inCodecpar+116,this.streamMuxConfig.channels);var c=(0,y.Ij)((0,v.A)(this.inCodecpar,g.A));l.f[20](this.inCodecpar+12)&&(0,w.Eb)(l.f[20](this.inCodecpar+12)),p.M[20](this.inCodecpar+12,(0,w.sY)(c.length)),(0,m.lW)(l.f[20](this.inCodecpar+12),c.length,c),p.M[15](this.inCodecpar+16,c.length),u.extradata=c}this.caches.push(u),r+=this.refSampleDuration,this.bitReader.skipPadding()}return 0}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,P.Up)(e);var t=this.caches.shift(),r=(0,w.sY)(t.buffer.length);if((0,m.lW)(r,t.buffer.length,t.buffer),(0,P.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[15](e+36,1|l.f[15](e+36)),p.M[17](e+48,this.refSampleDuration),t.extradata){var a=(0,w.sY)(t.extradata.length);(0,m.lW)(a,t.extradata.length,t.extradata),(0,P.Ow)(e,1,a,t.extradata.length)}return 0}return U.LT}},{key:"reset",value:function(){return this.bitReader.reset(),0}}]),t}(b.A)},61702:(e,t,r)=>{"use strict";r.d(t,{A:()=>I});var a=r(88435),i=r.n(a),n=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(63939),p=r(50932),g=r(64436),v=r(77231),b=r(44328),m=r(65451),A=r(4624),U=r(9705),x=r(71517),y=r(37837),k=r(14686);function w(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,P()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}var I=function(e){function t(){var e;(0,n.A)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=w(this,t,[].concat(a)),(0,d.A)((0,u.A)(e),"caches",void 0),e}return(0,h.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,c.A)((0,f.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],0}},{key:"sendAVPacket",value:function(e){for(var t=0,r=l.f[17](e+16)||l.f[17](e+8),a=(0,x.iI)(e);t<a.length;){var i=a[t]<<3|a[t+1]>>5;if(1023!==i)return A.z3("MpegtsOpusParser found syncWord not 0x3ff, got: 0x".concat(i.toString(16)),"src/avformat/bsf/opus/Mpegts2RawFilter.ts",67),U.LR;for(var n=!!(16&a[t+1]),s=!!(8&a[t+1]),o=t+2,u=0;255===a[o];)u+=255,o++;u+=a[o],o++,o+=n?2:0,o+=s?2:0;var c=a.subarray(o,o+u),f=l.f[15](this.inCodecpar+136)>0?l.f[15](this.inCodecpar+136):48e3,h=(0,b.k)(BigInt(Math.floor(m.kt(c)/f*v.SF)),v.KR,this.inTimeBase);this.caches.push({dts:r,buffer:c.slice(),duration:Number(h)}),r+=h,t=o+u}}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,x.Up)(e);var t=this.caches.shift(),r=(0,y.sY)(t.buffer.length);return(0,k.lW)(r,t.buffer.length,t.buffer),(0,x.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[15](e+36,1|l.f[15](e+36)),p.M[17](e+48,BigInt(Math.floor(t.duration))),0}return U.LR}},{key:"reset",value:function(){return 0}}]),t}(g.A)},58469:(e,t,r)=>{"use strict";r.d(t,{Bq:()=>d,Ij:()=>h,XC:()=>f,f7:()=>l,uF:()=>s});var a=r(134),i=r(77231),n=r(37246),s=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},1,"Main"),2,"LC"),3,"LC"),4,"LC"),5,"HE"),6,"HE"),o={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,i.N_,i.N_,i.N_],c=[i.N_,1,2,3,4,5,6,7];function f(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){var r=function(e){var t,r,a=i.N_,n=i.N_,s=i.N_;return e.length>=2&&(a=e[0]>>3&31,n=null!==(t=u[(7&e[0])<<1|e[1]>>7])&&void 0!==t?t:48e3,s=null!==(r=c[e[1]>>3&15])&&void 0!==r?r:2),{profile:a,sampleRate:n,channels:s}}(t),a=r.profile,n=r.sampleRate,s=r.channels;e.codecpar.profile=a,e.codecpar.sampleRate=n,e.codecpar.chLayout.nbChannels=s}}function h(e){var t=o[e.sampleRate],r=e.chLayout.nbChannels,a=new Uint8Array(2);return a[0]=(31&e.profile)<<3|(14&t)>>1,a[1]=(1&t)<<7|(15&r)<<3,a}function d(e){if(e.length<7)return-1;var t=e[0]<<4|e[1]>>4;if(4095!==t)return-1;var r=1&e[1],a=(192&e[2])>>>6,i=(60&e[2])>>>2,n=(1&e[2])<<2|(192&e[3])>>>6,s=(3&e[3])<<11|e[4]<<3|(224&e[5])>>>5,o=3&e[6],f=1===r?7:9,h=s-f;return{syncWord:t,profile:a+1,sampleRate:u[i],channels:c[n],aacFrameLength:s,numberOfRawDataBlocksInFrame:o,headerLength:f,framePayloadLength:h}}function l(e,t){function r(){for(var e=t.readU(2),r=0,a=0;a<=e;a++)r<<=8,r|=t.readU(8);return r}t||(t=new n.A).appendBuffer(e);var a=t.getPointer(),i={syncWord:0,profile:0,sampleRate:0,channels:0,useSameStreamMux:!1,headerLength:0,framePayloadLength:0,muxLengthBytes:0},s=t.readU(11);if(695!==s)return-1;i.syncWord=s,i.muxLengthBytes=t.readU(13);var o=1===t.readU1();if(i.useSameStreamMux=o,!o){var f=1===t.readU1();if(f&&1===t.readU1())return-1;if(f&&r(),1!==t.readU1())return-1;if(0!==t.readU(6))return-1;if(0!==t.readU(4))return-1;if(0!==t.readU(3))return-1;var h=f?r():0,d=t.readU(5);h-=5;var l=t.readU(4);h-=4;var p=t.readU(4);if(h-=4,t.readU(3),(h-=3)>0&&t.readU(h),0!==t.readU(3))return-1;if(t.readU(8),1===t.readU1())if(f)r();else for(;;){var g=1===t.readU1();if(t.readU(8),!g)break}1===t.readU1()&&t.readU(8),i.profile=d+1,i.sampleRate=u[l],i.channels=c[p]}for(var v=0;;){var b=t.readU(8);if(v+=b,255!==b)break}return i.framePayloadLength=v,i.headerLength=t.getPointer()-a+(8===t.getBitLeft()?0:1),i}},20620:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>w,KD:()=>_,MB:()=>U,S1:()=>y,XC:()=>I,ci:()=>P,oT:()=>k,tZ:()=>A,wf:()=>M}),r(42096),r(75062),r(16091),r(68632);var a=r(134),i=r(63939),n=r(50932),s=r(72739),o=r(729),u=r(31865),c=r(37246),f=r(4624),h=r(14686),d=r(71517),l=r(60264),p=r(37837),g=r(23991),v=r(39381),b="src/avformat/codecs/h264.ts",m=3,A=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},66,"Constrained Baseline"),77,"Main"),100,"High"),110,"High10"),122,"High422"),244,"High444");function U(e){var t=new u.A(e);t.skip(5);for(var r=[],a=[],i=[],n=31&t.readUint8(),s=0;s<n;s++){var o=t.readUint16();r.push(t.readBuffer(o))}for(var c=t.readUint8(),f=0;f<c;f++){var h=t.readUint16();a.push(t.readBuffer(h))}if(t.remainingSize()>4){t.skip(3);var d=t.readUint8();if(d>0)for(var l=0;l<d;l++){var p=t.readUint16();i.push(t.readBuffer(p))}}return{spss:r,ppss:a,spsExts:i}}function x(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length>32&&(f.R8("h264 metadata's sps max length is 32, but get ".concat(e.length),b,210),e=e.slice(0,32)),e.length>256&&(f.R8("h264 metadata's pps max length is 256, but get ".concat(e.length),b,214),e=e.slice(0,256));var a=7;a=e.reduce((function(e,t){return e+2+t.length}),a),a=t.reduce((function(e,t){return e+2+t.length}),a);var i=e[0],n=M(i);66!==n.profile&&77!==n.profile&&88!==n.profile&&(a+=4,r.length&&(a=r.reduce((function(e,t){return e+2+t.length}),a)));var u=new Uint8Array(a),c=new o.A(u);return c.writeUint8(1),c.writeUint8(i[1]),c.writeUint8(i[2]),c.writeUint8(i[3]),c.writeUint8(252|m),c.writeUint8(224|31&e.length),s.__(e,(function(e){c.writeUint16(e.length),c.writeBuffer(e)})),c.writeUint8(t.length),s.__(t,(function(e){c.writeUint16(e.length),c.writeBuffer(e)})),66!==n.profile&&77!==n.profile&&88!==n.profile&&(c.writeUint8(252|n.chromaFormatIdc),c.writeUint8(248|n.bitDepthLumaMinus8),c.writeUint8(248|n.bitDepthChromaMinus8),r.length&&s.__(r,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),u}function y(e){var t=(0,l.py)(e);if(t.length>1){var r=[],a=[],i=[];if(t.forEach((function(e){var t=31&e[0];7===t?r.push(e):8===t?a.push(e):13===t&&i.push(e)})),r.length&&a.length)return x(r,a,i)}}function k(e){var t,r=(0,l.py)(e),a=!1;if(r.length>1){var i=[],n=[],u=[];r.forEach((function(e){var t=31&e[0];7===t?i.push(e):8===t?n.push(e):13===t&&u.push(e)})),i.length&&n.length&&(t=x(i,n,u)),r=r.filter((function(e){var t=31&e[0];return 9!==t&&8!==t&&7!==t&&13!==t}))}var c=r.reduce((function(e,t){return e+m+1+t.length}),0),f=(0,p.sY)(c),d=(0,h.s3)(f,c),g=new o.A(d);return s.__(r,(function(e){3===m?g.writeUint32(e.length):2===m?g.writeUint24(e.length):1===m?g.writeUint16(e.length):g.writeUint8(e.length),g.writeBuffer(e.subarray(0)),5==(31&e[0])&&(a=!0)})),{bufferPointer:f,length:c,key:a,extradata:t}}function w(e,t){var r;if(1&i.f[15](e+36)){var a=(0,d.iI)(e);if(!(0,l.Bs)(a)){for(var n=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:m,s=[],o=[],c=[],f=[],g=new u.A(a);g.remainingSize()>0;){var v;v=3===n?g.readUint32():2===n?g.readUint24():1===n?g.readUint16():g.readUint8();var b=a.subarray(Number(BigInt.asIntN(32,g.getPos())),Number(BigInt.asIntN(32,g.getPos()))+v);g.skip(v);var A=31&b[0];7===A?s.push(b):8===A?o.push(b):13===A?c.push(b):f.push(b)}if(s.length||o.length){var U=x(s,o,c),y=(0,p.sY)(U.length);(0,h.lW)(y,U.length,U),(0,d.Ow)(e,1,y,U.length)}}}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&i.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,l.Bs)(r)){var a=(0,l.py)(r);if(a.length>1){var s=[],o=[],u=[];if(a.forEach((function(e){var t=31&e[0];7===t?s.push(e):8===t?o.push(e):13===t&&u.push(e)})),s.length&&o.length){var c=x(s,o,u),f=(0,p.sY)(c.length);(0,h.lW)(f,c.length,c),(0,d.Ow)(e,1,f,c.length),n.M[15](e+36,1|i.f[15](e+36))}}}}}function I(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[4];var r=U(t).spss;if(r.length){var a=M(r[0]),i=a.profile,n=a.level,s=a.width,o=a.height;e.codecpar.profile=i,e.codecpar.level=n,e.codecpar.width=s,e.codecpar.height=o}}}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(2===i.f[15](e+80))return(0,l.py)((0,h.s3)(i.f[20](e+24),i.f[15](e+28))).some((function(e){return 5==(31&e[0])}));for(var r=i.f[15](e+28),a=0;a<r-t;){if(5==(31&v.r8(i.f[20](e+24)+(a+t))))return!0;a+=4===t?v.Sg(i.f[20](e+24)+a):3===t?v.ht(i.f[20](e+24)+a):2===t?v.yd(i.f[20](e+24)+a):v.r8(i.f[20](e+24)+a),a+=t}return!1}function M(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,l.BN)(e.subarray(t)),a=new c.A(r.length);a.appendBuffer(r),a.readU1(),a.readU(2),a.readU(5);var i=a.readU(8);a.readU1(),a.readU1(),a.readU1(),a.readU1(),a.readU1(),a.readU1(),a.readU(2);var n=a.readU(8);g.xb(a);var s=1,o=0,u=0;if((100==i||110==i||122==i||244==i||44==i||83==i||86==i||118==i||128==i||138==i||139==i||134==i||135==i)&&(3===(s=g.xb(a))&&a.readU1(),o=g.xb(a),u=g.xb(a),a.readU1(),a.readU1()))for(var f=new Array(8),h=0;h<(3!=s?8:12);h++)f[h]=a.readU1();var d=g.xb(a),p=g.xb(a),v=0,b=0;if(0===p)v=g.xb(a);else if(1===p){b=a.readU1(),g.$x(a),g.$x(a);for(var m=g.xb(a),A=0;A<m;A++)g.$x(a)}g.xb(a),a.readU1();var U=g.xb(a),x=g.xb(a),y=a.readU1(),k=16*(U+1),w=(2-y)*(x+1)*16;y||a.readU1(),a.readU1();var P=a.readU1();if(P){var I=1,_=2-P;1===s?(I=2,_=2*(2-P)):2===P&&(I=2,_=2-P),k-=I*(g.xb(a)+g.xb(a)),w-=_*(g.xb(a)+g.xb(a))}return{profile:i,level:n,width:k,height:w,chromaFormatIdc:s,bitDepthLumaMinus8:o,bitDepthChromaMinus8:u,frameMbsOnlyFlag:y,picOrderCntType:p,log2MaxPicOrderCntLsbMinus4:v,deltaPicOrderAlwaysZeroFlag:b,log2MaxFrameNumMinus4:d}}}},53e3:(e,t,r)=>{"use strict";r.d(t,{HL:()=>m,Jk:()=>y,KD:()=>P,S1:()=>U,XC:()=>w,ZU:()=>_,ci:()=>k,dT:()=>v,oT:()=>x,wf:()=>I}),r(42096),r(75062),r(16091),r(68632);var a=r(134),i=r(63939),n=r(50932),s=r(72739),o=r(729),u=r(31865),c=r(37246),f=r(14686),h=r(60264),d=r(71517),l=r(37837),p=r(23991),g=r(39381),v=(0,a.A)((0,a.A)((0,a.A)((0,a.A)({},1,"Main"),2,"Main10"),3,"MainStillPicture"),4,"Main444"),b=3;function m(e){var t=new u.A(e,!0);t.skip(22);for(var r=[],a=[],i=[],n=t.readUint8(),s=0;s<n;s++){for(var o=63&t.readUint8(),c=t.readUint16(),f=[],h=0;h<c;h++){var d=t.readUint16();f.push(t.readBuffer(d))}32===o?r=f:33===o?a=f:34===o&&(i=f)}return{vpss:r,spss:a,ppss:i}}function A(e,t,r){var a=t[0],i=23;e.length&&(i+=3,i=e.reduce((function(e,t){return e+2+t.length}),i)),t.length&&(i+=3,i=t.reduce((function(e,t){return e+2+t.length}),i)),r.length&&(i+=3,i=r.reduce((function(e,t){return e+2+t.length}),i));var n=new Uint8Array(i),u=new o.A(n,!0),c=I(a);u.writeUint8(1),u.writeUint8(a[1]),u.writeUint8(a[2]),u.writeUint8(a[3]),u.writeUint8(a[4]),u.writeUint8(a[5]),u.writeUint8(a[6]),u.writeUint8(a[7]),u.writeUint8(a[8]),u.writeUint8(a[9]),u.writeUint8(a[10]),u.writeUint8(a[11]),u.writeUint8(c.level),u.writeUint8(1020),u.writeUint8(0),u.writeUint8(16320),u.writeUint8(16320|c.chroma_format_idc),u.writeUint8(8160|c.bit_depth_luma_minus8),u.writeUint8(8160|c.bit_depth_chroma_minus8),u.writeUint16(0),u.writeUint8(8|(1&a[0])<<2|b);var f=0;return e.length&&f++,t.length&&f++,r.length&&f++,u.writeUint8(f),e.length&&(u.writeUint8(160),u.writeUint16(e.length),s.__(e,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),t.length&&(u.writeUint8(161),u.writeUint16(t.length),s.__(t,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),r.length&&(u.writeUint8(162),u.writeUint16(r.length),s.__(r,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),n}function U(e){var t=(0,h.py)(e);if(t.length>=2){var r=[],a=[],i=[];if(t.forEach((function(e){var t=e[0]>>>1&63;32===t?r.push(e):33===t?a.push(e):34===t&&i.push(e)})),a.length&&i.length)return A(r,a,i)}}function x(e){var t,r=!1,a=(0,h.py)(e);if(a.length>=2){var i=[],n=[],u=[];a.forEach((function(e){var t=e[0]>>>1&63;32===t?i.push(e):33===t?n.push(e):34===t&&u.push(e)})),n.length&&u.length&&(t=A(i,n,u),a=a.filter((function(e){var t=e[0]>>>1&63;return 32!==t&&33!==t&&34!==t&&35!==t})))}var c=a.reduce((function(e,t){return e+b+1+t.length}),0),d=(0,l.sY)(c),p=(0,f.s3)(d,c),g=new o.A(p);return s.__(a,(function(e){3===b?g.writeUint32(e.length):2===b?g.writeUint24(e.length):1===b?g.writeUint16(e.length):g.writeUint8(e.length),g.writeBuffer(e.subarray(0));var t=e[0]>>>1&63;19!==t&&20!==t&&21!==t||(r=!0)})),{bufferPointer:d,length:c,extradata:t,key:r}}function y(e,t){var r;if(1&i.f[15](e+36)){var a=(0,d.iI)(e);if(!(0,h.Bs)(a)){for(var n=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:b,s=[],o=[],c=[],p=new u.A(a);p.remainingSize()>0;){var g;g=3===n?p.readUint32():2===n?p.readUint24():1===n?p.readUint16():p.readUint8();var v=a.subarray(Number(BigInt.asIntN(32,p.getPos())),Number(BigInt.asIntN(32,p.getPos()))+g);p.skip(g);var m=v[0]>>>1&63;33===m?o.push(v):34===m?c.push(v):32===m&&s.push(v)}if(o.length||c.length||s.length){var U=A(s,o,c),x=(0,l.sY)(U.length);(0,f.lW)(x,U.length,U),(0,d.Ow)(e,1,x,U.length)}}}}function k(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&i.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,h.Bs)(r)){var a=(0,h.py)(r);if(a.length>2){var s=[],o=[],u=[];if(a.forEach((function(e){var t=e[0]>>>1&63;32===t?s.push(e):33===t?o.push(e):34===t&&u.push(e)})),s.length&&o.length&&u.length){var c=A(s,o,u),p=(0,l.sY)(c.length);(0,f.lW)(p,c.length,c),(0,d.Ow)(e,1,p,c.length),n.M[15](e+36,1|i.f[15](e+36))}}}}}function w(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[21];var r=m(t).spss;if(r.length){var a=I(r[0]),i=a.profile,n=a.level,s=a.width,o=a.height;e.codecpar.profile=i,e.codecpar.level=n,e.codecpar.width=s,e.codecpar.height=o}}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(2===i.f[15](e+80))return(0,h.py)((0,f.s3)(i.f[20](e+24),i.f[15](e+28))).some((function(e){var t=e[0]>>>1&63;return 20===t||19===t}));for(var r=i.f[15](e+28),a=0;a<r-t;){var n=g.r8(i.f[20](e+24)+(a+t))>>>1&63;if(20===n||19===n)return!0;a+=4===t?g.Sg(i.f[20](e+24)+a):3===t?g.ht(i.f[20](e+24)+a):2===t?g.yd(i.f[20](e+24)+a):g.r8(i.f[20](e+24)+a),a+=t}return!1}function I(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=0,a=0,i=0,n=0,s=0,o=0,u=1,f=0,d=0,l=0,g=0,v=(0,h.BN)(e.subarray(t)),b=new c.A(v.length);b.appendBuffer(v),b.readU1(),b.readU(6),b.readU(6),b.readU(3),b.readU(4);var m=b.readU(3);b.readU1();var A=0;if(m<=6){f=b.readU(2),d=b.readU1(),r=b.readU(5),l=b.readU(32),g=b.readU(48),a=b.readU(8);for(var U=new Array(6),x=new Array(6),y=0;y<m;y++)U[y]=b.readU1(),x[y]=b.readU1();if(m>0)for(var k=m;k<8;k++)b.readU(2);for(var w=0;w<m;w++)U[w]&&(b.readU(2),b.readU(1),b.readU(5),b.readU(32),b.readU(1),b.readU(1),b.readU(1),b.readU(1),b.readU(44)),x[w]&&b.readU(8);p.xb(b),3===(u=p.xb(b))&&(A=b.readU(1)),i=p.xb(b),n=p.xb(b);var P=0,I=0,_=0,M=0;b.readU1()&&(P=p.xb(b),I=p.xb(b),_=p.xb(b),M=p.xb(b)),s=p.xb(b),o=p.xb(b);var S=2,B=2;0===u?S=B=0:2===u?(S=2,B=1):3===u&&(S=B=1),i-=S*(1<<s+1)*(P+I),n-=B*(1<<s+1)*(_+M)}for(var C=p.xb(b)+4,L=b.readU1()?0:m;L<m+1;L++)p.xb(b),p.xb(b),p.xb(b);var R=p.xb(b)+3,F=p.xb(b),z=p.xb(b)+2,T=p.xb(b),N=R+F,E=R-1,D=i+(1<<N)-1>>N,O=n+(1<<N)-1>>N;return{profile:r,level:a,width:i,height:n,chroma_format_idc:u,bit_depth_luma_minus8:s,bit_depth_chroma_minus8:o,general_profile_space:f,general_tier_flag:d,general_profile_compatibility_flags:l,constraint_flags:g,separate_colour_plane_flag:A,log2_min_cb_size:R,log2_diff_max_min_coding_block_size:F,log2_min_tb_size:z,log2_diff_max_min_transform_block_size:T,log2_max_trafo_size:T+z,log2_ctb_size:N,log2_min_pu_size:E,ctb_width:D,ctb_height:O,ctb_size:D*O,min_cb_width:i>>R,min_cb_height:n>>R,min_tb_width:i>>z,min_tb_height:n>>z,min_pu_width:i>>E,min_pu_height:n>>E,log2_max_poc_lsb:C}}}function _(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,h.BN)(e.subarray(t)),a=new c.A(r.length);return a.appendBuffer(r),{pps_pic_parameter_set_id:p.xb(a),pps_seq_parameter_set_id:p.xb(a),dependent_slice_segment_flag:a.readU1(),output_flag_present_flag:a.readU1(),num_extra_slice_header_bits:a.readU(3)}}}},89088:(e,t,r)=>{"use strict";r.d(t,{Au:()=>A,He:()=>U,XC:()=>x,Y2:()=>v,hG:()=>b,oz:()=>m});var a=r(134),i=r(77231),n=[44100,48e3,32e3,0],s=[22050,24e3,16e3,0],o=[11025,12e3,8e3,0],u=[0,1152,1152,384],c=[0,576,1152,384],f=[0,576,1152,384],h=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],d=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],l=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],p=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],g=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function v(e,t){switch(e){case 0:return o[t];case 2:return s[t];case 3:return n[t]}return i.N_}function b(e,t){switch(e){case 0:return f[t];case 2:return c[t];case 3:return u[t]}return i.N_}function m(e,t,r){switch(t){case 1:switch(e){case 0:case 2:return g[r];case 3:return l[r]}break;case 2:switch(e){case 0:case 2:return g[r];case 3:return d[r]}case 3:switch(e){case 0:case 2:return p[r];case 3:return h[r]}}return i.N_}function A(e){switch(e){case 1:return 34;case 2:return 33;case 3:return 32}return i.N_}var U=(0,a.A)((0,a.A)((0,a.A)({},32,"Layer1"),33,"Layer2"),34,"Layer3");function x(e,t){if(t&&t.length>=4){var r=t[1]>>>3&3,a=(6&t[1])>>1,i=(12&t[2])>>>2,n=3&~(t[3]>>>6)?2:1,s=A(a),o=v(r,i);e.codecpar.profile=s,e.codecpar.sampleRate=o,e.codecpar.chLayout.nbChannels=n}}},65451:(e,t,r)=>{"use strict";r.d(t,{Ij:()=>c,XC:()=>u,kt:()=>o});var a=r(31865),i=r(729),n=r(44328),s=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function o(e){var t,r,a=0;if(e.length<1)return 0;switch(t=e[0],r=s[t>>3],3&t){case 0:a=1;break;case 1:case 2:a=2;break;case 3:if(e.length<2)return 0;a=63&e[1]}return a*r}function u(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=19){var r=new a.A(t,!1);r.skip(9),e.codecpar.chLayout.nbChannels=r.readUint8(),e.codecpar.initialPadding=r.readUint16(),e.codecpar.sampleRate=r.readUint32(),e.codecpar.seekPreroll=Number((0,n.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function c(e){var t=new Uint8Array(19),r=new i.A(t,!1);return r.writeString("OpusHead"),r.writeUint8(1),r.writeUint8(e.chLayout.nbChannels),r.writeUint16(e.initialPadding),r.writeUint32(e.sampleRate),t}},55611:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>U,KD:()=>w,QA:()=>y,Ui:()=>I,XC:()=>k,ci:()=>x,oT:()=>A,wf:()=>P});var a=r(63939),i=r(50932),n=r(72739),s=r(729),o=r(31865),u=r(37246),c=r(14686),f=r(60264),h=r(71517),d=r(37837),l=r(23991),p=r(83314),g=r(39381),v=3;function b(e){var t=e.readU(9),r=e.readU(3),a=e.readU(2),i=e.readU(2),n=e.readU(3);e.readU(5),e.readU(2);var s=e.readU(6),o=e.readU(7),u=e.readU(1),c=e.readU(8),f=e.readU(1),h=e.readU(1),d=[],l=[];if(s){for(var p=0;p<s-1;p++)d[p]=e.readU(8);d[s-1]=e.readU(6)}else e.readU(6);if(r>1){for(var g=0,v=r-2;v>=0;--v)g|=e.readU(1)<<v;for(var b=r;b<=8&&r>1;++b)e.readU(1);for(var m=r-2;m>=0;--m)g&1<<m&&(l[m]=e.readU(8))}var A=e.readU(8),U=[];if(A)for(var x=0;x<A;x++)U.push(e.readU(8));return{olsIdx:t,numSublayers:r,bitDepthMinus8:n,chromaFormatIdc:i,constantFrameRate:a,generalProfileIdc:o,generalTierFlag:u,generalLevelIdc:c,ptlFrameOnlyConstraintFlag:f,ptlMultilayerEnabledFlag:h,generalConstraintInfo:d,sublayerLevelIdc:l,generalSubProfileIdc:U,maxPictureWidth:e.readU(16),maxPictureHeight:e.readU(16),avgFramerate:e.readU(16)}}function m(e,t,r){var a,i=t[0];if(i){var o=P(i),u=o.generalConstraintInfo;u.length||(u=new Array(12).fill(0));var c=new p.A;if(c.writeU(9,0),c.writeU(3,o.spsMaxSublayersMinus1+1),c.writeU(2,1),c.writeU(2,o.chromaFormatIdc),c.writeU(3,o.bitDepthMinus8),c.writeU(5,31),c.writeU(2,0),c.writeU(6,u.length),c.writeU(7,o.profile),c.writeU1(o.tierFlag),c.writeU(8,o.level),c.writeU1(o.ptlFrameOnlyConstraintFlag),c.writeU1(o.ptlMultilayerEnabledFlag),u.length){for(var f=0;f<u.length-1;f++)c.writeU(8,u[f]);c.writeU(6,u[u.length-1])}else c.writeU(6,63);if(o.spsMaxSublayersMinus1+1>1){for(var h=0,d=o.spsMaxSublayersMinus1-1;d>=0;d--)h=h<<1|o.ptlSublayerLevelPresentFlag[d];c.writeU(o.spsMaxSublayersMinus1,h);for(var l=o.spsMaxSublayersMinus1+1;l<=8&&o.spsMaxSublayersMinus1>0;++l)c.writeU1(0);for(var g=o.spsMaxSublayersMinus1-1;g>=0;g--)o.ptlSublayerLevelPresentFlag[g]&&c.writeU(8,o.sublayerLevelIdc[g])}c.writeU(8,o.generalSubProfileIdc.length);for(var b=0;b<o.generalSubProfileIdc.length;b++)c.writeU(8,o.sublayerLevelIdc[b]);c.writeU(16,o.width),c.writeU(16,o.height),c.writeU(16,0),c.padding(),a=c.getBuffer().subarray(0,c.getPointer())}var m=2+(a?a.length:0);e.length&&(m+=3,m=e.reduce((function(e,t){return e+2+t.length}),m)),t.length&&(m+=3,m=t.reduce((function(e,t){return e+2+t.length}),m)),r.length&&(m+=3,m=r.reduce((function(e,t){return e+2+t.length}),m));var A=new Uint8Array(m),U=new s.A(A,!0);U.writeUint8(v<<1|(a?1:0)|248),a&&U.writeBuffer(a);var x=0;return e.length&&x++,t.length&&x++,r.length&&x++,U.writeUint8(x),e.length&&(U.writeUint8(142),U.writeUint16(e.length),n.__(e,(function(e){U.writeUint16(e.length),U.writeBuffer(e)}))),t.length&&(U.writeUint8(143),U.writeUint16(t.length),n.__(t,(function(e){U.writeUint16(e.length),U.writeBuffer(e)}))),r.length&&(U.writeUint8(144),U.writeUint16(r.length),n.__(r,(function(e){U.writeUint16(e.length),U.writeBuffer(e)}))),A}function A(e){var t,r=!1,a=(0,f.py)(e);if(a.length>=2){var i=[],o=[],u=[];a.forEach((function(e){var t=e[1]>>>3&31;14===t?i.push(e):15===t?o.push(e):16===t&&u.push(e)})),o.length&&u.length&&(t=m(i,o,u),a=a.filter((function(e){var t=e[1]>>>3&31;return 14!==t&&15!==t&&16!==t&&20!==t})))}var h=a.reduce((function(e,t){return e+v+1+t.length}),0),l=(0,d.sY)(h),p=(0,c.s3)(l,h),g=new s.A(p);return n.__(a,(function(e){3===v?g.writeUint32(e.length):2===v?g.writeUint24(e.length):1===v?g.writeUint16(e.length):g.writeUint8(e.length),g.writeBuffer(e.subarray(0));var t=e[1]>>>3&31;8!==t&&7!==t&&9!==t&&10!==t||(r=!0)})),{bufferPointer:l,length:h,extradata:t,key:r}}function U(e,t){var r;if(1&a.f[15](e+36)){var i=(0,h.iI)(e);if(!(0,f.Bs)(i)){for(var n=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:v,s=[],u=[],l=[],p=new o.A(i);p.remainingSize()>0;){var g;g=3===n?p.readUint32():2===n?p.readUint24():1===n?p.readUint16():p.readUint8();var b=i.subarray(Number(BigInt.asIntN(32,p.getPos())),Number(BigInt.asIntN(32,p.getPos()))+g);p.skip(g);var A=b[1]>>>3&31;15===A?u.push(b):16===A?l.push(b):14===A&&s.push(b)}if(u.length||l.length||s.length){var U=m(s,u,l),x=(0,d.sY)(U.length);(0,c.lW)(x,U.length,U),(0,h.Ow)(e,1,x,U.length)}}}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&a.f[15](e+36)||t){var r=(0,h.iI)(e);if((0,f.Bs)(r)){var n=(0,f.py)(r);if(n.length>2){var s=[],o=[],u=[];if(n.forEach((function(e){var t=e[1]>>>3&31;14===t?s.push(e):15===t?o.push(e):16===t&&u.push(e)})),s.length&&o.length&&u.length){var l=m(s,o,u),p=(0,d.sY)(l.length);(0,c.lW)(p,l.length,l),(0,h.Ow)(e,1,p,l.length),i.M[15](e+36,1|a.f[15](e+36))}}}}}function y(e,t){var r=P(t),a=r.profile,i=r.level,n=r.width,s=r.height;e.codecpar.profile=a,e.codecpar.level=i,e.codecpar.width=n,e.codecpar.height=s}function k(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=t[0]>>>1&3;var r=function(e){var t=new o.A(e,!0);if(1&t.readUint8()){var r=new u.A;r.appendBuffer(e.subarray(1)),b(r),t.skip(r.getPointer())}for(var a=[],i=[],n=[],s=t.readUint8(),c=0;c<s;c++){var f=31&t.readUint8(),h=1;13!==f&&12!==f&&(h=t.readUint16());for(var d=[],l=0;l<h;l++){var p=t.readUint16();d.push(t.readBuffer(p))}14===f?a=d:15===f?i=d:16===f&&(n=d)}return{vpss:a,spss:i,ppss:n}}(t).spss;r.length&&y(e,r[0])}}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(2===a.f[15](e+80))return(0,f.py)((0,c.s3)(a.f[20](e+24),a.f[15](e+28))).some((function(e){var t=e[1]>>>3&31;return 8===t||7===t}));for(var r=a.f[15](e+28),i=0;i<r-t;){var n=g.r8(a.f[20](e+24)+(i+t+1))>>>3&31;if(8===n||7===n)return!0;i+=4===t?g.Sg(a.f[20](e+24)+i):3===t?g.ht(a.f[20](e+24)+i):2===t?g.yd(a.f[20](e+24)+i):g.r8(a.f[20](e+24)+i),i+=t}return!1}function P(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r,a,i,n,s=0,o=0,c=0,h=0,d=0,p=[],g=[],v=[],b=[],m=(0,f.BN)(e.subarray(t)),A=new u.A(m.length);A.appendBuffer(m),A.readU1(),A.readU1(),A.readU(6),A.readU(5),A.readU(3),A.readU(8);var U=A.readU(3);n=A.readU(2);var x=A.readU(2);if(A.readU(1)){if(s=A.readU(7),c=A.readU(1),o=A.readU(8),h=A.readU(1),d=A.readU(1),A.readU(1)){for(var y=0;y<8;y++)p[y]=A.readU(8);p[8]=A.readU(7);var k=A.readU(8);A.readU(k)}A.skipPadding();for(var w=U-1;w>=0;w--)g[w]=A.readU(1);A.skipPadding();for(var P=U-1;P>=0;P--)g[P]&&(v[P]=A.readU(8));var I=A.readU(8);if(I)for(var _=0;_<I;_++)b[_]=A.readU(32)}A.readU1(),A.readU1()&&A.readU1();var M=r=l.xb(A),S=a=l.xb(A);if(A.readU1()&&(l.xb(A),l.xb(A),l.xb(A),l.xb(A)),A.readU1()){var B,C=l.xb(A),L=x+5,R=1<<L,F=M/(1<<L),z=S/(1<<L),T=Math.ceil(Math.log2(F)),N=Math.ceil(Math.log2(z)),E=0,D=0;C>0&&(D=A.readU1(),E=A.readU1());for(var O=0;C>0&&O<=C;O++)E&&0!=O||(O>0&&M>R&&A.readU(T),O>0&&S>R&&A.readU(N),O<C&&M>R&&A.readU(T),O<C&&S>R&&A.readU(N)),D||A.readU(2);if(B=l.xb(A)+1,A.readU(1)&&A.readU(1))for(var V=0;V<=C;V++)A.readU(B)}i=l.xb(A),A.readU(1),A.readU(1);var Y=A.readU(4),W=A.readU(1),Q=0;W&&(Q=l.xb(A));for(var X=[],H=A.readU(2),Z=0;Z<8*H;Z++)X[Z]=A.readU(1);return{profile:s,level:o,width:r,height:a,chromaFormatIdc:n,bitDepthMinus8:i,generalProfileSpace:0,tierFlag:c,generalConstraintInfo:p,generalSubProfileIdc:b,ptlFrameOnlyConstraintFlag:h,ptlMultilayerEnabledFlag:d,spsMaxSublayersMinus1:U,ptlSublayerLevelPresentFlag:g,sublayerLevelIdc:v,sps_log2_max_pic_order_cnt_lsb_minus4:Y,sps_poc_msb_cycle_flag:W,sps_poc_msb_cycle_len_minus1:Q,sps_num_extra_ph_bytes:H,sps_extra_ph_bit_present_flag:X}}}function I(e){0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(e=function(e){var t=(0,f.py)(e);if(t.length>=2){var r=[],a=[],i=[];if(t.forEach((function(e){var t=e[1]>>>3&31;14===t?r.push(e):15===t?a.push(e):16===t&&i.push(e)})),a.length&&i.length)return m(r,a,i)}}(e));var t=new u.A;return t.appendBuffer(e),1&t.readU(8)?b(t):{}}},85947:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(78716),i=r(81570),n=r(134),s=function(){function e(){(0,a.A)(this,e),(0,n.A)(this,"type",-1),(0,n.A)(this,"onStreamAdd",void 0)}return(0,i.A)(e,[{key:"destroy",value:function(e){}}]),e}()},59331:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var a=r(88435),i=r.n(a),n=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(43070),f=r(60394),h=r(25767),d=r(31060),l=r(134),p=r(36443),g=r.n(p),v=r(63939),b=r(50932),m=r(4624),A=r(19770),U=r(53783),x=r(27274),y=r(39e3),k=r(9705),w=r(51660),P=r(39144),I=r(52088),_=r(6403),M=r(85947),S=r(86191),B=r(71517),C=r(77231),L=r(52071),R=r(44328),F=r(72739),z=r(89088),T=r(20620),N=r(53e3),E=r(55611),D=r(58469),O=r(65451),V=r(37837),Y=r(14686);function W(e,t,r){return t=(0,h.A)(t),(0,u.A)(e,Q()?i()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function Q(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(Q=function(){return!!e})()}var X="src/avformat/formats/IMpegtsFormat.ts",H=function(e){function t(){var e;return(0,s.A)(this,t),e=W(this,t),(0,l.A)((0,c.A)(e),"type",2),(0,l.A)((0,c.A)(e),"context",void 0),(0,l.A)((0,c.A)(e),"firstTSPacketPos",void 0),(0,l.A)((0,c.A)(e),"cacheAVPacket",void 0),e.context=(0,A.A)(),e}var r,a,i,u,p;return(0,d.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e){e.ioReader&&e.ioReader.setEndian(!0),this.cacheAVPacket=0}},{key:"destroy",value:function(e){(0,f.A)((0,h.A)(t.prototype),"destroy",this).call(this,e),this.cacheAVPacket&&((0,B.Qe)(this.cacheAVPacket),this.cacheAVPacket=0),F.__(e.streams,(function(e){var t=e.privData;t.filter&&(t.filter.destroy(),t.filter=null)}))}},{key:"readHeader",value:(p=(0,n.A)(g().mark((function e(t){var r,a,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=0,e.next=4,U.q(t.ioReader);case 4:(a=e.sent)||(a=x.ZT),this.context.tsPacketSize=a;case 7:if(this.context.hasPAT&&this.context.hasPMT){e.next=16;break}return e.next=10,U.n(t.ioReader,this.context);case 10:if((i=e.sent).payload){e.next=13;break}return e.abrupt("continue",7);case 13:0!==i.pid&&i.pid!==this.context.currentPmtPid&&134!==this.context.pmt.pid2StreamType.get(i.pid)||(0,y.A)(i,this.context),e.next=7;break;case 16:if(this.context.hasPAT&&this.context.hasPMT){e.next=20;break}return e.abrupt("return",k.LR);case 20:this.firstTSPacketPos=t.ioReader.getPos();case 21:return e.abrupt("return",r);case 24:return e.prev=24,e.t0=e.catch(0),m.z3(e.t0.message,X,138),e.abrupt("return",t.ioReader.error);case 28:case"end":return e.stop()}}),e,this,[[0,24]])}))),function(e){return p.apply(this,arguments)})},{key:"checkExtradata",value:function(e,t){if(!t.codecpar.extradata){var r=(0,B.rU)(e,1);if(!r)return;t.codecpar.extradata=(0,V.sY)(v.f[15](r+4)),(0,Y.Mr)(t.codecpar.extradata,v.f[20](r),v.f[15](r+4)),t.codecpar.extradataSize=v.f[15](r+4),(0,B.Is)(e,1),27===t.codecpar.codecId?T.XC(t,(0,Y.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):173===t.codecpar.codecId?N.XC(t,(0,Y.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):196===t.codecpar.codecId?E.XC(t,(0,Y.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):86018===t.codecpar.codecId?D.XC(t,(0,Y.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):86076===t.codecpar.codecId&&O.XC(t,(0,Y.JW)(t.codecpar.extradata,t.codecpar.extradataSize))}}},{key:"parsePESSlice",value:function(e,t,r,a){var i=(0,P.A)(r);(0,w.A)(i),(i.randomAccessIndicator||1===a.codecpar.codecType)&&b.M[15](t+36,1|v.f[15](t+36));var n=a.codecpar.codecId;27!==n&&173!==n&&196!==n||b.M[15](t+80,2),b.M[15](t+32,a.index),b.M[17](t+16,i.dts),b.M[17](t+8,i.pts),b.M[17](t+56,i.pos),b.M[15](t+76,9e4),b.M[15](t+72,1),a.startTime===C.Dh&&(a.startTime=v.f[17](t+8)||v.f[17](t+16));var s=(0,V.sY)(i.payload.length);(0,Y.lW)(s,i.payload.length,i.payload),(0,B.NX)(t,s,i.payload.length),(0,I.A)(r);var o=a.privData;if(o.filter){if(o.filter.sendAVPacket(t)<0)return m.z3("send avpacket to bsf failed",X,214),k.LR;if(o.filter.receiveAVPacket(t)<0)return m.z3("receive avpacket from bsf failed",X,221),k.LR;for(b.M[15](t+76,9e4),b.M[15](t+72,1),b.M[15](t+32,a.index),this.checkExtradata(t,a);;){var u=this.cacheAVPacket||(0,B._5)();if(0!==o.filter.receiveAVPacket(u)){this.cacheAVPacket=u;break}b.M[15](u+76,9e4),b.M[15](u+72,1),b.M[15](u+32,a.index),this.checkExtradata(u,a),e.interval.packetBuffer.push(u),this.cacheAVPacket=0}}else{var c=this.context.pmt.pid2StreamType.get(o.pid);if(3===c||4===c){b.M[15](t+36,1|v.f[15](t+36));var f=(0,B.iI)(t),h=f[1]>>>3&3,d=(6&f[1])>>1,l=(12&f[2])>>>2,p=3&~(f[3]>>>6)?2:1,g=z.Au(d),A=z.Y2(h,l);(a.codecpar.profile!==g||a.codecpar.sampleRate!==A||a.codecpar.chLayout.nbChannels!==p)&&(a.codecpar.profile=g,a.codecpar.sampleRate=A,a.codecpar.chLayout.nbChannels=p)}else 27===a.codecpar.codecId?a.codecpar.extradata||(T.ci(t,!0),this.checkExtradata(t,a),a.codecpar.bitFormat=2):173===a.codecpar.codecId?a.codecpar.extradata||(N.ci(t,!0),this.checkExtradata(t,a),a.codecpar.bitFormat=2):196===a.codecpar.codecId&&(a.codecpar.extradata||(E.ci(t,!0),this.checkExtradata(t,a),a.codecpar.bitFormat=2))}return 0}},{key:"readAVPacket_",value:(u=(0,n.A)(g().mark((function e(t,r){var a,i,n,s,o,u,c=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.context.ioEnd){e.next=24;break}if(this.context.tsSliceQueueMap.size){e.next=3;break}return e.abrupt("return",-1048576);case 3:a=this.context.tsSliceQueueMap.values();case 4:if(!(n=a.next()).value||!n.value.slices.length){e.next=9;break}return i=n.value,e.abrupt("break",13);case 9:if(!n.done){e.next=11;break}return e.abrupt("break",13);case 11:e.next=4;break;case 13:if(i){e.next=15;break}return e.abrupt("return",-1048576);case 15:if(!(s=t.streams.find((function(e){return e.privData.pid===i.pid})))){e.next=20;break}return e.abrupt("return",this.parsePESSlice(t,r,i,s));case 20:return(0,I.A)(i),e.abrupt("return",this.readAVPacket_(t,r));case 22:e.next=50;break;case 24:e.prev=24,o=g().mark((function e(){var a,i,n,s,o,u,f,h,d,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.n(t.ioReader,c.context);case 2:if((a=e.sent).payload){e.next=5;break}return e.abrupt("return",0);case 5:if(0!==a.pid&&a.pid!==c.context.currentPmtPid&&134!==c.context.pmt.pid2StreamType.get(a.pid)){e.next=8;break}return(0,y.A)(a,c.context),e.abrupt("return",0);case 8:if(i=c.context.pmt.pid2StreamType.get(a.pid)){e.next=11;break}return e.abrupt("return",0);case 11:if((n=t.streams.find((function(e){return e.privData.pid===a.pid})))||(n=t.createStream(),(0,S.A)(a.pid,n,c.context)),s=a.payload[4]<<8|a.payload[5],o=c.context.tsSliceQueueMap.get(a.pid),u=!1,!o){e.next=24;break}if(!(o.totalLength>0&&a.payloadUnitStartIndicator)){e.next=22;break}if(!((f=c.parsePESSlice(t,r,o,n))<0)){e.next=21;break}return e.abrupt("return",{v:f});case 21:u=!0;case 22:e.next=28;break;case 24:if(a.payloadUnitStartIndicator){e.next=26;break}return e.abrupt("return",0);case 26:o=new _.pi,c.context.tsSliceQueueMap.set(a.pid,o);case 28:if(a.payloadUnitStartIndicator&&(o.randomAccessIndicator=null!==(h=null===(d=a.adaptationFieldInfo)||void 0===d?void 0:d.randomAccessIndicator)&&void 0!==h?h:0,o.pos=a.pos,o.pid=a.pid,o.streamType=i,o.expectedLength=0===s?0:s+6),o.slices.push(a.payload),o.totalLength+=a.payload.length,!(o.expectedLength>0&&o.expectedLength===o.totalLength)){e.next=36;break}if(!((l=c.parsePESSlice(t,r,o,n))<0)){e.next=35;break}return e.abrupt("return",{v:l});case 35:u=!0;case 36:if(!u){e.next=38;break}return e.abrupt("return",{v:0});case 38:case"end":return e.stop()}}),e)}));case 26:return e.delegateYield(o(),"t0",28);case 28:if(0!==(u=e.t0)){e.next=31;break}return e.abrupt("continue",26);case 31:if(!u){e.next=33;break}return e.abrupt("return",u.v);case 33:e.next=26;break;case 35:e.next=50;break;case 37:if(e.prev=37,e.t1=e.catch(24),-1048576!==t.ioReader.error||this.context.ioEnd){e.next=44;break}return this.context.ioEnd=!0,e.abrupt("return",this.readAVPacket_(t,r));case 44:if(-1048576!==t.ioReader.error){e.next=48;break}return e.abrupt("return",-1048576);case 48:return m.z3("read packet error, ".concat(e.t1),X,433),e.abrupt("return",k.LR);case 50:case"end":return e.stop()}}),e,this,[[24,37]])}))),function(e,t){return u.apply(this,arguments)})},{key:"readAVPacket",value:(i=(0,n.A)(g().mark((function e(t,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.readAVPacket_(t,r));case 4:return e.prev=4,e.t0=e.catch(0),-1048576!==t.ioReader.error&&m.z3(e.t0.message,X,446),e.abrupt("return",t.ioReader.error);case 8:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(e,t){return i.apply(this,arguments)})},{key:"syncTSPacket",value:(a=(0,n.A)(g().mark((function e(t){var r,a,i,n,s=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=C.Dh,a=10;case 2:return e.prev=3,e.next=6,t.ioReader.readUint8();case 6:if(71!==e.sent){e.next=32;break}r=this.context.tsPacketSize===x.VG?t.ioReader.getPos()-BigInt(5):t.ioReader.getPos()-BigInt(1),i=0,n=t.ioReader.getPos();case 11:if(!(i<=a)){e.next=24;break}return e.next=14,t.ioReader.skip(this.context.tsPacketSize-1);case 14:return e.next=16,t.ioReader.readUint8();case 16:if(71!==e.sent){e.next=21;break}i++,e.next=22;break;case 21:return e.abrupt("break",24);case 22:e.next=11;break;case 24:if(!(i<a)){e.next=31;break}return r=C.Dh,e.next=28,t.ioReader.seek(n);case 28:return e.abrupt("continue",2);case 31:return e.abrupt("break",40);case 32:e.next=38;break;case 34:return e.prev=34,e.t0=e.catch(3),r=C.Dh,e.abrupt("break",40);case 38:e.next=2;break;case 40:if(r===C.Dh){e.next=55;break}return e.next=43,t.ioReader.seek(r);case 43:return e.next=46,U.n(t.ioReader,this.context);case 46:if(!e.sent.payloadUnitStartIndicator){e.next=52;break}return e.next=50,t.ioReader.seek(r);case 50:return t.streams.forEach((function(e){var t=s.context.tsSliceQueueMap.get(e.privData.pid);t&&(0,I.A)(t)})),e.abrupt("break",55);case 52:r=t.ioReader.getPos(),e.next=43;break;case 55:case"end":return e.stop()}}),e,this,[[3,34]])}))),function(e){return a.apply(this,arguments)})},{key:"seek",value:(r=(0,n.A)(g().mark((function e(t,r,a,i){var n,s,o,u,c,f=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ioReader.getPos(),this.context.tsSliceQueueMap.forEach((function(e){e.slices.length&&e.pos<n&&(n=e.pos),(0,I.A)(e)})),this.context.pmt.pid2StreamType.forEach((function(e,t){f.context.tsSliceQueueMap.delete(t)})),!(16&i)){e.next=9;break}return s=(0,R.k)(a,r.timeBase,C.i0),e.next=7,t.ioReader.seek(s,!0);case 7:return this.context.ioEnd=!1,e.abrupt("return",BigInt(0));case 9:if(!(2&i)){e.next=25;break}return e.next=12,t.ioReader.fileSize();case 12:if(!((o=e.sent)<=BigInt(0))){e.next=15;break}return e.abrupt("return",BigInt(k.E$));case 15:return a<BigInt(0)?a=BigInt(0):a>o&&(a=o),e.next=18,t.ioReader.seek(a);case 18:if(4&i){e.next=21;break}return e.next=21,this.syncTSPacket(t);case 21:case 31:return this.context.ioEnd=!1,e.abrupt("return",n);case 25:if(!r||!r.sampleIndexes.length){e.next=33;break}if(!((u=F.El(r.sampleIndexes,(function(e){return e.pts>a?-1:1})))>0&&(0,R.k)(a-r.sampleIndexes[u-1].pts,r.timeBase,C.i0)<BigInt(1e4))){e.next=33;break}return m.Yz("seek in sampleIndexes, found index: ".concat(u,", pts: ").concat(r.sampleIndexes[u-1].pts,", pos: ").concat(r.sampleIndexes[u-1].pos),X,582),e.next=31,t.ioReader.seek(r.sampleIndexes[u-1].pos);case 33:return m.Yz("not found any keyframe index, try to seek in bytes",X,589),e.next=36,(0,L.A)(t,r,a,this.firstTSPacketPos,this.readAVPacket.bind(this),this.syncTSPacket.bind(this));case 36:return(c=e.sent)>=0&&(this.context.ioEnd=!1),e.abrupt("return",c);case 39:case"end":return e.stop()}}),e,this)}))),function(e,t,a,i){return r.apply(this,arguments)})},{key:"getAnalyzeStreamsCount",value:function(){var e,t;return null!==(e=null===(t=this.context.pmt)||void 0===t?void 0:t.pid2StreamType.size)&&void 0!==e?e:0}}]),t}(M.A)},89564:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(27274);function i(e,t,r){for(var i=new Uint8Array(a.GV),n=0,s=0,o=0;o<e.length-3;o++)if(71===e[o]){var u=8191&(e[o+1]<<8|e[o+2]),c=48&e[o+3];if(!r||8191===u||c){var f=o%t;i[f]++,n++,i[f]>s&&(s=i[f])}}return s-Math.max(n-10*s,0)/10}},52088:(e,t,r)=>{"use strict";function a(e){e.slices=[],e.totalLength=0,e.expectedLength=-1}r.d(t,{A:()=>a})},19770:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(80662),i=r.n(a),n=r(77231),s=r(6403);function o(){return{currentProgram:n.N_,currentPmtPid:n.N_,tsPacketSize:n.N_,hasPAT:!1,hasPMT:!1,tsSliceQueueMap:new(i()),pat:new s.Cd,pmt:new s.I4,program2Pmt:new(i()),ioEnd:!1,startPid:256,delay:BigInt(0)}}},76538:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(77231);function i(){return{pid:a.N_,filter:null,tsPacket:null,pes:null,continuityCounter:0,pesSlices:{total:0,buffers:[]},latm:!1}}},39e3:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(6403),i=r(52088),n=r(63599);function s(e,t){var r=t.tsSliceQueueMap.get(e.pid);if(e.payloadUnitStartIndicator){var s=e.payload[0];if(r&&r.totalLength>0){var o=e.payload.slice(1,Math.min(1+s,e.payload.length));r.slices.push(o),r.totalLength+=o.length,r.totalLength===r.expectedLength?((0,n.A)(e.pid,r,t),(0,i.A)(r)):((0,i.A)(r),t.tsSliceQueueMap.delete(e.pid))}for(var u=1+s;u<e.payload.length;){var c,f;if(255===e.payload[u])break;var h=(15&e.payload[u+1])<<8|e.payload[u+2],d=new a.pi;d.pid=e.pid,d.expectedLength=h+3,d.randomAccessIndicator=null!==(c=null===(f=e.adaptationFieldInfo)||void 0===f?void 0:f.randomAccessIndicator)&&void 0!==c?c:0;var l=e.payload.slice(u,Math.min(u+d.expectedLength-d.totalLength,e.payload.length));d.slices.push(l),d.totalLength+=l.length,t.tsSliceQueueMap.set(e.pid,d),d.totalLength===d.expectedLength?((0,n.A)(e.pid,d,t),(0,i.A)(d)):((0,i.A)(d),t.tsSliceQueueMap.delete(e.pid)),u+=l.length}}else if(r&&0!==r.totalLength){var p=e.payload.slice(0,Math.min(r.expectedLength-r.totalLength,e.payload.length));r.slices.push(p),r.totalLength+=p.length,r.totalLength===r.expectedLength?((0,n.A)(e.pid,r,t),(0,i.A)(r)):((0,i.A)(r),t.tsSliceQueueMap.delete(e.pid))}}},86191:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(61499),i=r(76538),n=r(27274),s=r(50848),o=r(36488),u=r(61702),c=r(65451),f=r(37837),h=r(14686);function d(e,t,r){t.timeBase.den=9e4,t.timeBase.num=1;var d=(0,i.A)();d.pid=e,t.privData=d;var l,p=r.pmt.pid2StreamType.get(e);if(6===p){var g=r.pmt.pid2ESDescriptor.get(e);if(t.codecpar.codecType=2,g){var v,b=g.find((function(e){return 5===e.tag}));if(b&&(null===(v=b.buffer)||void 0===v?void 0:v.length)>=4)if("O"===String.fromCharCode(b.buffer[0])||"p"===String.fromCharCode(b.buffer[1])||"u"===String.fromCharCode(b.buffer[2])||"s"===String.fromCharCode(b.buffer[3])){t.codecpar.codecType=1,t.codecpar.codecId=86076,t.codecpar.sampleRate=48e3;var m=g.find((function(e){return 127===e.tag}));if(m&&128===m.buffer[0]){t.codecpar.chLayout.nbChannels=15&m.buffer[1]?15&m.buffer[1]:2;var A=c.Ij(t.codecpar);A&&(t.codecpar.extradata=(0,f.sY)(A.length),(0,h.lW)(t.codecpar.extradata,A.length,A),t.codecpar.extradataSize=A.length)}}else if("A"===String.fromCharCode(b.buffer[0])||"V"===String.fromCharCode(b.buffer[1])||"0"===String.fromCharCode(b.buffer[2])||"1"===String.fromCharCode(b.buffer[3])){t.codecpar.codecType=0,t.codecpar.codecId=225;var U=g.find((function(e){return 128===e.tag}));U&&(t.codecpar.extradata=(0,f.sY)(U.buffer.length),(0,h.lW)(t.codecpar.extradata,U.buffer.length,U.buffer),t.codecpar.extradataSize=U.buffer.length)}}}else{var x=n.$x[p];x?(t.codecpar.codecType=x[0],t.codecpar.codecId=x[1]):t.codecpar.codecType=2}switch(p){case 15:l=new s.A;break;case 17:l=new o.A;break;case 27:case 36:break;case 6:86076===t.codecpar.codecId&&(l=new u.A)}return l&&(t.privData.filter=l,l.init(t.codecpar[a.o9],t.timeBase[a.o9])),t}},52888:(e,t,r)=>{"use strict";function a(e,t,r){return e>t?r>t&&(t=r>e?e:r):t>r&&(t=r>e?r:e),t}r.d(t,{y:()=>a})},31239:(e,t,r)=>{"use strict";function a(e,t){var r=0,a=e[r++];if(t.adaptationFieldInfo.discontinuityIndicator=a>>7&1,t.adaptationFieldInfo.randomAccessIndicator=a>>6&1,t.adaptationFieldInfo.elementaryStreamPriorityIndicator=a>>5&1,t.adaptationFieldInfo.pcrFlag=a>>4&1,t.adaptationFieldInfo.opcrFlag=a>>3&1,t.adaptationFieldInfo.splicingPointFlag=a>>2&1,t.adaptationFieldInfo.transportPrivateDataFlag=a>>1&1,t.adaptationFieldInfo.adaptationFieldExtensionFlag=1&a,t.adaptationFieldInfo.pcrFlag){var i=BigInt(Math.floor(e[r++]<<25|e[r++]<<17|e[r++]<<9|e[r++]<<1|e[r]>>7)),n=BigInt(Math.floor((1&e[r++])<<8|e[r++]));t.adaptationFieldInfo.pcr=i*BigInt(300)+n}if(t.adaptationFieldInfo.opcrFlag){var s=BigInt(Math.floor(e[r++]<<25|e[r++]<<17|e[r++]<<9|e[r++]<<1|e[r]>>7)),o=BigInt(Math.floor((1&e[r++])<<8|e[r++]));t.adaptationFieldInfo.pcr=s*BigInt(300)+o}if(t.adaptationFieldInfo.splicingPointFlag&&(t.adaptationFieldInfo.spliceCountDown=e[r++]),t.adaptationFieldInfo.transportPrivateDataFlag){var u=e[r++];t.adaptationFieldInfo.transportPrivateData=e.subarray(r,r+u),r+=u}if(t.adaptationFieldInfo.adaptationFieldExtensionFlag){var c=e[r++];t.adaptationFieldInfo.extension=e.subarray(r,r+c),r+=c}}r.d(t,{A:()=>a})},20549:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(31865),i=r(6403),n=r(92647),s=r(4624),o="src/avformat/formats/mpegts/function/parsePAT.ts";function u(e,t){var r,u=new a.A((0,n.A)(Uint8Array,e.slices),!0),c=u.readUint8();0!==c&&s.z3("parsePAT: table_id ".concat(c," is not corresponded to PAT!"),o,40);var f,h=4095&u.readUint16(),d=(u.readUint16(),(r=u.readUint8())>>1&31),l=1&r,p=u.readUint8();if(u.readUint8(),1===l&&0===p)(f=new i.Cd).versionNumber=d;else if(!(f=t.pat))return void s.z3("can not found PAT in mpegts context",o,64);for(var g=h-5-4,v=Number(BigInt.asIntN(32,u.getPos()))+g,b=-1,m=-1;u.getPos()<v;){var A=u.readUint16(),U=8191&u.readUint16();0===A?f.networkPid=U:(f.program2PmtPid.set(A,U),-1===b&&(b=A),-1===m&&(m=U))}1===l&&0===p&&(t.pat||s.pq("parsed first PAT",o,100),t.pat=f,t.currentProgram=b,t.currentPmtPid=m,t.hasPAT=!0)}},51660:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(77231),i=r(4624),n=r(9705),s="src/avformat/formats/mpegts/function/parsePES.ts";function o(e){var t=e.data,r=t[3],o=t[4]<<8|t[5],u=0,c=0,f=0;if(188!==r&&190!==r&&191!==r&&240!==r&&241!==r&&255!==r&&242!==r&&248!==r){for(var h=a.Dh,d=a.Dh;;){if(6+c>=t.length)return;if(255!==(f=t[6+c]))break;c++}if(64==(192&f)&&(f=t[6+(c+=2)]),32==(224&f))u+=5,h=h=BigInt(Math.floor(536870912*(14&t[6+c])+4194304*(255&t[7+c])+16384*(254&t[8+c])+128*(255&t[9+c])+(254&t[10+c])/2)),16&f?(d=BigInt(Math.floor(536870912*(14&t[11+c])+4194304*(255&t[12+c])+16384*(254&t[13+c])+128*(255&t[14+c])+(254&t[15+c])/2)),u+=5):d=h;else if(128==(192&f)){var l=(192&t[7+c])>>>6;u=3+t[8+c],2!==l&&3!==l||(h=BigInt(Math.floor(536870912*(14&t[9+c])+4194304*(255&t[10+c])+16384*(254&t[11+c])+128*(255&t[12+c])+(254&t[13+c])/2)),d=3===l?BigInt(Math.floor(536870912*(14&t[14+c])+4194304*(255&t[15+c])+16384*(254&t[16+c])+128*(255&t[17+c])+(254&t[18+c])/2)):h)}else{if(15!==f)return i.z3("invalid data",s,121),n.LR;u=1}e.dts=d,e.pts=h;var p=6+c+u,g=0;if(0!==o){if(o<c+u)return void i.z3("Malformed PES: PES_packet_length < 3 + PES_header_data_length",s,133);g=o-(c+u)}else g=t.byteLength-p;e.payload=t.subarray(p,p+g)}else if((188===r||191===r||240===r||241===r||255===r||242===r||248===r)&&6===e.streamId){var v;v=0!==o?o:t.byteLength-6,e.payload=t.subarray(6,6+v)}return 0}},39144:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(6403);function i(e){for(var t=new Uint8Array(e.totalLength),r=0,i=0;r<e.slices.length;r++){var n=e.slices[r];t.set(n,i),i+=n.byteLength}var s=t[3],o=new a.xf;return o.data=t,o.pid=e.pid,o.streamId=s,o.streamType=e.streamType,o.pos=e.pos,o.randomAccessIndicator=e.randomAccessIndicator,o}},65945:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(31865),i=r(6403),n=r(92647),s=r(4624),o="src/avformat/formats/mpegts/function/parsePMT.ts";function u(e,t){var r,u=new a.A((0,n.A)(Uint8Array,e.slices),!0),c=u.readUint8();2!==c&&s.z3("parse PMT: table_id ".concat(c," is not corresponded to PAT!"),o,40);var f,h=4095&u.readUint16(),d=u.readUint16(),l=(r=u.readUint8())>>1&31,p=1&r,g=u.readUint8();if(u.readUint8(),1===p&&0===g)(f=new i.I4).programNumber=d,f.versionNumber=l,t.program2Pmt.set(d,f),t.hasPMT=!0;else if(!(f=t.program2Pmt.get(d)))return void s.z3("can not found PMT in mpegts context",o,68);f.pcrPid=8191&u.readUint16();var v=4095&u.readUint16();u.skip(v);for(var b=Number(BigInt.asIntN(32,u.getPos()))+(h-9-v-4);u.getPos()<b;){var m=u.readUint8(),A=8191&u.readUint16(),U=4095&u.readUint16();if(f.pid2StreamType.set(A,m),U>0){for(var x=[],y=Number(BigInt.asIntN(32,u.getPos()))+U;u.getPos()<y;){var k=new i.kJ;k.tag=u.readUint8();var w=u.readUint8();w>0&&(k.buffer=u.readBuffer(w)),x.push(k)}f.pid2ESDescriptor.set(A,x)}}d===t.currentProgram&&(t.pmt||s.pq("parsed first PMT",o,111),t.pmt=f)}},43383:(e,t,r)=>{"use strict";function a(e,t){}r.d(t,{A:()=>a})},63599:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(20549),i=r(65945),n=r(43383);function s(e,t,r){0===e?(0,a.A)(t,r):e===r.currentPmtPid?(0,i.A)(t,r):r.pmt&&134===r.pmt.pid2StreamType.get(e)&&(0,n.A)(t,r)}},53783:(e,t,r)=>{"use strict";r.d(t,{n:()=>g,q:()=>l});var a=r(25182),i=r(36443),n=r.n(i),s=r(27274),o=r(89564),u=r(52888),c=r(4624),f=r(6403),h=r(31239),d="src/avformat/formats/mpegts/impegts.ts";function l(e){return p.apply(this,arguments)}function p(){return(p=(0,a.A)(n().mark((function e(t){var r,a,i,f,h,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.peekBuffer(s.pm);case 3:r=e.sent,e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(0),-1048576===t.error){e.next=12;break}return e.next=11,t.peekBuffer(t.remainingLength());case 11:r=e.sent;case 12:if(!(r&&r.length>=s.ZT)){e.next=22;break}return a=(0,o.A)(r,s.ZT,!1),i=(0,o.A)(r,s.VG,!1),f=(0,o.A)(r,s.eR,!1),h=(0,u.y)(a,f,i),r.length<s.pm&&(h+=s.hY),l=s.ZT,a>h?l=s.ZT:i>h?l=s.VG:f>h&&(l=s.eR),c.Yz("got ts packet size: ".concat(l),d,72),e.abrupt("return",l);case 22:return e.abrupt("return",0);case 23:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function g(e,t){return v.apply(this,arguments)}function v(){return(v=(0,a.A)(n().mark((function e(t,r){var a,i,o,u,l,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getPos(),i=0,r.tsPacketSize!==s.VG){e.next=5;break}return e.next=5,t.skip(4);case 5:return e.next=7,t.readUint8();case 7:return 71!==(o=e.sent)&&c.h2("found syncByte not 0x47, value: ".concat(o.toString(16)),d,94),(u=new f.am).pos=a,e.next=13,t.readUint16();case 13:return i=e.sent,u.payloadUnitStartIndicator=i>>14&1,u.transportPriority=i>>13&1,u.pid=8191&i,e.next=19,t.readUint8();case 19:if(i=e.sent,u.adaptationFieldControl=i>>4&3,u.continuityCounter=15&i,l=4,2!==u.adaptationFieldControl&&3!==u.adaptationFieldControl){e.next=48;break}return e.next=26,t.readUint8();case 26:if(5+(p=e.sent)!==s.ZT){e.next=40;break}return e.t0=h.A,e.next=31,t.readBuffer(p);case 31:if(e.t1=e.sent,e.t2=u,(0,e.t0)(e.t1,e.t2),r.tsPacketSize!==s.eR){e.next=37;break}return e.next=37,t.skip(16);case 37:return e.abrupt("return",u);case 40:if(!(p>0)){e.next=47;break}return e.t3=h.A,e.next=44,t.readBuffer(p);case 44:e.t4=e.sent,e.t5=u,(0,e.t3)(e.t4,e.t5);case 47:l=5+p;case 48:if(1!==u.adaptationFieldControl&&3!==u.adaptationFieldControl){e.next=52;break}return e.next=51,t.readBuffer(s.ZT-l);case 51:u.payload=e.sent;case 52:if(r.tsPacketSize!==s.eR){e.next=55;break}return e.next=55,t.skip(16);case 55:return e.abrupt("return",u);case 56:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},27274:(e,t,r)=>{"use strict";r.d(t,{$x:()=>f,GV:()=>o,VG:()=>n,ZT:()=>s,eR:()=>i,hY:()=>c,pm:()=>u});var a=r(134),i=204,n=192,s=188,o=204,u=8192,c=5,f=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},15,[1,86018]),17,[1,86018]),3,[1,86017]),4,[1,86017]),27,[0,27]),16,[0,12]),36,[0,173]),51,[0,196]),129,[1,86019]),135,[1,86056])},6403:(e,t,r)=>{"use strict";r.d(t,{Cd:()=>d,I4:()=>p,am:()=>f,kJ:()=>l,pi:()=>h,xf:()=>g}),r(77193),r(25767),r(31060);var a=r(81570),i=r(78716),n=r(134),s=r(80662),o=r.n(s),u=(r(88435),r(77231)),c=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"discontinuityIndicator",0),(0,n.A)(this,"randomAccessIndicator",0),(0,n.A)(this,"elementaryStreamPriorityIndicator",0),(0,n.A)(this,"pcrFlag",0),(0,n.A)(this,"opcrFlag",0),(0,n.A)(this,"splicingPointFlag",0),(0,n.A)(this,"transportPrivateDataFlag",0),(0,n.A)(this,"adaptationFieldExtensionFlag",0),(0,n.A)(this,"pcr",BigInt(0)),(0,n.A)(this,"opcr",BigInt(0)),(0,n.A)(this,"spliceCountDown",0),(0,n.A)(this,"transportPrivateData",null),(0,n.A)(this,"extension",null)})),f=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"pos",u.Dh),(0,n.A)(this,"payloadUnitStartIndicator",0),(0,n.A)(this,"transportPriority",0),(0,n.A)(this,"pid",u.N_),(0,n.A)(this,"adaptationFieldControl",0),(0,n.A)(this,"continuityCounter",0),(0,n.A)(this,"transportScramblingControl",0),(0,n.A)(this,"adaptationFieldInfo",new c),(0,n.A)(this,"payload",null)})),h=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"slices",[]),(0,n.A)(this,"totalLength",0),(0,n.A)(this,"expectedLength",u.N_),(0,n.A)(this,"randomAccessIndicator",0),(0,n.A)(this,"pid",u.N_),(0,n.A)(this,"streamType",0),(0,n.A)(this,"pos",u.Dh)})),d=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"versionNumber",0),(0,n.A)(this,"networkPid",u.N_),(0,n.A)(this,"program2PmtPid",new(o()))})),l=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"tag",void 0),(0,n.A)(this,"buffer",void 0)})),p=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"versionNumber",0),(0,n.A)(this,"programNumber",0),(0,n.A)(this,"pcrPid",0),(0,n.A)(this,"pid2StreamType",new(o())),(0,n.A)(this,"pid2ESDescriptor",new(o()))})),g=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"pid",u.N_),(0,n.A)(this,"streamType",0),(0,n.A)(this,"streamId",u.N_),(0,n.A)(this,"dts",u.Dh),(0,n.A)(this,"pts",u.Dh),(0,n.A)(this,"pos",u.Dh),(0,n.A)(this,"payload",null),(0,n.A)(this,"data",null),(0,n.A)(this,"randomAccessIndicator",0)}))},2187:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var a=r(72739),i=r(44328),n=r(77231);function s(e,t,r){var s=BigInt(0);return a.__(e,(function(e){s+=e.codecpar.bitrate*(0,i.k)(t,r,n.i0)/BigInt(8e3)})),s}},52071:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var a=r(25182),i=r(36443),n=r.n(i),s=r(63939),o=r(9599),u=r(29170),c=r(77231),f=r(44328),h=r(2187),d=r(71517),l=r(9705),p=r(4624),g="src/avformat/function/seekInBytes.ts";function v(e,t,r,a,i,n){return b.apply(this,arguments)}function b(){return(b=(0,a.A)(n().mark((function e(t,r,a,i,v,b){var m,A,U,x,y,k,w,P,I,_,M,S,B,C;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=t.ioReader.getPos(),e.next=3,t.ioReader.fileSize();case 3:if(A=e.sent,U=c.Dh,x=a,r.startTime!==c.Dh?x-=r.startTime:x-=r.firstDTS,!((y=(0,f.k)(a,r.timeBase,c.i0))<BigInt(1e4))){e.next=13;break}return p.Yz("seek pts is earlier then 10s, seek to first packet pos(".concat(i,") directly"),g,63),e.next=12,t.ioReader.seek(i);case 12:return e.abrupt("return",m);case 13:if(k=(0,h.d)(t.streams,x,r.timeBase),w=A-(0,h.d)(t.streams,BigInt(5e3),c.i0),P=(0,h.d)(t.streams,BigInt(1e4),c.i0),k>w&&(k=w),!(k<i)){e.next=21;break}return e.next=20,t.ioReader.seek(i);case 20:return e.abrupt("return",m);case 21:I=(0,d._5)(),_=A,M=BigInt(0);case 24:if(!(_-M<P)){e.next=28;break}return U=M,e.abrupt("break",51);case 28:return e.next=30,t.ioReader.seek(k);case 30:return e.next=32,b(t);case 32:return S=t.ioReader.getPos(),e.next=35,v(t,I);case 35:if(!(e.sent>=0)){e.next=48;break}if(B=(0,f.k)(s.f[17](I+8),(0,u.A)(I+72,o.P),c.i0),C=B-y,p.Yz("try to seek to pos: ".concat(k,", got packet pts: ").concat(s.f[17](I+8),"(").concat(B,"ms), diff: ").concat(C,"ms"),g,98),!(C<=BigInt(0)&&-C<BigInt(1e4))){e.next=45;break}return U=S,e.abrupt("break",51);case 45:k=C>BigInt(0)?M+(_=k)>>BigInt(1):(M=k)+_>>BigInt(1);case 46:e.next=49;break;case 48:return e.abrupt("break",51);case 49:e.next=24;break;case 51:if((0,d.Qe)(I),U===c.Dh){e.next=61;break}return p.Yz("finally seek to pos ".concat(U),g,124),e.next=56,t.ioReader.seek(U);case 56:return e.next=58,b(t);case 58:return e.abrupt("return",m);case 61:return e.next=63,t.ioReader.seek(m);case 63:return e.abrupt("return",BigInt(l.E$));case 64:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},23991:(e,t,r)=>{"use strict";function a(e){for(var t=0;t<32&&0===e.readU1();)t++;return e.readU(t)+((1<<t)-1)}function i(e){var t=a(e);return 1&t?(t+1)/2:-t/2}r.d(t,{$x:()=>i,xb:()=>a})},39381:(e,t,r)=>{"use strict";r.d(t,{E3:()=>n,Sg:()=>c,Y0:()=>u,ht:()=>o,r8:()=>i,yd:()=>s});var a=r(63939);function i(e){return a.f[2](e)}function n(e){return i(e+1)<<8|i(e)}function s(e){return i(e)<<8|i(e+1)}function o(e){return i(e)<<16|i(e+1)<<8|i(e+2)}function u(e){return n(e+2)<<16|n(e)}function c(e){return s(e)<<16|s(e+2)}},60264:(e,t,r)=>{"use strict";function a(e){return e.length>4&&0===e[0]&&0===e[1]&&(1===e[2]||0===e[2]&&1===e[3])}function i(e,t){for(var r=0,a=t;a<e.length;a++)switch(e[a]){case 0:r++;break;case 1:if(r>=2)return{offset:a-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function n(e){for(var t=[],r=i(e,0),a={offset:-1,startCode:0};(a=i(e,r.offset+r.startCode)).offset>-1;)t.push(e.subarray(r.offset+r.startCode,a.offset,!0)),r=a;return t.push(e.subarray(r.offset+r.startCode,void 0,!0)),t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;r||(r=e.length);for(var a=new Uint8Array(e.length),i=0,n=0,s=0;s<e.length;s++){if(s>=t&&s<r)if(0===e[s])i++;else if(3===e[s]&&2===i&&s+1<e.length&&e[s+1]<=3){if(++s===e.length)break;i=0===e[s]?1:0}else i=0;a[n++]=e[s]}return a.slice(0,n)}r.d(t,{BN:()=>s,Bs:()=>a,Ky:()=>i,py:()=>n})},37246:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(78716),i=r(81570),n=r(134),s=r(4624),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,a.A)(this,e),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"pointer",void 0),(0,n.A)(this,"bitsLeft",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"endPointer",void 0),(0,n.A)(this,"pos",void 0),(0,n.A)(this,"error",void 0),(0,n.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.pos=BigInt(0),this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,i.A)(e,[{key:"peekU1",value:function(){(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();var e=this.pointer,t=this.bitsLeft;return 0===t&&(e++,t=8),this.buffer[e]>>t-1&1}},{key:"readU1",value:function(){var e;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8,this.pos++),e}},{key:"readU",value:function(e){for(var t=0,r=0;r<e;r++)t|=this.readU1()<<e-r-1;return t}},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"getBitLeft",value:function(){return this.bitsLeft}},{key:"getPointer",value:function(){return this.pointer}},{key:"setPointer",value:function(e){this.pointer=e}},{key:"getPos",value:function(){return this.pos}},{key:"skip",value:function(e){var t=(e-e%8)/8;this.pointer+=t,this.pos+=BigInt(t);var r=e%8;this.bitsLeft<=r?(this.pointer++,this.pos++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&(this.pointer++,this.pos++),!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);var e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{var t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{var t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,s.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",241)}}},{key:"reset",value:function(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0,this.pos=BigInt(0)}},{key:"skipPadding",value:function(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++,this.pos++)}}]),e}()},83314:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(78716),i=r(81570),n=r(134),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,a.A)(this,e),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"pointer",void 0),(0,n.A)(this,"pos",void 0),(0,n.A)(this,"bitPointer",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"error",void 0),(0,n.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=t,this.error=0,this.pos=BigInt(0),this.buffer=new Uint8Array(this.size)}return(0,i.A)(e,[{key:"writeU1",value:function(e){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&e?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.pos++,this.bitPointer=0)}},{key:"writeU",value:function(e,t){for(var r=0;r<e;r++)this.writeU1(t>>e-r-1&1)}},{key:"remainingLength",value:function(){return this.size-this.pointer}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>1){var e=this.onFlush(this.buffer.subarray(0,this.pointer-1));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){var t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("BSWriter error, flush failed")}this.pointer=0}},{key:"padding",value:function(){for(;0!==this.bitPointer;)this.writeU1(0)}},{key:"reset",value:function(){this.pointer=0,this.bitPointer=0,this.error=0,this.pos=BigInt(0)}},{key:"getBuffer",value:function(){return this.buffer}},{key:"getPointer",value:function(){return this.pointer}},{key:"getPos",value:function(){return this.pos}}]),e}()},729:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(78716),i=r(81570),n=r(134),s=r(4624),o=r(50011),u=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,a.A)(this,e),(0,n.A)(this,"data",void 0),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"byteStart",void 0),(0,n.A)(this,"pos",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!r}return(0,i.A)(e,[{key:"writeUint8",value:function(e){this.data.setUint8(this.pos+++this.byteStart,e)}},{key:"writeUint16",value:function(e){this.data.setUint16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeUint24",value:function(e){var t=3840&e,r=240&e,a=15&e;this.littleEndian?(this.writeUint8(a),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(a))}},{key:"writeUint32",value:function(e){this.data.setUint32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeUint64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeUint32(Number(t)),this.writeUint32(Number(r))):(this.writeUint32(Number(r)),this.writeUint32(Number(t)))}},{key:"writeInt8",value:function(e){this.data.setInt8(this.pos+++this.byteStart,e)}},{key:"writeInt16",value:function(e){this.data.setInt16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeInt32",value:function(e){this.data.setInt32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeInt64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeInt32(Number(t)),this.writeInt32(Number(r))):(this.writeInt32(Number(r)),this.writeInt32(Number(t)))}},{key:"writeFloat",value:function(e){this.data.setFloat32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeDouble",value:function(e){this.data.setFloat64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}},{key:"getPos",value:function(){return this.pos}},{key:"seek",value:function(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}},{key:"skip",value:function(e){this.seek(this.pos+e)}},{key:"back",value:function(e){this.seek(this.pos-e)}},{key:"remainingSize",value:function(){return this.size-this.pos}},{key:"writeBuffer",value:function(e){var t=e.length;this.remainingSize()<t&&(t=this.remainingSize(),s.R8("the remaining buffer size is smaller then the wrote buffer, hope set ".concat(e.length,", but set ").concat(t),"src/common/io/BufferWriter.ts",211)),this.buffer.set(e,this.pos),this.pos+=e.length}},{key:"writeString",value:function(e){var t=o.encode(e);return this.writeBuffer(t),t.length}},{key:"getWroteBuffer",value:function(){return this.buffer.subarray(0,this.pos)}},{key:"resetBuffer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}]),e}()},80345:(e,t,r)=>{r(28351),e.exports=r(46438).Reflect.get},28351:(e,t,r)=>{var a=r(81033),i=r(66123),n=r(75509),s=r(88535),o=r(24401),u=r(80812);s(s.S,"Reflect",{get:function e(t,r){var s,c,f=arguments.length<3?t:arguments[2];return u(t)===f?t[r]:(s=a.f(t,r))?n(s,"value")?s.value:void 0!==s.get?s.get.call(f):void 0:o(c=i(t))?e(c,r,f):void 0}})},803:(e,t,r)=>{var a=r(16560),i=r(54220);function n(t){return e.exports=n="function"==typeof a&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof a&&e.constructor===a&&e!==a.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},60394:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(80345),i=r(3706),n=r(41473);function s(){return s="undefined"!=typeof Reflect&&a?a.bind():function(e,t,r){var a=(0,n.A)(e,t);if(a){var s=i(a,t);return s.get?s.get.call(arguments.length<3?e:r):s.value}},s.apply(this,arguments)}},41473:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(25767);function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,a.A)(e)););return e}}}]);