(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[905],{64436:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var i=r(78716),a=r(81570),n=r(134),s=r(63939),o=r(37837),c=r(71766),u=function(){function e(){(0,i.A)(this,e),(0,n.A)(this,"inCodecpar",void 0),(0,n.A)(this,"inTimeBase",void 0),(0,n.A)(this,"outCodecpar",void 0)}return(0,a.A)(e,[{key:"init",value:function(e,t){return this.inCodecpar=(0,o.Gy)(168),(0,c.Yi)(this.inCodecpar,e),this.inTimeBase={den:s.f[15](t+4),num:s.f[15](t)},0}},{key:"destroy",value:function(){this.inCodecpar&&((0,c.dn)(this.inCodecpar),this.inCodecpar=0)}}]),e}()},50848:(e,t,r)=>{"use strict";r.d(t,{A:()=>I});var i=r(88435),a=r.n(i),n=r(78716),s=r(81570),o=r(77193),c=r(43070),u=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(63939),p=r(50932),g=r(77162),v=r(29170),b=r(64436),A=r(14686),m=r(4624),U=r(9705),x=r(77231),y=r(58469),k=r(44328),w=r(37837),P=r(71517);function _(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,M()?a()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function M(){try{var e=!Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}var I=function(e){function t(){var e;(0,n.A)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=_(this,t,[].concat(i)),(0,d.A)((0,c.A)(e),"streamMuxConfig",void 0),(0,d.A)((0,c.A)(e),"caches",void 0),e}return(0,h.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,u.A)((0,f.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],this.streamMuxConfig={profile:x.N_,sampleRate:x.N_,channels:x.N_},0}},{key:"sendAVPacket",value:function(e){for(var t=0,r=l.f[17](e+16)||l.f[17](e+8),i=(0,A.s3)(l.f[20](e+24),l.f[15](e+28)).slice();t<i.length;){var a=i[t]<<4|i[t+1]>>4;if(4095!==a)return m.z3("found syncWord not 0xFFF, got: 0x".concat(a.toString(16)),"src/avformat/bsf/aac/ADTS2RawFilter.ts",103),U.LR;var n=1&i[t+1],s=(192&i[t+2])>>>6,o=(60&i[t+2])>>>2,c=(1&i[t+2])<<2|(192&i[t+3])>>>6,u=(3&i[t+3])<<11|i[t+4]<<3|(224&i[t+5])>>>5,f=3&i[t+6],h=1===n?7:9,d=u-h,b={dts:r,buffer:null,extradata:null,duration:x.N_};b.buffer=i.subarray(t+h,t+h+d),this.streamMuxConfig.profile=s+1,this.streamMuxConfig.sampleRate=y.hY[o],this.streamMuxConfig.channels=y.En[c];var P=l.f[15](this.inCodecpar+48)!==this.streamMuxConfig.profile||l.f[15](this.inCodecpar+136)!==this.streamMuxConfig.sampleRate||l.f[15](this.inCodecpar+116)!==this.streamMuxConfig.channels,_=(0,k.k)(BigInt(Math.floor(1024*(f+1)/this.streamMuxConfig.sampleRate*x.SF)),x.KR,this.inTimeBase);if(b.duration=Number(_),P){p.M[15](this.inCodecpar+48,this.streamMuxConfig.profile),p.M[15](this.inCodecpar+136,this.streamMuxConfig.sampleRate),p.M[15](this.inCodecpar+116,this.streamMuxConfig.channels);var M=(0,y.Ij)((0,v.A)(this.inCodecpar,g.A));l.f[20](this.inCodecpar+12)&&(0,w.Eb)(l.f[20](this.inCodecpar+12)),p.M[20](this.inCodecpar+12,(0,w.sY)(M.length)),(0,A.lW)(l.f[20](this.inCodecpar+12),M.length,M),p.M[15](this.inCodecpar+16,M.length),b.extradata=M}this.caches.push(b),t+=u,r+=_}}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,P.Up)(e);var t=this.caches.shift(),r=(0,w.sY)(t.buffer.length);if((0,A.lW)(r,t.buffer.length,t.buffer),(0,P.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[17](e+48,BigInt(Math.floor(t.duration))),p.M[15](e+36,1|l.f[15](e+36)),t.extradata){var i=(0,w.sY)(t.extradata.length);(0,A.lW)(i,t.extradata.length,t.extradata),(0,P.Ow)(e,1,i,t.extradata.length)}return 0}return U.LT}}]),t}(b.A)},36488:(e,t,r)=>{"use strict";r.d(t,{A:()=>R});var i=r(88435),a=r.n(i),n=r(78716),s=r(81570),o=r(77193),c=r(43070),u=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(63939),p=r(50932),g=r(77162),v=r(29170),b=r(64436),A=r(14686),m=r(4624),U=r(9705),x=r(77231),y=r(58469),k=r(44328),w=r(37837),P=r(71517),_=r(37246);function M(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,I()?a()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function I(){try{var e=!Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}var S="src/avformat/bsf/aac/LATM2RawFilter.ts",R=function(e){function t(){var e;(0,n.A)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=M(this,t,[].concat(i)),(0,d.A)((0,c.A)(e),"bitReader",void 0),(0,d.A)((0,c.A)(e),"streamMuxConfig",void 0),(0,d.A)((0,c.A)(e),"caches",void 0),(0,d.A)((0,c.A)(e),"refSampleDuration",void 0),e}return(0,h.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,u.A)((0,f.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],this.refSampleDuration=BigInt(0),this.bitReader=new _.A,this.streamMuxConfig={profile:x.N_,sampleRate:x.N_,channels:x.N_},0}},{key:"getLATMValue",value:function(){for(var e=this.bitReader.readU(2),t=0,r=0;r<=e;r++)t<<=8,t|=this.bitReader.readU(8);return t}},{key:"sendAVPacket",value:function(e){var t=(0,A.s3)(l.f[20](e+24),l.f[15](e+28));this.bitReader.clear(),this.bitReader.appendBuffer(t);for(var r=l.f[17](e+16)||l.f[17](e+8);this.bitReader.remainingLength()>3;){var i=this.bitReader.readU(11);if(695!==i)return m.z3("AACLATMParser found syncWord not 0x2B7, got: 0x".concat(i.toString(16)),S,103),this.bitReader.clear(),U.LR;if(this.bitReader.readU(13)>this.bitReader.remainingLength())break;if(1!==this.bitReader.readU1()){var a=1===this.bitReader.readU1();if(a&&1===this.bitReader.readU1())return m.z3("audioMuxVersionA is Not Supported",S,119),this.bitReader.clear(),U.LR;if(a&&this.getLATMValue(),1!==this.bitReader.readU1())return m.z3("allStreamsSameTimeFraming zero is Not Supported",S,128),this.bitReader.clear(),U.LR;if(0!==this.bitReader.readU(6))return m.z3("more than 2 numSubFrames Not Supported",S,134),this.bitReader.clear(),U.LR;if(0!==this.bitReader.readU(4))return m.z3("more than 2 numProgram Not Supported",S,141),this.bitReader.clear(),U.LR;if(0!==this.bitReader.readU(3))return m.z3("more than 2 numLayer Not Supported'",S,148),this.bitReader.clear(),U.LR;var n=a?this.getLATMValue():0,s=this.bitReader.readU(5);n-=5;var o=this.bitReader.readU(4);n-=4;var c=this.bitReader.readU(4);n-=4,this.bitReader.readU(3),(n-=3)>0&&this.bitReader.readU(n);var u=this.bitReader.readU(3);if(0!==u)return m.z3("frameLengthType = ".concat(u,", only frameLengthType = 0 supported"),S,176),this.bitReader.clear(),U.LR;if(this.bitReader.readU(8),1===this.bitReader.readU1())if(a)this.getLATMValue();else for(;;){var f=1===this.bitReader.readU1();if(this.bitReader.readU(8),!f)break}1===this.bitReader.readU1()&&this.bitReader.readU(8),this.streamMuxConfig.profile=s+1,this.streamMuxConfig.sampleRate=y.hY[o],this.streamMuxConfig.channels=y.En[c]}for(var h=0;;){var d=this.bitReader.readU(8);if(h+=d,255!==d)break}for(var b=new Uint8Array(h),P=0;P<h;P++)b[P]=this.bitReader.readU(8);var _={dts:r,buffer:b,extradata:null};if(l.f[15](this.inCodecpar+48)!==this.streamMuxConfig.profile||l.f[15](this.inCodecpar+136)!==this.streamMuxConfig.sampleRate||l.f[15](this.inCodecpar+116)!==this.streamMuxConfig.channels){this.refSampleDuration=(0,k.k)(BigInt(Math.floor(1024/this.streamMuxConfig.sampleRate*x.SF)),x.KR,this.inTimeBase),p.M[15](this.inCodecpar+48,this.streamMuxConfig.profile),p.M[15](this.inCodecpar+136,this.streamMuxConfig.sampleRate),p.M[15](this.inCodecpar+116,this.streamMuxConfig.channels);var M=(0,y.Ij)((0,v.A)(this.inCodecpar,g.A));l.f[20](this.inCodecpar+12)&&(0,w.Eb)(l.f[20](this.inCodecpar+12)),p.M[20](this.inCodecpar+12,(0,w.sY)(M.length)),(0,A.lW)(l.f[20](this.inCodecpar+12),M.length,M),p.M[15](this.inCodecpar+16,M.length),_.extradata=M}this.caches.push(_),r+=this.refSampleDuration,this.bitReader.skipPadding()}}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,P.Up)(e);var t=this.caches.shift(),r=(0,w.sY)(t.buffer.length);if((0,A.lW)(r,t.buffer.length,t.buffer),(0,P.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[15](e+36,1|l.f[15](e+36)),t.extradata){var i=(0,w.sY)(t.extradata.length);(0,A.lW)(i,t.extradata.length,t.extradata),(0,P.Ow)(e,1,i,t.extradata.length)}return 0}return U.LT}}]),t}(b.A)},61702:(e,t,r)=>{"use strict";r.d(t,{A:()=>_});var i=r(88435),a=r.n(i),n=r(78716),s=r(81570),o=r(77193),c=r(43070),u=r(60394),f=r(25767),h=r(31060),d=r(134),l=r(63939),p=r(50932),g=r(64436),v=r(77231),b=r(44328),A=r(65451),m=r(4624),U=r(9705),x=r(71517),y=r(37837),k=r(14686);function w(e,t,r){return t=(0,f.A)(t),(0,o.A)(e,P()?a()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}var _=function(e){function t(){var e;(0,n.A)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=w(this,t,[].concat(i)),(0,d.A)((0,c.A)(e),"caches",void 0),e}return(0,h.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,u.A)((0,f.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],0}},{key:"sendAVPacket",value:function(e){for(var t=0,r=l.f[17](e+16)||l.f[17](e+8),i=(0,x.iI)(e);t<i.length;){var a=i[t]<<3|i[t+1]>>5;if(1023!==a)return m.z3("MpegtsOpusParser found syncWord not 0x3ff, got: 0x".concat(a.toString(16)),"src/avformat/bsf/opus/Mpegts2RawFilter.ts",67),U.LR;for(var n=!!(16&i[t+1]),s=!!(8&i[t+1]),o=t+2,c=0;255===i[o];)c+=255,o++;c+=i[o],o++,o+=n?2:0,o+=s?2:0;var u=i.subarray(o,o+c),f=l.f[15](this.inCodecpar+136)>0?l.f[15](this.inCodecpar+136):48e3,h=(0,b.k)(BigInt(Math.floor(A.kt(u)/f*v.SF)),v.KR,this.inTimeBase);this.caches.push({dts:r,buffer:u.slice(),duration:Number(h)}),r+=h,t=o+c}}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,x.Up)(e);var t=this.caches.shift(),r=(0,y.sY)(t.buffer.length);return(0,k.lW)(r,t.buffer.length,t.buffer),(0,x.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[15](e+36,1|l.f[15](e+36)),p.M[17](e+48,BigInt(Math.floor(t.duration))),0}return U.LR}}]),t}(g.A)},58469:(e,t,r)=>{"use strict";r.d(t,{En:()=>c,Ij:()=>f,XC:()=>u,hY:()=>o,uF:()=>n});var i=r(134),a=r(77231),n=(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({},1,"Main"),2,"LC"),3,"LC"),4,"LC"),5,"HE"),6,"HE"),s={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,a.N_,a.N_,a.N_],c=[a.N_,1,2,3,4,5,6,7];function u(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){var r=function(e){var t,r,i=a.N_,n=a.N_,s=a.N_;return e.length>=2&&(i=e[0]>>3&31,n=null!==(t=o[(7&e[0])<<1|e[1]>>7])&&void 0!==t?t:48e3,s=null!==(r=c[e[1]>>3&15])&&void 0!==r?r:2),{profile:i,sampleRate:n,channels:s}}(t),i=r.profile,n=r.sampleRate,s=r.channels;e.codecpar.profile=i,e.codecpar.sampleRate=n,e.codecpar.chLayout.nbChannels=s}}function f(e){var t=s[e.sampleRate],r=e.chLayout.nbChannels,i=new Uint8Array(2);return i[0]=(31&e.profile)<<3|(14&t)>>1,i[1]=(1&t)<<7|(15&r)<<3,i}},20620:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>w,KD:()=>M,MB:()=>U,S1:()=>y,XC:()=>_,ci:()=>P,oT:()=>k,tZ:()=>m,wf:()=>I}),r(42096),r(75062),r(16091),r(68632);var i=r(134),a=r(63939),n=r(50932),s=r(72739),o=r(729),c=r(31865),u=r(37246),f=r(4624),h=r(14686),d=r(71517),l=r(60264),p=r(37837),g=r(23991),v=r(39381),b="src/avformat/codecs/h264.ts",A=3,m=(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({},66,"Constrained Baseline"),77,"Main"),100,"High"),110,"High10"),122,"High422"),244,"High444");function U(e){var t=new c.A(e);t.skip(5);for(var r=[],i=[],a=[],n=31&t.readUint8(),s=0;s<n;s++){var o=t.readUint16();r.push(t.readBuffer(o))}for(var u=t.readUint8(),f=0;f<u;f++){var h=t.readUint16();i.push(t.readBuffer(h))}if(t.remainingSize()>4){t.skip(3);var d=t.readUint8();if(d>0)for(var l=0;l<d;l++){var p=t.readUint16();a.push(t.readBuffer(p))}}return{spss:r,ppss:i,spsExts:a}}function x(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length>32&&(f.R8("h264 metadata's sps max length is 32, but get ".concat(e.length),b,210),e=e.slice(0,32)),e.length>256&&(f.R8("h264 metadata's pps max length is 256, but get ".concat(e.length),b,214),e=e.slice(0,256));var i=7;i=e.reduce((function(e,t){return e+2+t.length}),i),i=t.reduce((function(e,t){return e+2+t.length}),i);var a=e[0],n=I(a);66!==n.profile&&77!==n.profile&&88!==n.profile&&(i+=4,r.length&&(i=r.reduce((function(e,t){return e+2+t.length}),i)));var c=new Uint8Array(i),u=new o.A(c);return u.writeUint8(1),u.writeUint8(a[1]),u.writeUint8(a[2]),u.writeUint8(a[3]),u.writeUint8(252|A),u.writeUint8(224|31&e.length),s.__(e,(function(e){u.writeUint16(e.length),u.writeBuffer(e)})),u.writeUint8(t.length),s.__(t,(function(e){u.writeUint16(e.length),u.writeBuffer(e)})),66!==n.profile&&77!==n.profile&&88!==n.profile&&(u.writeUint8(252|n.chromaFormatIdc),u.writeUint8(248|n.bitDepthLumaMinus8),u.writeUint8(248|n.bitDepthChromaMinus8),r.length&&s.__(r,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),c}function y(e){var t=(0,l.py)(e);if(t.length>1){var r=[],i=[],a=[];if(t.forEach((function(e){var t=31&e[0];7===t?r.push(e):8===t?i.push(e):13===t&&a.push(e)})),r.length&&i.length)return x(r,i,a)}}function k(e){var t,r=(0,l.py)(e),i=!1;if(r.length>1){var a=[],n=[],c=[];r.forEach((function(e){var t=31&e[0];7===t?a.push(e):8===t?n.push(e):13===t&&c.push(e)})),a.length&&n.length&&(t=x(a,n,c)),r=r.filter((function(e){var t=31&e[0];return 9!==t&&8!==t&&7!==t&&13!==t}))}var u=r.reduce((function(e,t){return e+A+1+t.length}),0),f=(0,p.sY)(u),d=(0,h.s3)(f,u),g=new o.A(d);return s.__(r,(function(e){3===A?g.writeUint32(e.length):2===A?g.writeUint24(e.length):1===A?g.writeUint16(e.length):g.writeUint8(e.length),g.writeBuffer(e.subarray(0)),5==(31&e[0])&&(i=!0)})),{bufferPointer:f,length:u,key:i,extradata:t}}function w(e,t){var r;if(1&a.f[15](e+36)){var i=(0,d.iI)(e);if(!(0,l.Bs)(i)){for(var n=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:A,s=[],o=[],u=[],f=[],g=new c.A(i);g.remainingSize()>0;){var v;v=3===n?g.readUint32():2===n?g.readUint24():1===n?g.readUint16():g.readUint8();var b=i.subarray(0|Number(0xffffffffn&g.getPos()),(0|Number(0xffffffffn&g.getPos()))+v);g.skip(v);var m=31&b[0];7===m?s.push(b):8===m?o.push(b):13===m?u.push(b):f.push(b)}if(s.length||o.length){var U=x(s,o,u),y=(0,p.sY)(U.length);(0,h.lW)(y,U.length,U),(0,d.Ow)(e,1,y,U.length)}}}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&a.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,l.Bs)(r)){var i=(0,l.py)(r);if(i.length>1){var s=[],o=[],c=[];if(i.forEach((function(e){var t=31&e[0];7===t?s.push(e):8===t?o.push(e):13===t&&c.push(e)})),s.length&&o.length){var u=x(s,o,c),f=(0,p.sY)(u.length);(0,h.lW)(f,u.length,u),(0,d.Ow)(e,1,f,u.length),n.M[15](e+36,1|a.f[15](e+36))}}}}}function _(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[4];var r=U(t).spss;if(r.length){var i=I(r[0]),a=i.profile,n=i.level,s=i.width,o=i.height;e.codecpar.profile=a,e.codecpar.level=n,e.codecpar.width=s,e.codecpar.height=o}}}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(!(1&a.f[15](e+36)))return!1;if(2===a.f[15](e+80))return(0,l.py)((0,h.s3)(a.f[20](e+24),a.f[15](e+28))).some((function(e){return 5==(31&e[0])}));for(var r=a.f[15](e+28),i=0;i<r-t;){if(5==(31&v.r8(a.f[20](e+24)+(i+t))))return!0;i+=4===t?v.Sg(a.f[20](e+24)+i):3===t?v.ht(a.f[20](e+24)+i):2===t?v.yd(a.f[20](e+24)+i):v.r8(a.f[20](e+24)+i),i+=t}return!1}function I(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,l.BN)(e.subarray(t)),i=new u.A(r.length);i.appendBuffer(r),i.readU1(),i.readU(2),i.readU(5);var a=i.readU(8);i.readU1(),i.readU1(),i.readU1(),i.readU1(),i.readU1(),i.readU1(),i.readU(2);var n=i.readU(8);g.xb(i);var s=1,o=0,c=0;if((100==a||110==a||122==a||244==a||44==a||83==a||86==a||118==a||128==a||138==a||139==a||134==a||135==a)&&(3===(s=g.xb(i))&&i.readU1(),o=g.xb(i),c=g.xb(i),i.readU1(),i.readU1()))for(var f=new Array(8),h=0;h<(3!=s?8:12);h++)f[h]=i.readU1();var d=g.xb(i),p=g.xb(i),v=0,b=0;if(0===p)v=g.xb(i);else if(1===p){b=i.readU1(),g.$x(i),g.$x(i);for(var A=g.xb(i),m=0;m<A;m++)g.$x(i)}g.xb(i),i.readU1();var U=g.xb(i),x=g.xb(i),y=i.readU1(),k=16*(U+1),w=(2-y)*(x+1)*16;y||i.readU1(),i.readU1();var P=i.readU1();if(P){var _=1,M=2-P;1===s?(_=2,M=2*(2-P)):2===P&&(_=2,M=2-P),k-=_*(g.xb(i)+g.xb(i)),w-=M*(g.xb(i)+g.xb(i))}return{profile:a,level:n,width:k,height:w,chromaFormatIdc:s,bitDepthLumaMinus8:o,bitDepthChromaMinus8:c,frameMbsOnlyFlag:y,picOrderCntType:p,log2MaxPicOrderCntLsbMinus4:v,deltaPicOrderAlwaysZeroFlag:b,log2MaxFrameNumMinus4:d}}}},53e3:(e,t,r)=>{"use strict";r.d(t,{HL:()=>A,Jk:()=>y,KD:()=>P,S1:()=>U,XC:()=>w,ZU:()=>M,ci:()=>k,dT:()=>v,oT:()=>x,wf:()=>_}),r(42096),r(75062),r(16091),r(68632);var i=r(134),a=r(63939),n=r(50932),s=r(72739),o=r(729),c=r(31865),u=r(37246),f=r(14686),h=r(60264),d=r(71517),l=r(37837),p=r(23991),g=r(39381),v=(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},1,"Main"),2,"Main10"),3,"MainStillPicture"),4,"Main444"),b=3;function A(e){var t=new c.A(e,!0);t.skip(22);for(var r=[],i=[],a=[],n=t.readUint8(),s=0;s<n;s++){for(var o=63&t.readUint8(),u=t.readUint16(),f=[],h=0;h<u;h++){var d=t.readUint16();f.push(t.readBuffer(d))}32===o?r=f:33===o?i=f:34===o&&(a=f)}return{vpss:r,spss:i,ppss:a}}function m(e,t,r){var i=t[0],a=23;e.length&&(a+=3,a=e.reduce((function(e,t){return e+2+t.length}),a)),t.length&&(a+=3,a=t.reduce((function(e,t){return e+2+t.length}),a)),r.length&&(a+=3,a=r.reduce((function(e,t){return e+2+t.length}),a));var n=new Uint8Array(a),c=new o.A(n,!0),u=_(i);c.writeUint8(1),c.writeUint8(i[1]),c.writeUint8(i[2]),c.writeUint8(i[3]),c.writeUint8(i[4]),c.writeUint8(i[5]),c.writeUint8(i[6]),c.writeUint8(i[7]),c.writeUint8(i[8]),c.writeUint8(i[9]),c.writeUint8(i[10]),c.writeUint8(i[11]),c.writeUint8(u.level),c.writeUint8(1020),c.writeUint8(0),c.writeUint8(16320),c.writeUint8(16320|u.chroma_format_idc),c.writeUint8(8160|u.bit_depth_luma_minus8),c.writeUint8(8160|u.bit_depth_chroma_minus8),c.writeUint16(0),c.writeUint8(8|(1&i[0])<<2|b);var f=0;return e.length&&f++,t.length&&f++,r.length&&f++,c.writeUint8(f),e.length&&(c.writeUint8(160),c.writeUint16(e.length),s.__(e,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),t.length&&(c.writeUint8(161),c.writeUint16(t.length),s.__(t,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),r.length&&(c.writeUint8(162),c.writeUint16(r.length),s.__(r,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),n}function U(e){var t=(0,h.py)(e);if(t.length>=2){var r=[],i=[],a=[];if(t.forEach((function(e){var t=e[0]>>>1&63;32===t?r.push(e):33===t?i.push(e):34===t&&a.push(e)})),i.length&&a.length)return m(r,i,a)}}function x(e){var t,r=!1,i=(0,h.py)(e);if(i.length>=2){var a=[],n=[],c=[];i.forEach((function(e){var t=e[0]>>>1&63;32===t?a.push(e):33===t?n.push(e):34===t&&c.push(e)})),n.length&&c.length&&(t=m(a,n,c),i=i.filter((function(e){var t=e[0]>>>1&63;return 32!==t&&33!==t&&34!==t&&35!==t})))}var u=i.reduce((function(e,t){return e+b+1+t.length}),0),d=(0,l.sY)(u),p=(0,f.s3)(d,u),g=new o.A(p);return s.__(i,(function(e){3===b?g.writeUint32(e.length):2===b?g.writeUint24(e.length):1===b?g.writeUint16(e.length):g.writeUint8(e.length),g.writeBuffer(e.subarray(0));var t=e[0]>>>1&63;19!==t&&20!==t&&21!==t||(r=!0)})),{bufferPointer:d,length:u,extradata:t,key:r}}function y(e,t){var r;if(1&a.f[15](e+36)){var i=(0,d.iI)(e);if(!(0,h.Bs)(i)){for(var n=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:b,s=[],o=[],u=[],p=new c.A(i);p.remainingSize()>0;){var g;g=3===n?p.readUint32():2===n?p.readUint24():1===n?p.readUint16():p.readUint8();var v=i.subarray(0|Number(0xffffffffn&p.getPos()),(0|Number(0xffffffffn&p.getPos()))+g);p.skip(g);var A=v[0]>>>1&63;33===A?o.push(v):34===A?u.push(v):32===A&&s.push(v)}if(o.length||u.length||s.length){var U=m(s,o,u),x=(0,l.sY)(U.length);(0,f.lW)(x,U.length,U),(0,d.Ow)(e,1,x,U.length)}}}}function k(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&a.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,h.Bs)(r)){var i=(0,h.py)(r);if(i.length>2){var s=[],o=[],c=[];if(i.forEach((function(e){var t=e[0]>>>1&63;32===t?s.push(e):33===t?o.push(e):34===t&&c.push(e)})),s.length&&o.length&&c.length){var u=m(s,o,c),p=(0,l.sY)(u.length);(0,f.lW)(p,u.length,u),(0,d.Ow)(e,1,p,u.length),n.M[15](e+36,1|a.f[15](e+36))}}}}}function w(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[21];var r=A(t).spss;if(r.length){var i=_(r[0]),a=i.profile,n=i.level,s=i.width,o=i.height;e.codecpar.profile=a,e.codecpar.level=n,e.codecpar.width=s,e.codecpar.height=o}}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(!(1&a.f[15](e+36)))return!1;if(2===a.f[15](e+80))return(0,h.py)((0,f.s3)(a.f[20](e+24),a.f[15](e+28))).some((function(e){var t=e[0]>>>1&63;return 20===t||19===t}));for(var r=a.f[15](e+28),i=0;i<r-t;){var n=g.r8(a.f[20](e+24)+(i+t))>>>1&63;if(20===n||19===n)return!0;i+=4===t?g.Sg(a.f[20](e+24)+i):3===t?g.ht(a.f[20](e+24)+i):2===t?g.yd(a.f[20](e+24)+i):g.r8(a.f[20](e+24)+i),i+=t}return!1}function _(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=0,i=0,a=0,n=0,s=0,o=0,c=1,f=0,d=0,l=0,g=0,v=(0,h.BN)(e.subarray(t)),b=new u.A(v.length);b.appendBuffer(v),b.readU1(),b.readU(6),b.readU(6),b.readU(3),b.readU(4);var A=b.readU(3);b.readU1();var m=0;if(A<=6){f=b.readU(2),d=b.readU1(),r=b.readU(5),l=b.readU(32),g=b.readU(48),i=b.readU(8);for(var U=new Array(6),x=new Array(6),y=0;y<A;y++)U[y]=b.readU1(),x[y]=b.readU1();if(A>0)for(var k=A;k<8;k++)b.readU(2);for(var w=0;w<A;w++)U[w]&&(b.readU(2),b.readU(1),b.readU(5),b.readU(32),b.readU(1),b.readU(1),b.readU(1),b.readU(1),b.readU(44)),x[w]&&b.readU(8);p.xb(b),3===(c=p.xb(b))&&(m=b.readU(1)),a=p.xb(b),n=p.xb(b);var P=0,_=0,M=0,I=0;b.readU1()&&(P=p.xb(b),_=p.xb(b),M=p.xb(b),I=p.xb(b)),s=p.xb(b),o=p.xb(b);var S=2,R=2;0===c?S=R=0:2===c?(S=2,R=1):3===c&&(S=R=1),a-=S*(1<<s+1)*(P+_),n-=R*(1<<s+1)*(M+I)}for(var C=p.xb(b)+4,B=b.readU1()?0:A;B<A+1;B++)p.xb(b),p.xb(b),p.xb(b);var L=p.xb(b)+3,F=p.xb(b),z=p.xb(b)+2,T=p.xb(b),E=L+F,N=L-1,D=a+(1<<E)-1>>E,V=n+(1<<E)-1>>E;return{profile:r,level:i,width:a,height:n,chroma_format_idc:c,bit_depth_luma_minus8:s,bit_depth_chroma_minus8:o,general_profile_space:f,general_tier_flag:d,general_profile_compatibility_flags:l,constraint_flags:g,separate_colour_plane_flag:m,log2_min_cb_size:L,log2_diff_max_min_coding_block_size:F,log2_min_tb_size:z,log2_diff_max_min_transform_block_size:T,log2_max_trafo_size:T+z,log2_ctb_size:E,log2_min_pu_size:N,ctb_width:D,ctb_height:V,ctb_size:D*V,min_cb_width:a>>L,min_cb_height:n>>L,min_tb_width:a>>z,min_tb_height:n>>z,min_pu_width:a>>N,min_pu_height:n>>N,log2_max_poc_lsb:C}}}function M(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,h.BN)(e.subarray(t)),i=new u.A(r.length);return i.appendBuffer(r),{pps_pic_parameter_set_id:p.xb(i),pps_seq_parameter_set_id:p.xb(i),dependent_slice_segment_flag:i.readU1(),output_flag_present_flag:i.readU1(),num_extra_slice_header_bits:i.readU(3)}}}},89088:(e,t,r)=>{"use strict";r.d(t,{Au:()=>m,He:()=>U,XC:()=>x,Y2:()=>v,hG:()=>b,oz:()=>A});var i=r(134),a=r(77231),n=[44100,48e3,32e3,0],s=[22050,24e3,16e3,0],o=[11025,12e3,8e3,0],c=[0,1152,1152,384],u=[0,576,1152,384],f=[0,576,1152,384],h=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],d=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],l=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],p=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],g=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function v(e,t){switch(e){case 0:return o[t];case 2:return s[t];case 3:return n[t]}return a.N_}function b(e,t){switch(e){case 0:return f[t];case 2:return u[t];case 3:return c[t]}return a.N_}function A(e,t,r){switch(t){case 1:switch(e){case 0:case 2:return g[r];case 3:return l[r]}break;case 2:switch(e){case 0:case 2:return g[r];case 3:return d[r]}case 3:switch(e){case 0:case 2:return p[r];case 3:return h[r]}}return a.N_}function m(e){switch(e){case 1:return 34;case 2:return 33;case 3:return 32}return a.N_}var U=(0,i.A)((0,i.A)((0,i.A)({},32,"Layer1"),33,"Layer2"),34,"Layer3");function x(e,t){if(t&&t.length>=4){var r=t[1]>>>3&3,i=(6&t[1])>>1,a=(12&t[2])>>>2,n=3&~(t[3]>>>6)?2:1,s=m(i),o=v(r,a);e.codecpar.profile=s,e.codecpar.sampleRate=o,e.codecpar.chLayout.nbChannels=n}}},65451:(e,t,r)=>{"use strict";r.d(t,{Ij:()=>u,XC:()=>c,kt:()=>o});var i=r(31865),a=r(729),n=r(44328),s=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function o(e){var t,r,i=0;if(e.length<1)return 0;switch(t=e[0],r=s[t>>3],3&t){case 0:i=1;break;case 1:case 2:i=2;break;case 3:if(e.length<2)return 0;i=63&e[1]}return i*r}function c(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=19){var r=new i.A(t,!1);r.skip(9),e.codecpar.chLayout.nbChannels=r.readUint8(),e.codecpar.initialPadding=r.readUint16(),e.codecpar.sampleRate=r.readUint32(),e.codecpar.seekPreroll=Number((0,n.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function u(e){var t=new Uint8Array(19),r=new a.A(t,!1);return r.writeString("OpusHead"),r.writeUint8(1),r.writeUint8(e.chLayout.nbChannels),r.writeUint16(e.initialPadding),r.writeUint32(e.sampleRate),t}},55611:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>m,QA:()=>x,Ui:()=>w,XC:()=>y,ci:()=>U,oT:()=>A,wf:()=>k});var i=r(63939),a=r(50932),n=r(72739),s=r(729),o=r(31865),c=r(37246),u=r(14686),f=r(60264),h=r(71517),d=r(37837),l=r(23991),p=r(83314),g=3;function v(e){var t=e.readU(9),r=e.readU(3),i=e.readU(2),a=e.readU(2),n=e.readU(3);e.readU(5),e.readU(2);var s=e.readU(6),o=e.readU(7),c=e.readU(1),u=e.readU(8),f=e.readU(1),h=e.readU(1),d=[],l=[];if(s){for(var p=0;p<s-1;p++)d[p]=e.readU(8);d[s-1]=e.readU(6)}else e.readU(6);if(r>1){for(var g=0,v=r-2;v>=0;--v)g|=e.readU(1)<<v;for(var b=r;b<=8&&r>1;++b)e.readU(1);for(var A=r-2;A>=0;--A)g&1<<A&&(l[A]=e.readU(8))}var m=e.readU(8),U=[];if(m)for(var x=0;x<m;x++)U.push(e.readU(8));return{olsIdx:t,numSublayers:r,bitDepthMinus8:n,chromaFormatIdc:a,constantFrameRate:i,generalProfileIdc:o,generalTierFlag:c,generalLevelIdc:u,ptlFrameOnlyConstraintFlag:f,ptlMultilayerEnabledFlag:h,generalConstraintInfo:d,sublayerLevelIdc:l,generalSubProfileIdc:U,maxPictureWidth:e.readU(16),maxPictureHeight:e.readU(16),avgFramerate:e.readU(16)}}function b(e,t,r){var i,a=t[0];if(a){var o=k(a),c=o.generalConstraintInfo;c.length||(c=new Array(12).fill(0));var u=new p.A;if(u.writeU(9,0),u.writeU(3,o.spsMaxSublayersMinus1+1),u.writeU(2,1),u.writeU(2,o.chromaFormatIdc),u.writeU(3,o.bitDepthMinus8),u.writeU(5,31),u.writeU(2,0),u.writeU(6,c.length),u.writeU(7,o.profile),u.writeU1(o.tierFlag),u.writeU(8,o.level),u.writeU1(o.ptlFrameOnlyConstraintFlag),u.writeU1(o.ptlMultilayerEnabledFlag),c.length){for(var f=0;f<c.length-1;f++)u.writeU(8,c[f]);u.writeU(6,c[c.length-1])}else u.writeU(6,63);if(o.spsMaxSublayersMinus1+1>1){for(var h=0,d=o.spsMaxSublayersMinus1-1;d>=0;d--)h=h<<1|o.ptlSublayerLevelPresentFlag[d];u.writeU(o.spsMaxSublayersMinus1,h);for(var l=o.spsMaxSublayersMinus1+1;l<=8&&o.spsMaxSublayersMinus1>0;++l)u.writeU1(0);for(var v=o.spsMaxSublayersMinus1-1;v>=0;v--)o.ptlSublayerLevelPresentFlag[v]&&u.writeU(8,o.sublayerLevelIdc[v])}u.writeU(8,o.generalSubProfileIdc.length);for(var b=0;b<o.generalSubProfileIdc.length;b++)u.writeU(8,o.sublayerLevelIdc[b]);u.writeU(16,o.width),u.writeU(16,o.height),u.writeU(16,0),u.padding(),i=u.getBuffer().subarray(0,u.getPointer())}var A=2+(i?i.length:0);e.length&&(A+=3,A=e.reduce((function(e,t){return e+2+t.length}),A)),t.length&&(A+=3,A=t.reduce((function(e,t){return e+2+t.length}),A)),r.length&&(A+=3,A=r.reduce((function(e,t){return e+2+t.length}),A));var m=new Uint8Array(A),U=new s.A(m,!0);U.writeUint8(g<<1|(i?1:0)|248),i&&U.writeBuffer(i);var x=0;return e.length&&x++,t.length&&x++,r.length&&x++,U.writeUint8(x),e.length&&(U.writeUint8(142),U.writeUint16(e.length),n.__(e,(function(e){U.writeUint16(e.length),U.writeBuffer(e)}))),t.length&&(U.writeUint8(143),U.writeUint16(t.length),n.__(t,(function(e){U.writeUint16(e.length),U.writeBuffer(e)}))),r.length&&(U.writeUint8(144),U.writeUint16(r.length),n.__(r,(function(e){U.writeUint16(e.length),U.writeBuffer(e)}))),m}function A(e){var t,r=!1,i=(0,f.py)(e);if(i.length>=2){var a=[],o=[],c=[];i.forEach((function(e){var t=e[1]>>>3&31;14===t?a.push(e):15===t?o.push(e):16===t&&c.push(e)})),o.length&&c.length&&(t=b(a,o,c),i=i.filter((function(e){var t=e[1]>>>3&31;return 14!==t&&15!==t&&16!==t&&20!==t})))}var h=i.reduce((function(e,t){return e+g+1+t.length}),0),l=(0,d.sY)(h),p=(0,u.s3)(l,h),v=new s.A(p);return n.__(i,(function(e){3===g?v.writeUint32(e.length):2===g?v.writeUint24(e.length):1===g?v.writeUint16(e.length):v.writeUint8(e.length),v.writeBuffer(e.subarray(0));var t=e[1]>>>3&31;8!==t&&7!==t&&9!==t&&10!==t||(r=!0)})),{bufferPointer:l,length:h,extradata:t,key:r}}function m(e,t){var r;if(1&i.f[15](e+36)){var a=(0,h.iI)(e);if(!(0,f.Bs)(a)){for(var n=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:g,s=[],c=[],l=[],p=new o.A(a);p.remainingSize()>0;){var v;v=3===n?p.readUint32():2===n?p.readUint24():1===n?p.readUint16():p.readUint8();var A=a.subarray(0|Number(0xffffffffn&p.getPos()),(0|Number(0xffffffffn&p.getPos()))+v);p.skip(v);var m=A[1]>>>3&31;15===m?c.push(A):16===m?l.push(A):14===m&&s.push(A)}if(c.length||l.length||s.length){var U=b(s,c,l),x=(0,d.sY)(U.length);(0,u.lW)(x,U.length,U),(0,h.Ow)(e,1,x,U.length)}}}}function U(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&i.f[15](e+36)||t){var r=(0,h.iI)(e);if((0,f.Bs)(r)){var n=(0,f.py)(r);if(n.length>2){var s=[],o=[],c=[];if(n.forEach((function(e){var t=e[1]>>>3&31;14===t?s.push(e):15===t?o.push(e):16===t&&c.push(e)})),s.length&&o.length&&c.length){var l=b(s,o,c),p=(0,d.sY)(l.length);(0,u.lW)(p,l.length,l),(0,h.Ow)(e,1,p,l.length),a.M[15](e+36,1|i.f[15](e+36))}}}}}function x(e,t){var r=k(t),i=r.profile,a=r.level,n=r.width,s=r.height;e.codecpar.profile=i,e.codecpar.level=a,e.codecpar.width=n,e.codecpar.height=s}function y(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=t[0]>>>1&3;var r=function(e){var t=new o.A(e,!0);if(1&t.readUint8()){var r=new c.A;r.appendBuffer(e.subarray(1)),v(r),t.skip(r.getPos())}for(var i=[],a=[],n=[],s=t.readUint8(),u=0;u<s;u++){var f=31&t.readUint8(),h=1;13!==f&&12!==f&&(h=t.readUint16());for(var d=[],l=0;l<h;l++){var p=t.readUint16();d.push(t.readBuffer(p))}14===f?i=d:15===f?a=d:16===f&&(n=d)}return{vpss:i,spss:a,ppss:n}}(t).spss;r.length&&x(e,r[0])}}function k(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r,i,a,n,s=0,o=0,u=0,h=0,d=0,p=[],g=[],v=[],b=[],A=(0,f.BN)(e.subarray(t)),m=new c.A(A.length);m.appendBuffer(A),m.readU1(),m.readU1(),m.readU(6),m.readU(5),m.readU(3),m.readU(8);var U=m.readU(3);n=m.readU(2);var x=m.readU(2);if(m.readU(1)){if(s=m.readU(7),u=m.readU(1),o=m.readU(8),h=m.readU(1),d=m.readU(1),m.readU(1)){for(var y=0;y<8;y++)p[y]=m.readU(8);p[8]=m.readU(7);var k=m.readU(8);m.readU(k)}m.skipPadding();for(var w=U-1;w>=0;w--)g[w]=m.readU(1);m.skipPadding();for(var P=U-1;P>=0;P--)g[P]&&(v[P]=m.readU(8));var _=m.readU(8);if(_)for(var M=0;M<_;M++)b[M]=m.readU(32)}m.readU1(),m.readU1()&&m.readU1();var I=r=l.xb(m),S=i=l.xb(m);if(m.readU1()&&(l.xb(m),l.xb(m),l.xb(m),l.xb(m)),m.readU1()){var R,C=l.xb(m),B=x+5,L=1<<B,F=I/(1<<B),z=S/(1<<B),T=Math.ceil(Math.log2(F)),E=Math.ceil(Math.log2(z)),N=0,D=0;C>0&&(D=m.readU1(),N=m.readU1());for(var V=0;C>0&&V<=C;V++)N&&0!=V||(V>0&&I>L&&m.readU(T),V>0&&S>L&&m.readU(E),V<C&&I>L&&m.readU(T),V<C&&S>L&&m.readU(E)),D||m.readU(2);if(R=l.xb(m)+1,m.readU(1)&&m.readU(1))for(var Y=0;Y<=C;Y++)m.readU(R)}a=l.xb(m),m.readU(1),m.readU(1);var O=m.readU(4),W=m.readU(1),Q=0;W&&(Q=l.xb(m));for(var X=[],H=m.readU(2),Z=0;Z<8*H;Z++)X[Z]=m.readU(1);return{profile:s,level:o,width:r,height:i,chromaFormatIdc:n,bitDepthMinus8:a,generalProfileSpace:0,tierFlag:u,generalConstraintInfo:p,generalSubProfileIdc:b,ptlFrameOnlyConstraintFlag:h,ptlMultilayerEnabledFlag:d,spsMaxSublayersMinus1:U,ptlSublayerLevelPresentFlag:g,sublayerLevelIdc:v,sps_log2_max_pic_order_cnt_lsb_minus4:O,sps_poc_msb_cycle_flag:W,sps_poc_msb_cycle_len_minus1:Q,sps_num_extra_ph_bytes:H,sps_extra_ph_bit_present_flag:X}}}function w(e){0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(e=function(e){var t=(0,f.py)(e);if(t.length>=2){var r=[],i=[],a=[];if(t.forEach((function(e){var t=e[1]>>>3&31;14===t?r.push(e):15===t?i.push(e):16===t&&a.push(e)})),i.length&&a.length)return b(r,i,a)}}(e));var t=new c.A;return t.appendBuffer(e),1&t.readU(8)?v(t):{}}},85947:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(78716),a=r(81570),n=r(134),s=function(){function e(){(0,i.A)(this,e),(0,n.A)(this,"type",-1),(0,n.A)(this,"onStreamAdd",void 0)}return(0,a.A)(e,[{key:"destroy",value:function(e){}}]),e}()},59331:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var i=r(88435),a=r.n(i),n=r(25182),s=r(78716),o=r(81570),c=r(77193),u=r(43070),f=r(60394),h=r(25767),d=r(31060),l=r(134),p=r(36443),g=r.n(p),v=r(63939),b=r(50932),A=r(4624),m=r(19770),U=r(53783),x=r(27274),y=r(39e3),k=r(9705),w=r(51660),P=r(39144),_=r(52088),M=r(6403),I=r(85947),S=r(86191),R=r(71517),C=r(77231),B=r(52071),L=r(44328),F=r(72739),z=r(89088),T=r(20620),E=r(53e3),N=r(55611),D=r(58469),V=r(65451),Y=r(37837),O=r(14686);function W(e,t,r){return t=(0,h.A)(t),(0,c.A)(e,Q()?a()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function Q(){try{var e=!Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){})))}catch(e){}return(Q=function(){return!!e})()}var X="src/avformat/formats/IMpegtsFormat.ts",H=function(e){function t(){var e;return(0,s.A)(this,t),e=W(this,t),(0,l.A)((0,u.A)(e),"type",2),(0,l.A)((0,u.A)(e),"context",void 0),(0,l.A)((0,u.A)(e),"firstTSPacketPos",void 0),(0,l.A)((0,u.A)(e),"cacheAVPacket",void 0),e.context=(0,m.A)(),e}var r,i,a,c,p;return(0,d.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e){e.ioReader&&e.ioReader.setEndian(!0),this.cacheAVPacket=0}},{key:"destroy",value:function(e){(0,f.A)((0,h.A)(t.prototype),"destroy",this).call(this,e),this.cacheAVPacket&&((0,R.Qe)(this.cacheAVPacket),this.cacheAVPacket=0),F.__(e.streams,(function(e){var t=e.privData;t.filter&&(t.filter.destroy(),t.filter=null)}))}},{key:"readHeader",value:(p=(0,n.A)(g().mark((function e(t){var r,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=0,e.next=4,U.q(t.ioReader);case 4:(i=e.sent)||(i=x.ZT),this.context.tsPacketSize=i;case 7:if(this.context.hasPAT&&this.context.hasPMT){e.next=16;break}return e.next=10,U.n(t.ioReader,this.context);case 10:if((a=e.sent).payload){e.next=13;break}return e.abrupt("continue",7);case 13:0!==a.pid&&a.pid!==this.context.currentPmtPid&&134!==this.context.pmt.pid2StreamType.get(a.pid)||(0,y.A)(a,this.context),e.next=7;break;case 16:if(this.context.hasPAT&&this.context.hasPMT){e.next=20;break}return e.abrupt("return",k.LR);case 20:this.firstTSPacketPos=t.ioReader.getPos();case 21:return e.abrupt("return",r);case 24:return e.prev=24,e.t0=e.catch(0),A.z3(e.t0.message,X,135),e.abrupt("return",t.ioReader.error);case 28:case"end":return e.stop()}}),e,this,[[0,24]])}))),function(e){return p.apply(this,arguments)})},{key:"checkExtradata",value:function(e,t){if(!t.codecpar.extradata){var r=(0,R.rU)(e,1);if(!r)return;t.codecpar.extradata=(0,Y.sY)(v.f[15](r+4)),(0,O.Mr)(t.codecpar.extradata,v.f[20](r),v.f[15](r+4)),t.codecpar.extradataSize=v.f[15](r+4),(0,R.Is)(e,1),27===t.codecpar.codecId?T.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):173===t.codecpar.codecId?E.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):196===t.codecpar.codecId?N.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):86018===t.codecpar.codecId?D.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):86076===t.codecpar.codecId&&V.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize))}}},{key:"parsePESSlice",value:function(e,t,r,i){var a=(0,P.A)(r);(0,w.A)(a,t,i),(0,_.A)(r);var n=i.privData;if(n.filter){if(n.filter.sendAVPacket(t)<0)return A.z3("send avpacket to bsf failed",X,181),k.LR;if(n.filter.receiveAVPacket(t)<0)return A.z3("receive avpacket from bsf failed",X,188),k.LR;for(b.M[15](t+76,9e4),b.M[15](t+72,1),b.M[15](t+32,i.index),this.checkExtradata(t,i);;){var s=this.cacheAVPacket||(0,R._5)();if(0!==n.filter.receiveAVPacket(s)){this.cacheAVPacket=s;break}b.M[15](s+76,9e4),b.M[15](s+72,1),b.M[15](s+32,i.index),this.checkExtradata(s,i),e.interval.packetBuffer.push(s),this.cacheAVPacket=0}}else{var o=this.context.pmt.pid2StreamType.get(n.pid);if(3===o||4===o){b.M[15](t+36,1|v.f[15](t+36));var c=(0,R.iI)(t),u=c[1]>>>3&3,f=(6&c[1])>>1,h=(12&c[2])>>>2,d=3&~(c[3]>>>6)?2:1,l=z.Au(f),p=z.Y2(u,h);(i.codecpar.profile!==l||i.codecpar.sampleRate!==p||i.codecpar.chLayout.nbChannels!==d)&&(i.codecpar.profile=l,i.codecpar.sampleRate=p,i.codecpar.chLayout.nbChannels=d)}else 27===i.codecpar.codecId?i.codecpar.extradata||(T.ci(t,!0),this.checkExtradata(t,i),i.codecpar.bitFormat=2):173===i.codecpar.codecId?i.codecpar.extradata||(E.ci(t,!0),this.checkExtradata(t,i),i.codecpar.bitFormat=2):196===i.codecpar.codecId&&(i.codecpar.extradata||(N.ci(t,!0),this.checkExtradata(t,i),i.codecpar.bitFormat=2))}return 0}},{key:"readAVPacket_",value:(c=(0,n.A)(g().mark((function e(t,r){var i,a,n,s,o,c,u=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.context.ioEnd){e.next=24;break}if(this.context.tsSliceQueueMap.size){e.next=3;break}return e.abrupt("return",-1048576);case 3:i=this.context.tsSliceQueueMap.values();case 4:if(!(n=i.next()).value||!n.value.slices.length){e.next=9;break}return a=n.value,e.abrupt("break",13);case 9:if(!n.done){e.next=11;break}return e.abrupt("break",13);case 11:e.next=4;break;case 13:if(a){e.next=15;break}return e.abrupt("return",-1048576);case 15:if(!(s=t.streams.find((function(e){return e.privData.pid===a.pid})))){e.next=20;break}return e.abrupt("return",this.parsePESSlice(t,r,a,s));case 20:return(0,_.A)(a),e.abrupt("return",this.readAVPacket_(t,r));case 22:e.next=49;break;case 24:e.prev=24,o=g().mark((function e(){var i,a,n,s,o,c,f,h,d,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.n(t.ioReader,u.context);case 2:if((i=e.sent).payload){e.next=5;break}return e.abrupt("return",0);case 5:if(0!==i.pid&&i.pid!==u.context.currentPmtPid&&134!==u.context.pmt.pid2StreamType.get(i.pid)){e.next=8;break}return(0,y.A)(i,u.context),e.abrupt("return",0);case 8:if(a=u.context.pmt.pid2StreamType.get(i.pid)){e.next=11;break}return e.abrupt("return",0);case 11:if((n=t.streams.find((function(e){return e.privData.pid===i.pid})))||(n=t.createStream(),(0,S.A)(i.pid,n,u.context)),s=i.payload[4]<<8|i.payload[5],o=u.context.tsSliceQueueMap.get(i.pid),c=!1,!o){e.next=24;break}if(!(o.totalLength>0&&i.payloadUnitStartIndicator)){e.next=22;break}if(!((f=u.parsePESSlice(t,r,o,n))<0)){e.next=21;break}return e.abrupt("return",{v:f});case 21:c=!0;case 22:e.next=28;break;case 24:if(i.payloadUnitStartIndicator){e.next=26;break}return e.abrupt("return",0);case 26:o=new M.pi,u.context.tsSliceQueueMap.set(i.pid,o);case 28:if(i.payloadUnitStartIndicator&&(o.randomAccessIndicator=null!==(h=null===(d=i.adaptationFieldInfo)||void 0===d?void 0:d.randomAccessIndicator)&&void 0!==h?h:0,o.pos=i.pos,o.pid=i.pid,o.streamType=a,o.expectedLength=0===s?0:s+6),o.slices.push(i.payload),o.totalLength+=i.payload.length,!(o.expectedLength>0&&o.expectedLength===o.totalLength)){e.next=36;break}if(!((l=u.parsePESSlice(t,r,o,n))<0)){e.next=35;break}return e.abrupt("return",{v:l});case 35:c=!0;case 36:if(!c){e.next=38;break}return e.abrupt("return",{v:0});case 38:case"end":return e.stop()}}),e)}));case 26:return e.delegateYield(o(),"t0",28);case 28:if(0!==(c=e.t0)){e.next=31;break}return e.abrupt("continue",26);case 31:if(!c){e.next=33;break}return e.abrupt("return",c.v);case 33:e.next=26;break;case 35:e.next=49;break;case 37:if(e.prev=37,e.t1=e.catch(24),-1048576!==t.ioReader.error||this.context.ioEnd){e.next=44;break}return this.context.ioEnd=!0,e.abrupt("return",this.readAVPacket_(t,r));case 44:if(-1048576!==t.ioReader.error){e.next=48;break}return e.abrupt("return",-1048576);case 48:throw e.t1;case 49:case"end":return e.stop()}}),e,this,[[24,37]])}))),function(e,t){return c.apply(this,arguments)})},{key:"readAVPacket",value:(a=(0,n.A)(g().mark((function e(t,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.readAVPacket_(t,r));case 4:return e.prev=4,e.t0=e.catch(0),-1048576!==t.ioReader.error&&A.z3(e.t0.message,X,412),e.abrupt("return",t.ioReader.error);case 8:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(e,t){return a.apply(this,arguments)})},{key:"syncTSPacket",value:(i=(0,n.A)(g().mark((function e(t){var r,i,a,n,s=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=C.Dh,i=10;case 2:return e.prev=3,e.next=6,t.ioReader.readUint8();case 6:if(71!==e.sent){e.next=32;break}r=this.context.tsPacketSize===x.VG?t.ioReader.getPos()-BigInt(5):t.ioReader.getPos()-BigInt(1),a=0,n=t.ioReader.getPos();case 11:if(!(a<=i)){e.next=24;break}return e.next=14,t.ioReader.skip(this.context.tsPacketSize-1);case 14:return e.next=16,t.ioReader.readUint8();case 16:if(71!==e.sent){e.next=21;break}a++,e.next=22;break;case 21:return e.abrupt("break",24);case 22:e.next=11;break;case 24:if(!(a<i)){e.next=31;break}return r=C.Dh,e.next=28,t.ioReader.seek(n);case 28:return e.abrupt("continue",2);case 31:return e.abrupt("break",40);case 32:e.next=38;break;case 34:return e.prev=34,e.t0=e.catch(3),r=C.Dh,e.abrupt("break",40);case 38:e.next=2;break;case 40:if(r===C.Dh){e.next=55;break}return e.next=43,t.ioReader.seek(r);case 43:return e.next=46,U.n(t.ioReader,this.context);case 46:if(!e.sent.payloadUnitStartIndicator){e.next=52;break}return e.next=50,t.ioReader.seek(r);case 50:return t.streams.forEach((function(e){var t=s.context.tsSliceQueueMap.get(e.privData.pid);t&&(0,_.A)(t)})),e.abrupt("break",55);case 52:r=t.ioReader.getPos(),e.next=43;break;case 55:case"end":return e.stop()}}),e,this,[[3,34]])}))),function(e){return i.apply(this,arguments)})},{key:"seek",value:(r=(0,n.A)(g().mark((function e(t,r,i,a){var n,s,o,c,u,f=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ioReader.getPos(),this.context.tsSliceQueueMap.forEach((function(e){e.slices.length&&e.pos<n&&(n=e.pos),(0,_.A)(e)})),this.context.pmt.pid2StreamType.forEach((function(e,t){f.context.tsSliceQueueMap.delete(t)})),!(16&a)){e.next=9;break}return s=(0,L.k)(i,r.timeBase,C.i0),e.next=7,t.ioReader.seek(s,!0);case 7:return this.context.ioEnd=!1,e.abrupt("return",BigInt(0));case 9:if(!r||!r.sampleIndexes.length){e.next=17;break}if(!((o=F.El(r.sampleIndexes,(function(e){return e.pts>i?-1:1})))>0&&(0,L.k)(i-r.sampleIndexes[o-1].pts,r.timeBase,C.i0)<BigInt(1e4))){e.next=17;break}return A.Yz("seek in sampleIndexes, found index: ".concat(o,", pts: ").concat(r.sampleIndexes[o-1].pts,", pos: ").concat(r.sampleIndexes[o-1].pos),X,522),e.next=15,t.ioReader.seek(r.sampleIndexes[o-1].pos);case 15:case 29:return this.context.ioEnd=!1,e.abrupt("return",n);case 17:if(!(2&a)){e.next=33;break}return e.next=20,t.ioReader.fileSize();case 20:if(!((c=e.sent)<=BigInt(0))){e.next=23;break}return e.abrupt("return",BigInt(k.E$));case 23:return i<BigInt(0)?i=BigInt(0):i>c&&(i=c),e.next=26,t.ioReader.seek(i);case 26:if(4&a){e.next=29;break}return e.next=29,this.syncTSPacket(t);case 33:return A.Yz("not found any keyframe index, try to seek in bytes",X,554),e.next=36,(0,B.A)(t,r,i,this.firstTSPacketPos,this.readAVPacket.bind(this),this.syncTSPacket.bind(this));case 36:return(u=e.sent)>=0&&(this.context.ioEnd=!1),e.abrupt("return",u);case 39:case"end":return e.stop()}}),e,this)}))),function(e,t,i,a){return r.apply(this,arguments)})},{key:"getAnalyzeStreamsCount",value:function(){var e,t;return null!==(e=null===(t=this.context.pmt)||void 0===t?void 0:t.pid2StreamType.size)&&void 0!==e?e:0}}]),t}(I.A)},89564:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(27274);function a(e,t,r){for(var a=new Uint8Array(i.GV),n=0,s=0,o=0;o<e.length-3;o++)if(71===e[o]){var c=8191&(e[o+1]<<8|e[o+2]),u=48&e[o+3];if(!r||8191===c||u){var f=o%t;a[f]++,n++,a[f]>s&&(s=a[f])}}return s-Math.max(n-10*s,0)/10}},52088:(e,t,r)=>{"use strict";function i(e){e.slices=[],e.totalLength=0,e.expectedLength=-1}r.d(t,{A:()=>i})},19770:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(80662),a=r.n(i),n=r(77231),s=r(6403);function o(){return{currentProgram:n.N_,currentPmtPid:n.N_,tsPacketSize:n.N_,hasPAT:!1,hasPMT:!1,tsSliceQueueMap:new(a()),pat:new s.Cd,pmt:new s.I4,program2Pmt:new(a()),ioEnd:!1,startPid:256,delay:BigInt(0)}}},76538:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(77231);function a(){return{pid:i.N_,filter:null,tsPacket:null,pes:null,continuityCounter:0,pesSlices:{total:0,buffers:[]},latm:!1}}},39e3:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(6403),a=r(52088),n=r(63599);function s(e,t){var r=t.tsSliceQueueMap.get(e.pid);if(e.payloadUnitStartIndicator){var s=e.payload[0];if(r&&r.totalLength>0){var o=e.payload.slice(1,Math.min(1+s,e.payload.length));r.slices.push(o),r.totalLength+=o.length,r.totalLength===r.expectedLength?((0,n.A)(e.pid,r,t),(0,a.A)(r)):((0,a.A)(r),t.tsSliceQueueMap.delete(e.pid))}for(var c=1+s;c<e.payload.length;){var u,f;if(255===e.payload[c])break;var h=(15&e.payload[c+1])<<8|e.payload[c+2],d=new i.pi;d.pid=e.pid,d.expectedLength=h+3,d.randomAccessIndicator=null!==(u=null===(f=e.adaptationFieldInfo)||void 0===f?void 0:f.randomAccessIndicator)&&void 0!==u?u:0;var l=e.payload.slice(c,Math.min(c+d.expectedLength-d.totalLength,e.payload.length));d.slices.push(l),d.totalLength+=l.length,t.tsSliceQueueMap.set(e.pid,d),d.totalLength===d.expectedLength?((0,n.A)(e.pid,d,t),(0,a.A)(d)):((0,a.A)(d),t.tsSliceQueueMap.delete(e.pid)),c+=l.length}}else if(r&&0!==r.totalLength){var p=e.payload.slice(0,Math.min(r.expectedLength-r.totalLength,e.payload.length));r.slices.push(p),r.totalLength+=p.length,r.totalLength===r.expectedLength?((0,n.A)(e.pid,r,t),(0,a.A)(r)):((0,a.A)(r),t.tsSliceQueueMap.delete(e.pid))}}},86191:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var i=r(61499),a=r(76538),n=r(27274),s=r(50848),o=r(36488),c=r(61702),u=r(65451),f=r(37837),h=r(14686);function d(e,t,r){t.timeBase.den=9e4,t.timeBase.num=1;var d=(0,a.A)();d.pid=e,t.privData=d;var l,p=r.pmt.pid2StreamType.get(e);if(6===p){var g=r.pmt.pid2ESDescriptor.get(e);if(t.codecpar.codecType=2,g){var v,b=g.find((function(e){return 5===e.tag}));if(b&&(null===(v=b.buffer)||void 0===v?void 0:v.length)>=4)if("O"===String.fromCharCode(b.buffer[0])||"p"===String.fromCharCode(b.buffer[1])||"u"===String.fromCharCode(b.buffer[2])||"s"===String.fromCharCode(b.buffer[3])){t.codecpar.codecType=1,t.codecpar.codecId=86076,t.codecpar.sampleRate=48e3;var A=g.find((function(e){return 127===e.tag}));if(A&&128===A.buffer[0]){t.codecpar.chLayout.nbChannels=15&A.buffer[1]?15&A.buffer[1]:2;var m=u.Ij(t.codecpar);m&&(t.codecpar.extradata=(0,f.sY)(m.length),(0,h.lW)(t.codecpar.extradata,m.length,m),t.codecpar.extradataSize=m.length)}}else if("A"===String.fromCharCode(b.buffer[0])||"V"===String.fromCharCode(b.buffer[1])||"0"===String.fromCharCode(b.buffer[2])||"1"===String.fromCharCode(b.buffer[3])){t.codecpar.codecType=0,t.codecpar.codecId=225;var U=g.find((function(e){return 128===e.tag}));U&&(t.codecpar.extradata=(0,f.sY)(U.buffer.length),(0,h.lW)(t.codecpar.extradata,U.buffer.length,U.buffer),t.codecpar.extradataSize=U.buffer.length)}}}else{var x=n.$x[p];x?(t.codecpar.codecType=x[0],t.codecpar.codecId=x[1]):t.codecpar.codecType=2}switch(p){case 15:l=new s.A;break;case 17:l=new o.A;break;case 27:case 36:break;case 6:86076===t.codecpar.codecId&&(l=new c.A)}return l&&(t.privData.filter=l,l.init(t.codecpar[i.o9],t.timeBase[i.o9])),t}},52888:(e,t,r)=>{"use strict";function i(e,t,r){return e>t?r>t&&(t=r>e?e:r):t>r&&(t=r>e?r:e),t}r.d(t,{y:()=>i})},31239:(e,t,r)=>{"use strict";function i(e,t){var r=0,i=e[r++];if(t.adaptationFieldInfo.discontinuityIndicator=i>>7&1,t.adaptationFieldInfo.randomAccessIndicator=i>>6&1,t.adaptationFieldInfo.elementaryStreamPriorityIndicator=i>>5&1,t.adaptationFieldInfo.pcrFlag=i>>4&1,t.adaptationFieldInfo.opcrFlag=i>>3&1,t.adaptationFieldInfo.splicingPointFlag=i>>2&1,t.adaptationFieldInfo.transportPrivateDataFlag=i>>1&1,t.adaptationFieldInfo.adaptationFieldExtensionFlag=1&i,t.adaptationFieldInfo.pcrFlag){var a=BigInt(Math.floor(e[r++]<<25|e[r++]<<17|e[r++]<<9|e[r++]<<1|e[r]>>7)),n=BigInt(Math.floor((1&e[r++])<<8|e[r++]));t.adaptationFieldInfo.pcr=a*BigInt(300)+n}if(t.adaptationFieldInfo.opcrFlag){var s=BigInt(Math.floor(e[r++]<<25|e[r++]<<17|e[r++]<<9|e[r++]<<1|e[r]>>7)),o=BigInt(Math.floor((1&e[r++])<<8|e[r++]));t.adaptationFieldInfo.pcr=s*BigInt(300)+o}if(t.adaptationFieldInfo.splicingPointFlag&&(t.adaptationFieldInfo.spliceCountDown=e[r++]),t.adaptationFieldInfo.transportPrivateDataFlag){var c=e[r++];t.adaptationFieldInfo.transportPrivateData=e.subarray(r,r+c),r+=c}if(t.adaptationFieldInfo.adaptationFieldExtensionFlag){var u=e[r++];t.adaptationFieldInfo.extension=e.subarray(r,r+u),r+=u}}r.d(t,{A:()=>i})},20549:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var i=r(31865),a=r(6403),n=r(92647),s=r(4624),o="src/avformat/formats/mpegts/function/parsePAT.ts";function c(e,t){var r,c=new i.A((0,n.A)(Uint8Array,e.slices),!0),u=c.readUint8();0!==u&&s.z3("parsePAT: table_id ".concat(u," is not corresponded to PAT!"),o,40);var f,h=4095&c.readUint16(),d=(c.readUint16(),(r=c.readUint8())>>1&31),l=1&r,p=c.readUint8();if(c.readUint8(),1===l&&0===p)(f=new a.Cd).versionNumber=d;else if(!(f=t.pat))return void s.z3("can not found PAT in mpegts context",o,64);for(var g=h-5-4,v=(0|Number(0xffffffffn&c.getPos()))+g,b=-1,A=-1;c.getPos()<v;){var m=c.readUint16(),U=8191&c.readUint16();0===m?f.networkPid=U:(f.program2PmtPid.set(m,U),-1===b&&(b=m),-1===A&&(A=U))}1===l&&0===p&&(t.pat||s.pq("parsed first PAT",o,100),t.pat=f,t.currentProgram=b,t.currentPmtPid=A,t.hasPAT=!0)}},51660:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var i=r(63939),a=r(50932),n=r(71517),s=r(37837),o=r(14686),c=r(77231);function u(e,t,r){e.randomAccessIndicator&&a.M[15](t+36,1|i.f[15](t+36));var u=r.codecpar.codecId;27!==u&&173!==u||a.M[15](t+80,2),a.M[15](t+32,r.index),a.M[17](t+16,e.dts),a.M[17](t+8,e.pts),a.M[17](t+56,e.pos),a.M[15](t+76,9e4),a.M[15](t+72,1),r.startTime===c.Dh&&(r.startTime=i.f[17](t+8)||i.f[17](t+16));var f=(0,s.sY)(e.payload.length);(0,o.lW)(f,e.payload.length,e.payload),(0,n.NX)(t,f,e.payload.length)}},39144:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(6403),a=r(4624),n=r(77231),s="src/avformat/formats/mpegts/function/parsePESSlice.ts";function o(e){for(var t=new Uint8Array(e.totalLength),r=0,o=0;r<e.slices.length;r++){var c=e.slices[r];t.set(c,o),o+=c.byteLength}var u=t[3],f=t[4]<<8|t[5],h=new i.xf;if(h.data=t,h.pid=e.pid,h.streamId=u,h.streamType=e.streamType,h.pos=e.pos,h.randomAccessIndicator=e.randomAccessIndicator,188!==u&&190!==u&&191!==u&&240!==u&&241!==u&&255!==u&&242!==u&&248!==u){var d=(192&t[7])>>>6,l=t[8],p=n.Dh,g=n.Dh;2!==d&&3!==d||(p=BigInt(Math.floor(536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)),g=3===d?BigInt(Math.floor(536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)):p),h.dts=g,h.pts=p;var v=9+l,b=0;if(0!==f){if(f<3+l)return void a.z3("Malformed PES: PES_packet_length < 3 + PES_header_data_length",s,93);b=f-3-l}else b=t.byteLength-v;h.payload=t.subarray(v,v+b)}else if((188===u||191===u||240===u||241===u||255===u||242===u||248===u)&&6===h.streamId){var A;A=0!==f?f:t.byteLength-6,h.payload=t.subarray(6,6+A)}return h}},65945:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var i=r(31865),a=r(6403),n=r(92647),s=r(4624),o="src/avformat/formats/mpegts/function/parsePMT.ts";function c(e,t){var r,c=new i.A((0,n.A)(Uint8Array,e.slices),!0),u=c.readUint8();2!==u&&s.z3("parse PMT: table_id ".concat(u," is not corresponded to PAT!"),o,40);var f,h=4095&c.readUint16(),d=c.readUint16(),l=(r=c.readUint8())>>1&31,p=1&r,g=c.readUint8();if(c.readUint8(),1===p&&0===g)(f=new a.I4).programNumber=d,f.versionNumber=l,t.program2Pmt.set(d,f),t.hasPMT=!0;else if(!(f=t.program2Pmt.get(d)))return void s.z3("can not found PMT in mpegts context",o,68);f.pcrPid=8191&c.readUint16();var v=4095&c.readUint16();c.skip(v);for(var b=(0|Number(0xffffffffn&c.getPos()))+(h-9-v-4);c.getPos()<b;){var A=c.readUint8(),m=8191&c.readUint16(),U=4095&c.readUint16();if(f.pid2StreamType.set(m,A),U>0){for(var x=[],y=(0|Number(0xffffffffn&c.getPos()))+U;c.getPos()<y;){var k=new a.kJ;k.tag=c.readUint8();var w=c.readUint8();w>0&&(k.buffer=c.readBuffer(w)),x.push(k)}f.pid2ESDescriptor.set(m,x)}}d===t.currentProgram&&(t.pmt||s.pq("parsed first PMT",o,111),t.pmt=f)}},43383:(e,t,r)=>{"use strict";function i(e,t){}r.d(t,{A:()=>i})},63599:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(20549),a=r(65945),n=r(43383);function s(e,t,r){0===e?(0,i.A)(t,r):e===r.currentPmtPid?(0,a.A)(t,r):r.pmt&&134===r.pmt.pid2StreamType.get(e)&&(0,n.A)(t,r)}},53783:(e,t,r)=>{"use strict";r.d(t,{n:()=>g,q:()=>l});var i=r(25182),a=r(36443),n=r.n(a),s=r(27274),o=r(89564),c=r(52888),u=r(4624),f=r(6403),h=r(31239),d="src/avformat/formats/mpegts/impegts.ts";function l(e){return p.apply(this,arguments)}function p(){return(p=(0,i.A)(n().mark((function e(t){var r,i,a,f,h,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.peekBuffer(s.pm);case 3:r=e.sent,e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(0),-1048576===t.error){e.next=12;break}return e.next=11,t.peekBuffer(t.remainingLength());case 11:r=e.sent;case 12:if(!(r&&r.length>=s.ZT)){e.next=22;break}return i=(0,o.A)(r,s.ZT,!1),a=(0,o.A)(r,s.VG,!1),f=(0,o.A)(r,s.eR,!1),h=(0,c.y)(i,f,a),r.length<s.pm&&(h+=s.hY),l=s.ZT,i>h?l=s.ZT:a>h?l=s.VG:f>h&&(l=s.eR),u.Yz("got ts packet size: ".concat(l),d,72),e.abrupt("return",l);case 22:return e.abrupt("return",0);case 23:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function g(e,t){return v.apply(this,arguments)}function v(){return(v=(0,i.A)(n().mark((function e(t,r){var i,a,o,c,l,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getPos(),a=0,r.tsPacketSize!==s.VG){e.next=5;break}return e.next=5,t.skip(4);case 5:return e.next=7,t.readUint8();case 7:return 71!==(o=e.sent)&&u.h2("found syncByte not 0x47, value: ".concat(o.toString(16)),d,94),(c=new f.am).pos=i,e.next=13,t.readUint16();case 13:return a=e.sent,c.payloadUnitStartIndicator=a>>14&1,c.transportPriority=a>>13&1,c.pid=8191&a,e.next=19,t.readUint8();case 19:if(a=e.sent,c.adaptationFieldControl=a>>4&3,c.continuityCounter=15&a,l=4,2!==c.adaptationFieldControl&&3!==c.adaptationFieldControl){e.next=48;break}return e.next=26,t.readUint8();case 26:if(5+(p=e.sent)!==s.ZT){e.next=40;break}return e.t0=h.A,e.next=31,t.readBuffer(p);case 31:if(e.t1=e.sent,e.t2=c,(0,e.t0)(e.t1,e.t2),r.tsPacketSize!==s.eR){e.next=37;break}return e.next=37,t.skip(16);case 37:return e.abrupt("return",c);case 40:if(!(p>0)){e.next=47;break}return e.t3=h.A,e.next=44,t.readBuffer(p);case 44:e.t4=e.sent,e.t5=c,(0,e.t3)(e.t4,e.t5);case 47:l=5+p;case 48:if(1!==c.adaptationFieldControl&&3!==c.adaptationFieldControl){e.next=52;break}return e.next=51,t.readBuffer(s.ZT-l);case 51:c.payload=e.sent;case 52:if(r.tsPacketSize!==s.eR){e.next=55;break}return e.next=55,t.skip(16);case 55:return e.abrupt("return",c);case 56:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},27274:(e,t,r)=>{"use strict";r.d(t,{$x:()=>f,GV:()=>o,VG:()=>n,ZT:()=>s,eR:()=>a,hY:()=>u,pm:()=>c});var i=r(134),a=204,n=192,s=188,o=204,c=8192,u=5,f=(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({},15,[1,86018]),17,[1,86018]),3,[1,86017]),4,[1,86017]),27,[0,27]),16,[0,12]),36,[0,173]),51,[0,196]),129,[1,86019]),135,[1,86056])},6403:(e,t,r)=>{"use strict";r.d(t,{Cd:()=>d,I4:()=>p,am:()=>f,kJ:()=>l,pi:()=>h,xf:()=>g}),r(77193),r(25767),r(31060);var i=r(81570),a=r(78716),n=r(134),s=r(80662),o=r.n(s),c=(r(88435),r(77231)),u=(0,i.A)((function e(){(0,a.A)(this,e),(0,n.A)(this,"discontinuityIndicator",0),(0,n.A)(this,"randomAccessIndicator",0),(0,n.A)(this,"elementaryStreamPriorityIndicator",0),(0,n.A)(this,"pcrFlag",0),(0,n.A)(this,"opcrFlag",0),(0,n.A)(this,"splicingPointFlag",0),(0,n.A)(this,"transportPrivateDataFlag",0),(0,n.A)(this,"adaptationFieldExtensionFlag",0),(0,n.A)(this,"pcr",BigInt(0)),(0,n.A)(this,"opcr",BigInt(0)),(0,n.A)(this,"spliceCountDown",0),(0,n.A)(this,"transportPrivateData",null),(0,n.A)(this,"extension",null)})),f=(0,i.A)((function e(){(0,a.A)(this,e),(0,n.A)(this,"pos",c.Dh),(0,n.A)(this,"payloadUnitStartIndicator",0),(0,n.A)(this,"transportPriority",0),(0,n.A)(this,"pid",c.N_),(0,n.A)(this,"adaptationFieldControl",0),(0,n.A)(this,"continuityCounter",0),(0,n.A)(this,"transportScramblingControl",0),(0,n.A)(this,"adaptationFieldInfo",new u),(0,n.A)(this,"payload",null)})),h=(0,i.A)((function e(){(0,a.A)(this,e),(0,n.A)(this,"slices",[]),(0,n.A)(this,"totalLength",0),(0,n.A)(this,"expectedLength",c.N_),(0,n.A)(this,"randomAccessIndicator",0),(0,n.A)(this,"pid",c.N_),(0,n.A)(this,"streamType",0),(0,n.A)(this,"pos",c.Dh)})),d=(0,i.A)((function e(){(0,a.A)(this,e),(0,n.A)(this,"versionNumber",0),(0,n.A)(this,"networkPid",c.N_),(0,n.A)(this,"program2PmtPid",new(o()))})),l=(0,i.A)((function e(){(0,a.A)(this,e),(0,n.A)(this,"tag",void 0),(0,n.A)(this,"buffer",void 0)})),p=(0,i.A)((function e(){(0,a.A)(this,e),(0,n.A)(this,"versionNumber",0),(0,n.A)(this,"programNumber",0),(0,n.A)(this,"pcrPid",0),(0,n.A)(this,"pid2StreamType",new(o())),(0,n.A)(this,"pid2ESDescriptor",new(o()))})),g=(0,i.A)((function e(){(0,a.A)(this,e),(0,n.A)(this,"pid",c.N_),(0,n.A)(this,"streamType",0),(0,n.A)(this,"streamId",c.N_),(0,n.A)(this,"dts",c.Dh),(0,n.A)(this,"pts",c.Dh),(0,n.A)(this,"pos",c.Dh),(0,n.A)(this,"payload",null),(0,n.A)(this,"data",null),(0,n.A)(this,"randomAccessIndicator",0)}))},2187:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var i=r(72739),a=r(44328),n=r(77231);function s(e,t,r){var s=BigInt(0);return i.__(e,(function(e){s+=e.codecpar.bitRate*(0,a.k)(t,r,n.i0)/BigInt(8e3)})),s}},52071:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var i=r(25182),a=r(36443),n=r.n(a),s=r(63939),o=r(9599),c=r(29170),u=r(77231),f=r(44328),h=r(2187),d=r(71517),l=r(9705),p=r(4624),g="src/avformat/function/seekInBytes.ts";function v(e,t,r,i,a,n){return b.apply(this,arguments)}function b(){return(b=(0,i.A)(n().mark((function e(t,r,i,a,v,b){var A,m,U,x,y,k,w,P,_,M,I,S,R,C;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A=t.ioReader.getPos(),e.next=3,t.ioReader.fileSize();case 3:if(m=e.sent,U=u.Dh,x=i,r.startTime!==u.Dh?x-=r.startTime:x-=r.firstDTS,!((y=(0,f.k)(i,r.timeBase,u.i0))<BigInt(1e4))){e.next=13;break}return p.Yz("seek pts is earlier then 10s, seek to first packet pos(".concat(a,") directly"),g,63),e.next=12,t.ioReader.seek(a);case 12:return e.abrupt("return",A);case 13:if(k=(0,h.d)(t.streams,x,r.timeBase),w=m-(0,h.d)(t.streams,BigInt(5e3),u.i0),P=(0,h.d)(t.streams,BigInt(1e4),u.i0),k>w&&(k=w),!(k<a)){e.next=21;break}return e.next=20,t.ioReader.seek(a);case 20:return e.abrupt("return",A);case 21:_=(0,d._5)(),M=m,I=BigInt(0);case 24:if(!(M-I<P)){e.next=28;break}return U=I,e.abrupt("break",51);case 28:return e.next=30,t.ioReader.seek(k);case 30:return e.next=32,b(t);case 32:return S=t.ioReader.getPos(),e.next=35,v(t,_);case 35:if(!(e.sent>=0)){e.next=48;break}if(R=(0,f.k)(s.f[17](_+8),(0,c.A)(_+72,o.P),u.i0),C=R-y,p.Yz("try to seek to pos: ".concat(k,", got packet pts: ").concat(s.f[17](_+8),"(").concat(R,"ms), diff: ").concat(C,"ms"),g,98),!(C<=BigInt(0)&&-C<BigInt(1e4))){e.next=45;break}return U=S,e.abrupt("break",51);case 45:k=C>BigInt(0)?I+(M=k)>>BigInt(1):(I=k)+M>>BigInt(1);case 46:e.next=49;break;case 48:return e.abrupt("break",51);case 49:e.next=24;break;case 51:if((0,d.Qe)(_),U===u.Dh){e.next=61;break}return p.Yz("finally seek to pos ".concat(U),g,124),e.next=56,t.ioReader.seek(U);case 56:return e.next=58,b(t);case 58:return e.abrupt("return",A);case 61:return e.next=63,t.ioReader.seek(A);case 63:return e.abrupt("return",BigInt(l.E$));case 64:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},23991:(e,t,r)=>{"use strict";function i(e){for(var t=0;t<32&&0===e.readU1();)t++;return e.readU(t)+((1<<t)-1)}function a(e){var t=i(e);return 1&t?(t+1)/2:-t/2}r.d(t,{$x:()=>a,xb:()=>i})},39381:(e,t,r)=>{"use strict";r.d(t,{E3:()=>n,Sg:()=>u,Y0:()=>c,ht:()=>o,r8:()=>a,yd:()=>s});var i=r(63939);function a(e){return i.f[2](e)}function n(e){return a(e+1)<<8|a(e)}function s(e){return a(e)<<8|a(e+1)}function o(e){return a(e)<<16|a(e+1)<<8|a(e+2)}function c(e){return n(e+2)<<16|n(e)}function u(e){return s(e)<<16|s(e+2)}},60264:(e,t,r)=>{"use strict";function i(e){return e.length>4&&0===e[0]&&0===e[1]&&(1===e[2]||0===e[2]&&1===e[3])}function a(e,t){for(var r=0,i=t;i<e.length;i++)switch(e[i]){case 0:r++;break;case 1:if(r>=2)return{offset:i-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function n(e){for(var t=[],r=a(e,0),i={offset:-1,startCode:0};(i=a(e,r.offset+r.startCode)).offset>-1;)t.push(e.subarray(r.offset+r.startCode,i.offset,!0)),r=i;return t.push(e.subarray(r.offset+r.startCode,void 0,!0)),t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;r||(r=e.length);for(var i=new Uint8Array(e.length),a=0,n=0,s=0;s<e.length;s++){if(s>=t&&s<r)if(0===e[s])a++;else if(3===e[s]&&2===a&&s+1<e.length&&e[s+1]<=3){if(++s===e.length)break;a=0===e[s]?1:0}else a=0;i[n++]=e[s]}return i.slice(0,n)}r.d(t,{BN:()=>s,Bs:()=>i,Ky:()=>a,py:()=>n})},37246:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(78716),a=r(81570),n=r(134),s=r(4624),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,i.A)(this,e),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"pointer",void 0),(0,n.A)(this,"bitsLeft",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"endPointer",void 0),(0,n.A)(this,"error",void 0),(0,n.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,a.A)(e,[{key:"peekU1",value:function(){(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();var e=this.pointer,t=this.bitsLeft;return 0===t&&(e++,t=8),this.buffer[e]>>t-1&1}},{key:"readU1",value:function(){var e;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8),e}},{key:"readU",value:function(e){for(var t=0,r=0;r<e;r++)t|=this.readU1()<<e-r-1;return t}},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"getPos",value:function(){return this.pointer}},{key:"skip",value:function(e){var t=(e-e%8)/8;this.pointer+=t;var r=e%8;this.bitsLeft<=r?(this.pointer++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&this.pointer++,!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);var e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{var t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{var t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,s.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",190)}}},{key:"clear",value:function(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0}},{key:"skipPadding",value:function(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++)}}]),e}()},83314:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(78716),a=r(81570),n=r(134),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,i.A)(this,e),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"pointer",void 0),(0,n.A)(this,"bitPointer",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"error",void 0),(0,n.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=t,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,a.A)(e,[{key:"writeU1",value:function(e){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&e?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.bitPointer=0)}},{key:"writeU",value:function(e,t){for(var r=0;r<e;r++)this.writeU1(t>>e-r-1&1)}},{key:"remainingLength",value:function(){return this.size-this.pointer}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>1){var e=this.onFlush(this.buffer.subarray(0,this.pointer-1));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){var t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("BSWriter error, flush failed")}this.pointer=0}},{key:"padding",value:function(){for(;0!==this.bitPointer;)this.writeU1(0)}},{key:"clear",value:function(){this.pointer=0,this.bitPointer=0,this.error=0}},{key:"getBuffer",value:function(){return this.buffer}},{key:"getPointer",value:function(){return this.pointer}}]),e}()},729:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var i=r(78716),a=r(81570),n=r(134),s=r(4624),o=r(50011),c=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,i.A)(this,e),(0,n.A)(this,"data",void 0),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"byteStart",void 0),(0,n.A)(this,"pos",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!r}return(0,a.A)(e,[{key:"writeUint8",value:function(e){this.data.setUint8(this.pos+++this.byteStart,e)}},{key:"writeUint16",value:function(e){this.data.setUint16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeUint24",value:function(e){var t=3840&e,r=240&e,i=15&e;this.littleEndian?(this.writeUint8(i),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(i))}},{key:"writeUint32",value:function(e){this.data.setUint32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeUint64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeUint32(Number(t)),this.writeUint32(Number(r))):(this.writeUint32(Number(r)),this.writeUint32(Number(t)))}},{key:"writeInt8",value:function(e){this.data.setInt8(this.pos+++this.byteStart,e)}},{key:"writeInt16",value:function(e){this.data.setInt16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeInt32",value:function(e){this.data.setInt32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeInt64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeInt32(Number(t)),this.writeInt32(Number(r))):(this.writeInt32(Number(r)),this.writeInt32(Number(t)))}},{key:"writeFloat",value:function(e){this.data.setFloat32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeDouble",value:function(e){this.data.setFloat64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}},{key:"getPos",value:function(){return this.pos}},{key:"seek",value:function(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}},{key:"skip",value:function(e){this.seek(this.pos+e)}},{key:"back",value:function(e){this.seek(this.pos-e)}},{key:"remainingSize",value:function(){return this.size-this.pos}},{key:"writeBuffer",value:function(e){var t=e.length;this.remainingSize()<t&&(t=this.remainingSize(),s.R8("the remaining buffer size is smaller then the wrote buffer, hope set ".concat(e.length,", but set ").concat(t),"src/common/io/BufferWriter.ts",211)),this.buffer.set(e,this.pos),this.pos+=e.length}},{key:"writeString",value:function(e){var t=o.encode(e);return this.writeBuffer(t),t.length}},{key:"getWroteBuffer",value:function(){return this.buffer.subarray(0,this.pos)}},{key:"resetBuffer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}]),e}()},80345:(e,t,r)=>{r(28351),e.exports=r(46438).Reflect.get},28351:(e,t,r)=>{var i=r(81033),a=r(66123),n=r(75509),s=r(88535),o=r(24401),c=r(80812);s(s.S,"Reflect",{get:function e(t,r){var s,u,f=arguments.length<3?t:arguments[2];return c(t)===f?t[r]:(s=i.f(t,r))?n(s,"value")?s.value:void 0!==s.get?s.get.call(f):void 0:o(u=a(t))?e(u,r,f):void 0}})},803:(e,t,r)=>{var i=r(16560),a=r(54220);function n(t){return e.exports=n="function"==typeof i&&"symbol"==typeof a?function(e){return typeof e}:function(e){return e&&"function"==typeof i&&e.constructor===i&&e!==i.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},60394:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(80345),a=r(3706),n=r(41473);function s(){return s="undefined"!=typeof Reflect&&i?i.bind():function(e,t,r){var i=(0,n.A)(e,t);if(i){var s=a(i,t);return s.get?s.get.call(arguments.length<3?e:r):s.value}},s.apply(this,arguments)}},41473:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(25767);function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,i.A)(e)););return e}}}]);